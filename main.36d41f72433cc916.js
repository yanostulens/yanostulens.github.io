(self.webpackChunkyanostulens=self.webpackChunkyanostulens||[]).push([[179],{2011:(Te,X,U)=>{"use strict";U.d(X,{Dh:()=>N,GT:()=>V,cc:()=>te,hO:()=>J,on:()=>R,pX:()=>W,xv:()=>F});var m=U(4650),K=U(9260),S=U(2122);Te=U.hmd(Te);const H=["ngOnDestroy"],W=(Ee,ve,Oe,ce={})=>new Proxy(Ee,{get:(we,Ne)=>Oe.runOutsideAngular(()=>{var $e;if(Ee[Ne])return!(null===($e=ce?.spy)||void 0===$e)&&$e.get&&ce.spy.get(Ne,Ee[Ne]),Ee[Ne];if(H.indexOf(Ne)>-1)return()=>{};const ue=ve.toPromise().then(Y=>{const ge=Y&&Y[Ne];return"function"==typeof ge?ge.bind(Y):ge&&ge.then?ge.then(je=>Oe.run(()=>je)):Oe.run(()=>ge)});return new Proxy(()=>{},{get:(Y,ge)=>ue[ge],apply:(Y,ge,je)=>ue.then(Ve=>{var rt;const Xe=Ve&&Ve(...je);return!(null===(rt=ce?.spy)||void 0===rt)&&rt.apply&&ce.spy.apply(Ne,je,Xe),Xe})})})}),V=(Ee,ve)=>{ve.forEach(Oe=>{Object.getOwnPropertyNames(Oe.prototype||Oe).forEach(ce=>{Object.defineProperty(Ee.prototype,ce,Object.getOwnPropertyDescriptor(Oe.prototype||Oe,ce))})})};class k{constructor(ve){return ve}}const N=new m.OlP("angularfire2.app.options"),F=new m.OlP("angularfire2.app.name");function R(Ee,ve,Oe){const we="object"==typeof Oe&&Oe||{};we.name=we.name||"string"==typeof Oe&&Oe||"[DEFAULT]";const $e=K.Z.apps.filter(ue=>ue&&ue.name===we.name)[0]||ve.runOutsideAngular(()=>K.Z.initializeApp(Ee,we));try{JSON.stringify(Ee)!==JSON.stringify($e.options)&&A("error",`${$e.name} Firebase App already initialized with different options${Te.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new k($e)}const A=(Ee,...ve)=>{(0,m.X6Q)()&&typeof console<"u"&&console[Ee](...ve)},M={provide:k,useFactory:R,deps:[N,m.R0b,[new m.FiY,F]]};let J=(()=>{class Ee{constructor(Oe){K.Z.registerVersion("angularfire",S.q4.full,"core"),K.Z.registerVersion("angularfire",S.q4.full,"app-compat"),K.Z.registerVersion("angular",m.q4F.full,Oe.toString())}static initializeApp(Oe,ce){return{ngModule:Ee,providers:[{provide:N,useValue:Oe},{provide:F,useValue:ce}]}}}return Ee.\u0275fac=function(Oe){return new(Oe||Ee)(m.LFG(m.Lbi))},Ee.\u0275mod=m.oAB({type:Ee}),Ee.\u0275inj=m.cJS({providers:[M]}),Ee})();function te(Ee,ve,Oe,ce,we){const[,Ne,$e]=globalThis.\u0275AngularfireInstanceCache.find(ue=>ue[0]===Ee)||[];if(Ne)return function ae(Ee,ve){try{return Ee.toString()===ve.toString()}catch{return Ee===ve}}(we,$e)||(le("error",`${ve} was already initialized on the ${Oe} Firebase App with different settings.${De?" You may need to reload as Firebase is not HMR aware.":""}`),le("warn",{is:we,was:$e})),Ne;{const ue=ce();return globalThis.\u0275AngularfireInstanceCache.push([Ee,ue,we]),ue}}const De=!!Te.hot,le=(Ee,...ve)=>{(0,m.X6Q)()&&typeof console<"u"&&console[Ee](...ve)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(Te,X,U)=>{"use strict";U.d(X,{q4:()=>jd,iC:()=>yi,fc:()=>pn,HU:()=>$d,vb:()=>Fr,JM:()=>Vf});var m=U(4650),K=U(259),S=U(5861),H=U(9681),W=U(2090),V=U(4859),k=U(1877),N=U(8766);const F="@firebase/installations",R="0.6.4",A=1e4,M=`w:${R}`,J="FIS_v2",te="https://firebaseinstallations.googleapis.com/v1",ae=36e5,ve=new W.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Oe(T){return T instanceof W.ZR&&T.code.includes("request-failed")}function ce({projectId:T}){return`${te}/projects/${T}/installations`}function we(T){return{token:T.token,requestStatus:2,expiresIn:Ve(T.expiresIn),creationTime:Date.now()}}function Ne(T,D){return $e.apply(this,arguments)}function $e(){return($e=(0,S.Z)(function*(T,D){const G=(yield D.json()).error;return ve.create("request-failed",{requestName:T,serverCode:G.code,serverMessage:G.message,serverStatus:G.status})})).apply(this,arguments)}function ue({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function ge(T){return je.apply(this,arguments)}function je(){return(je=(0,S.Z)(function*(T){const D=yield T();return D.status>=500&&D.status<600?T():D})).apply(this,arguments)}function Ve(T){return Number(T.replace("s","000"))}function me(){return(me=(0,S.Z)(function*({appConfig:T,heartbeatServiceProvider:D},{fid:L}){const G=ce(T),oe=ue(T),fe=D.getImmediate({optional:!0});if(fe){const mt=yield fe.getHeartbeatsHeader();mt&&oe.append("x-firebase-client",mt)}const ut={method:"POST",headers:oe,body:JSON.stringify({fid:L,authVersion:J,appId:T.appId,sdkVersion:M})},gt=yield ge(()=>fetch(G,ut));if(gt.ok){const mt=yield gt.json();return{fid:mt.fid||L,registrationStatus:2,refreshToken:mt.refreshToken,authToken:we(mt.authToken)}}throw yield Ne("Create Installation",gt)})).apply(this,arguments)}function Ie(T){return new Promise(D=>{setTimeout(D,T)})}const Le=/^[cdef][\w-]{21}$/,He="";function Ge(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const L=function et(T){return function Pe(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return Le.test(L)?L:He}catch{return He}}function Je(T){return`${T.appName}!${T.appId}`}const un=new Map;function Tt(T,D){const L=Je(T);Ot(L,D),function $n(T,D){const L=function Sn(){return!yn&&"BroadcastChannel"in self&&(yn=new BroadcastChannel("[Firebase] FID Change"),yn.onmessage=T=>{Ot(T.data.key,T.data.fid)}),yn}();L&&L.postMessage({key:T,fid:D}),function Rn(){0===un.size&&yn&&(yn.close(),yn=null)}()}(L,D)}function Ot(T,D){const L=un.get(T);if(L)for(const G of L)G(D)}let yn=null;const ni="firebase-installations-database",Ns=1,fi="firebase-installations-store";let Br=null;function ks(){return Br||(Br=(0,N.X3)(ni,Ns,{upgrade:(T,D)=>{0===D&&T.createObjectStore(fi)}})),Br}function En(T,D){return ri.apply(this,arguments)}function ri(){return(ri=(0,S.Z)(function*(T,D){const L=Je(T),oe=(yield ks()).transaction(fi,"readwrite"),fe=oe.objectStore(fi),ke=yield fe.get(L);return yield fe.put(D,L),yield oe.done,(!ke||ke.fid!==D.fid)&&Tt(T,D.fid),D})).apply(this,arguments)}function wt(T){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,S.Z)(function*(T){const D=Je(T),G=(yield ks()).transaction(fi,"readwrite");yield G.objectStore(fi).delete(D),yield G.done})).apply(this,arguments)}function Ri(T,D){return xn.apply(this,arguments)}function xn(){return(xn=(0,S.Z)(function*(T,D){const L=Je(T),oe=(yield ks()).transaction(fi,"readwrite"),fe=oe.objectStore(fi),ke=yield fe.get(L),ut=D(ke);return void 0===ut?yield fe.delete(L):yield fe.put(ut,L),yield oe.done,ut&&(!ke||ke.fid!==ut.fid)&&Tt(T,ut.fid),ut})).apply(this,arguments)}function Sr(T){return Ls.apply(this,arguments)}function Ls(){return Ls=(0,S.Z)(function*(T){let D;const L=yield Ri(T.appConfig,G=>{const oe=function kt(T){return Rr(T||{fid:Ge(),registrationStatus:0})}(G),fe=function It(T,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(ve.create("app-offline"))};const L={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},G=function Rt(T,D){return to.apply(this,arguments)}(T,L);return{installationEntry:L,registrationPromise:G}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:In(T)}:{installationEntry:D}}(T,oe);return D=fe.registrationPromise,fe.installationEntry});return L.fid===He?{installationEntry:yield D}:{installationEntry:L,registrationPromise:D}}),Ls.apply(this,arguments)}function to(){return to=(0,S.Z)(function*(T,D){try{const L=yield function Xe(T,D){return me.apply(this,arguments)}(T,D);return En(T.appConfig,L)}catch(L){throw Oe(L)&&409===L.customData.serverCode?yield wt(T.appConfig):yield En(T.appConfig,{fid:D.fid,registrationStatus:0}),L}}),to.apply(this,arguments)}function In(T){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,S.Z)(function*(T){let D=yield Ar(T.appConfig);for(;1===D.registrationStatus;)yield Ie(100),D=yield Ar(T.appConfig);if(0===D.registrationStatus){const{installationEntry:L,registrationPromise:G}=yield Sr(T);return G||L}return D})).apply(this,arguments)}function Ar(T){return Ri(T,D=>{if(!D)throw ve.create("installation-not-found");return Rr(D)})}function Rr(T){return function jo(T){return 1===T.registrationStatus&&T.registrationTime+A<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function $i(){return($i=(0,S.Z)(function*({appConfig:T,heartbeatServiceProvider:D},L){const G=function Yt(T,{fid:D}){return`${ce(T)}/${D}/authTokens:generate`}(T,L),oe=function Y(T,{refreshToken:D}){const L=ue(T);return L.append("Authorization",function rt(T){return`${J} ${T}`}(D)),L}(T,L),fe=D.getImmediate({optional:!0});if(fe){const mt=yield fe.getHeartbeatsHeader();mt&&oe.append("x-firebase-client",mt)}const ut={method:"POST",headers:oe,body:JSON.stringify({installation:{sdkVersion:M,appId:T.appId}})},gt=yield ge(()=>fetch(G,ut));if(gt.ok)return we(yield gt.json());throw yield Ne("Generate Auth Token",gt)})).apply(this,arguments)}function $r(T){return Hi.apply(this,arguments)}function Hi(){return Hi=(0,S.Z)(function*(T,D=!1){let L;const G=yield Ri(T.appConfig,fe=>{if(!jt(fe))throw ve.create("not-registered");const ke=fe.authToken;if(!D&&function xr(T){return 2===T.requestStatus&&!function ee(T){const D=Date.now();return D<T.creationTime||T.creationTime+T.expiresIn<D+ae}(T)}(ke))return fe;if(1===ke.requestStatus)return L=function We(T,D){return Me.apply(this,arguments)}(T,D),fe;{if(!navigator.onLine)throw ve.create("app-offline");const ut=function Q(T){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:D})}(fe);return L=function St(T,D){return Nt.apply(this,arguments)}(T,ut),ut}});return L?yield L:G.authToken}),Hi.apply(this,arguments)}function Me(){return(Me=(0,S.Z)(function*(T,D){let L=yield at(T.appConfig);for(;1===L.authToken.requestStatus;)yield Ie(100),L=yield at(T.appConfig);const G=L.authToken;return 0===G.requestStatus?$r(T,D):G})).apply(this,arguments)}function at(T){return Ri(T,D=>{if(!jt(D))throw ve.create("not-registered");return function ie(T){return 1===T.requestStatus&&T.requestTime+A<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Nt(){return Nt=(0,S.Z)(function*(T,D){try{const L=yield function dn(T,D){return $i.apply(this,arguments)}(T,D),G=Object.assign(Object.assign({},D),{authToken:L});return yield En(T.appConfig,G),L}catch(L){if(!Oe(L)||401!==L.customData.serverCode&&404!==L.customData.serverCode){const G=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield En(T.appConfig,G)}else yield wt(T.appConfig);throw L}}),Nt.apply(this,arguments)}function jt(T){return void 0!==T&&2===T.registrationStatus}function he(){return(he=(0,S.Z)(function*(T){const D=T,{installationEntry:L,registrationPromise:G}=yield Sr(D);return G?G.catch(console.error):$r(D).catch(console.error),L.fid})).apply(this,arguments)}function Qe(){return Qe=(0,S.Z)(function*(T,D=!1){const L=T;return yield function mn(T){return Pn.apply(this,arguments)}(L),(yield $r(L,D)).token}),Qe.apply(this,arguments)}function Pn(){return(Pn=(0,S.Z)(function*(T){const{registrationPromise:D}=yield Sr(T);D&&(yield D)})).apply(this,arguments)}function Cu(T){return ve.create("missing-app-config-values",{valueName:T})}const Tu="installations",Ln=T=>{const D=T.getProvider("app").getImmediate(),L=function Pc(T){if(!T||!T.options)throw Cu("App Configuration");if(!T.name)throw Cu("App Name");const D=["projectId","apiKey","appId"];for(const L of D)if(!T.options[L])throw Cu(L);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(D);return{app:D,appConfig:L,heartbeatServiceProvider:(0,H._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Oc=T=>{const D=T.getProvider("app").getImmediate(),L=(0,H._getProvider)(D,Tu).getImmediate();return{getId:()=>function Re(T){return he.apply(this,arguments)}(L),getToken:oe=>function tt(T){return Qe.apply(this,arguments)}(L,oe)}};(function Mc(){(0,H._registerComponent)(new V.wA(Tu,Ln,"PUBLIC")),(0,H._registerComponent)(new V.wA("installations-internal",Oc,"PRIVATE"))})(),(0,H.registerVersion)(F,R),(0,H.registerVersion)(F,R,"esm2017");const Qt="@firebase/remote-config",Pr=new W.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ho{constructor(D,L,G,oe){this.client=D,this.storage=L,this.storageCache=G,this.logger=oe}isCachedDataFresh(D,L){if(!L)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const G=Date.now()-L,oe=G<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${G}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${oe}.`),oe}fetch(D){var L=this;return(0,S.Z)(function*(){const[G,oe]=yield Promise.all([L.storage.getLastSuccessfulFetchTimestampMillis(),L.storage.getLastSuccessfulFetchResponse()]);if(oe&&L.isCachedDataFresh(D.cacheMaxAgeMillis,G))return oe;D.eTag=oe&&oe.eTag;const fe=yield L.client.fetch(D),ke=[L.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===fe.status&&ke.push(L.storage.setLastSuccessfulFetchResponse(fe)),yield Promise.all(ke),fe})()}}function so(T=navigator){return T.languages&&T.languages[0]||T.language}class si{constructor(D,L,G,oe,fe,ke){this.firebaseInstallations=D,this.sdkVersion=L,this.namespace=G,this.projectId=oe,this.apiKey=fe,this.appId=ke}fetch(D){var L=this;return(0,S.Z)(function*(){const[G,oe]=yield Promise.all([L.firebaseInstallations.getId(),L.firebaseInstallations.getToken()]),ke=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${L.projectId}/namespaces/${L.namespace}:fetch?key=${L.apiKey}`,ut={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},gt={sdk_version:L.sdkVersion,app_instance_id:G,app_instance_id_token:oe,app_id:L.appId,language_code:so()},mt={method:"POST",headers:ut,body:JSON.stringify(gt)},Ct=fetch(ke,mt),yt=new Promise((nr,Oi)=>{D.signal.addEventListener(()=>{const Ya=new Error("The operation was aborted.");Ya.name="AbortError",Oi(Ya)})});let cr;try{yield Promise.race([Ct,yt]),cr=yield Ct}catch(nr){let Oi="fetch-client-network";throw"AbortError"===nr?.name&&(Oi="fetch-timeout"),Pr.create(Oi,{originalErrorMessage:nr?.message})}let tr=cr.status;const Eo=cr.headers.get("ETag")||void 0;let Gu,ts;if(200===cr.status){let nr;try{nr=yield cr.json()}catch(Oi){throw Pr.create("fetch-client-parse",{originalErrorMessage:Oi?.message})}Gu=nr.entries,ts=nr.state}if("INSTANCE_STATE_UNSPECIFIED"===ts?tr=500:"NO_CHANGE"===ts?tr=304:("NO_TEMPLATE"===ts||"EMPTY_CONFIG"===ts)&&(Gu={}),304!==tr&&200!==tr)throw Pr.create("fetch-status",{httpStatus:tr});return{status:tr,eTag:Eo,config:Gu}})()}}class Kt{constructor(D,L){this.client=D,this.storage=L}fetch(D){var L=this;return(0,S.Z)(function*(){const G=(yield L.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return L.attemptFetch(D,G)})()}attemptFetch(D,{throttleEndTimeMillis:L,backoffCount:G}){var oe=this;return(0,S.Z)(function*(){yield function gi(T,D){return new Promise((L,G)=>{const oe=Math.max(D-Date.now(),0),fe=setTimeout(L,oe);T.addEventListener(()=>{clearTimeout(fe),G(Pr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,L);try{const fe=yield oe.client.fetch(D);return yield oe.storage.deleteThrottleMetadata(),fe}catch(fe){if(!function Nc(T){if(!(T instanceof W.ZR&&T.customData))return!1;const D=Number(T.customData.httpStatus);return 429===D||500===D||503===D||504===D}(fe))throw fe;const ke={throttleEndTimeMillis:Date.now()+(0,W.$s)(G),backoffCount:G+1};return yield oe.storage.setThrottleMetadata(ke),oe.attemptFetch(D,ke)}})()}}class Su{constructor(D,L,G,oe,fe){this.app=D,this._client=L,this._storageCache=G,this._storage=oe,this._logger=fe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function oo(T,D){const L=T.target.error||void 0;return Pr.create(D,{originalErrorMessage:L&&L?.message})}const mi="app_namespace_store";class oi{constructor(D,L,G,oe=function Vg(){return new Promise((T,D)=>{try{const L=indexedDB.open("firebase_remote_config",1);L.onerror=G=>{D(oo(G,"storage-open"))},L.onsuccess=G=>{T(G.target.result)},L.onupgradeneeded=G=>{0===G.oldVersion&&G.target.result.createObjectStore(mi,{keyPath:"compositeKey"})}}catch(L){D(Pr.create("storage-open",{originalErrorMessage:L?.message}))}})}()){this.appId=D,this.appName=L,this.namespace=G,this.openDbPromise=oe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var L=this;return(0,S.Z)(function*(){const G=yield L.openDbPromise;return new Promise((oe,fe)=>{const ut=G.transaction([mi],"readonly").objectStore(mi),gt=L.createCompositeKey(D);try{const mt=ut.get(gt);mt.onerror=Ct=>{fe(oo(Ct,"storage-get"))},mt.onsuccess=Ct=>{const yt=Ct.target.result;oe(yt?yt.value:void 0)}}catch(mt){fe(Pr.create("storage-get",{originalErrorMessage:mt?.message}))}})})()}set(D,L){var G=this;return(0,S.Z)(function*(){const oe=yield G.openDbPromise;return new Promise((fe,ke)=>{const gt=oe.transaction([mi],"readwrite").objectStore(mi),mt=G.createCompositeKey(D);try{const Ct=gt.put({compositeKey:mt,value:L});Ct.onerror=yt=>{ke(oo(yt,"storage-set"))},Ct.onsuccess=()=>{fe()}}catch(Ct){ke(Pr.create("storage-set",{originalErrorMessage:Ct?.message}))}})})()}delete(D){var L=this;return(0,S.Z)(function*(){const G=yield L.openDbPromise;return new Promise((oe,fe)=>{const ut=G.transaction([mi],"readwrite").objectStore(mi),gt=L.createCompositeKey(D);try{const mt=ut.delete(gt);mt.onerror=Ct=>{fe(oo(Ct,"storage-delete"))},mt.onsuccess=()=>{oe()}}catch(mt){fe(Pr.create("storage-delete",{originalErrorMessage:mt?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class ai{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,S.Z)(function*(){const L=D.storage.getLastFetchStatus(),G=D.storage.getLastSuccessfulFetchTimestampMillis(),oe=D.storage.getActiveConfig(),fe=yield L;fe&&(D.lastFetchStatus=fe);const ke=yield G;ke&&(D.lastSuccessfulFetchTimestampMillis=ke);const ut=yield oe;ut&&(D.activeConfig=ut)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Or(){return bd.apply(this,arguments)}function bd(){return(bd=(0,S.Z)(function*(){if(!(0,W.hl)())return!1;try{return yield(0,W.eu)()}catch{return!1}})).apply(this,arguments)}!function ds(){(0,H._registerComponent)(new V.wA("remote-config",function T(D,{instanceIdentifier:L}){const G=D.getProvider("app").getImmediate(),oe=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Pr.create("registration-window");if(!(0,W.hl)())throw Pr.create("indexed-db-unavailable");const{projectId:fe,apiKey:ke,appId:ut}=G.options;if(!fe)throw Pr.create("registration-project-id");if(!ke)throw Pr.create("registration-api-key");if(!ut)throw Pr.create("registration-app-id");const gt=new oi(ut,G.name,L=L||"firebase"),mt=new ai(gt),Ct=new k.Yd(Qt);Ct.logLevel=k.in.ERROR;const yt=new si(oe,H.SDK_VERSION,L,fe,ke,ut),cr=new Kt(yt,gt),tr=new Ho(cr,gt,mt,Ct),Eo=new Su(G,tr,mt,gt,Ct);return function ro(T){const D=(0,W.m9)(T);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Eo),Eo},"PUBLIC").setMultipleInstances(!0)),(0,H.registerVersion)(Qt,"0.4.4"),(0,H.registerVersion)(Qt,"0.4.4","esm2017")}();const Cd="/firebase-messaging-sw.js",hs="/firebase-cloud-messaging-push-scope",ao="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",xa="https://fcmregistrations.googleapis.com/v1",Fc="google.c.a.c_id",bf="google.c.a.c_l",Cf="google.c.a.ts",jg="google.c.a.e";var uo=(()=>{return(T=uo||(uo={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",uo;var T})();function Wi(T){const D=new Uint8Array(T);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Bg(T){const L=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),G=atob(L),oe=new Uint8Array(G.length);for(let fe=0;fe<G.length;++fe)oe[fe]=G.charCodeAt(fe);return oe}const Lc="fcm_token_details_db",Uc=5,_i="fcm_token_object_Store";function Ru(){return Ru=(0,S.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(fe=>fe.name).includes(Lc))return null;let D=null;return(yield(0,N.X3)(Lc,Uc,{upgrade:(G=(0,S.Z)(function*(oe,fe,ke,ut){var gt;if(fe<2||!oe.objectStoreNames.contains(_i))return;const mt=ut.objectStore(_i),Ct=yield mt.index("fcmSenderId").get(T);if(yield mt.clear(),Ct)if(2===fe){const yt=Ct;if(!yt.auth||!yt.p256dh||!yt.endpoint)return;D={token:yt.fcmToken,createTime:null!==(gt=yt.createTime)&&void 0!==gt?gt:Date.now(),subscriptionOptions:{auth:yt.auth,p256dh:yt.p256dh,endpoint:yt.endpoint,swScope:yt.swScope,vapidKey:"string"==typeof yt.vapidKey?yt.vapidKey:Wi(yt.vapidKey)}}}else if(3===fe){const yt=Ct;D={token:yt.fcmToken,createTime:yt.createTime,subscriptionOptions:{auth:Wi(yt.auth),p256dh:Wi(yt.p256dh),endpoint:yt.endpoint,swScope:yt.swScope,vapidKey:Wi(yt.vapidKey)}}}else if(4===fe){const yt=Ct;D={token:yt.fcmToken,createTime:yt.createTime,subscriptionOptions:{auth:Wi(yt.auth),p256dh:Wi(yt.p256dh),endpoint:yt.endpoint,swScope:yt.swScope,vapidKey:Wi(yt.vapidKey)}}}}),function(fe,ke,ut,gt){return G.apply(this,arguments)})})).close(),yield(0,N.Lj)(Lc),yield(0,N.Lj)("fcm_vapid_details_db"),yield(0,N.Lj)("undefined"),function Tf(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:D}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}(D)?D:null;var G}),Ru.apply(this,arguments)}const xu="firebase-messaging-database",$g=1,ui="firebase-messaging-store";let Td=null;function co(){return Td||(Td=(0,N.X3)(xu,$g,{upgrade:(T,D)=>{0===D&&T.createObjectStore(ui)}})),Td}function Pa(T){return qo.apply(this,arguments)}function qo(){return qo=(0,S.Z)(function*(T){const D=js(T),G=yield(yield co()).transaction(ui).objectStore(ui).get(D);if(G)return G;{const oe=yield function Vc(T){return Ru.apply(this,arguments)}(T.appConfig.senderId);if(oe)return yield Ko(T,oe),oe}}),qo.apply(this,arguments)}function Ko(T,D){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,S.Z)(function*(T,D){const L=js(T),oe=(yield co()).transaction(ui,"readwrite");return yield oe.objectStore(ui).put(D,L),yield oe.done,D})).apply(this,arguments)}function Pu(){return(Pu=(0,S.Z)(function*(T){const D=js(T),G=(yield co()).transaction(ui,"readwrite");yield G.objectStore(ui).delete(D),yield G.done})).apply(this,arguments)}function js({appConfig:T}){return T.appId}const sn=new W.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ou(T,D){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,S.Z)(function*(T,D){const L=yield Bc(T),G=vr(D),oe={method:"POST",headers:L,body:JSON.stringify(G)};let fe;try{fe=yield(yield fetch(Na(T.appConfig),oe)).json()}catch(ke){throw sn.create("token-subscribe-failed",{errorInfo:ke?.toString()})}if(fe.error)throw sn.create("token-subscribe-failed",{errorInfo:fe.error.message});if(!fe.token)throw sn.create("token-subscribe-no-token");return fe.token})).apply(this,arguments)}function Mu(){return(Mu=(0,S.Z)(function*(T,D){const L=yield Bc(T),G=vr(D.subscriptionOptions),oe={method:"PATCH",headers:L,body:JSON.stringify(G)};let fe;try{fe=yield(yield fetch(`${Na(T.appConfig)}/${D.token}`,oe)).json()}catch(ke){throw sn.create("token-update-failed",{errorInfo:ke?.toString()})}if(fe.error)throw sn.create("token-update-failed",{errorInfo:fe.error.message});if(!fe.token)throw sn.create("token-update-no-token");return fe.token})).apply(this,arguments)}function qi(T,D){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,S.Z)(function*(T,D){const G={method:"DELETE",headers:yield Bc(T)};try{const fe=yield(yield fetch(`${Na(T.appConfig)}/${D}`,G)).json();if(fe.error)throw sn.create("token-unsubscribe-failed",{errorInfo:fe.error.message})}catch(oe){throw sn.create("token-unsubscribe-failed",{errorInfo:oe?.toString()})}})).apply(this,arguments)}function Na({projectId:T}){return`${xa}/projects/${T}/registrations`}function Bc(T){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,S.Z)(function*({appConfig:T,installations:D}){const L=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${L}`})})).apply(this,arguments)}function vr({p256dh:T,auth:D,endpoint:L,vapidKey:G}){const oe={web:{endpoint:L,auth:D,p256dh:T}};return G!==ao&&(oe.web.applicationPubKey=G),oe}const $c=6048e5;function Sd(){return Sd=(0,S.Z)(function*(T){const D=yield function zc(T,D){return Gc.apply(this,arguments)}(T.swRegistration,T.vapidKey),L={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:D.endpoint,auth:Wi(D.getKey("auth")),p256dh:Wi(D.getKey("p256dh"))},G=yield Pa(T.firebaseDependencies);if(G){if(function Wc(T,D){return D.vapidKey===T.vapidKey&&D.endpoint===T.endpoint&&D.auth===T.auth&&D.p256dh===T.p256dh}(G.subscriptionOptions,L))return Date.now()>=G.createTime+$c?function ka(T,D){return Mt.apply(this,arguments)}(T,{token:G.token,createTime:Date.now(),subscriptionOptions:L}):G.token;try{yield qi(T.firebaseDependencies,G.token)}catch(oe){console.warn(oe)}return ku(T.firebaseDependencies,L)}return ku(T.firebaseDependencies,L)}),Sd.apply(this,arguments)}function Nu(){return Nu=(0,S.Z)(function*(T){const D=yield Pa(T.firebaseDependencies);D&&(yield qi(T.firebaseDependencies,D.token),yield function jc(T){return Pu.apply(this,arguments)}(T.firebaseDependencies));const L=yield T.swRegistration.pushManager.getSubscription();return!L||L.unsubscribe()}),Nu.apply(this,arguments)}function Mt(){return Mt=(0,S.Z)(function*(T,D){try{const L=yield function On(T,D){return Mu.apply(this,arguments)}(T.firebaseDependencies,D),G=Object.assign(Object.assign({},D),{token:L,createTime:Date.now()});return yield Ko(T.firebaseDependencies,G),L}catch(L){throw yield function xi(T){return Nu.apply(this,arguments)}(T),L}}),Mt.apply(this,arguments)}function ku(T,D){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,S.Z)(function*(T,D){const G={token:yield Ou(T,D),createTime:Date.now(),subscriptionOptions:D};return yield Ko(T,G),G.token})).apply(this,arguments)}function Gc(){return(Gc=(0,S.Z)(function*(T,D){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Bg(D)})})).apply(this,arguments)}function Ad(T){const D={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function qc(T,D){if(!D.notification)return;T.notification={};const L=D.notification.title;L&&(T.notification.title=L);const G=D.notification.body;G&&(T.notification.body=G);const oe=D.notification.image;oe&&(T.notification.image=oe);const fe=D.notification.icon;fe&&(T.notification.icon=fe)}(D,T),function Vn(T,D){D.data&&(T.data=D.data)}(D,T),function Fe(T,D){var L,G,oe,fe,ke;if(!(D.fcmOptions||null!==(L=D.notification)&&void 0!==L&&L.click_action))return;T.fcmOptions={};const ut=null!==(oe=null===(G=D.fcmOptions)||void 0===G?void 0:G.link)&&void 0!==oe?oe:null===(fe=D.notification)||void 0===fe?void 0:fe.click_action;ut&&(T.fcmOptions.link=ut);const gt=null===(ke=D.fcmOptions)||void 0===ke?void 0:ke.analytics_label;gt&&(T.fcmOptions.analyticsLabel=gt)}(D,T),D}function Rd(T,D){const L=[];for(let G=0;G<T.length;G++)L.push(T.charAt(G)),G<D.length&&L.push(D.charAt(G));return L.join("")}function zn(T){return sn.create("missing-app-config-values",{valueName:T})}Rd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Rd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Sf{constructor(D,L,G){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const oe=function Df(T){if(!T||!T.options)throw zn("App Configuration Object");if(!T.name)throw zn("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:L}=T;for(const G of D)if(!L[G])throw zn(G);return{appName:T.name,projectId:L.projectId,apiKey:L.apiKey,appId:L.appId,senderId:L.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:oe,installations:L,analyticsProvider:G}}_delete(){return Promise.resolve()}}function Bs(T){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,S.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(Cd,{scope:hs}),T.swRegistration.update().catch(()=>{})}catch(D){throw sn.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function Lu(){return(Lu=(0,S.Z)(function*(T,D){if(!D&&!T.swRegistration&&(yield Bs(T)),D||!T.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw sn.create("invalid-sw-registration");T.swRegistration=D}})).apply(this,arguments)}function xd(){return(xd=(0,S.Z)(function*(T,D){D?T.vapidKey=D:T.vapidKey||(T.vapidKey=ao)})).apply(this,arguments)}function Jn(){return Jn=(0,S.Z)(function*(T,D){if(!navigator)throw sn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw sn.create("permission-blocked");return yield function Uu(T,D){return xd.apply(this,arguments)}(T,D?.vapidKey),yield function Fu(T,D){return Lu.apply(this,arguments)}(T,D?.serviceWorkerRegistration),function lo(T){return Sd.apply(this,arguments)}(T)}),Jn.apply(this,arguments)}function Kc(){return(Kc=(0,S.Z)(function*(T,D,L){const G=function ho(T){switch(T){case uo.NOTIFICATION_CLICKED:return"notification_open";case uo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(D);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(G,{message_id:L[Fc],message_name:L[bf],message_time:L[Cf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Vu(){return Vu=(0,S.Z)(function*(T,D){const L=D.data;if(!L.isFirebaseMessaging)return;T.onMessageHandler&&L.messageType===uo.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(Ad(L)):T.onMessageHandler.next(Ad(L)));const G=L.data;(function Zt(T){return"object"==typeof T&&!!T&&Fc in T})(G)&&"1"===G[jg]&&(yield function Nr(T,D,L){return Kc.apply(this,arguments)}(T,L.messageType,G))}),Vu.apply(this,arguments)}const Zc="@firebase/messaging",Af=T=>{const D=new Sf(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",L=>function Zi(T,D){return Vu.apply(this,arguments)}(D,L)),D},fs=T=>{const D=T.getProvider("messaging").getImmediate();return{getToken:G=>function Fa(T,D){return Jn.apply(this,arguments)}(D,G)}};function Pd(){return ju.apply(this,arguments)}function ju(){return(ju=(0,S.Z)(function*(){try{yield(0,W.eu)()}catch{return!1}return typeof window<"u"&&(0,W.hl)()&&(0,W.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Qc(){(0,H._registerComponent)(new V.wA("messaging",Af,"PUBLIC")),(0,H._registerComponent)(new V.wA("messaging-internal",fs,"PRIVATE")),(0,H.registerVersion)(Zc,"0.12.4"),(0,H.registerVersion)(Zc,"0.12.4","esm2017")}();const Md="analytics",Gg="firebase_id",zr="origin",$s=6e4,fn="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",el="https://www.googletagmanager.com/gtag/js",Ir=new k.Yd("@firebase/analytics");function xf(T){return Promise.all(T.map(D=>D.catch(L=>L)))}function fo(){return(fo=(0,S.Z)(function*(T,D,L,G,oe,fe){const ke=G[oe];try{if(ke)yield D[ke];else{const gt=(yield xf(L)).find(mt=>mt.measurementId===oe);gt&&(yield D[gt.appId])}}catch(ut){Ir.error(ut)}T("config",oe,fe)})).apply(this,arguments)}function ps(){return(ps=(0,S.Z)(function*(T,D,L,G,oe){try{let fe=[];if(oe&&oe.send_to){let ke=oe.send_to;Array.isArray(ke)||(ke=[ke]);const ut=yield xf(L);for(const gt of ke){const mt=ut.find(yt=>yt.measurementId===gt),Ct=mt&&D[mt.appId];if(!Ct){fe=[];break}fe.push(Ct)}}0===fe.length&&(fe=Object.values(D)),yield Promise.all(fe),T("event",G,oe||{})}catch(fe){Ir.error(fe)}})).apply(this,arguments)}const br=new W.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),La=30,Of=new class Yi{constructor(D={},L=1e3){this.throttleMetadata=D,this.intervalMillis=L}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,L){this.throttleMetadata[D]=L}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Mf(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Ua(){return(Ua=(0,S.Z)(function*(T){var D;const{appId:L,apiKey:G}=T,oe={method:"GET",headers:Mf(G)},fe=fn.replace("{app-id}",L),ke=yield fetch(fe,oe);if(200!==ke.status&&304!==ke.status){let ut="";try{const gt=yield ke.json();null!==(D=gt.error)&&void 0!==D&&D.message&&(ut=gt.error.message)}catch{}throw br.create("config-fetch-failed",{httpStatus:ke.status,responseMessage:ut})}return ke.json()})).apply(this,arguments)}function Qo(){return(Qo=(0,S.Z)(function*(T,D=Of,L){const{appId:G,apiKey:oe,measurementId:fe}=T.options;if(!G)throw br.create("no-app-id");if(!oe){if(fe)return{measurementId:fe,appId:G};throw br.create("no-api-key")}const ke=D.getThrottleMetadata(G)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ut=new rl;return setTimeout((0,S.Z)(function*(){ut.abort()}),void 0!==L?L:$s),ms({appId:G,apiKey:oe,measurementId:fe},ke,ut,D)})).apply(this,arguments)}function ms(T,D,L){return Xo.apply(this,arguments)}function Xo(){return Xo=(0,S.Z)(function*(T,{throttleEndTimeMillis:D,backoffCount:L},G,oe=Of){var fe;const{appId:ke,measurementId:ut}=T;try{yield function _s(T,D){return new Promise((L,G)=>{const oe=Math.max(D-Date.now(),0),fe=setTimeout(L,oe);T.addEventListener(()=>{clearTimeout(fe),G(br.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(G,D)}catch(gt){if(ut)return Ir.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ut} provided in the "measurementId" field in the local Firebase config. [${gt?.message}]`),{appId:ke,measurementId:ut};throw gt}try{const gt=yield function Hs(T){return Ua.apply(this,arguments)}(T);return oe.deleteThrottleMetadata(ke),gt}catch(gt){const mt=gt;if(!function nl(T){if(!(T instanceof W.ZR&&T.customData))return!1;const D=Number(T.customData.httpStatus);return 429===D||500===D||503===D||504===D}(mt)){if(oe.deleteThrottleMetadata(ke),ut)return Ir.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ut} provided in the "measurementId" field in the local Firebase config. [${mt?.message}]`),{appId:ke,measurementId:ut};throw gt}const Ct=503===Number(null===(fe=mt?.customData)||void 0===fe?void 0:fe.httpStatus)?(0,W.$s)(L,oe.intervalMillis,La):(0,W.$s)(L,oe.intervalMillis),yt={throttleEndTimeMillis:Date.now()+Ct,backoffCount:L+1};return oe.setThrottleMetadata(ke,yt),Ir.debug(`Calling attemptFetch again in ${Ct} millis`),ms(T,yt,G,oe)}}),Xo.apply(this,arguments)}class rl{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let po,vs;function ys(){return(ys=(0,S.Z)(function*(T,D,L,G,oe){if(oe&&oe.global)T("event",L,G);else{const fe=yield D;T("event",L,Object.assign(Object.assign({},G),{send_to:fe}))}})).apply(this,arguments)}function Ha(){return(Ha=(0,S.Z)(function*(){if(!(0,W.hl)())return Ir.warn(br.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,W.eu)()}catch(T){return Ir.warn(br.create("indexeddb-unavailable",{errorInfo:T?.toString()}).message),!1}return!0})).apply(this,arguments)}function za(){return za=(0,S.Z)(function*(T,D,L,G,oe,fe,ke){var ut;const gt=function er(T){return Qo.apply(this,arguments)}(T);gt.then(tr=>{L[tr.measurementId]=tr.appId,T.options.measurementId&&tr.measurementId!==T.options.measurementId&&Ir.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${tr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(tr=>Ir.error(tr)),D.push(gt);const mt=function $a(){return Ha.apply(this,arguments)}().then(tr=>{if(tr)return G.getId()}),[Ct,yt]=yield Promise.all([gt,mt]);(function Pf(T){const D=window.document.getElementsByTagName("script");for(const L of Object.values(D))if(L.src&&L.src.includes(el)&&L.src.includes(T))return L;return null})(fe)||function Wg(T,D){const L=document.createElement("script");L.src=`${el}?l=${T}&id=${D}`,L.async=!0,document.head.appendChild(L)}(fe,Ct.measurementId),vs&&(oe("consent","default",vs),function ea(T){vs=T}(void 0)),oe("js",new Date);const cr=null!==(ut=ke?.config)&&void 0!==ut?ut:{};return cr[zr]="firebase",cr.update=!0,null!=yt&&(cr[Gg]=yt),oe("config",Ct.measurementId,cr),po&&(oe("set",po),function ol(T){po=T}(void 0)),Ct.measurementId}),za.apply(this,arguments)}class kd{constructor(D){this.app=D}_delete(){return delete Xi[this.app.options.appId],Promise.resolve()}}let Xi={},Ga=[];const Bu={};let al,ws,go="dataLayer",zs="gtag",mo=!1;function ul(T,D,L){!function kf(){const T=[];if((0,W.ru)()&&T.push("This is a browser extension environment."),(0,W.zI)()||T.push("Cookies are not available."),T.length>0){const D=T.map((G,oe)=>`(${oe+1}) ${G}`).join(" "),L=br.create("invalid-analytics-context",{errorInfo:D});Ir.warn(L.message)}}();const G=T.options.appId;if(!G)throw br.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw br.create("no-api-key");Ir.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xi[G])throw br.create("already-exists",{id:G});if(!mo){!function qg(T){let D=[];Array.isArray(window[T])?D=window[T]:window[T]=D}(go);const{wrappedGtag:fe,gtagCore:ke}=function Yo(T,D,L,G,oe){let fe=function(...ke){window[G].push(arguments)};return window[oe]&&"function"==typeof window[oe]&&(fe=window[oe]),window[oe]=function Zo(T,D,L,G){function fe(){return fe=(0,S.Z)(function*(ke,ut,gt){try{"event"===ke?yield function tl(T,D,L,G,oe){return ps.apply(this,arguments)}(T,D,L,ut,gt):"config"===ke?yield function Nd(T,D,L,G,oe,fe){return fo.apply(this,arguments)}(T,D,L,G,ut,gt):"consent"===ke?T("consent","update",gt):T("set",ut)}catch(mt){Ir.error(mt)}}),fe.apply(this,arguments)}return function oe(ke,ut,gt){return fe.apply(this,arguments)}}(fe,T,D,L),{gtagCore:fe,wrappedGtag:window[oe]}}(Xi,Ga,Bu,go,zs);ws=fe,al=ke,mo=!0}return Xi[G]=function ta(T,D,L,G,oe,fe,ke){return za.apply(this,arguments)}(T,Ga,Bu,D,al,go,L),new kd(T)}function cl(){return na.apply(this,arguments)}function na(){return(na=(0,S.Z)(function*(){if((0,W.ru)()||!(0,W.zI)()||!(0,W.hl)())return!1;try{return yield(0,W.eu)()}catch{return!1}})).apply(this,arguments)}const Es="@firebase/analytics";!function Zg(){(0,H._registerComponent)(new V.wA(Md,(D,{options:L})=>ul(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),L),"PUBLIC")),(0,H._registerComponent)(new V.wA("analytics-internal",function T(D){try{const L=D.getProvider(Md).getImmediate();return{logEvent:(G,oe,fe)=>function _o(T,D,L,G){T=(0,W.m9)(T),function Nf(T,D,L,G,oe){return ys.apply(this,arguments)}(ws,Xi[T.app.options.appId],D,L,G).catch(oe=>Ir.error(oe))}(L,G,oe,fe)}}catch(L){throw br.create("interop-component-reg-failed",{reason:L})}},"PRIVATE")),(0,H.registerVersion)(Es,"0.9.4"),(0,H.registerVersion)(Es,"0.9.4","esm2017")}();var zu=U(4408),Lf=U(7565);const Uf=new class Vd extends Lf.v{}(class Ff extends zu.o{constructor(D,L){super(D,L),this.scheduler=D,this.work=L}schedule(D,L=0){return L>0?super.schedule(D,L):(this.delay=L,this.state=D,this.scheduler.flush(this),this)}execute(D,L){return L>0||this.closed?super.execute(D,L):this._execute(D,L)}requestAsyncId(D,L,G=0){return null!=G&&G>0||null==G&&this.delay>0?super.requestAsyncId(D,L,G):(D.flush(this),0)}});var ia=U(4986),ll=U(8505),sa=U(5363),Gn=U(9468);const jd=new m.GfV("7.5.0"),yo="__angularfire_symbol__analyticsIsSupportedValue",Bd="__angularfire_symbol__analyticsIsSupported",kr="__angularfire_symbol__remoteConfigIsSupportedValue",Is="__angularfire_symbol__remoteConfigIsSupported",dl="__angularfire_symbol__messagingIsSupportedValue",Ka="__angularfire_symbol__messagingIsSupported";function Vf(T,D,L){if(D){if(1===D.length)return D[0];const fe=D.filter(ke=>ke.app===L);if(1===fe.length)return fe[0]}return L.container.getProvider(T).getImmediate({optional:!0})}globalThis[Bd]||(globalThis[Bd]=cl().then(T=>globalThis[yo]=T).catch(()=>globalThis[yo]=!1)),globalThis[Ka]||(globalThis[Ka]=Pd().then(T=>globalThis[dl]=T).catch(()=>globalThis[dl]=!1)),globalThis[Is]||(globalThis[Is]=Or().then(T=>globalThis[kr]=T).catch(()=>globalThis[kr]=!1));const Fr=(T,D)=>{const L=D?[D]:(0,K.C6)(),G=[];return L.forEach(oe=>{oe.container.getProvider(T).instances.forEach(ke=>{G.includes(ke)||G.push(ke)})}),G};function vo(){}class Ji{constructor(D,L=Uf){this.zone=D,this.delegate=L}now(){return this.delegate.now()}schedule(D,L,G){const oe=this.zone;return this.delegate.schedule(function(ke){oe.runGuarded(()=>{D.apply(this,[ke])})},L,G)}}class Uy{constructor(D){this.zone=D,this.task=null}call(D,L){const G=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vo,{},vo,vo)),L.pipe((0,ll.b)({next:G,complete:G,error:G})).subscribe(D).add(G)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let $d=(()=>{class T{constructor(L){this.ngZone=L,this.outsideAngular=L.runOutsideAngular(()=>new Ji(Zone.current)),this.insideAngular=L.run(()=>new Ji(Zone.current,ia.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(L){return new(L||T)(m.LFG(m.R0b))},T.\u0275prov=m.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function _n(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function pn(T){return T.pipe((0,sa.Q)(_n().outsideAngular))}function yi(T){return _n(),function oa(T){return function(L){return(L=L.lift(new Uy(T.ngZone))).pipe((0,Gn.R)(T.outsideAngular),(0,sa.Q)(T.insideAngular))}}(_n())(T)}},2090:(Te,X,U)=>{"use strict";U.d(X,{$s:()=>St,BH:()=>Ne,DV:()=>Br,Dv:()=>Hn,G6:()=>Le,GJ:()=>Ns,L:()=>F,LL:()=>Tt,Pz:()=>we,Sg:()=>$e,UG:()=>ge,UI:()=>En,US:()=>V,Wj:()=>jo,Wl:()=>$n,Yr:()=>Pe,ZB:()=>M,ZR:()=>un,aH:()=>ce,b$:()=>rt,cI:()=>Ot,dS:()=>$i,eu:()=>Ge,g5:()=>S,gK:()=>Ar,gQ:()=>Ls,h$:()=>N,hl:()=>He,hu:()=>K,jU:()=>je,lb:()=>dn,m9:()=>xr,ne:()=>kt,p$:()=>A,pd:()=>Sr,r3:()=>fi,ru:()=>Ve,tV:()=>R,uI:()=>Y,ug:()=>Yt,vZ:()=>ri,w1:()=>me,w9:()=>ni,xO:()=>Ri,xb:()=>ks,z$:()=>ue,zI:()=>et,zd:()=>xn});const m={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},K=function(ee,Q){if(!ee)throw S(Q)},S=function(ee){return new Error("Firebase Database ("+m.SDK_VERSION+") INTERNAL ASSERT FAILED: "+ee)},H=function(ee){const Q=[];let ie=0;for(let Re=0;Re<ee.length;Re++){let he=ee.charCodeAt(Re);he<128?Q[ie++]=he:he<2048?(Q[ie++]=he>>6|192,Q[ie++]=63&he|128):55296==(64512&he)&&Re+1<ee.length&&56320==(64512&ee.charCodeAt(Re+1))?(he=65536+((1023&he)<<10)+(1023&ee.charCodeAt(++Re)),Q[ie++]=he>>18|240,Q[ie++]=he>>12&63|128,Q[ie++]=he>>6&63|128,Q[ie++]=63&he|128):(Q[ie++]=he>>12|224,Q[ie++]=he>>6&63|128,Q[ie++]=63&he|128)}return Q},V={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ee,Q){if(!Array.isArray(ee))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ie=Q?this.byteToCharMapWebSafe_:this.byteToCharMap_,Re=[];for(let he=0;he<ee.length;he+=3){const tt=ee[he],Qe=he+1<ee.length,mn=Qe?ee[he+1]:0,Pn=he+2<ee.length,Fn=Pn?ee[he+2]:0;let Hr=(15&mn)<<2|Fn>>6,zi=63&Fn;Pn||(zi=64,Qe||(Hr=64)),Re.push(ie[tt>>2],ie[(3&tt)<<4|mn>>4],ie[Hr],ie[zi])}return Re.join("")},encodeString(ee,Q){return this.HAS_NATIVE_SUPPORT&&!Q?btoa(ee):this.encodeByteArray(H(ee),Q)},decodeString(ee,Q){return this.HAS_NATIVE_SUPPORT&&!Q?atob(ee):function(ee){const Q=[];let ie=0,Re=0;for(;ie<ee.length;){const he=ee[ie++];if(he<128)Q[Re++]=String.fromCharCode(he);else if(he>191&&he<224){const tt=ee[ie++];Q[Re++]=String.fromCharCode((31&he)<<6|63&tt)}else if(he>239&&he<365){const Pn=((7&he)<<18|(63&ee[ie++])<<12|(63&ee[ie++])<<6|63&ee[ie++])-65536;Q[Re++]=String.fromCharCode(55296+(Pn>>10)),Q[Re++]=String.fromCharCode(56320+(1023&Pn))}else{const tt=ee[ie++],Qe=ee[ie++];Q[Re++]=String.fromCharCode((15&he)<<12|(63&tt)<<6|63&Qe)}}return Q.join("")}(this.decodeStringToByteArray(ee,Q))},decodeStringToByteArray(ee,Q){this.init_();const ie=Q?this.charToByteMapWebSafe_:this.charToByteMap_,Re=[];for(let he=0;he<ee.length;){const tt=ie[ee.charAt(he++)],mn=he<ee.length?ie[ee.charAt(he)]:0;++he;const Fn=he<ee.length?ie[ee.charAt(he)]:64;++he;const Ft=he<ee.length?ie[ee.charAt(he)]:64;if(++he,null==tt||null==mn||null==Fn||null==Ft)throw new k;Re.push(tt<<2|mn>>4),64!==Fn&&(Re.push(mn<<4&240|Fn>>2),64!==Ft&&Re.push(Fn<<6&192|Ft))}return Re},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ee=0;ee<this.ENCODED_VALS.length;ee++)this.byteToCharMap_[ee]=this.ENCODED_VALS.charAt(ee),this.charToByteMap_[this.byteToCharMap_[ee]]=ee,this.byteToCharMapWebSafe_[ee]=this.ENCODED_VALS_WEBSAFE.charAt(ee),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ee]]=ee,ee>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ee)]=ee,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ee)]=ee)}}};class k extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const N=function(ee){const Q=H(ee);return V.encodeByteArray(Q,!0)},F=function(ee){return N(ee).replace(/\./g,"")},R=function(ee){try{return V.decodeString(ee,!0)}catch(Q){console.error("base64Decode failed: ",Q)}return null};function A(ee){return M(void 0,ee)}function M(ee,Q){if(!(Q instanceof Object))return Q;switch(Q.constructor){case Date:return new Date(Q.getTime());case Object:void 0===ee&&(ee={});break;case Array:ee=[];break;default:return Q}for(const ie in Q)!Q.hasOwnProperty(ie)||!J(ie)||(ee[ie]=M(ee[ie],Q[ie]));return ee}function J(ee){return"__proto__"!==ee}const Ee=()=>{try{return function te(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ee=process.env.__FIREBASE_DEFAULTS__;return ee?JSON.parse(ee):void 0})()||(()=>{if(typeof document>"u")return;let ee;try{ee=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Q=ee&&R(ee[1]);return Q&&JSON.parse(Q)})()}catch(ee){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ee}`)}},ce=()=>{var ee;return null===(ee=Ee())||void 0===ee?void 0:ee.config},we=ee=>{var Q;return null===(Q=Ee())||void 0===Q?void 0:Q[`_${ee}`]};class Ne{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Q,ie)=>{this.resolve=Q,this.reject=ie})}wrapCallback(Q){return(ie,Re)=>{ie?this.reject(ie):this.resolve(Re),"function"==typeof Q&&(this.promise.catch(()=>{}),1===Q.length?Q(ie):Q(ie,Re))}}}function $e(ee,Q){if(ee.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Re=Q||"demo-project",he=ee.iat||0,tt=ee.sub||ee.user_id;if(!tt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Qe=Object.assign({iss:`https://securetoken.google.com/${Re}`,aud:Re,iat:he,exp:he+3600,auth_time:he,sub:tt,user_id:tt,firebase:{sign_in_provider:"custom",identities:{}}},ee);return[F(JSON.stringify({alg:"none",type:"JWT"})),F(JSON.stringify(Qe)),""].join(".")}function ue(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Y(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ue())}function ge(){var ee;const Q=null===(ee=Ee())||void 0===ee?void 0:ee.forceEnvironment;if("node"===Q)return!0;if("browser"===Q)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function je(){return"object"==typeof self&&self.self===self}function Ve(){const ee="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ee&&void 0!==ee.id}function rt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function me(){const ee=ue();return ee.indexOf("MSIE ")>=0||ee.indexOf("Trident/")>=0}function Pe(){return!0===m.NODE_CLIENT||!0===m.NODE_ADMIN}function Le(){return!ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function He(){try{return"object"==typeof indexedDB}catch{return!1}}function Ge(){return new Promise((ee,Q)=>{try{let ie=!0;const Re="validate-browser-context-for-indexeddb-analytics-module",he=self.indexedDB.open(Re);he.onsuccess=()=>{he.result.close(),ie||self.indexedDB.deleteDatabase(Re),ee(!0)},he.onupgradeneeded=()=>{ie=!1},he.onerror=()=>{var tt;Q((null===(tt=he.error)||void 0===tt?void 0:tt.message)||"")}}catch(ie){Q(ie)}})}function et(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class un extends Error{constructor(Q,ie,Re){super(ie),this.code=Q,this.customData=Re,this.name="FirebaseError",Object.setPrototypeOf(this,un.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tt.prototype.create)}}class Tt{constructor(Q,ie,Re){this.service=Q,this.serviceName=ie,this.errors=Re}create(Q,...ie){const Re=ie[0]||{},he=`${this.service}/${Q}`,tt=this.errors[Q],Qe=tt?function en(ee,Q){return ee.replace(ot,(ie,Re)=>{const he=Q[Re];return null!=he?String(he):`<${Re}?>`})}(tt,Re):"Error";return new un(he,`${this.serviceName}: ${Qe} (${he}).`,Re)}}const ot=/\{\$([^}]+)}/g;function Ot(ee){return JSON.parse(ee)}function $n(ee){return JSON.stringify(ee)}const yn=function(ee){let Q={},ie={},Re={},he="";try{const tt=ee.split(".");Q=Ot(R(tt[0])||""),ie=Ot(R(tt[1])||""),he=tt[2],Re=ie.d||{},delete ie.d}catch{}return{header:Q,claims:ie,data:Re,signature:he}},ni=function(ee){const ie=yn(ee).claims;return!!ie&&"object"==typeof ie&&ie.hasOwnProperty("iat")},Ns=function(ee){const Q=yn(ee).claims;return"object"==typeof Q&&!0===Q.admin};function fi(ee,Q){return Object.prototype.hasOwnProperty.call(ee,Q)}function Br(ee,Q){if(Object.prototype.hasOwnProperty.call(ee,Q))return ee[Q]}function ks(ee){for(const Q in ee)if(Object.prototype.hasOwnProperty.call(ee,Q))return!1;return!0}function En(ee,Q,ie){const Re={};for(const he in ee)Object.prototype.hasOwnProperty.call(ee,he)&&(Re[he]=Q.call(ie,ee[he],he,ee));return Re}function ri(ee,Q){if(ee===Q)return!0;const ie=Object.keys(ee),Re=Object.keys(Q);for(const he of ie){if(!Re.includes(he))return!1;const tt=ee[he],Qe=Q[he];if(wt(tt)&&wt(Qe)){if(!ri(tt,Qe))return!1}else if(tt!==Qe)return!1}for(const he of Re)if(!ie.includes(he))return!1;return!0}function wt(ee){return null!==ee&&"object"==typeof ee}function Ri(ee){const Q=[];for(const[ie,Re]of Object.entries(ee))Array.isArray(Re)?Re.forEach(he=>{Q.push(encodeURIComponent(ie)+"="+encodeURIComponent(he))}):Q.push(encodeURIComponent(ie)+"="+encodeURIComponent(Re));return Q.length?"&"+Q.join("&"):""}function xn(ee){const Q={};return ee.replace(/^\?/,"").split("&").forEach(Re=>{if(Re){const[he,tt]=Re.split("=");Q[decodeURIComponent(he)]=decodeURIComponent(tt)}}),Q}function Sr(ee){const Q=ee.indexOf("?");if(!Q)return"";const ie=ee.indexOf("#",Q);return ee.substring(Q,ie>0?ie:void 0)}class Ls{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Q=1;Q<this.blockSize;++Q)this.pad_[Q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Q,ie){ie||(ie=0);const Re=this.W_;if("string"==typeof Q)for(let Ft=0;Ft<16;Ft++)Re[Ft]=Q.charCodeAt(ie)<<24|Q.charCodeAt(ie+1)<<16|Q.charCodeAt(ie+2)<<8|Q.charCodeAt(ie+3),ie+=4;else for(let Ft=0;Ft<16;Ft++)Re[Ft]=Q[ie]<<24|Q[ie+1]<<16|Q[ie+2]<<8|Q[ie+3],ie+=4;for(let Ft=16;Ft<80;Ft++){const Hr=Re[Ft-3]^Re[Ft-8]^Re[Ft-14]^Re[Ft-16];Re[Ft]=4294967295&(Hr<<1|Hr>>>31)}let Fn,ar,he=this.chain_[0],tt=this.chain_[1],Qe=this.chain_[2],mn=this.chain_[3],Pn=this.chain_[4];for(let Ft=0;Ft<80;Ft++){Ft<40?Ft<20?(Fn=mn^tt&(Qe^mn),ar=1518500249):(Fn=tt^Qe^mn,ar=1859775393):Ft<60?(Fn=tt&Qe|mn&(tt|Qe),ar=2400959708):(Fn=tt^Qe^mn,ar=3395469782);const Hr=(he<<5|he>>>27)+Fn+Pn+ar+Re[Ft]&4294967295;Pn=mn,mn=Qe,Qe=4294967295&(tt<<30|tt>>>2),tt=he,he=Hr}this.chain_[0]=this.chain_[0]+he&4294967295,this.chain_[1]=this.chain_[1]+tt&4294967295,this.chain_[2]=this.chain_[2]+Qe&4294967295,this.chain_[3]=this.chain_[3]+mn&4294967295,this.chain_[4]=this.chain_[4]+Pn&4294967295}update(Q,ie){if(null==Q)return;void 0===ie&&(ie=Q.length);const Re=ie-this.blockSize;let he=0;const tt=this.buf_;let Qe=this.inbuf_;for(;he<ie;){if(0===Qe)for(;he<=Re;)this.compress_(Q,he),he+=this.blockSize;if("string"==typeof Q){for(;he<ie;)if(tt[Qe]=Q.charCodeAt(he),++Qe,++he,Qe===this.blockSize){this.compress_(tt),Qe=0;break}}else for(;he<ie;)if(tt[Qe]=Q[he],++Qe,++he,Qe===this.blockSize){this.compress_(tt),Qe=0;break}}this.inbuf_=Qe,this.total_+=ie}digest(){const Q=[];let ie=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let he=this.blockSize-1;he>=56;he--)this.buf_[he]=255&ie,ie/=256;this.compress_(this.buf_);let Re=0;for(let he=0;he<5;he++)for(let tt=24;tt>=0;tt-=8)Q[Re]=this.chain_[he]>>tt&255,++Re;return Q}}function kt(ee,Q){const ie=new It(ee,Q);return ie.subscribe.bind(ie)}class It{constructor(Q,ie){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ie,this.task.then(()=>{Q(this)}).catch(Re=>{this.error(Re)})}next(Q){this.forEachObserver(ie=>{ie.next(Q)})}error(Q){this.forEachObserver(ie=>{ie.error(Q)}),this.close(Q)}complete(){this.forEachObserver(Q=>{Q.complete()}),this.close()}subscribe(Q,ie,Re){let he;if(void 0===Q&&void 0===ie&&void 0===Re)throw new Error("Missing Observer.");he=function to(ee,Q){if("object"!=typeof ee||null===ee)return!1;for(const ie of Q)if(ie in ee&&"function"==typeof ee[ie])return!0;return!1}(Q,["next","error","complete"])?Q:{next:Q,error:ie,complete:Re},void 0===he.next&&(he.next=In),void 0===he.error&&(he.error=In),void 0===he.complete&&(he.complete=In);const tt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?he.error(this.finalError):he.complete()}catch{}}),this.observers.push(he),tt}unsubscribeOne(Q){void 0===this.observers||void 0===this.observers[Q]||(delete this.observers[Q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Q){if(!this.finalized)for(let ie=0;ie<this.observers.length;ie++)this.sendOne(ie,Q)}sendOne(Q,ie){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Q])try{ie(this.observers[Q])}catch(Re){typeof console<"u"&&console.error&&console.error(Re)}})}close(Q){this.finalized||(this.finalized=!0,void 0!==Q&&(this.finalError=Q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function In(){}const Hn=function(ee,Q,ie,Re){let he;if(Re<Q?he="at least "+Q:Re>ie&&(he=0===ie?"none":"no more than "+ie),he)throw new Error(ee+" failed: Was called with "+Re+(1===Re?" argument.":" arguments.")+" Expects "+he+".")};function Ar(ee,Q){return`${ee} failed: ${Q} argument `}function jo(ee,Q,ie,Re){if((!Re||ie)&&"function"!=typeof ie)throw new Error(Ar(ee,Q)+"must be a valid function.")}function dn(ee,Q,ie,Re){if((!Re||ie)&&("object"!=typeof ie||null===ie))throw new Error(Ar(ee,Q)+"must be a valid context object.")}const $i=function(ee){const Q=[];let ie=0;for(let Re=0;Re<ee.length;Re++){let he=ee.charCodeAt(Re);if(he>=55296&&he<=56319){const tt=he-55296;Re++,K(Re<ee.length,"Surrogate pair missing trail surrogate."),he=65536+(tt<<10)+(ee.charCodeAt(Re)-56320)}he<128?Q[ie++]=he:he<2048?(Q[ie++]=he>>6|192,Q[ie++]=63&he|128):he<65536?(Q[ie++]=he>>12|224,Q[ie++]=he>>6&63|128,Q[ie++]=63&he|128):(Q[ie++]=he>>18|240,Q[ie++]=he>>12&63|128,Q[ie++]=he>>6&63|128,Q[ie++]=63&he|128)}return Q},Yt=function(ee){let Q=0;for(let ie=0;ie<ee.length;ie++){const Re=ee.charCodeAt(ie);Re<128?Q++:Re<2048?Q+=2:Re>=55296&&Re<=56319?(Q+=4,ie++):Q+=3}return Q},Hi=1e3,We=2,Me=144e5,at=.5;function St(ee,Q=Hi,ie=We){const Re=Q*Math.pow(ie,ee),he=Math.round(at*Re*(Math.random()-.5)*2);return Math.min(Me,Re+he)}function xr(ee){return ee&&ee._delegate?ee._delegate:ee}},8702:(Te,X,U)=>{"use strict";var m=U(4650);let K=null;function S(){return K}class W{}const V=new m.OlP("DocumentToken");let k=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function N(){return(0,m.LFG)(R)}()},providedIn:"platform"}),n})();const F=new m.OlP("Location Initialized");let R=(()=>{class n extends k{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return S().getBaseHref(this._doc)}onPopState(t){const r=S().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=S().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){A()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){A()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(V))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function M(){return new R((0,m.LFG)(V))}()},providedIn:"platform"}),n})();function A(){return!!window.history.pushState}function J(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function te(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ae(n){return n&&"?"!==n[0]?"?"+n:n}let De=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(Ee)},providedIn:"root"}),n})();const le=new m.OlP("appBaseHref");let Ee=(()=>{class n extends De{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,m.f3M)(V).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return J(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ae(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+ae(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+ae(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(k),m.LFG(le,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ve=(()=>{class n extends De{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=J(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+ae(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+ae(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(k),m.LFG(le,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Oe=(()=>{class n{constructor(t){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function $e(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(te(Ne(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ae(r))}normalize(t){return n.stripTrailingSlash(function we(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Ne(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ae(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ae(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ae,n.joinWithSlash=J,n.stripTrailingSlash=te,n.\u0275fac=function(t){return new(t||n)(m.LFG(De))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function ce(){return new Oe((0,m.LFG)(De))}()},providedIn:"root"}),n})();function Ne(n){return n.replace(/\/index.html$/,"")}const no=/\s+/,pi=[];let nt=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this.initialClasses=pi,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(no):pi}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(no):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(no).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.ZZ4),m.Y36(m.aQg),m.Y36(m.SBq),m.Y36(m.Qsj))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Gi{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Un=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Gi(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,c),ro(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{ro(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ro(n,e){n.context.$implicit=e.item}let Vs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Aa,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ht("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ht("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Aa{constructor(){this.$implicit=null,this.ngIf=null}}function Ht(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}let Lc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();const _i="server";function xu(n){return n===_i}let co=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new Pa((0,m.LFG)(V),window)}),n})();class Pa{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ko(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=qo(this.window.history)||qo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function qo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ps extends W{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Zo extends ps{static makeCurrent(){!function H(n){K||(K=n)}(new Zo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Pf(){return Yo=Yo||document.querySelector("base"),Yo?Yo.getAttribute("href"):null}();return null==t?null:function br(n){gs=gs||document.createElement("a"),gs.setAttribute("href",n);const e=gs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Yo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Du(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let gs,Yo=null;const La=new m.OlP("TRANSITION_ID"),Yi=[{provide:m.ip1,useFactory:function ky(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=S(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[La,V,m.zs3],multi:!0}];let Mf=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Hs=new m.OlP("EventManagerPlugins");let Ua=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const c=i[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Hs),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class er{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=S().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Qo=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let a=i.get(t)??0;return a+=r,a>0?i.set(t,a):i.delete(t),a}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),ms=(()=>{class n extends Qo{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(a=>a.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const a=this.styleRef.get(r);a?a.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(V))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Xo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_s=/%COMP%/g,Va=new m.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function ja(n,e){return e.flat(100).map(t=>t.replace(_s,n))}function Ba(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Jo=(()=>{class n{constructor(t,r,i,a){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=a,this.rendererByCompId=new Map,this.defaultRenderer=new Gr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof Ha?i.applyToHost(t):i instanceof $a&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const c=this.eventManager,h=this.sharedStylesHost,_=this.removeStylesOnCompDestory;switch(r.encapsulation){case m.ifc.Emulated:a=new Ha(c,h,r,this.appId,_);break;case m.ifc.ShadowDom:return new ol(c,h,t,r);default:a=new $a(c,h,r,_)}a.onDestroy=()=>i.delete(r.id),i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ua),m.LFG(ms),m.LFG(m.AFp),m.LFG(Va))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Gr{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Xo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ea(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ea(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Xo[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Xo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,i&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ba(r)):this.eventManager.addEventListener(e,t,Ba(r))}}function ea(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ol extends Gr{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=ja(i.id,i.styles);for(const c of a){const h=document.createElement("style");h.textContent=c,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class $a extends Gr{constructor(e,t,r,i,a=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=ja(a,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Ha extends $a{constructor(e,t,r,i,a){const c=i+"-"+r.id;super(e,t,r,a,c),this.contentAttr=function Qi(n){return"_ngcontent-%COMP%".replace(_s,n)}(c),this.hostAttr=function il(n){return"_nghost-%COMP%".replace(_s,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let ta=(()=>{class n extends er{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(V))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const za=["alt","control","meta","shift"],kd={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Xi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ga=(()=>{class n extends er{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>S().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),c="code."),za.forEach(w=>{const C=r.indexOf(w);C>-1&&(r.splice(C,1),c+=w+".")}),c+=a,0!=r.length||0===a.length)return null;const _={};return _.domEventName=i,_.fullKey=c,_}static matchEventFullKeyCode(t,r){let i=kd[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),za.forEach(c=>{c!==i&&(0,Xi[c])(t)&&(a+=c+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(V))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const $u=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function mo(){Zo.makeCurrent()},multi:!0},{provide:V,useFactory:function kf(){return(0,m.RDi)(document),document},deps:[]}]),Fd=new m.OlP(""),cl=[{provide:m.rWj,useClass:class Of{addToWindow(e){m.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const i=m.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const h=function(_){c=c||_,a--,0==a&&r(c)};i.forEach(function(_){_.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?S().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:m.lri,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]}],na=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function Wa(){return new m.qLn},deps:[]},{provide:Hs,useClass:ta,multi:!0,deps:[V,m.R0b,m.Lbi]},{provide:Hs,useClass:Ga,multi:!0,deps:[V]},{provide:Jo,useClass:Jo,deps:[Ua,ms,m.AFp,Va]},{provide:m.FYo,useExisting:Jo},{provide:Qo,useExisting:ms},{provide:ms,useClass:ms,deps:[V]},{provide:Ua,useClass:Ua,deps:[Hs,m.R0b]},{provide:class jc{},useClass:Mf,deps:[]},[]];let qa=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:La,useExisting:m.AFp},Yi]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Fd,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[...na,...cl],imports:[Lc,m.hGG]}),n})(),_o=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(V))},n.\u0275prov=m.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ld(){return new _o((0,m.LFG)(V))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let Fr=(()=>{class n{get nativeWindow(){return window}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),$d=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Fr],imports:[[]]}),n})();var _n=U(2011),es=U(7579),Wr=U(7669),pn=U(8996);function dt(...n){const e=(0,Wr.yG)(n);return(0,pn.D)(n,e)}var yi=U(9751),oa=U(6451),wo=U(5363),Za=U(8421),T=U(4482),D=U(5403);function L(n,e){return(0,T.e)((t,r)=>{let i=null,a=0,c=!1;const h=()=>c&&!i&&r.complete();t.subscribe((0,D.x)(r,_=>{i?.unsubscribe();let w=0;const C=a++;(0,Za.Xf)(n(_,C)).subscribe(i=(0,D.x)(r,O=>r.next(e?e(_,O,C,w++):O),()=>{i=null,h()}))},()=>{c=!0,h()}))})}var G=U(4004),oe=U(6063);class fe extends es.x{constructor(e=1/0,t=1/0,r=oe.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let h=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)h=_;h&&r.splice(0,h+1)}}}var ke=U(3099);function ut(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,ke.B)({connector:()=>new fe(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const mt=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ct(n,e){return(0,T.e)((t,r)=>{let i=0;t.subscribe((0,D.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var yt=U(515);function cr(n){return n<=0?()=>yt.E:(0,T.e)((e,t)=>{let r=0;e.subscribe((0,D.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function tr(n){return(0,T.e)((e,t)=>{let r=!1;e.subscribe((0,D.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Eo(n=Gu){return(0,T.e)((e,t)=>{let r=!1;e.subscribe((0,D.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Gu(){return new mt}var ts=U(4671);function nr(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ct((i,a)=>n(i,a,r)):ts.y,cr(1),t?tr(e):Eo(()=>new mt))}var Oi=U(576);function Ya(n,e){return(0,Oi.m)(e)?L(()=>n,e):L(()=>n)}var Wu=U(9468),on=U(2122);U(259);var be=U(5861),qr=U(9681),ns=U(4859),z=U(2090),lr=U(1877);const $f=new Map,tm={activated:!1,tokenObservers:[]},Hy={initialized:!1,enabled:!1};function dr(n){return $f.get(n)||Object.assign({},tm)}function qu(){return Hy}const zf="https://content-firebaseappcheck.googleapis.com/v1",Gf="exchangeDebugToken",im={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Hd{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,be.Z)(function*(){t.stop();try{t.pending=new z.BH,yield function sm(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new z.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const gn=new z.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Kf(n,e){return Io.apply(this,arguments)}function Io(){return(Io=(0,be.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const O=yield i.getHeartbeatsHeader();O&&(r["X-Firebase-Client"]=O)}const a={method:"POST",body:JSON.stringify(e),headers:r};let c,h;try{c=yield fetch(n,a)}catch(O){throw gn.create("fetch-network-error",{originalErrorMessage:O?.message})}if(200!==c.status)throw gn.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(O){throw gn.create("fetch-parse-error",{originalErrorMessage:O?.message})}const _=h.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw gn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const w=1e3*Number(_[1]),C=Date.now();return{token:h.token,expireTimeMillis:C+w,issuedAtTimeMillis:C}})).apply(this,arguments)}const Gy="firebase-app-check-database",Zf=1,Xa="firebase-app-check-store";let Ku=null;function Jf(n,e){return ua.apply(this,arguments)}function ua(){return(ua=(0,be.Z)(function*(n,e){const r=(yield function Zu(){return Ku||(Ku=new Promise((n,e)=>{try{const t=indexedDB.open(Gy,Zf);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(gn.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Xa,{keyPath:"compositeKey"})}}catch(t){e(gn.create("storage-open",{originalErrorMessage:t?.message}))}}),Ku)}()).transaction(Xa,"readwrite"),a=r.objectStore(Xa).put({compositeKey:n,value:e});return new Promise((c,h)=>{a.onsuccess=_=>{c()},r.onerror=_=>{var w;h(gn.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const Ja=new lr.Yd("@firebase/app-check");function gl(n,e){return(0,z.hl)()?function Yf(n,e){return Jf(function Kd(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ja.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function tp(){return _l.apply(this,arguments)}function _l(){return(_l=(0,be.Z)(function*(){const n=qu();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Zd={error:"UNKNOWN_ERROR"};function Zy(n){return z.US.encodeString(JSON.stringify(n),!1)}function Yd(n){return Qd.apply(this,arguments)}function Qd(){return(Qd=(0,be.Z)(function*(n,e=!1){const t=n.app;!function qf(n){if(!dr(n).activated)throw gn.create("use-before-activation",{appName:n.name})}(t);const r=dr(t);let a,i=r.token;if(i&&!yl(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(yl(_)?i=_:yield gl(t,void 0))}if(!e&&i&&yl(i))return{token:i.token};let h,c=!1;if(function ml(){return qu().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Kf(function Gd(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${zf}/projects/${t}/apps/${r}:${Gf}?key=${i}`,body:{debug_token:e}}}(t,yield tp()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const _=yield r.exchangeTokenPromise;return yield gl(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield dr(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Ja.warn(_.message):Ja.error(_),a=_}return i?a?h=yl(i)?{token:i.token,internalError:a}:vl(a):(h={token:i.token},r.token=i,yield gl(t,i)):h=vl(a),c&&function um(n,e){const t=dr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,h),h})).apply(this,arguments)}function Mi(n,e){const t=dr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function np(n){const{app:e}=n,t=dr(e);let r=t.tokenRefresher;r||(r=function rp(n){const{app:e}=n;return new Hd((0,be.Z)(function*(){let r;if(r=dr(e).token?yield Yd(n,!0):yield Yd(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=dr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},im.RETRIAL_MIN_WAIT,im.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function yl(n){return n.expireTimeMillis-Date.now()>0}function vl(n){return{token:Zy(Zd),error:n}}class Yy{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=dr(this.app);for(const t of e)Mi(this.app,t.next);return Promise.resolve()}}const Qu="app-check-internal";!function ap(){(0,qr._registerComponent)(new ns.wA("app-check",n=>function ip(n,e){return new Yy(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Qu).initialize()})),(0,qr._registerComponent)(new ns.wA(Qu,n=>function Jd(n){return{getToken:e=>Yd(n,e),addTokenListener:e=>function Xd(n,e,t,r){const{app:i}=n,a=dr(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&yl(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),np(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>np(n))}(n,"INTERNAL",e),removeTokenListener:e=>Mi(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,qr.registerVersion)("@firebase/app-check","0.6.4")}();class ca{constructor(){return(0,on.vb)("app-check")}}typeof window<"u"&&window;var Et=U(9260);const ki=new m.OlP("angularfire2.auth.use-emulator"),Ju=new m.OlP("angularfire2.auth.settings"),ah=new m.OlP("angularfire2.auth.tenant-id"),bl=new m.OlP("angularfire2.auth.langugage-code"),ec=new m.OlP("angularfire2.auth.use-device-language"),rs=new m.OlP("angularfire.auth.persistence"),To=(n,e,t,r,i,a,c,h)=>(0,_n.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),c)for(const[w,C]of Object.entries(c))_.settings[w]=C;return h&&_.setPersistence(h),_},[t,r,i,a,c,h]);let tu=(()=>{class n{constructor(t,r,i,a,c,h,_,w,C,O,$,Z){const ne=new es.x,_e=dt(void 0).pipe((0,wo.Q)(c.outsideAngular),L(()=>a.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,8971)))),(0,G.U)(()=>(0,_n.on)(t,a,r)),(0,G.U)(Se=>To(Se,a,h,w,C,O,_,$)),ut({bufferSize:1,refCount:!1}));if(xu(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=dt(null);else{_e.pipe(nr()).subscribe();const pt=_e.pipe(L(_t=>_t.getRedirectResult().then(xt=>xt,()=>null)),on.iC,ut({bufferSize:1,refCount:!1})),Dt=_e.pipe(L(_t=>new yi.y(xt=>({unsubscribe:a.runOutsideAngular(()=>_t.onAuthStateChanged(Vt=>xt.next(Vt),Vt=>xt.error(Vt),()=>xt.complete()))})))),st=_e.pipe(L(_t=>new yi.y(xt=>({unsubscribe:a.runOutsideAngular(()=>_t.onIdTokenChanged(Vt=>xt.next(Vt),Vt=>xt.error(Vt),()=>xt.complete()))}))));this.authState=pt.pipe(Ya(Dt),(0,Wu.R)(c.outsideAngular),(0,wo.Q)(c.insideAngular)),this.user=pt.pipe(Ya(st),(0,Wu.R)(c.outsideAngular),(0,wo.Q)(c.insideAngular)),this.idToken=this.user.pipe(L(_t=>_t?(0,pn.D)(_t.getIdToken()):dt(null))),this.idTokenResult=this.user.pipe(L(_t=>_t?(0,pn.D)(_t.getIdTokenResult()):dt(null))),this.credential=(0,oa.T)(pt,ne,this.authState.pipe(Ct(_t=>!_t))).pipe((0,G.U)(_t=>_t?.user?_t:null),(0,Wu.R)(c.outsideAngular),(0,wo.Q)(c.insideAngular))}return(0,_n.pX)(this,_e,a,{spy:{apply:(Se,pt,Dt)=>{(Se.startsWith("signIn")||Se.startsWith("createUser"))&&Dt.then(st=>ne.next(st))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(_n.Dh),m.LFG(_n.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(on.HU),m.LFG(ki,8),m.LFG(Ju,8),m.LFG(ah,8),m.LFG(bl,8),m.LFG(ec,8),m.LFG(rs,8),m.LFG(ca,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),up=(()=>{class n{constructor(){Et.Z.registerVersion("angularfire",on.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[tu]}),n})();var tc=U(4986),gm=U(3942);const cp="firebasestorage.googleapis.com",uh="storageBucket";class Wn extends z.ZR{constructor(e,t,r=0){super(nv(e),`Firebase Storage: ${t} (${nv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Wn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return nv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Mn=(()=>{return(n=Mn||(Mn={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Mn;var n})();function nv(n){return"storage/"+n}function rv(){return new Wn(Mn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function kE(){return new Wn(Mn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wr(){return new Wn(Mn.CANCELED,"User canceled the upload/download.")}function sv(){return new Wn(Mn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ch(n){return new Wn(Mn.INVALID_ARGUMENT,n)}function ov(){return new Wn(Mn.APP_DELETED,"The Firebase app was deleted.")}function wD(n){return new Wn(Mn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _m(n,e){return new Wn(Mn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function nu(n){throw new Wn(Mn.INTERNAL_ERROR,"Internal error: "+n)}class Kr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Kr.makeFromUrl(e,t)}catch{return new Kr(e,"")}if(""===r.path)return r;throw function mD(n){return new Wn(Mn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(_t){_t.path_=decodeURIComponent(_t.path)}const O=t.replace(/[.]/g,"\\."),st=[{regex:h,indices:{bucket:1,path:3},postModify:function a(_t){"/"===_t.path.charAt(_t.path.length-1)&&(_t.path_=_t.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${O}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===cp?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let _t=0;_t<st.length;_t++){const xt=st[_t],Vt=xt.regex.exec(e);if(Vt){let eo=Vt[xt.indices.path];eo||(eo=""),r=new Kr(Vt[xt.indices.bucket],eo),xt.postModify(r);break}}if(null==r)throw function gD(n){return new Wn(Mn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class LE{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function lp(n){return"string"==typeof n||n instanceof String}function ym(n){return BE()&&n instanceof Blob}function BE(){return typeof Blob<"u"&&!(0,z.UG)()}function dp(n,e,t,r){if(r<e)throw ch(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw ch(`Invalid value for '${n}'. Expected ${t} or less.`)}function ru(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function vm(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var iu=(()=>{return(n=iu||(iu={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",iu;var n})();function av(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class Cl{constructor(e,t,r,i,a,c,h,_,w,C,O,$=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=C,this.connectionFactory_=O,this.retry=$,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Z,ne)=>{this.resolve_=Z,this.reject_=ne,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(h,h.getResponse());!function LP(n){return void 0!==n}(_)?a():a(_)}catch(_){c(_)}else if(null!==h){const _=rv();_.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,_):_)}else c(i.canceled?this.appDelete_?ov():wr():kE())};this.canceled_?t(0,new wm(!1,null,!0)):this.backoffId_=function UE(n,e,t){let r=1,i=null,a=null,c=!1,h=0;function _(){return 2===h}let w=!1;function C(...Se){w||(w=!0,e.apply(null,Se))}function O(Se){i=setTimeout(()=>{i=null,n(Z,_())},Se)}function $(){a&&clearTimeout(a)}function Z(Se,...pt){if(w)return void $();if(Se)return $(),void C.call(null,Se,...pt);if(_()||c)return $(),void C.call(null,Se,...pt);let st;r<64&&(r*=2),1===h?(h=2,st=0):st=1e3*(r+Math.random()),O(st)}let ne=!1;function _e(Se){ne||(ne=!0,$(),!w&&(null!==i?(Se||(h=2),clearTimeout(i),O(0)):Se||(h=1)))}return O(0),a=setTimeout(()=>{c=!0,_e(!0)},t),_e}((r,i)=>{if(i)return void r(!1,new wm(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const h=a.getErrorCode()===iu.NO_ERROR,_=a.getStatus();if(!h||av(_,this.additionalRetryCodes_)&&this.retry){const C=a.getErrorCode()===iu.ABORT;return void r(!1,new wm(!1,null,C))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new wm(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function VE(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class wm{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function $E(...n){const e=function Tl(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(BE())return new Blob(n);throw new Wn(Mn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Cs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bm{constructor(e,t){this.data=e,this.contentType=t||null}}function nc(n,e){switch(n){case Cs.RAW:return new bm(HE(e));case Cs.BASE64:case Cs.BASE64URL:return new bm(zE(n,e));case Cs.DATA_URL:return new bm(function TD(n){const e=new Cm(n);return e.base64?zE(Cs.BASE64,e.rest):function CD(n){let e;try{e=decodeURIComponent(n)}catch{throw _m(Cs.DATA_URL,"Malformed data URL.")}return HE(e)}(e.rest)}(e),function GE(n){return new Cm(n).contentType}(e))}throw rv()}function HE(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function zE(n,e){switch(n){case Cs.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw _m(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Cs.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw _m(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function bD(n){if(typeof atob>"u")throw function vD(n){return new Wn(Mn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:_m(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Cm{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw _m(Cs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function DD(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Do{constructor(e,t){let r=0,i="";ym(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(ym(this.data_)){const i=function lv(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Do(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Do(r,!0)}}static getBlob(...e){if(BE()){const t=e.map(r=>r instanceof Do?r.data_:r);return new Do($E.apply(null,t))}{const t=e.map(c=>lp(c)?nc(Cs.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(c=>{for(let h=0;h<c.length;h++)i[a++]=c[h]}),new Do(i,!0)}}uploadData(){return this.data_}}function WE(n){let e;try{e=JSON.parse(n)}catch{return null}return function jE(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function qE(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function lh(n,e){return e}class Lr{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||lh}}let Tm=null;function fp(){if(Tm)return Tm;const n=[];n.push(new Lr("bucket")),n.push(new Lr("generation")),n.push(new Lr("metageneration")),n.push(new Lr("name","fullPath",!0));const t=new Lr("name");t.xform=function e(a,c){return function KE(n){return!lp(n)||n.length<2?n:qE(n)}(c)},n.push(t);const i=new Lr("size");return i.xform=function r(a,c){return void 0!==c?Number(c):c},n.push(i),n.push(new Lr("timeCreated")),n.push(new Lr("updated")),n.push(new Lr("md5Hash",null,!0)),n.push(new Lr("cacheControl",null,!0)),n.push(new Lr("contentDisposition",null,!0)),n.push(new Lr("contentEncoding",null,!0)),n.push(new Lr("contentLanguage",null,!0)),n.push(new Lr("contentType",null,!0)),n.push(new Lr("metadata","customMetadata",!0)),Tm=n,Tm}function dv(n,e,t){const r=WE(e);return null===r?null:function RD(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const c=t[a];r[c.local]=c.xform(r,e[c.server])}return function AD(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Kr(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function pp(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const Dm="prefixes",YE="items";class la{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function da(n){if(!n)throw rv()}function Sm(n,e){return function t(r,i){const a=dv(n,i,e);return da(null!==a),a}}function dh(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function pD(){return new Wn(Mn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function mm(){return new Wn(Mn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function NE(n){return new Wn(Mn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function iv(n){return new Wn(Mn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function mp(n){const e=dh(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function fD(n){return new Wn(Mn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function Dl(n,e,t){const i=ru(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new la(i,"GET",Sm(n,t),c);return h.errorHandler=mp(e),h}function su(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=ru(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,C=new la(h,"GET",function xD(n,e){return function t(r,i){const a=function gp(n,e,t){const r=WE(t);return null===r?null:function hv(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Dm])for(const i of t[Dm]){const a=i.replace(/\/$/,""),c=n._makeStorageReference(new Kr(e,a));r.prefixes.push(c)}if(t[YE])for(const i of t[YE]){const a=n._makeStorageReference(new Kr(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return da(null!==a),a}}(n,e.bucket),w);return C.urlParams=a,C.errorHandler=dh(e),C}function MD(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function XE(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class _p{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function pv(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{da(!1)}return da(!!t&&-1!==(e||["active"]).indexOf(t)),t}const kD={STATE_CHANGED:"state_changed"},wi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function gv(n){switch(n){case"running":case"pausing":case"canceling":return wi.RUNNING;case"paused":return wi.PAUSED;case"success":return wi.SUCCESS;case"canceled":return wi.CANCELED;default:return wi.ERROR}}class FD{constructor(e,t,r){if(function ED(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function hh(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let tI=null;class nI{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=iu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=iu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=iu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw nu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw nu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw nu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw nu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw nu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class LD extends nI{initXhr(){this.xhr_.responseType="text"}}function Ao(){return tI?tI():new LD}class mv{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=fp(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Mn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(av(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=kE()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Mn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function JE(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c=MD(e,r,i),h={name:c.fullPath},_=ru(a,n.host,n._protocol),C={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},O=pp(c,t),ne=new la(_,"POST",function Z(_e){let Se;pv(_e);try{Se=_e.getResponseHeader("X-Goog-Upload-URL")}catch{da(!1)}return da(lp(Se)),Se},n.maxUploadRetryTime);return ne.urlParams=h,ne.headers=C,ne.body=O,ne.errorHandler=dh(e),ne}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ao,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function ND(n,e,t,r){const _=new la(t,"POST",function a(w){const C=pv(w,["active","final"]);let O=null;try{O=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch{da(!1)}O||da(!1);const $=Number(O);return da(!isNaN($)),new _p($,r.size(),"final"===C)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=dh(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Ao,t,r);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new _p(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let c;try{c=function So(n,e,t,r,i,a,c,h){const _=new _p(0,0);if(c?(_.current=c.current,_.total=c.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function _D(){return new Wn(Mn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const w=_.total-_.current;let C=w;i>0&&(C=Math.min(C,i));const O=_.current;let Z="";Z=0===C?"finalize":w===C?"upload, finalize":"upload";const ne={"X-Goog-Upload-Command":Z,"X-Goog-Upload-Offset":`${_.current}`},_e=r.slice(O,O+C);if(null===_e)throw sv();const st=new la(t,"POST",function Se(_t,xt){const Vt=pv(_t,["active","final"]),Dr=_.current+C,eo=r.size();let NP;return NP="final"===Vt?Sm(e,a)(_t,xt):null,new _p(Dr,eo,"final"===Vt,NP)},e.maxUploadRetryTime);return st.headers=ne,st.body=_e.uploadData(),st.progressCallback=h||null,st.errorHandler=dh(n),st}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const h=this._ref.storage._makeRequest(c,Ao,i,a,!1);this._request=h,h.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Dl(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ao,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function fv(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},_=function h(){let st="";for(let _t=0;_t<2;_t++)st+=Math.random().toString().slice(2);return st}();c["Content-Type"]="multipart/related; boundary="+_;const w=MD(e,r,i),C=pp(w,t),Z=Do.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+C+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===Z)throw sv();const ne={name:w.fullPath},_e=ru(a,n.host,n._protocol),pt=n.maxUploadRetryTime,Dt=new la(_e,"POST",Sm(n,t),pt);return Dt.urlParams=ne,Dt.headers=c,Dt.body=Z.uploadData(),Dt.errorHandler=dh(e),Dt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ao,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=wr(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=gv(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new FD(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(gv(this._state)){case wi.SUCCESS:hh(this._resolve.bind(null,this.snapshot))();break;case wi.CANCELED:case wi.ERROR:hh(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(gv(this._state)){case wi.RUNNING:case wi.PAUSED:e.next&&hh(e.next.bind(e,this.snapshot))();break;case wi.SUCCESS:e.complete&&hh(e.complete.bind(e))();break;default:e.error&&hh(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Sl{constructor(e,t){this._service=e,this._location=t instanceof Kr?t:Kr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Sl(e,t)}get root(){const e=new Kr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qE(this._location.path)}get storage(){return this._service}get parent(){const e=function SD(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Kr(this._location.bucket,e);return new Sl(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw wD(e)}}function $D(n,e,t){return Am.apply(this,arguments)}function Am(){return(Am=(0,be.Z)(function*(n,e,t){const i=yield _v(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield $D(n,e,i.nextPageToken))})).apply(this,arguments)}function _v(n,e){null!=e&&"number"==typeof e.maxResults&&dp("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=su(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Ao)}function yv(n){n._throwIfRoot("getDownloadURL");const e=function OD(n,e,t){const i=ru(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new la(i,"GET",function PD(n,e){return function t(r,i){const a=dv(n,i,e);return da(null!==a),function ZE(n,e,t,r){const i=WE(e);if(null===i||!lp(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const c=encodeURIComponent;return a.split(",").map(w=>{const O=n.fullPath;return ru("/b/"+c(n.bucket)+"/o/"+c(O),t,r)+vm({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),c);return h.errorHandler=mp(e),h}(n.storage,n._location,fp());return n.storage.makeRequestWithTokens(e,Ao).then(t=>{if(null===t)throw function yD(){return new Wn(Mn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function uI(n,e){const t=function hp(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Kr(n._location.bucket,t);return new Sl(n.storage,r)}function zD(n,e){if(n instanceof Ev){const t=n;if(null==t._bucket)throw function FE(){return new Wn(Mn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+uh+"' property when initializing the app?")}();const r=new Sl(t,t._bucket);return null!=e?zD(r,e):r}return void 0!==e?uI(n,e):n}function GD(n,e){if(e&&function jP(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Ev)return function BP(n,e){return new Sl(n,e)}(n,e);throw ch("To use ref(service, url), the first argument must be a Storage instance.")}return zD(n,e)}function wv(n,e){const t=e?.[uh];return null==t?null:Kr.makeFromBucketSpec(t,n)}class Ev{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=cp,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Kr.makeFromBucketSpec(i,this._host):wv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Kr.makeFromBucketSpec(this._url,e):wv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,be.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,be.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sl(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new LE(ov());{const c=function Im(n,e,t,r,i,a,c=!0){const h=vm(n.urlParams),_=n.url+h,w=Object.assign({},n.headers);return function ID(n,e){e&&(n["X-Firebase-GMPID"]=e)}(w,e),function uv(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(w,t),function Em(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(w,a),function cv(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(w,r),new Cl(_,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,be.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const Rl="@firebase/storage";function Cv(n,e){return GD(n=(0,z.m9)(n),e)}function GP(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Ev(t,r,i,e,qr.SDK_VERSION)}!function fh(){(0,qr._registerComponent)(new ns.wA("storage",GP,"PUBLIC").setMultipleInstances(!0)),(0,qr.registerVersion)(Rl,"0.11.2",""),(0,qr.registerVersion)(Rl,"0.11.2","esm2017")}();class yp{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class pI{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new yp(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new yp(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?c=>t(new yp(c,this,this._ref)):{next:t.next?c=>t.next(new yp(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class Tv{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ou(e,this._service))}get items(){return this._delegate.items.map(e=>new ou(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ou{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function dI(n,e){return uI(n,e)}(this._delegate,e);return new ou(t,this.storage)}get root(){return new ou(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ou(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new pI(function qD(n,e,t){return function aI(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new mv(n,new Do(e),t)}(n=(0,z.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Cs.RAW,r){this._throwIfRoot("putString");const i=nc(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new pI(new mv(this._delegate,new Do(i.data,!0),a),this)}listAll(){return function QD(n){return function BD(n){const e={prefixes:[],items:[]};return $D(n,e).then(()=>e)}(n=(0,z.m9)(n))}(this._delegate).then(e=>new Tv(e,this.storage))}list(e){return function YD(n,e){return _v(n=(0,z.m9)(n),e)}(this._delegate,e||void 0).then(t=>new Tv(t,this.storage))}getMetadata(){return function KD(n){return function Al(n){n._throwIfRoot("getMetadata");const e=Dl(n.storage,n._location,fp());return n.storage.makeRequestWithTokens(e,Ao)}(n=(0,z.m9)(n))}(this._delegate)}updateMetadata(e){return function ZD(n,e){return function HD(n,e){n._throwIfRoot("updateMetadata");const t=function UP(n,e,t,r){const a=ru(e.fullServerUrl(),n.host,n._protocol),h=pp(t,r),w=n.maxOperationRetryTime,C=new la(a,"PATCH",Sm(n,r),w);return C.headers={"Content-Type":"application/json; charset=utf-8"},C.body=h,C.errorHandler=mp(e),C}(n.storage,n._location,e,fp());return n.storage.makeRequestWithTokens(t,Ao)}(n=(0,z.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function lI(n){return yv(n=(0,z.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function XD(n){return function vv(n){n._throwIfRoot("deleteObject");const e=function VP(n,e){const r=ru(e.fullServerUrl(),n.host,n._protocol),h=new la(r,"DELETE",function c(_,w){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=mp(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ao)}(n=(0,z.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw wD(e)}}class gI{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(vp(e))throw ch("ref() expected a child path but got a URL, use refFromURL instead.");return new ou(Cv(this._delegate,e),this)}refFromURL(e){if(!vp(e))throw ch("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Kr.makeFromUrl(e,this._delegate.host)}catch{throw ch("refFromUrl() expected a valid full URL but got an invalid one.")}return new ou(Cv(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function JD(n,e,t,r={}){!function $P(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,z.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function vp(n){return/^[A-Za-z]+:\/\//.test(n)}function Sv(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new gI(t,r)}function xm(n){const e=function mI(n){return new yi.y(e=>{const t=c=>e.next(c);t(n.snapshot);const a=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){a()}}).pipe(function ev(n,e=tc.z){return(0,T.e)((t,r)=>{let i=null,a=null,c=null;const h=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function _(){const w=c+n,C=e.now();if(C<w)return i=this.schedule(void 0,w-C),void r.add(i);h()}t.subscribe((0,D.x)(r,w=>{a=w,c=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,G.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function gh(n){return{getDownloadURL:()=>dt(void 0).pipe(on.fc,L(()=>n.getDownloadURL()),on.iC),getMetadata:()=>dt(void 0).pipe(on.fc,L(()=>n.getMetadata()),on.iC),delete:()=>(0,pn.D)(n.delete()),child:e=>gh(n.child(e)),updateMetadata:e=>(0,pn.D)(n.updateMetadata(e)),put:(e,t)=>xm(n.put(e,t)),putString:(e,t,r)=>xm(n.putString(e,t,r)),list:e=>(0,pn.D)(n.list(e)),listAll:()=>(0,pn.D)(n.listAll())}}!function Rm(n){const e={TaskState:wi,TaskEvent:kD,StringFormat:Cs,Storage:gI,Reference:ou};n.INTERNAL.registerComponent(new ns.wA("storage-compat",Sv,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(gm.Z);const Av=new m.OlP("angularfire2.storageBucket"),_I=new m.OlP("angularfire2.storage.maxUploadRetryTime"),Rv=new m.OlP("angularfire2.storage.maxOperationRetryTime"),eS=new m.OlP("angularfire2.storage.use-emulator");let tS=(()=>{class n{constructor(t,r,i,a,c,h,_,w,C,O){const $=(0,_n.on)(t,c,r);this.storage=(0,_n.cc)(`${$.name}.storage.${i}`,"AngularFireStorage",$.name,()=>{const Z=c.runOutsideAngular(()=>$.storage(i||void 0)),ne=C;return ne&&Z.useEmulator(...ne),_&&Z.setMaxUploadRetryTime(_),w&&Z.setMaxOperationRetryTime(w),Z},[_,w])}ref(t){return gh(this.storage.ref(t))}refFromURL(t){return gh(this.storage.refFromURL(t))}upload(t,r,i){return gh(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(_n.Dh),m.LFG(_n.xv,8),m.LFG(Av,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(on.HU),m.LFG(_I,8),m.LFG(Rv,8),m.LFG(eS,8),m.LFG(ca,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),rS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),yI=(()=>{class n{constructor(){Et.Z.registerVersion("angularfire",on.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[tS],imports:[rS]}),n})();var mh=U(8189);function xv(...n){return function iS(){return(0,mh.J)(1)}()((0,pn.D)(n,(0,Wr.yG)(n)))}function Ei(...n){const e=(0,Wr.yG)(n);return(0,T.e)((t,r)=>{(e?xv(n,t,e):xv(n,t)).subscribe(r)})}function Pm(){return(0,T.e)((n,e)=>{let t,r=!1;n.subscribe((0,D.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function _h(n,e){return(0,T.e)(function sS(n,e,t,r,i){return(a,c)=>{let h=t,_=e,w=0;a.subscribe((0,D.x)(c,C=>{const O=w++;_=h?n(_,C,O):(h=!0,C),r&&c.next(_)},i&&(()=>{h&&c.next(_),c.complete()})))}}(n,e,arguments.length>=2,!0))}function Om(n,e=ts.y){return n=n??vI,(0,T.e)((t,r)=>{let i,a=!0;t.subscribe((0,D.x)(r,c=>{const h=e(c);(a||!n(i,h))&&(a=!1,i=h,r.next(c))}))})}function vI(n,e){return n===e}U(8971);var vt,oS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},au={},Pv=Pv||{},Bt=oS||self;function yh(){}function Mm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ep(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ov="closure_uid_"+(1e9*Math.random()>>>0),uS=0;function ha(n,e,t){return n.call.apply(n.bind,arguments)}function Mv(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ii(n,e,t){return(Ii=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ha:Mv).apply(null,arguments)}function Nm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Zr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function rc(){this.s=this.s,this.o=this.o}rc.prototype.s=!1,rc.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function aS(n){Object.prototype.hasOwnProperty.call(n,Ov)&&n[Ov]||(n[Ov]=++uS)}(this)},rc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const wI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Ip(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function EI(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Mm(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let c=0;c<a;c++)n[i+c]=r[c]}else n.push(r)}}function bi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}bi.prototype.h=function(){this.defaultPrevented=!0};var km=function(){if(!Bt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Bt.addEventListener("test",yh,e),Bt.removeEventListener("test",yh,e)}catch{}return n}();function vh(n){return/^[\s\xa0]*$/.test(n)}var bp=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function II(n,e){return n<e?-1:n>e?1:0}function wh(){var n=Bt.navigator;return n&&(n=n.userAgent)?n:""}function uu(n){return-1!=wh().indexOf(n)}function Fm(n){return Fm[" "](n),n}Fm[" "]=yh;var Vm,n,CI=uu("Opera"),xl=uu("Trident")||uu("MSIE"),Lm=uu("Edge"),Ro=Lm||xl,Cp=uu("Gecko")&&!(-1!=wh().toLowerCase().indexOf("webkit")&&!uu("Edge"))&&!(uu("Trident")||uu("MSIE"))&&!uu("Edge"),Um=-1!=wh().toLowerCase().indexOf("webkit")&&!uu("Edge");function Eh(){var n=Bt.document;return n?n.documentMode:void 0}e:{var jm="",Bm=(n=wh(),Cp?/rv:([^\);]+)(\)|;)/.exec(n):Lm?/Edge\/([\d\.]+)/.exec(n):xl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Um?/WebKit\/(\S+)/.exec(n):CI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Bm&&(jm=Bm?Bm[1]:""),xl){var Nv=Eh();if(null!=Nv&&Nv>parseFloat(jm)){Vm=String(Nv);break e}}Vm=jm}var lS={};var hS=Bt.document&&xl&&(Eh()||parseInt(Vm,10))||void 0;function Dp(n,e){if(bi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Cp){e:{try{Fm(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:fS[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Dp.X.h.call(this)}}Zr(Dp,bi);var fS={2:"touch",3:"pen",4:"mouse"};Dp.prototype.h=function(){Dp.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Sp="closure_listenable_"+(1e6*Math.random()|0),pS=0;function gS(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++pS,this.ba=this.ea=!1}function $m(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Hm(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Fv(n){const e={};for(const t in n)e[t]=n[t];return e}const TI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zm(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<TI.length;a++)t=TI[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Gm(n){this.src=n,this.g={},this.h=0}function Lv(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=wI(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&($m(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Uv(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}Gm.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=Uv(n,e,r,i);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new gS(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var Vv="closure_lm_"+(1e6*Math.random()|0),jv={};function DI(n,e,t,r,i){if(r&&r.once)return Bv(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)DI(n,e[a],t,r,i);return null}return t=zv(t),n&&n[Sp]?n.N(e,t,Ep(r)?!!r.capture:!!r,i):SI(n,e,t,!1,r,i)}function SI(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=Ep(i)?!!i.capture:!!i,h=Ih(n);if(h||(n[Vv]=h=new Gm(n)),(t=h.add(e,t,r,c,a)).proxy)return t;if(r=function AI(){const e=qP;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)km||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent($v(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Bv(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Bv(n,e[a],t,r,i);return null}return t=zv(t),n&&n[Sp]?n.O(e,t,Ep(r)?!!r.capture:!!r,i):SI(n,e,t,!0,r,i)}function RI(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)RI(n,e[a],t,r,i);else r=Ep(r)?!!r.capture:!!r,t=zv(t),n&&n[Sp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Uv(a=n.g[e],t,r,i))&&($m(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Ih(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Uv(e,t,r,i)),(t=-1<n?e[n]:null)&&xI(t))}function xI(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Sp])Lv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent($v(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ih(e))?(Lv(t,n),0==t.h&&(t.src=null,e[Vv]=null)):$m(n)}}}function $v(n){return n in jv?jv[n]:jv[n]="on"+n}function qP(n,e){if(n.ba)n=!0;else{e=new Dp(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&xI(n),n=t.call(r,e)}return n}function Ih(n){return(n=n[Vv])instanceof Gm?n:null}var Hv="__closure_events_fn_"+(1e9*Math.random()>>>0);function zv(n){return"function"==typeof n?n:(n[Hv]||(n[Hv]=function(e){return n.handleEvent(e)}),n[Hv])}function Cr(){rc.call(this),this.i=new Gm(this),this.P=this,this.I=null}function li(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new bi(e,n);else if(e instanceof bi)e.target=e.target||n;else{var i=e;zm(e=new bi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=Ts(c,r,!0,e)&&i}if(i=Ts(c=e.g=n,r,!0,e)&&i,i=Ts(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Ts(c=e.g=t[a],r,!1,e)&&i}function Ts(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.ba&&c.capture==t){var h=c.listener,_=c.ha||c.src;c.ea&&Lv(n.i,c),i=!1!==h.call(_,r)&&i}}return i&&!r.defaultPrevented}Zr(Cr,rc),Cr.prototype[Sp]=!0,Cr.prototype.removeEventListener=function(n,e,t,r){RI(this,n,e,t,r)},Cr.prototype.M=function(){if(Cr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)$m(t[r]);delete n.g[e],n.h--}}this.I=null},Cr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Cr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Pl=Bt.JSON.stringify;function Ci(){var n=Nl;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var ic,Ap=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new qs,n=>n.reset());class qs{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Gv(n){Bt.setTimeout(()=>{throw n},0)}function Ml(n,e){ic||function bh(){var n=Bt.Promise.resolve(void 0);ic=function(){n.then(Ch)}}(),sc||(ic(),sc=!0),Nl.add(n,e)}var sc=!1,Nl=new class Ol{constructor(){this.h=this.g=null}add(e,t){const r=Ap.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Ch(){for(var n;n=Ci();){try{n.h.call(n.g)}catch(t){Gv(t)}var e=Ap;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}sc=!1}function cu(n,e){Cr.call(this),this.h=n||1,this.g=e||Bt,this.j=Ii(this.lb,this),this.l=Date.now()}function oc(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function ac(n,e,t){if("function"==typeof n)t&&(n=Ii(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ii(n.handleEvent,n)}return 2147483647<Number(e)?-1:Bt.setTimeout(n,e||0)}function Wv(n){n.g=ac(()=>{n.g=null,n.i&&(n.i=!1,Wv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Zr(cu,Cr),(vt=cu.prototype).ca=!1,vt.R=null,vt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),li(this,"tick"),this.ca&&(oc(this),this.start()))}},vt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},vt.M=function(){cu.X.M.call(this),oc(this),delete this.g};class PI extends rc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Wv(this)}M(){super.M(),this.g&&(Bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Th(n){rc.call(this),this.h=n,this.g={}}Zr(Th,rc);var qv=[];function Kv(n,e,t,r){Array.isArray(t)||(t&&(qv[0]=t.toString()),t=qv);for(var i=0;i<t.length;i++){var a=DI(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function Zv(n){Hm(n.g,function(e,t){this.g.hasOwnProperty(t)&&xI(e)},n),n.g={}}function Rp(){this.g=!0}function Dh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function NI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return Pl(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Th.prototype.M=function(){Th.X.M.call(this),Zv(this)},Th.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Rp.prototype.Aa=function(){this.g=!1},Rp.prototype.info=function(){};var kl={},Yv=null;function Sh(){return Yv=Yv||new Cr}function Wm(n){bi.call(this,kl.Pa,n)}function xp(n){const e=Sh();li(e,new Wm(e))}function Pp(n,e){bi.call(this,kl.STAT_EVENT,n),this.stat=e}function Yr(n){const e=Sh();li(e,new Pp(e,n))}function qm(n,e){bi.call(this,kl.Qa,n),this.size=e}function Op(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Bt.setTimeout(function(){n()},e)}kl.Pa="serverreachability",Zr(Wm,bi),kl.STAT_EVENT="statevent",Zr(Pp,bi),kl.Qa="timingevent",Zr(qm,bi);var Ah={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Km={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Zm(){}function Ym(){}Zm.prototype.h=null;var Xm,Rh={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Qm(){bi.call(this,"d")}function Mp(){bi.call(this,"c")}function Jm(){}function xh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Th(this),this.O=kI,this.T=new cu(n=Ro?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Xv}function Xv(){this.i=null,this.g="",this.h=!1}Zr(Qm,bi),Zr(Mp,bi),Zr(Jm,Zm),Jm.prototype.g=function(){return new XMLHttpRequest},Jm.prototype.i=function(){return{}},Xm=new Jm;var kI=45e3,e_={},t_={};function Jv(n,e,t){n.K=1,n.v=nw(Fi(e)),n.s=t,n.P=!0,FI(n,null)}function FI(n,e){n.F=Date.now(),Ph(n),n.A=Fi(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Fl(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Xv,n.g=ub(n.l,t?e:null,!n.s),0<n.N&&(n.L=new PI(Ii(n.La,n,n.g),n.N)),Kv(n.S,n.g,"readystatechange",n.ib),e=n.H?Fv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),xp(),function OI(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",h=a.split("&"),_=0;_<h.length;_++){var w=h[_].split("=");if(1<w.length){var C=w[0];w=w[1];var O=C.split("_");c=2<=O.length&&"type"==O[1]?c+(C+"=")+w+"&":c+(C+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function ew(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function n_(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=LI(n,t),i==t_){4==e&&(n.o=4,Yr(14),r=!1),Dh(n.j,n.m,null,"[Incomplete Response]");break}if(i==e_){n.o=4,Yr(15),Dh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Dh(n.j,n.m,i,null),r_(n,i)}ew(n)&&i!=t_&&i!=e_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Yr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),pw(e),e.K=!0,Yr(11))):(Dh(n.j,n.m,t,"[Invalid Chunked Response]"),uc(n),Oh(n))}function LI(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?t_:(t=Number(e.substring(t,r)),isNaN(t)?e_:(r+=1)+t>e.length?t_:(e=e.substr(r,t),n.C=r+t,e))}function Ph(n){n.V=Date.now()+n.O,tw(n,n.O)}function tw(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Op(Ii(n.gb,n),e)}function Np(n){n.B&&(Bt.clearTimeout(n.B),n.B=null)}function Oh(n){0==n.l.G||n.I||ib(n.l,n)}function uc(n){Np(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,oc(n.T),Zv(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function r_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||a_(t.h,n)))if(!n.J&&a_(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;f_(t),Bp(t)}fw(t),Yr(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Op(Ii(t.cb,t),6e3));if(1>=sw(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Ul(t,11)}else if((n.J||t.g==n)&&f_(t),!vh(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.T=w[0],w=w[1],2==t.G)if("c"==w[0]){t.I=w[1],t.ka=w[2];const C=w[3];null!=C&&(t.ma=C,t.j.info("VER="+t.ma));const O=w[4];null!=O&&(t.Ca=O,t.j.info("SVER="+t.Ca));const $=w[5];null!=$&&"number"==typeof $&&0<$&&(t.J=r=1.5*$,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const Z=n.g;if(Z){const ne=Z.g?Z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ne){var a=r.h;a.g||-1==ne.indexOf("spdy")&&-1==ne.indexOf("quic")&&-1==ne.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Ks(a,a.h),a.h=null))}if(r.D){const _e=Z.g?Z.g.getResponseHeader("X-HTTP-Session-Id"):null;_e&&(r.za=_e,rr(r.F,r.D,_e))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((r=t).sa=ab(r,r.H?r.ka:null,r.V),c.J){WI(r.h,c);var h=c,_=r.J;_&&h.setTimeout(_),h.B&&(Np(h),Ph(h)),r.g=c}else nb(r);0<t.i.length&&h_(t)}else"stop"!=w[0]&&"close"!=w[0]||Ul(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Ul(t,7):d_(t):"noop"!=w[0]&&t.l&&t.l.wa(w),t.A=0)}xp()}catch{}}function lu(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Mm(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function i_(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Mm(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function UI(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Mm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(vt=xh.prototype).setTimeout=function(n){this.O=n},vt.ib=function(n){n=n.target;const e=this.L;e&&3==fa(n)?e.l():this.La(n)},vt.La=function(n){try{if(n==this.g)e:{const C=fa(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>C)&&(3!=C||Ro||this.g&&(this.h.h||this.g.fa()||lw(this.g)))){this.I||4!=C||7==e||xp(),Np(this);var t=this.g.aa();this.Y=t;t:if(ew(this)){var r=lw(this.g);n="";var i=r.length,a=4==fa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){uc(this),Oh(this);var c="";break t}this.h.i=new Bt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function MI(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.U,C,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,_=this.g;if((h=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vh(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Yr(12),uc(this),Oh(this);break e}Dh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,r_(this,t)}this.P?(n_(this,C,c),Ro&&this.i&&3==C&&(Kv(this.S,this.T,"tick",this.hb),this.T.start())):(Dh(this.j,this.m,c,null),r_(this,c)),4==C&&uc(this),this.i&&!this.I&&(4==C?ib(this.l,this):(this.i=!1,Ph(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Yr(12)):(this.o=0,Yr(13)),uc(this),Oh(this)}}}catch{}},vt.hb=function(){if(this.g){var n=fa(this.g),e=this.g.fa();this.C<e.length&&(Np(this),n_(this,n,e),this.i&&4!=n&&Ph(this))}},vt.cancel=function(){this.I=!0,uc(this)},vt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function mS(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(xp(),Yr(17)),uc(this),this.o=2,Oh(this)):tw(this,this.V-n)};var VI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function du(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof du){this.h=void 0!==e?e:n.h,Mh(this,n.j),this.s=n.s,this.g=n.g,s_(this,n.m),this.l=n.l,e=n.i;var t=new Nh;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),o_(this,t),this.o=n.o}else n&&(t=String(n).match(VI))?(this.h=!!e,Mh(this,t[1]||"",!0),this.s=kp(t[2]||""),this.g=kp(t[3]||"",!0),s_(this,t[4]),this.l=kp(t[5]||"",!0),o_(this,t[6]||"",!0),this.o=kp(t[7]||"")):(this.h=!!e,this.i=new Nh(null,this.h))}function Fi(n){return new du(n)}function Mh(n,e,t){n.j=t?kp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function s_(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function o_(n,e,t){e instanceof Nh?(n.i=e,function wS(n,e){e&&!n.j&&(cc(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(rw(this,r),Fl(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Fp(e,yS)),n.i=new Nh(e,n.h))}function rr(n,e,t){n.i.set(e,t)}function nw(n){return rr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function kp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Fp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,jI),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function jI(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}du.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Fp(e,BI,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Fp(e,BI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Fp(t,"/"==t.charAt(0)?$I:Ur,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Fp(t,vS)),n.join("")};var BI=/[#\/\?@]/g,Ur=/[#\?:]/g,$I=/[#\?]/g,yS=/[#\?@]/g,vS=/#/g;function Nh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function cc(n){n.g||(n.g=new Map,n.h=0,n.i&&function _S(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function rw(n,e){cc(n),e=kh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function iw(n,e){return cc(n),e=kh(n,e),n.g.has(e)}function Fl(n,e,t){rw(n,e),0<t.length&&(n.i=null,n.g.set(kh(n,e),Ip(t)),n.h+=t.length)}function kh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function zI(n){this.l=n||GI,n=Bt.PerformanceNavigationTiming?0<(n=Bt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Bt.g&&Bt.g.Ga&&Bt.g.Ga()&&Bt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(vt=Nh.prototype).add=function(n,e){cc(this),this.i=null,n=kh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},vt.forEach=function(n,e){cc(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},vt.oa=function(){cc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},vt.W=function(n){cc(this);let e=[];if("string"==typeof n)iw(this,n)&&(e=e.concat(this.g.get(kh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},vt.set=function(n,e){return cc(this),this.i=null,iw(this,n=kh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},vt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},vt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),c=this.W(r);for(r=0;r<c.length;r++){var i=a;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var GI=10;function ES(n){return!!n.h||!!n.g&&n.g.size>=n.j}function sw(n){return n.h?1:n.g?n.g.size:0}function a_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ks(n,e){n.g?n.g.add(e):n.h=e}function WI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function ow(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Ip(n.i)}function Zs(){}function xo(){this.g=new Zs}function Po(n,e,t){const r=t||"";try{lu(n,function(i,a){let c=i;Ep(i)&&(c=Pl(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Lp(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Up(n){this.l=n.ac||null,this.j=n.jb||!1}function u_(n,e){Cr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=aw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}zI.prototype.cancel=function(){if(this.i=ow(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Zs.prototype.stringify=function(n){return Bt.JSON.stringify(n,void 0)},Zs.prototype.parse=function(n){return Bt.JSON.parse(n,void 0)},Zr(Up,Zm),Up.prototype.g=function(){return new u_(this.l,this.j)},Up.prototype.i=function(n){return function(){return n}}({}),Zr(u_,Cr);var aw=0;function KI(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Ll(n){n.readyState=4,n.l=null,n.j=null,n.A=null,hu(n)}function hu(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(vt=u_.prototype).open=function(n,e){if(this.readyState!=aw)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,hu(this)},vt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Bt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},vt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ll(this)),this.readyState=aw},vt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,hu(this)),this.g&&(this.readyState=3,hu(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Bt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;KI(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},vt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ll(this):hu(this),3==this.readyState&&KI(this)}},vt.Va=function(n){this.g&&(this.response=this.responseText=n,Ll(this))},vt.Ua=function(n){this.g&&(this.response=n,Ll(this))},vt.ga=function(){this.g&&Ll(this)},vt.setRequestHeader=function(n,e){this.v.append(n,e)},vt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},vt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(u_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var IS=Bt.JSON.parse;function ir(n){Cr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ZI,this.K=this.L=!1}Zr(ir,Cr);var ZI="",YI=/^https?$/i,QI=["POST","PUT"];function XI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,uw(n),Vp(n)}function uw(n){n.D||(n.D=!0,li(n,"complete"),li(n,"error"))}function cw(n){if(n.h&&typeof Pv<"u"&&(!n.C[1]||4!=fa(n)||2!=n.aa()))if(n.v&&4==fa(n))ac(n.Ha,0,n);else if(li(n,"readystatechange"),4==fa(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(VI)[1]||null;if(!i&&Bt.self&&Bt.self.location){var a=Bt.self.location.protocol;i=a.substr(0,a.length-1)}r=!YI.test(i?i.toLowerCase():"")}t=r}if(t)li(n,"complete"),li(n,"success");else{n.m=6;try{var c=2<fa(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",uw(n)}}finally{Vp(n)}}}function Vp(n,e){if(n.g){jp(n);const t=n.g,r=n.C[0]?yh:null;n.g=null,n.C=null,e||li(n,"ready");try{t.onreadystatechange=r}catch{}}}function jp(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Bt.clearTimeout(n.A),n.A=null)}function fa(n){return n.g?n.g.readyState:0}function lw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case ZI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function dw(n){let e="";return Hm(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function l_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=dw(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):rr(n,e,t))}function Fh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function hw(n){this.Ca=0,this.i=[],this.j=new Rp,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Fh("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Fh("baseRetryDelayMs",5e3,n),this.bb=Fh("retryDelaySeedMs",1e4,n),this.$a=Fh("forwardChannelMaxRetries",2,n),this.ta=Fh("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new zI(n&&n.concurrentRequestLimit),this.Fa=new xo,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function d_(n){if(JI(n),3==n.G){var e=n.U++,t=Fi(n.F);rr(t,"SID",n.I),rr(t,"RID",e),rr(t,"TYPE","terminate"),$p(n,t),(e=new xh(n,n.j,e,void 0)).K=2,e.v=nw(Fi(t)),t=!1,Bt.navigator&&Bt.navigator.sendBeacon&&(t=Bt.navigator.sendBeacon(e.v.toString(),"")),!t&&Bt.Image&&((new Image).src=e.v,t=!0),t||(e.g=ub(e.l,null),e.g.da(e.v)),e.F=Date.now(),Ph(e)}ob(n)}function Bp(n){n.g&&(pw(n),n.g.cancel(),n.g=null)}function JI(n){Bp(n),n.u&&(Bt.clearTimeout(n.u),n.u=null),f_(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Bt.clearTimeout(n.m),n.m=null)}function h_(n){ES(n.h)||n.m||(n.m=!0,Ml(n.Ja,n),n.C=0)}function eb(n,e){var t;t=e?e.m:n.U++;const r=Fi(n.F);rr(r,"SID",n.I),rr(r,"RID",t),rr(r,"AID",n.T),$p(n,r),n.o&&n.s&&l_(r,n.o,n.s),t=new xh(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=tb(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Ks(n.h,t),Jv(t,r,e)}function $p(n,e){n.ia&&Hm(n.ia,function(t,r){rr(e,r,t)}),n.l&&lu({},function(t,r){rr(e,r,t)})}function tb(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Ii(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].h,c.push("ofs="+a)):a=0:c.push("ofs="+a);let h=!0;for(let _=0;_<t;_++){let w=i[_].h;const C=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),h=!1;else try{Po(C,c,"req"+w+"_")}catch{r&&r(C)}}if(h){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function nb(n){n.g||n.u||(n.Z=1,Ml(n.Ia,n),n.A=0)}function fw(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Op(Ii(n.Ia,n),sb(n,n.A)),n.A++,0))}function pw(n){null!=n.B&&(Bt.clearTimeout(n.B),n.B=null)}function rb(n){n.g=new xh(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Fi(n.sa);rr(e,"RID","rpc"),rr(e,"SID",n.I),rr(e,"CI",n.L?"0":"1"),rr(e,"AID",n.T),rr(e,"TYPE","xmlhttp"),$p(n,e),n.o&&n.s&&l_(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=nw(Fi(e)),t.s=null,t.P=!0,FI(t,n)}function f_(n){null!=n.v&&(Bt.clearTimeout(n.v),n.v=null)}function ib(n,e){var t=null;if(n.g==e){f_(n),pw(n),n.g=null;var r=2}else{if(!a_(n.h,e))return;t=e.D,WI(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;li(r=Sh(),new qm(r,t)),h_(n)}else nb(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function bS(n,e){return!(sw(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Op(Ii(n.Ja,n,e),sb(n,n.C)),n.C++,0)))}(n,e)||2==r&&fw(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Ul(n,5);break;case 4:Ul(n,10);break;case 3:Ul(n,6);break;default:Ul(n,2)}}function sb(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Ul(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Ii(n.kb,n);t||(t=new du("//www.google.com/images/cleardot.gif"),Bt.location&&"http"==Bt.location.protocol||Mh(t,"https"),nw(t)),function qI(n,e){const t=new Rp;if(Bt.Image){const r=new Image;r.onload=Nm(Lp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Nm(Lp,t,r,"TestLoadImage: error",!1,e),r.onabort=Nm(Lp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Nm(Lp,t,r,"TestLoadImage: timeout",!1,e),Bt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Yr(2);n.G=0,n.l&&n.l.va(e),ob(n),JI(n)}function ob(n){if(n.G=0,n.la=[],n.l){const e=ow(n.h);(0!=e.length||0!=n.i.length)&&(EI(n.la,e),EI(n.la,n.i),n.h.i.length=0,Ip(n.i),n.i.length=0),n.l.ua()}}function ab(n,e,t){var r=t instanceof du?Fi(t):new du(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),s_(r,r.m);else{var i=Bt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new du(null,void 0);r&&Mh(a,r),e&&(a.g=e),i&&s_(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&rr(r,t,e),rr(r,"VER",n.ma),$p(n,r),r}function ub(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ir(t&&n.Da&&!n.ra?new Up({jb:!0}):n.ra)).Ka(n.H),e}function cb(){}function Hp(){if(xl&&!(10<=Number(hS)))throw Error("Environmental error: no available transport.")}function is(n,e){Cr.call(this),this.g=new hw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!vh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!vh(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Vl(this)}function gw(n){Qm.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function mw(){Mp.call(this),this.status=1}function Vl(n){this.g=n}(vt=ir.prototype).Ka=function(n){this.L=n},vt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Xm.g(),this.C=function Qv(n){return n.h||(n.h=n.i())}(this.u?this.u:Xm),this.g.onreadystatechange=Ii(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void XI(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Bt.FormData&&n instanceof Bt.FormData,!(0<=wI(QI,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,c]of t)this.g.setRequestHeader(a,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{jp(this),0<this.B&&((this.K=function c_(n){return xl&&function Tp(){return function bI(n){var e=lS;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=bp(String(Vm)).split("."),t=bp("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",a=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=II(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||II(0==i[2].length,0==a[2].length)||II(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ii(this.qa,this)):this.A=ac(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){XI(this,a)}},vt.qa=function(){typeof Pv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,li(this,"timeout"),this.abort(8))},vt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,li(this,"complete"),li(this,"abort"),Vp(this))},vt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vp(this,!0)),ir.X.M.call(this)},vt.Ha=function(){this.s||(this.F||this.v||this.l?cw(this):this.fb())},vt.fb=function(){cw(this)},vt.aa=function(){try{return 2<fa(this)?this.g.status:-1}catch{return-1}},vt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},vt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),IS(e)}},vt.Ea=function(){return this.m},vt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(vt=hw.prototype).ma=8,vt.G=1,vt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new xh(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=Fv(a),zm(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=tb(this,i,e),rr(t=Fi(this.F),"RID",n),rr(t,"CVER",22),this.D&&rr(t,"X-HTTP-Session-Id",this.D),$p(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(dw(a)))+"&"+e:this.o&&l_(t,this.o,a)),Ks(this.h,i),this.Ya&&rr(t,"TYPE","init"),this.O?(rr(t,"$req",e),rr(t,"SID","null"),i.Z=!0,Jv(i,t,null)):Jv(i,t,e),this.G=2}}else 3==this.G&&(n?eb(this,n):0==this.i.length||ES(this.h)||eb(this))},vt.Ia=function(){if(this.u=null,rb(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Op(Ii(this.eb,this),n)}},vt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Yr(10),Bp(this),rb(this))},vt.cb=function(){null!=this.v&&(this.v=null,Bp(this),fw(this),Yr(19))},vt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Yr(2)):(this.j.info("Failed to ping google.com"),Yr(1))},(vt=cb.prototype).xa=function(){},vt.wa=function(){},vt.va=function(){},vt.ua=function(){},vt.Ra=function(){},Hp.prototype.g=function(n,e){return new is(n,e)},Zr(is,Cr),is.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Yr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=ab(n,null,n.V),h_(n)},is.prototype.close=function(){d_(this.g)},is.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Pl(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&h_(e)},is.prototype.M=function(){this.g.l=null,delete this.j,d_(this.g),delete this.g,is.X.M.call(this)},Zr(gw,Qm),Zr(mw,Mp),Zr(Vl,cb),Vl.prototype.xa=function(){li(this.g,"a")},Vl.prototype.wa=function(n){li(this.g,new gw(n))},Vl.prototype.va=function(n){li(this.g,new mw)},Vl.prototype.ua=function(){li(this.g,"b")},Hp.prototype.createWebChannel=Hp.prototype.g,is.prototype.send=is.prototype.u,is.prototype.open=is.prototype.m,is.prototype.close=is.prototype.close,Ah.NO_ERROR=0,Ah.TIMEOUT=8,Ah.HTTP_ERROR=6,Km.COMPLETE="complete",Ym.EventType=Rh,Rh.OPEN="a",Rh.CLOSE="b",Rh.ERROR="c",Rh.MESSAGE="d",Cr.prototype.listen=Cr.prototype.N,ir.prototype.listenOnce=ir.prototype.O,ir.prototype.getLastError=ir.prototype.Oa,ir.prototype.getLastErrorCode=ir.prototype.Ea,ir.prototype.getStatus=ir.prototype.aa,ir.prototype.getResponseJson=ir.prototype.Sa,ir.prototype.getResponseText=ir.prototype.fa,ir.prototype.send=ir.prototype.da,ir.prototype.setWithCredentials=ir.prototype.Ka;var lb=au.createWebChannelTransport=function(){return new Hp},db=au.getStatEventTarget=function(){return Sh()},p_=au.ErrorCode=Ah,hb=au.EventType=Km,fb=au.Event=kl,_w=au.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},jl=au.FetchXmlHttpFactory=Up,g_=au.WebChannel=Ym,CS=au.XhrIo=ir;const Bl="@firebase/firestore";class di{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}di.UNAUTHENTICATED=new di(null),di.GOOGLE_CREDENTIALS=new di("google-credentials-uid"),di.FIRST_PARTY=new di("first-party-uid"),di.MOCK_USER=new di("mock-user");let lc="9.18.0";const $l=new lr.Yd("@firebase/firestore");function m_(){return $l.logLevel}function Be(n,...e){if($l.logLevel<=lr.in.DEBUG){const t=e.map(yw);$l.debug(`Firestore (${lc}): ${n}`,...t)}}function it(n,...e){if($l.logLevel<=lr.in.ERROR){const t=e.map(yw);$l.error(`Firestore (${lc}): ${n}`,...t)}}function Hl(n,...e){if($l.logLevel<=lr.in.WARN){const t=e.map(yw);$l.warn(`Firestore (${lc}): ${n}`,...t)}}function yw(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function lt(n="Unexpected state"){const e=`FIRESTORE (${lc}) INTERNAL ASSERTION FAILED: `+n;throw it(e),new Error(e)}function ht(n,e){n||lt()}function Ze(n,e){return n}const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends z.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class vw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(di.UNAUTHENTICATED))}shutdown(){}}class DS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mb{constructor(e){this.t=e,this.currentUser=di.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let c=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Qr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const w=c;e.enqueueRetryable((0,be.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Qr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ht("string"==typeof r.accessToken),new vw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ht(null===e||"string"==typeof e),new di(e)}}class _b{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=di.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ht(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class yb{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new _b(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(di.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ww{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SS{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.A;return this.A=a.token,Be("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ht("string"==typeof t.token),this.A=t.token,new ww(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function AS(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Lh{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=AS(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function $t(n,e){return n<e?-1:n>e?1:0}function Uh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function vb(n){return n+"\0"}class bn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return bn.fromMillis(Date.now())}static fromDate(e){return bn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new bn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new bn(0,0))}static max(){return new bt(new bn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Vh{constructor(e,t,r){void 0===t?t=0:t>e.length&&lt(),void 0===r?r=e.length-t:r>e.length-t&&lt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Vh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class an extends Vh{construct(e,t,r){return new an(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new an(t)}static emptyPath(){return new an([])}}const RS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nn extends Vh{construct(e,t,r){return new Nn(e,t,r)}static isValidIdentifier(e){return RS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Nn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ae(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Ae(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Ae(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(a(),i++)}if(a(),c)throw new Ae(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nn(t)}static emptyPath(){return new Nn([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(an.fromString(e))}static fromName(e){return new Ke(an.fromString(e).popFirst(5))}static empty(){return new Ke(an.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===an.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return an.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new an(e.slice()))}}class __{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Ew(n){return n.fields.find(e=>2===e.kind)}function zl(n){return n.fields.filter(e=>2!==e.kind)}__.UNKNOWN_ID=-1;class zp{constructor(e,t){this.fieldPath=e,this.kind=t}}class Gp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Gp(0,Ds.min())}}function Iw(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=bt.fromTimestamp(1e9===r?new bn(t+1,0):new bn(t,r));return new Ds(i,Ke.empty(),e)}function Ib(n){return new Ds(n.readTime,n.key,-1)}class Ds{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ds(bt.min(),Ke.empty(),-1)}static max(){return new Ds(bt.max(),Ke.empty(),-1)}}function bb(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:$t(n.largestBatchId,e.largestBatchId))}const xS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Gl(n){return y_.apply(this,arguments)}function y_(){return y_=(0,be.Z)(function*(n){if(n.code!==ye.FAILED_PRECONDITION||n.message!==xS)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),y_.apply(this,arguments)}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.reject(t)}static resolve(e){return new pe((t,r)=>{t(e)})}static reject(e){return new pe((t,r)=>{r(e)})}static waitFor(e){return new pe((t,r)=>{let i=0,a=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++a,c&&a===i&&t()},_=>r(_))}),c=!0,a===i&&t()})}static or(e){let t=pe.resolve(!1);for(const r of e)t=t.next(i=>i?pe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new pe((r,i)=>{const a=e.length,c=new Array(a);let h=0;for(let _=0;_<a;_++){const w=_;t(e[w]).next(C=>{c[w]=C,++h,h===a&&r(c)},C=>i(C))}})}static doWhile(e,t){return new pe((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class v_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Qr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new fu(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=Db(r.target.error);this.P.reject(new fu(e,i))}}static open(e,t,r,i){try{return new v_(t,e.transaction(i,r))}catch(a){throw new fu(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new OS(t)}}class Oo{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Oo.D((0,z.z$)())&&it("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),Wl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,z.hl)())return!1;if(Oo.N())return!0;const e=(0,z.z$)(),t=Oo.D(e),r=0<t&&t<10,i=Oo.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.$)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,be.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new fu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new Ae(ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ae(ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new fu(e,h))},a.onupgradeneeded=c=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.F(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,be.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.O(e);const _=v_.open(a.db,e,c?"readonly":"readwrite",r),w=i(_).next(C=>(_.V(),C)).catch(C=>(_.abort(C),pe.reject(C))).toPromise();return w.catch(()=>{}),yield _.v,w}catch(_){const w=_,C="FirebaseError"!==w.name&&h<3;if(Be("SimpleDb","Transaction failed with error:",w.message,"Retrying:",C),a.close(),!C)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Cb{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Wl(this.q.delete())}}class fu extends Ae{constructor(e,t){super(ye.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function dc(n){return"IndexedDbTransactionError"===n.name}class OS{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Wl(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),Wl(this.store.add(e))}get(e){return Wl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),Wl(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),Wl(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(c,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new pe((a,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new pe((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Y(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Z=!1;const i=this.cursor(r);return this.H(i,(a,c,h)=>h.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new pe((r,i)=>{t.onerror=a=>{const c=Db(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}H(e,t){const r=[];return new pe((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const _=new Cb(h),w=t(h.primaryKey,h.value,_);if(w instanceof pe){const C=w.catch(O=>(_.done(),pe.reject(O)));r.push(C)}_.isDone?i():null===_.G?h.continue():h.continue(_.G)}}).next(()=>pe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Wl(n){return new pe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Db(r.target.error);t(i)}})}let Tb=!1;function Db(n){const e=Oo.D((0,z.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Tb||(Tb=!0,setTimeout(()=>{throw r},0)),r}}return n}class MS{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Be("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,be.Z)(function*(){t.task=null;try{Be("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){dc(r)?Be("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Gl(r)}yield t.nt(6e4)}))}}class Sb{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,be.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return pe.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Be("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,i).next(h=>{i-=h,r.add(c)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(i,a)).next(h=>(Be("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const c=Ib(a);bb(c,r)>0&&(r=c)}),new Ds(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ss=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class Ab{constructor(e,t,r,i,a,c,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=_}}class hc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new hc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof hc&&e.projectId===this.projectId&&e.database===this.database}}function bw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Kl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Cw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Wp(n){return null==n}function Zl(n){return 0===n&&1/n==-1/0}function Rb(n){return"number"==typeof n&&Number.isInteger(n)&&!Zl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class xb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw i instanceof DOMException?new xb("Invalid base64 string: "+i):i}}(e);return new Vr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Vr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vr.EMPTY_BYTE_STRING=new Vr("");const FS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fc(n){if(ht(!!n),"string"==typeof n){let e=0;const t=FS.exec(n);if(ht(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qn(n.seconds),nanos:qn(n.nanos)}}function qn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Yl(n){return"string"==typeof n?Vr.fromBase64String(n):Vr.fromUint8Array(n)}function w_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ob(n){const e=n.mapValue.fields.__previous_value__;return w_(e)?Ob(e):e}function qp(n){const e=fc(n.mapValue.fields.__local_write_time__.timestampValue);return new bn(e.seconds,e.nanos)}const pc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},E_={nullValue:"NULL_VALUE"};function Ql(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?w_(n)?4:Sw(n)?9007199254740991:10:lt()}function pa(n,e){if(n===e)return!0;const t=Ql(n);if(t!==Ql(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return qp(n).isEqual(qp(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=fc(r.timestampValue),c=fc(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Yl(n.bytesValue).isEqual(Yl(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return qn(r.geoPointValue.latitude)===qn(i.geoPointValue.latitude)&&qn(r.geoPointValue.longitude)===qn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return qn(r.integerValue)===qn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=qn(r.doubleValue),c=qn(i.doubleValue);return a===c?Zl(a)===Zl(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return Uh(n.arrayValue.values||[],e.arrayValue.values||[],pa);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(bw(a)!==bw(c))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===c[h]||!pa(a[h],c[h])))return!1;return!0}(n,e);default:return lt()}var i}function Kp(n,e){return void 0!==(n.values||[]).find(t=>pa(t,e))}function gc(n,e){if(n===e)return 0;const t=Ql(n),r=Ql(e);if(t!==r)return $t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $t(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=qn(i.integerValue||i.doubleValue),h=qn(a.integerValue||a.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return Tw(n.timestampValue,e.timestampValue);case 4:return Tw(qp(n),qp(e));case 5:return $t(n.stringValue,e.stringValue);case 6:return function(i,a){const c=Yl(i),h=Yl(a);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),h=a.split("/");for(let _=0;_<c.length&&_<h.length;_++){const w=$t(c[_],h[_]);if(0!==w)return w}return $t(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=$t(qn(i.latitude),qn(a.latitude));return 0!==c?c:$t(qn(i.longitude),qn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],h=a.values||[];for(let _=0;_<c.length&&_<h.length;++_){const w=gc(c[_],h[_]);if(w)return w}return $t(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===pc.mapValue&&a===pc.mapValue)return 0;if(i===pc.mapValue)return 1;if(a===pc.mapValue)return-1;const c=i.fields||{},h=Object.keys(c),_=a.fields||{},w=Object.keys(_);h.sort(),w.sort();for(let C=0;C<h.length&&C<w.length;++C){const O=$t(h[C],w[C]);if(0!==O)return O;const $=gc(c[h[C]],_[w[C]]);if(0!==$)return $}return $t(h.length,w.length)}(n.mapValue,e.mapValue);default:throw lt()}}function Tw(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return $t(n,e);const t=fc(n),r=fc(e),i=$t(t.seconds,r.seconds);return 0!==i?i:$t(t.nanos,r.nanos)}function Xl(n){return Dw(n)}function Dw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=fc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Yl(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=Dw(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const h of i)c?c=!1:a+=",",a+=`${h}:${Dw(r.fields[h])}`;return a+"}"}(n.mapValue):lt();var e}function Jl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function I_(n){return!!n&&"integerValue"in n}function Zp(n){return!!n&&"arrayValue"in n}function Mb(n){return!!n&&"nullValue"in n}function Nb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jh(n){return!!n&&"mapValue"in n}function ed(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Kl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ed(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ed(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Sw(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Aw(n){return"nullValue"in n?E_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Jl(hc.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:lt()}function LS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Jl(hc.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?pc:lt()}function kb(n,e){const t=gc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function b_(n,e){const t=gc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class mc{constructor(e,t){this.position=e,this.inclusive=t}}function Fb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?Ke.comparator(Ke.fromName(c.referenceValue),t.key):gc(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function td(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pa(n.position[t],e.position[t]))return!1;return!0}class Rw{}class tn extends Rw{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Lb(e,t,r):"array-contains"===t?new US(e,r):"in"===t?new Bb(e,r):"not-in"===t?new VS(e,r):"array-contains-any"===t?new $b(e,r):new tn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Ub(e,r):new Vb(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(gc(t,this.value)):null!==t&&Ql(this.value)===Ql(t)&&this.matchesComparison(gc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Cn extends Rw{constructor(e,t){super(),this.filters=e,this.op=t,this.ft=null}static create(e,t){return new Cn(e,t)}matches(e){return nd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(t=>t.isInequality());return null!==e?e.field:null}dt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function nd(n){return"and"===n.op}function Yp(n){return"or"===n.op}function xw(n){return C_(n)&&nd(n)}function C_(n){for(const e of n.filters)if(e instanceof Cn)return!1;return!0}function Pw(n){if(n instanceof tn)return n.field.canonicalString()+n.op.toString()+Xl(n.value);if(xw(n))return n.filters.map(e=>Pw(e)).join(",");{const e=n.filters.map(t=>Pw(t)).join(",");return`${n.op}(${e})`}}function Ow(n,e){return n instanceof tn?(t=n,(r=e)instanceof tn&&t.op===r.op&&t.field.isEqual(r.field)&&pa(t.value,r.value)):n instanceof Cn?function(t,r){return r instanceof Cn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,c)=>i&&Ow(a,r.filters[c]),!0)}(n,e):void lt();var t,r}function T_(n,e){const t=n.filters.concat(e);return Cn.create(t,n.op)}function Mw(n){return n instanceof tn?`${(e=n).field.canonicalString()} ${e.op} ${Xl(e.value)}`:n instanceof Cn?function(e){return e.op.toString()+" {"+e.getFilters().map(Mw).join(" ,")+"}"}(n):"Filter";var e}class Lb extends tn{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ub extends tn{constructor(e,t){super(e,"in",t),this.keys=jb(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Vb extends tn{constructor(e,t){super(e,"not-in",t),this.keys=jb(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function jb(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class US extends tn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zp(t)&&Kp(t.arrayValue,this.value)}}class Bb extends tn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Kp(this.value.arrayValue,t)}}class VS extends tn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Kp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Kp(this.value.arrayValue,t)}}class $b extends tn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Kp(this.value.arrayValue,r))}}class Qp{constructor(e,t="asc"){this.field=e,this.dir=t}}function Hb(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class fr{constructor(e,t){this.comparator=e,this.root=t||Ti.EMPTY}insert(e,t){return new fr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ti.BLACK,null,null))}remove(e){return new fr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ti.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new D_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new D_(this.root,e,this.comparator,!1)}getReverseIterator(){return new D_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new D_(this.root,e,this.comparator,!0)}}class D_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ti{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Ti.RED,this.left=i??Ti.EMPTY,this.right=a??Ti.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ti(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ti.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ti.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ti.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ti.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}Ti.EMPTY=null,Ti.RED=!0,Ti.BLACK=!1,Ti.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ti(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Tn{constructor(e){this.comparator=e,this.data=new fr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zb(this.data.getIterator())}getIteratorFrom(e){return new zb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Tn(this.comparator);return t.data=e,t}}class zb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Bh(n){return n.hasNext()?n.getNext():void 0}class Li{constructor(e){this.fields=e,e.sort(Nn.comparator)}static empty(){return new Li([])}unionWith(e){let t=new Tn(Nn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Li(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Xr{constructor(e){this.value=e}static empty(){return new Xr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!jh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ed(t)}setAll(e){let t=Nn.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=ed(c):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());jh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];jh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Kl(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Xr(ed(this.value))}}function Gb(n){const e=[];return Kl(n.fields,(t,r)=>{const i=new Nn([t]);if(jh(r)){const a=Gb(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new Li(e)}class jn{constructor(e,t,r,i,a,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new jn(e,0,bt.min(),bt.min(),bt.min(),Xr.empty(),0)}static newFoundDocument(e,t,r,i){return new jn(e,1,t,bt.min(),r,i,0)}static newNoDocument(e,t){return new jn(e,2,t,bt.min(),bt.min(),Xr.empty(),0)}static newUnknownDocument(e,t){return new jn(e,3,t,bt.min(),bt.min(),Xr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(bt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class jS{constructor(e,t=null,r=[],i=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=h,this._t=null}}function Nw(n,e=null,t=[],r=[],i=null,a=null,c=null){return new jS(n,e,t,r,i,a,c)}function rd(n){const e=Ze(n);if(null===e._t){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Pw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Wp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Xl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Xl(r)).join(",")),e._t=t}return e._t}function Xp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Hb(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ow(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!td(n.startAt,e.startAt)&&td(n.endAt,e.endAt)}function S_(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function _c(n,e){return n.filters.filter(t=>t instanceof tn&&t.field.isEqual(e))}function kw(n,e,t){let r=E_,i=!0;for(const a of _c(n,e)){let c=E_,h=!0;switch(a.op){case"<":case"<=":c=Aw(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,h=!1;break;case"!=":case"not-in":c=E_}kb({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];kb({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function Fw(n,e,t){let r=pc,i=!0;for(const a of _c(n,e)){let c=pc,h=!0;switch(a.op){case">=":case">":c=LS(a.value),h=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,h=!1;break;case"!=":case"not-in":c=pc}b_({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];b_({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class ga{constructor(e,t=null,r=[],i=[],a=null,c="F",h=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=_,this.wt=null,this.gt=null}}function Lw(n,e,t,r,i,a,c,h){return new ga(n,e,t,r,i,a,c,h)}function id(n){return new ga(n)}function Wb(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Uw(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Vw(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function jw(n){return null!==n.collectionGroup}function sd(n){const e=Ze(n);if(null===e.wt){e.wt=[];const t=Vw(e),r=Uw(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Qp(t)),e.wt.push(new Qp(Nn.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Qp(Nn.keyField(),a))}}}return e.wt}function Ui(n){const e=Ze(n);if(!e.gt)if("F"===e.limitType)e.gt=Nw(e.path,e.collectionGroup,sd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of sd(e))t.push(new Qp(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new mc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new mc(e.startAt.position,e.startAt.inclusive):null;e.gt=Nw(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.gt}function Bw(n,e){e.getFirstInequalityField(),Vw(n);const t=n.filters.concat([e]);return new ga(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function A_(n,e,t){return new ga(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pu(n,e){return Xp(Ui(n),Ui(e))&&n.limitType===e.limitType}function qb(n){return`${rd(Ui(n))}|lt:${n.limitType}`}function Jp(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Mw(r)).join(", ")}]`),Wp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Xl(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Xl(r)).join(",")),`Target(${t})`}(Ui(n))}; limitType=${n.limitType})`}function ss(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ke.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of sd(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const h=Fb(i,a,c);return i.inclusive?h<=0:h<0}(t.startAt,sd(t),r)||t.endAt&&!function(i,a,c){const h=Fb(i,a,c);return i.inclusive?h>=0:h>0}(t.endAt,sd(t),r)));var t,r}function Kb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function R_(n){return(e,t)=>{let r=!1;for(const i of sd(n)){const a=eg(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function eg(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(i,a,c){const h=a.data.field(i),_=c.data.field(i);return null!==h&&null!==_?gc(h,_):lt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return lt()}}function Zb(n,e){if(n.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zl(e)?"-0":e}}function Yb(n){return{integerValue:""+n}}function Qb(n,e){return Rb(e)?Yb(e):Zb(n,e)}class od{constructor(){this._=void 0}}function x_(n,e,t){return n instanceof ad?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof yc?P_(n,e):n instanceof vc?O_(n,e):function(r,i){const a=Xb(r,i),c=$w(a)+$w(r.It);return I_(a)&&I_(r.It)?Yb(c):Zb(r.Tt,c)}(n,e)}function BS(n,e,t){return n instanceof yc?P_(n,e):n instanceof vc?O_(n,e):t}function Xb(n,e){return n instanceof wc?I_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ad extends od{}class yc extends od{constructor(e){super(),this.elements=e}}function P_(n,e){const t=M_(e);for(const r of n.elements)t.some(i=>pa(i,r))||t.push(r);return{arrayValue:{values:t}}}class vc extends od{constructor(e){super(),this.elements=e}}function O_(n,e){let t=M_(e);for(const r of n.elements)t=t.filter(i=>!pa(i,r));return{arrayValue:{values:t}}}class wc extends od{constructor(e,t){super(),this.Tt=e,this.It=t}}function $w(n){return qn(n.integerValue||n.doubleValue)}function M_(n){return Zp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ud{constructor(e,t){this.field=e,this.transform=t}}class HS{constructor(e,t){this.version=e,this.transformResults=t}}class Kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kn}static exists(e){return new Kn(void 0,e)}static updateTime(e){return new Kn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function N_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class tg{}function k_(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new zh(n.key,Kn.none()):new Hh(n.key,n.data,Kn.none());{const t=n.data,r=Xr.empty();let i=new Tn(Nn.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),i=i.add(a)}return new ma(n.key,r,new Li(i.toArray()),Kn.none())}}function Jb(n,e,t){n instanceof Hh?function(r,i,a){const c=r.value.clone(),h=tC(r.fieldTransforms,i,a.transformResults);c.setAll(h),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof ma?function(r,i,a){if(!N_(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=tC(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(zw(r)),h.setAll(c),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function $h(n,e,t,r){return n instanceof Hh?function(i,a,c,h){if(!N_(i.precondition,a))return c;const _=i.value.clone(),w=Gw(i.fieldTransforms,h,a);return _.setAll(w),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof ma?function(i,a,c,h){if(!N_(i.precondition,a))return c;const _=Gw(i.fieldTransforms,h,a),w=a.data;return w.setAll(zw(i)),w.setAll(_),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(C=>C.field))}(n,e,t,r):(c=t,N_(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c);var a,c}function eC(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Xb(r.transform,i||null);null!=a&&(null===t&&(t=Xr.empty()),t.set(r.field,a))}return t||null}function Hw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Uh(t,r,(i,a)=>function $S(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof yc&&r instanceof yc||t instanceof vc&&r instanceof vc?Uh(t.elements,r.elements,pa):t instanceof wc&&r instanceof wc?pa(t.It,r.It):t instanceof ad&&r instanceof ad);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Hh extends tg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ma extends tg{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function zw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function tC(n,e,t){const r=new Map;ht(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,h=e.data.field(a.field);r.set(a.field,BS(c,h,t[i]))}return r}function Gw(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,x_(a,c,e))}return r}class zh extends tg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hi extends tg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Gh{constructor(e){this.count=e}}var Tr,cn;function zS(n){switch(n){default:return lt();case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0}}function GS(n){if(void 0===n)return it("GRPC error has no .code"),ye.UNKNOWN;switch(n){case Tr.OK:return ye.OK;case Tr.CANCELLED:return ye.CANCELLED;case Tr.UNKNOWN:return ye.UNKNOWN;case Tr.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case Tr.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case Tr.INTERNAL:return ye.INTERNAL;case Tr.UNAVAILABLE:return ye.UNAVAILABLE;case Tr.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case Tr.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case Tr.NOT_FOUND:return ye.NOT_FOUND;case Tr.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case Tr.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case Tr.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case Tr.ABORTED:return ye.ABORTED;case Tr.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case Tr.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case Tr.DATA_LOSS:return ye.DATA_LOSS;default:return lt()}}(cn=Tr||(Tr={}))[cn.OK=0]="OK",cn[cn.CANCELLED=1]="CANCELLED",cn[cn.UNKNOWN=2]="UNKNOWN",cn[cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cn[cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cn[cn.NOT_FOUND=5]="NOT_FOUND",cn[cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",cn[cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",cn[cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",cn[cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cn[cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cn[cn.ABORTED=10]="ABORTED",cn[cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",cn[cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",cn[cn.INTERNAL=13]="INTERNAL",cn[cn.UNAVAILABLE=14]="UNAVAILABLE",cn[cn.DATA_LOSS=15]="DATA_LOSS";class gu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Kl(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return Cw(this.inner)}size(){return this.innerSize}}const Ww=new fr(Ke.comparator);function Jr(){return Ww}const nC=new fr(Ke.comparator);function cd(...n){let e=nC;for(const t of n)e=e.insert(t.key,t);return e}function rC(n){let e=nC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Mo(){return ng()}function iC(){return ng()}function ng(){return new gu(n=>n.toString(),(n,e)=>n.isEqual(e))}const WS=new fr(Ke.comparator),qw=new Tn(Ke.comparator);function Gt(...n){let e=qw;for(const t of n)e=e.add(t);return e}const sC=new Tn($t);function ld(){return sC}class dd{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,F_.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new dd(bt.min(),i,ld(),Jr(),Gt())}}class F_{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new F_(r,t,Gt(),Gt(),Gt())}}class rg{constructor(e,t,r,i){this.Et=e,this.removedTargetIds=t,this.key=r,this.At=i}}class oC{constructor(e,t){this.targetId=e,this.Rt=t}}class Kw{constructor(e,t,r=Vr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class hd{constructor(){this.Pt=0,this.vt=L_(),this.bt=Vr.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.bt}get Dt(){return 0!==this.Pt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}Nt(){let e=Gt(),t=Gt(),r=Gt();return this.vt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:lt()}}),new F_(this.bt,this.Vt,e,t,r)}kt(){this.St=!1,this.vt=L_()}$t(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ot(){this.Pt+=1}Ft(){this.Pt-=1}Bt(){this.St=!0,this.Vt=!0}}class qS{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=Jr(),this.Kt=Zw(),this.Gt=new Tn($t)}Qt(e){for(const t of e.Et)e.At&&e.At.isFoundDocument()?this.jt(t,e.At):this.zt(t,e.key,e.At);for(const t of e.removedTargetIds)this.zt(t,e.key,e.At)}Wt(e){this.forEachTarget(e,t=>{const r=this.Ht(t);switch(e.state){case 0:this.Jt(t)&&r.xt(e.resumeToken);break;case 1:r.Ft(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.Ft(),r.Dt||this.removeTarget(t);break;case 3:this.Jt(t)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(t)&&(this.Yt(t),r.xt(e.resumeToken));break;default:lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((r,i)=>{this.Jt(i)&&t(i)})}Zt(e){const t=e.targetId,r=e.Rt.count,i=this.Xt(t);if(i){const a=i.target;if(S_(a))if(0===r){const c=new Ke(a.path);this.zt(t,c,jn.newNoDocument(c,bt.min()))}else ht(1===r);else this.te(t)!==r&&(this.Yt(t),this.Gt=this.Gt.add(t))}}ee(e){const t=new Map;this.qt.forEach((a,c)=>{const h=this.Xt(c);if(h){if(a.current&&S_(h.target)){const _=new Ke(h.target.path);null!==this.Ut.get(_)||this.ne(c,_)||this.zt(c,_,jn.newNoDocument(_,e))}a.Ct&&(t.set(c,a.Nt()),a.kt())}});let r=Gt();this.Kt.forEach((a,c)=>{let h=!0;c.forEachWhile(_=>{const w=this.Xt(_);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.Ut.forEach((a,c)=>c.setReadTime(e));const i=new dd(e,t,this.Gt,this.Ut,r);return this.Ut=Jr(),this.Kt=Zw(),this.Gt=new Tn($t),i}jt(e,t){if(!this.Jt(e))return;const r=this.ne(e,t.key)?2:0;this.Ht(e).$t(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}zt(e,t,r){if(!this.Jt(e))return;const i=this.Ht(e);this.ne(e,t)?i.$t(t,1):i.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.qt.delete(e)}te(e){const t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Ht(e).Ot()}Ht(e){let t=this.qt.get(e);return t||(t=new hd,this.qt.set(e,t)),t}se(e){let t=this.Kt.get(e);return t||(t=new Tn($t),this.Kt=this.Kt.insert(e,t)),t}Jt(e){const t=null!==this.Xt(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new hd),this.Lt.getRemoteKeysForTarget(e).forEach(t=>{this.zt(e,t,null)})}ne(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}function Zw(){return new fr(Ke.comparator)}function L_(){return new fr(Ke.comparator)}const ZP={asc:"ASCENDING",desc:"DESCENDING"},KS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YP={and:"AND",or:"OR"};class ZS{constructor(e,t){this.databaseId=e,this.yt=t}}function Wh(n,e){return n.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aC(n,e){return n.yt?e.toBase64():e.toUint8Array()}function uC(n,e){return Wh(n,e.toTimestamp())}function pr(n){return ht(!!n),bt.fromTimestamp(function(e){const t=fc(e);return new bn(t.seconds,t.nanos)}(n))}function Yw(n,e){return(t=n,new an(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Qw(n){const e=an.fromString(n);return ht(s0(e)),e}function qh(n,e){return Yw(n.databaseId,e.path)}function _a(n,e){const t=Qw(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(e0(t))}function Xw(n,e){return Yw(n.databaseId,e)}function Jw(n){const e=Qw(n);return 4===e.length?an.emptyPath():e0(e)}function ig(n){return new an(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function e0(n){return ht(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function t0(n,e,t){return{name:qh(n,e),fields:t.value.mapValue.fields}}function n0(n,e,t){const r=_a(n,e.name),i=pr(e.updateTime),a=e.createTime?pr(e.createTime):bt.min(),c=new Xr({mapValue:{fields:e.fields}}),h=jn.newFoundDocument(r,i,a,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function sg(n,e){let t;if(e instanceof Hh)t={update:t0(n,e.key,e.value)};else if(e instanceof zh)t={delete:qh(n,e.key)};else if(e instanceof ma)t={update:t0(n,e.key,e.data),updateMask:U_(e.fieldMask)};else{if(!(e instanceof hi))return lt();t={verify:qh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof ad)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof yc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof vc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof wc)return{fieldPath:a.field.canonicalString(),increment:c.It};throw lt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:uC(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:lt()),t;var i}function lC(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Kn.updateTime(pr(i.updateTime)):void 0!==i.exists?Kn.exists(i.exists):Kn.none():Kn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let h=null;"setToServerValue"in c?(ht("REQUEST_TIME"===c.setToServerValue),h=new ad):"appendMissingElements"in c?h=new yc(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new vc(c.removeAllFromArray.values||[]):"increment"in c?h=new wc(a,c.increment):lt();const _=Nn.fromServerFormat(c.fieldPath);return new ud(_,h)}(n,i)):[];var i;if(e.update){const i=_a(n,e.update.name),a=new Xr({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Li((e.updateMask.fieldPaths||[]).map(w=>Nn.fromServerFormat(w)));return new ma(i,a,c,t,r)}return new Hh(i,a,t,r)}if(e.delete){const i=_a(n,e.delete);return new zh(i,t)}if(e.verify){const i=_a(n,e.verify);return new hi(i,t)}return lt()}function QS(n,e){return{documents:[Xw(n,e.path)]}}function hC(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Xw(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Xw(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0!==_.length)return r0(Cn.create(_,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:No((C=w).field),direction:XP(C.dir)};var C})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=(w=e.limit,n.yt||Wp(w)?w:{value:w});var w,h,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function XS(n){let e=Jw(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ht(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let a=[];t.where&&(a=function(C){const O=JS(C);return O instanceof Cn&&xw(O)?O.getFilters():[O]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(C=>{return new Qp(og((O=C).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let h=null;t.limit&&(h=function(C){let O;return O="object"==typeof C?C.value:C,Wp(O)?null:O}(t.limit));let _=null;var C;t.startAt&&(_=new mc((C=t.startAt).values||[],!!C.before));let w=null;return t.endAt&&(w=function(C){return new mc(C.values||[],!C.before)}(t.endAt)),Lw(e,i,c,a,h,"F",_,w)}function JS(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=og(e.unaryFilter.field);return tn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=og(e.unaryFilter.field);return tn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=og(e.unaryFilter.field);return tn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=og(e.unaryFilter.field);return tn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}(n):void 0!==n.fieldFilter?tn.create(og((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Cn.create(e.compositeFilter.filters.map(t=>JS(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return lt()}}(e.compositeFilter.op))}(n):lt();var e}function XP(n){return ZP[n]}function JP(n){return KS[n]}function eO(n){return YP[n]}function No(n){return{fieldPath:n.canonicalString()}}function og(n){return Nn.fromServerFormat(n.fieldPath)}function r0(n){return n instanceof tn?function(e){if("=="===e.op){if(Nb(e.value))return{unaryFilter:{field:No(e.field),op:"IS_NAN"}};if(Mb(e.value))return{unaryFilter:{field:No(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Nb(e.value))return{unaryFilter:{field:No(e.field),op:"IS_NOT_NAN"}};if(Mb(e.value))return{unaryFilter:{field:No(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:No(e.field),op:JP(e.op),value:e.value}}}(n):n instanceof Cn?function(e){const t=e.getFilters().map(r=>r0(r));return 1===t.length?t[0]:{compositeFilter:{op:eO(e.op),filters:t}}}(n):lt()}function U_(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function s0(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Di(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=V_(e)),e=tO(n.get(t),e);return V_(e)}function tO(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function V_(n){return n+"\x01\x01"}function ko(n){const e=n.length;if(ht(e>=2),2===e)return ht("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),an.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&lt(),n.charAt(c+1)){case"\x01":const h=n.substring(a,c);let _;0===i.length?_=h:(i+=h,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:lt()}a=c+2}return new an(r)}const fC=["userId","batchId"];function o0(n,e){return[n,Di(e)]}function eA(n,e,t){return[n,Di(e),t]}const tA={},nA=["prefixPath","collectionGroup","readTime","documentId"],j_=["prefixPath","collectionGroup","documentId"],rA=["collectionGroup","readTime","prefixPath","documentId"],nO=["canonicalId","targetId"],rO=["targetId","path"],iO=["path","targetId"],iA=["collectionId","parent"],sA=["indexId","uid"],oA=["uid","sequenceNumber"],sO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],aA=["indexId","uid","orderedDocumentKey"],pC=["userId","collectionPath","documentId"],gC=["userId","collectionPath","largestBatchId"],oO=["userId","collectionGroup","largestBatchId"],Ys=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],uA=[...Ys,"documentOverlays"],B_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],mC=B_,aO=[...mC,"indexConfiguration","indexState","indexEntries"];class os extends PS{constructor(e,t){super(),this.re=e,this.currentSequenceNumber=t}}function ei(n,e){const t=Ze(n);return Oo.M(t.re,e)}class ag{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Jb(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=$h(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=$h(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=iC();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=t.has(i.key)?null:h;const _=k_(c,h);null!==_&&r.set(i.key,_),c.isValidDocument()||c.convertToNoDocument(bt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gt())}isEqual(e){return this.batchId===e.batchId&&Uh(this.mutations,e.mutations,(t,r)=>Hw(t,r))&&Uh(this.baseMutations,e.baseMutations,(t,r)=>Hw(t,r))}}class a0{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ht(e.mutations.length===r.length);let i=WS;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new a0(e,t,r,i)}}class u0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ya{constructor(e,t,r,i,a=bt.min(),c=bt.min(),h=Vr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(e){return new ya(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ya(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ya(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class c0{constructor(e){this.oe=e}}function yC(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ug(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:qh(i=n.oe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Wh(i,a.version.toTimestamp()),createTime:Wh(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ec(e.version)};else{if(!e.isUnknownDocument())return lt();r.unknownDocument={path:t.path.toArray(),version:Ec(e.version)}}var i,a;return r}function ug(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ec(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function fd(n){const e=new bn(n.seconds,n.nanoseconds);return bt.fromTimestamp(e)}function Ic(n,e){const t=(e.baseMutations||[]).map(a=>lC(n.oe,a));for(let a=0;a<e.mutations.length-1;++a)a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(e.mutations[a].updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a);const r=e.mutations.map(a=>lC(n.oe,a)),i=bn.fromMillis(e.localWriteTimeMs);return new ag(e.batchId,i,t,r)}function cg(n){const e=fd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?fd(n.lastLimboFreeSnapshotVersion):bt.min();let r;var i;return void 0!==n.query.documents?(ht(1===(i=n.query).documents.length),r=Ui(id(Jw(i.documents[0])))):r=Ui(XS(n.query)),new ya(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Vr.fromBase64String(n.resumeToken))}function $_(n,e){const t=Ec(e.snapshotVersion),r=Ec(e.lastLimboFreeSnapshotVersion);let i;i=S_(e.target)?QS(n.oe,e.target):hC(n.oe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:rd(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Fo(n){const e=XS({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?A_(e,e.limit,"L"):e}function va(n,e){return new u0(e.largestBatchId,lC(n.oe,e.overlayMutation))}function l0(n,e){const t=e.path.lastSegment();return[n,Di(e.path.popLast()),t]}function H_(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ec(r.readTime),documentKey:Di(r.documentKey.path),largestBatchId:r.largestBatchId}}class vC{getBundleMetadata(e,t){return wC(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:fd(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return wC(e).put({bundleId:(r=t).id,createTime:Ec(pr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return cA(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Fo(i.bundledQuery),readTime:fd(i.readTime)};var i})}saveNamedQuery(e,t){return cA(e).put({name:(r=t).name,readTime:Ec(pr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function wC(n){return ei(n,"bundles")}function cA(n){return ei(n,"namedQueries")}class z_{constructor(e,t){this.Tt=e,this.userId=t}static ue(e,t){return new z_(e,t.uid||"")}getOverlay(e,t){return lg(e).get(l0(this.userId,t)).next(r=>r?va(this.Tt,r):null)}getOverlays(e,t){const r=Mo();return pe.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const h=new u0(t,c);i.push(this.ce(e,h))}),pe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Di(c.getCollectionPath())));const a=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(lg(e).Y("collectionPathOverlayIndex",h))}),pe.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Mo(),a=Di(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return lg(e).W("collectionPathOverlayIndex",c).next(h=>{for(const _ of h){const w=va(this.Tt,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Mo();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return lg(e).X({index:"collectionGroupOverlayIndex",range:h},(_,w,C)=>{const O=va(this.Tt,w);a.size()<i||O.largestBatchId===c?(a.set(O.getKey(),O),c=O.largestBatchId):C.done()}).next(()=>a)}ce(e,t){return lg(e).put(function(r,i,a){const[c,h,_]=l0(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:sg(r.oe,a.mutation)}}(this.Tt,this.userId,t))}}function lg(n){return ei(n,"documentOverlays")}class pd{constructor(){}ae(e,t){this.he(e,t),t.le()}he(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(qn(e.integerValue));else if("doubleValue"in e){const r=qn(e.doubleValue);isNaN(r)?this.fe(t,13):(this.fe(t,15),Zl(r)?t.de(0):t.de(r))}else if("timestampValue"in e){const r=e.timestampValue;this.fe(t,20),"string"==typeof r?t._e(r):(t._e(`${r.seconds||""}`),t.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(Yl(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.fe(t,45),t.de(r.latitude||0),t.de(r.longitude||0)}else"mapValue"in e?Sw(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):lt()}we(e,t){this.fe(t,25),this.Te(e,t)}Te(e,t){t._e(e)}pe(e,t){const r=e.fields||{};this.fe(t,55);for(const i of Object.keys(r))this.we(i,t),this.he(r[i],t)}Ie(e,t){const r=e.values||[];this.fe(t,50);for(const i of r)this.he(i,t)}ye(e,t){this.fe(t,37),Ke.fromName(e).path.forEach(r=>{this.fe(t,60),this.Te(r,t)})}fe(e,t){e.de(t)}me(e){e.de(2)}}function lA(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function d0(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=lA(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}pd.Ee=new pd;class uO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.Pe()}ve(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Ve()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const i=t.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}this.Pe()}De(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=t.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Ve()}Ce(e){const t=this.xe(e),r=d0(t);this.Ne(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}ke(e){const t=this.xe(e),r=d0(t);this.Ne(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$e(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Re(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}be(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Pe(){this.Me(0),this.Me(1)}Ve(){this.Fe(0),this.Fe(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}Fe(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class EC{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.$e()}}class dA{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Oe()}}class Kh{constructor(){this.Le=new uO,this.qe=new EC(this.Le),this.Ue=new dA(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class Zh{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ge(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Zh(this.indexId,this.documentKey,this.arrayValue,r)}}function wa(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=h0(n.arrayValue,e.arrayValue),0!==t?t:(t=h0(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function h0(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class IC{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const t of e.filters){const r=t;r.isInequality()?this.ze=r:this.je.push(r)}}We(e){ht(e.collectionGroup===this.collectionId);const t=Ew(e);if(void 0!==t&&!this.He(t))return!1;const r=zl(e);let i=0,a=0;for(;i<r.length&&this.He(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.ze){const c=r[i];if(!this.Je(this.ze,c)||!this.Ye(this.Qe[a++],c))return!1;++i}for(;i<r.length;++i)if(a>=this.Qe.length||!this.Ye(this.Qe[a++],r[i]))return!1;return!0}He(e){for(const t of this.je)if(this.Je(t,e))return!0;return!1}Je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function f0(n){var e,t;if(ht(n instanceof tn||n instanceof Cn),n instanceof tn){if(n instanceof Bb){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>tn.create(n.field,"==",a)))||[];return Cn.create(i,"or")}return n}const r=n.filters.map(i=>f0(i));return Cn.create(r,n.op)}function bC(n){if(0===n.getFilters().length)return[];const e=W_(f0(n));return ht(dg(e)),G_(e)||Yh(e)?[e]:e.getFilters()}function G_(n){return n instanceof tn}function Yh(n){return n instanceof Cn&&xw(n)}function dg(n){return G_(n)||Yh(n)||function(e){if(e instanceof Cn&&Yp(e)){for(const t of e.getFilters())if(!G_(t)&&!Yh(t))return!1;return!0}return!1}(n)}function W_(n){if(ht(n instanceof tn||n instanceof Cn),n instanceof tn)return n;if(1===n.filters.length)return W_(n.filters[0]);const e=n.filters.map(r=>W_(r));let t=Cn.create(e,n.op);return t=g0(t),dg(t)?t:(ht(t instanceof Cn),ht(nd(t)),ht(t.filters.length>1),t.filters.reduce((r,i)=>p0(r,i)))}function p0(n,e){let t;return ht(n instanceof tn||n instanceof Cn),ht(e instanceof tn||e instanceof Cn),t=n instanceof tn?e instanceof tn?Cn.create([n,e],"and"):CC(n,e):e instanceof tn?CC(e,n):function(r,i){if(ht(r.filters.length>0&&i.filters.length>0),nd(r)&&nd(i))return T_(r,i.getFilters());const a=Yp(r)?r:i,c=Yp(r)?i:r,h=a.filters.map(_=>p0(_,c));return Cn.create(h,"or")}(n,e),g0(t)}function CC(n,e){if(nd(e))return T_(e,n.getFilters());{const t=e.filters.map(r=>p0(n,r));return Cn.create(t,"or")}}function g0(n){if(ht(n instanceof tn||n instanceof Cn),n instanceof tn)return n;const e=n.getFilters();if(1===e.length)return g0(e[0]);if(C_(n))return n;const t=e.map(i=>g0(i)),r=[];return t.forEach(i=>{i instanceof tn?r.push(i):i instanceof Cn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Cn.create(r,n.op)}class cO{constructor(){this.Ze=new TC}addToCollectionParentIndex(e,t){return this.Ze.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.Ze.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getIndexType(e,t){return pe.resolve(0)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,t){return pe.resolve(Ds.min())}getMinOffsetFromCollectionGroup(e,t){return pe.resolve(Ds.min())}updateCollectionGroup(e,t,r){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class TC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Tn(an.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tn(an.comparator)).toArray()}}const hg=new Uint8Array(0);class hA{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new TC,this.tn=new gu(r=>rd(r),(r,i)=>Xp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:Di(i)};return DC(e).put(a)}return pe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[vb(t),""],!1,!0);return DC(e).W(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(ko(c.parent))}return r})}addFieldIndex(e,t){const r=m0(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var c;delete i.indexId;const a=r.add(i);if(t.indexState){const c=q_(e);return a.next(h=>{c.put(H_(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=m0(e),i=q_(e),a=fg(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=fg(e);let i=!0;const a=new Map;return pe.forEach(this.en(t),c=>this.nn(e,c).next(h=>{i&&(i=!!h),a.set(c,h)})).next(()=>{if(i){let c=Gt();const h=[];return pe.forEach(a,(_,w)=>{var C;Be("IndexedDbIndexManager",`Using index ${C=_,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(st=>`${st.fieldPath}:${st.kind}`).join(",")}`} to execute ${rd(t)}`);const O=function(st,_t){const xt=Ew(_t);if(void 0===xt)return null;for(const Vt of _c(st,xt.fieldPath))switch(Vt.op){case"array-contains-any":return Vt.value.arrayValue.values||[];case"array-contains":return[Vt.value]}return null}(w,_),$=function(st,_t){const xt=new Map;for(const Vt of zl(_t))for(const Dr of _c(st,Vt.fieldPath))switch(Dr.op){case"==":case"in":xt.set(Vt.fieldPath.canonicalString(),Dr.value);break;case"not-in":case"!=":return xt.set(Vt.fieldPath.canonicalString(),Dr.value),Array.from(xt.values())}return null}(w,_),Z=function(st,_t){const xt=[];let Vt=!0;for(const Dr of zl(_t)){const eo=0===Dr.kind?kw(st,Dr.fieldPath,st.startAt):Fw(st,Dr.fieldPath,st.startAt);xt.push(eo.value),Vt&&(Vt=eo.inclusive)}return new mc(xt,Vt)}(w,_),ne=function(st,_t){const xt=[];let Vt=!0;for(const Dr of zl(_t)){const eo=0===Dr.kind?Fw(st,Dr.fieldPath,st.endAt):kw(st,Dr.fieldPath,st.endAt);xt.push(eo.value),Vt&&(Vt=eo.inclusive)}return new mc(xt,Vt)}(w,_),_e=this.sn(_,w,Z),Se=this.sn(_,w,ne),pt=this.rn(_,w,$),Dt=this.on(_.indexId,O,_e,Z.inclusive,Se,ne.inclusive,pt);return pe.forEach(Dt,st=>r.J(st,t.limit).next(_t=>{_t.forEach(xt=>{const Vt=Ke.fromSegments(xt.documentKey);c.has(Vt)||(c=c.add(Vt),h.push(Vt))})}))}).next(()=>h)}return pe.resolve(null)})}en(e){let t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:bC(Cn.create(e.filters,"and")).map(r=>Nw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,t),t)}on(e,t,r,i,a,c,h){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),w=_/(null!=t?t.length:1),C=[];for(let O=0;O<_;++O){const $=t?this.un(t[O/w]):hg,Z=this.cn(e,$,r[O%w],i),ne=this.an(e,$,a[O%w],c),_e=h.map(Se=>this.cn(e,$,Se,!0));C.push(...this.createRange(Z,ne,_e))}return C}cn(e,t,r,i){const a=new Zh(e,Ke.empty(),t,r);return i?a:a.Ge()}an(e,t,r,i){const a=new Zh(e,Ke.empty(),t,r);return i?a.Ge():a}nn(e,t){const r=new IC(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let c=null;for(const h of a)r.We(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;const i=this.en(t);return pe.forEach(i,a=>this.nn(e,a).next(c=>{c?0!==r&&c.fields.length<function(h){let _=new Tn(Nn.comparator),w=!1;for(const C of h.filters)for(const O of C.getFlattenedFilters())O.field.isKeyField()||("array-contains"===O.op||"array-contains-any"===O.op?w=!0:_=_.add(O.field));for(const C of h.orderBy)C.field.isKeyField()||(_=_.add(C.field));return _.size+(w?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}hn(e,t){const r=new Kh;for(const i of zl(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.Ke(i.kind);pd.Ee.ae(a,c)}return r.Be()}un(e){const t=new Kh;return pd.Ee.ae(e,t.Ke(0)),t.Be()}ln(e,t){const r=new Kh;return pd.Ee.ae(Jl(this.databaseId,t),r.Ke(function(i){const a=zl(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Be()}rn(e,t,r){if(null===r)return[];let i=[];i.push(new Kh);let a=0;for(const c of zl(e)){const h=r[a++];for(const _ of i)if(this.fn(t,c.fieldPath)&&Zp(h))i=this.dn(i,c,h);else{const w=_.Ke(c.kind);pd.Ee.ae(h,w)}}return this._n(i)}sn(e,t,r){return this.rn(e,t,r.position)}_n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Be();return t}dn(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const h of i){const _=new Kh;_.seed(h.Be()),pd.Ee.ae(c,_.Ke(t.kind)),a.push(_)}return a}fn(e,t){return!!e.filters.find(r=>r instanceof tn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=m0(e),i=q_(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const c=[];return pe.forEach(a,h=>i.get([h.indexId,this.uid]).next(_=>{c.push(function(w,C){const O=C?new Gp(C.sequenceNumber,new Ds(fd(C.readTime),new Ke(ko(C.documentKey)),C.largestBatchId)):Gp.empty(),$=w.fields.map(([Z,ne])=>new zp(Nn.fromServerFormat(Z),ne));return new __(w.indexId,w.collectionGroup,$,O)}(h,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:$t(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=m0(e),a=q_(e);return this.wn(e).next(c=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>pe.forEach(h,_=>a.put(H_(_.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return pe.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?pe.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),pe.forEach(h,_=>this.mn(e,i,_).next(w=>{const C=this.gn(a,_);return w.isEqual(C)?pe.resolve():this.yn(e,a,_,w,C)}))))})}pn(e,t,r,i){return fg(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.ln(r,t.key),documentKey:t.key.path.toArray()})}In(e,t,r,i){return fg(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.ln(r,t.key),t.key.path.toArray()])}mn(e,t,r){const i=fg(e);let a=new Tn(wa);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.ln(r,t)])},(c,h)=>{a=a.add(new Zh(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}gn(e,t){let r=new Tn(wa);const i=this.hn(t,e);if(null==i)return r;const a=Ew(t);if(null!=a){const c=e.data.field(a.fieldPath);if(Zp(c))for(const h of c.arrayValue.values||[])r=r.add(new Zh(t.indexId,e.key,this.un(h),i))}else r=r.add(new Zh(t.indexId,e.key,hg,i));return r}yn(e,t,r,i,a){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(h,_,w,C,O){const $=h.getIterator(),Z=_.getIterator();let ne=Bh($),_e=Bh(Z);for(;ne||_e;){let Se=!1,pt=!1;if(ne&&_e){const Dt=w(ne,_e);Dt<0?pt=!0:Dt>0&&(Se=!0)}else null!=ne?pt=!0:Se=!0;Se?(C(_e),_e=Bh(Z)):pt?(O(ne),ne=Bh($)):(ne=Bh($),_e=Bh(Z))}}(i,a,wa,h=>{c.push(this.pn(e,t,r,h))},h=>{c.push(this.In(e,t,r,h))}),pe.waitFor(c)}wn(e){let t=1;return q_(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>wa(c,h)).filter((c,h,_)=>!h||0!==wa(c,_[h-1]));const i=[];i.push(e);for(const c of r){const h=wa(c,e),_=wa(c,t);if(0===h)i[0]=e.Ge();else if(h>0&&_<0)i.push(c),i.push(c.Ge());else if(_>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2){if(this.Tn(i[c],i[c+1]))return[];a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,hg,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,hg,[]]))}return a}Tn(e,t){return wa(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(fA)}getMinOffset(e,t){return pe.mapArray(this.en(t),r=>this.nn(e,r).next(i=>i||lt())).next(fA)}}function DC(n){return ei(n,"collectionParents")}function fg(n){return ei(n,"indexEntries")}function m0(n){return ei(n,"indexConfiguration")}function q_(n){return ei(n,"indexState")}function fA(n){ht(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;bb(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ds(e.readTime,e.documentKey,t)}const pA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class As{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new As(e,As.DEFAULT_COLLECTION_PERCENTILE,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function SC(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let h=0;const _=r.X({range:c},(C,O,$)=>(h++,$.delete()));a.push(_.next(()=>{ht(1===h)}));const w=[];for(const C of t.mutations){const O=eA(e,C.key.path,t.batchId);a.push(i.delete(O)),w.push(C.key)}return pe.waitFor(a).next(()=>w)}function gd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw lt();e=n.noDocument}return JSON.stringify(e).length}As.DEFAULT_COLLECTION_PERCENTILE=10,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,As.DEFAULT=new As(41943040,As.DEFAULT_COLLECTION_PERCENTILE,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),As.DISABLED=new As(-1,0,0);class K_{constructor(e,t,r,i){this.userId=e,this.Tt=t,this.indexManager=r,this.referenceDelegate=i,this.En={}}static ue(e,t,r,i){ht(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new K_(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mu(e).X({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Qs(e),c=mu(e);return c.add({}).next(h=>{ht("number"==typeof h);const _=new ag(h,t,r,i),w=function($,Z,ne){const _e=ne.baseMutations.map(pt=>sg($.oe,pt)),Se=ne.mutations.map(pt=>sg($.oe,pt));return{userId:Z,batchId:ne.batchId,localWriteTimeMs:ne.localWriteTime.toMillis(),baseMutations:_e,mutations:Se}}(this.Tt,this.userId,_),C=[];let O=new Tn(($,Z)=>$t($.canonicalString(),Z.canonicalString()));for(const $ of i){const Z=eA(this.userId,$.key.path,h);O=O.add($.key.path.popLast()),C.push(c.put(w)),C.push(a.put(Z,tA))}return O.forEach($=>{C.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.En[h]=_.keys()}),pe.waitFor(C).next(()=>_)})}lookupMutationBatch(e,t){return mu(e).get(t).next(r=>r?(ht(r.userId===this.userId),Ic(this.Tt,r)):null)}An(e,t){return this.En[t]?pe.resolve(this.En[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.En[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return mu(e).X({index:"userMutationsIndex",range:i},(c,h,_)=>{h.userId===this.userId&&(ht(h.batchId>=r),a=Ic(this.Tt,h)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return mu(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return mu(e).W("userMutationsIndex",t).next(r=>r.map(i=>Ic(this.Tt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=o0(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Qs(e).X({range:i},(c,h,_)=>{const[w,C,O]=c,$=ko(C);if(w===this.userId&&t.path.isEqual($))return mu(e).get(O).next(Z=>{if(!Z)throw lt();ht(Z.userId===this.userId),a.push(Ic(this.Tt,Z))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tn($t);const i=[];return t.forEach(a=>{const c=o0(this.userId,a.path),h=IDBKeyRange.lowerBound(c),_=Qs(e).X({range:h},(w,C,O)=>{const[$,Z,ne]=w,_e=ko(Z);$===this.userId&&a.path.isEqual(_e)?r=r.add(ne):O.done()});i.push(_)}),pe.waitFor(i).next(()=>this.Rn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=o0(this.userId,r),c=IDBKeyRange.lowerBound(a);let h=new Tn($t);return Qs(e).X({range:c},(_,w,C)=>{const[O,$,Z]=_,ne=ko($);O===this.userId&&r.isPrefixOf(ne)?ne.length===i&&(h=h.add(Z)):C.done()}).next(()=>this.Rn(e,h))}Rn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(mu(e).get(a).next(c=>{if(null===c)throw lt();ht(c.userId===this.userId),r.push(Ic(this.Tt,c))}))}),pe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return SC(e.re,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Pn(t.batchId)}),pe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Pn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return pe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Qs(e).X({range:r},(a,c,h)=>{if(a[0]===this.userId){const _=ko(a[1]);i.push(_)}else h.done()}).next(()=>{ht(0===i.length)})})}containsKey(e,t){return AC(e,this.userId,t)}vn(e){return _0(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function AC(n,e,t){const r=o0(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return Qs(n).X({range:a,Z:!0},(h,_,w)=>{const[C,O,$]=h;C===e&&O===i&&(c=!0),w.done()}).next(()=>c)}function mu(n){return ei(n,"mutations")}function Qs(n){return ei(n,"documentMutations")}function _0(n){return ei(n,"mutationQueues")}class _u{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Vn(){return new _u(0)}static Sn(){return new _u(-1)}}class y0{constructor(e,t){this.referenceDelegate=e,this.Tt=t}allocateTargetId(e){return this.Dn(e).next(t=>{const r=new _u(t.highestTargetId);return t.highestTargetId=r.next(),this.Cn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(t=>bt.fromTimestamp(new bn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Dn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Cn(e,i)))}addTargetData(e,t){return this.xn(e,t).next(()=>this.Dn(e).next(r=>(r.targetCount+=1,this.Nn(t,r),this.Cn(e,r))))}updateTargetData(e,t){return this.xn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Qh(e).delete(t.targetId)).next(()=>this.Dn(e)).next(r=>(ht(r.targetCount>0),r.targetCount-=1,this.Cn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Qh(e).X((c,h)=>{const _=cg(h);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>pe.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Qh(e).X((r,i)=>{const a=cg(i);t(a)})}Dn(e){return Z_(e).get("targetGlobalKey").next(t=>(ht(null!==t),t))}Cn(e,t){return Z_(e).put("targetGlobalKey",t)}xn(e,t){return Qh(e).put($_(this.Tt,t))}Nn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Dn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=rd(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Qh(e).X({range:i,index:"queryTargetsIndex"},(c,h,_)=>{const w=cg(h);Xp(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Ea(e);return t.forEach(c=>{const h=Di(c.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),pe.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ea(e);return pe.forEach(t,a=>{const c=Di(a.path);return pe.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Ea(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ea(e);let a=Gt();return i.X({range:r,Z:!0},(c,h,_)=>{const w=ko(c[1]),C=new Ke(w);a=a.add(C)}).next(()=>a)}containsKey(e,t){const r=Di(t.path),i=IDBKeyRange.bound([r],[vb(r)],!1,!0);let a=0;return Ea(e).X({index:"documentTargetsIndex",Z:!0,range:i},([c,h],_,w)=>{0!==c&&(a++,w.done())}).next(()=>a>0)}ie(e,t){return Qh(e).get(t).next(r=>r?cg(r):null)}}function Qh(n){return ei(n,"targets")}function Z_(n){return ei(n,"targetGlobal")}function Ea(n){return ei(n,"targetDocuments")}function pg([n,e],[t,r]){const i=$t(n,t);return 0===i?$t(e,r):i}class lO{constructor(e){this.kn=e,this.buffer=new Tn(pg),this.$n=0}Mn(){return++this.$n}On(e){const t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();pg(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class dO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Fn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}get started(){return null!==this.Fn}Bn(e){var t=this;Be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,be.Z)(function*(){t.Fn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){dc(r)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Gl(r)}yield t.Bn(3e5)}))}}class hO{constructor(e,t){this.Ln=e,this.params=t}calculateTargetCount(e,t){return this.Ln.qn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return pe.resolve(Ss.at);const r=new lO(t);return this.Ln.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.Ln.Un(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Ln.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Ln.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(pA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pA):this.Kn(e,t))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,t){let r,i,a,c,h,_,w;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),i=this.params.maximumSequenceNumbersToCollect):i=O,c=Date.now(),this.nthSequenceNumber(e,i))).next(O=>(r=O,h=Date.now(),this.removeTargets(e,r,t))).next(O=>(a=O,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(O=>(w=Date.now(),m_()<=lr.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-C}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${a} targets in `+(_-h)+`ms\n\tRemoved ${O} documents in `+(w-_)+`ms\nTotal Duration: ${w-C}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:O})))}}class fO{constructor(e,t){this.db=e,this.garbageCollector=new hO(this,t)}qn(e){const t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Gn(e){let t=0;return this.Un(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Un(e,t){return this.Qn(e,(r,i)=>t(i))}addReference(e,t,r){return gg(e,r)}removeReference(e,t,r){return gg(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return gg(e,t)}jn(e,t){return function(r,i){let a=!1;return _0(r).tt(c=>AC(r,c,i).next(h=>(h&&(a=!0),pe.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Qn(e,(c,h)=>{if(h<=t){const _=this.jn(e,c).next(w=>{if(!w)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,bt.min()),Ea(e).delete([0,Di(c.path)])))});i.push(_)}}).next(()=>pe.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return gg(e,t)}Qn(e,t){const r=Ea(e);let i,a=Ss.at;return r.X({index:"documentTargetsIndex"},([c,h],{path:_,sequenceNumber:w})=>{0===c?(a!==Ss.at&&t(new Ke(ko(i)),a),a=w,i=_):a=Ss.at}).next(()=>{a!==Ss.at&&t(new Ke(ko(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function gg(n,e){return Ea(n).put((r=n.currentSequenceNumber,{targetId:0,path:Di(e.path),sequenceNumber:r}));var r}class RC{constructor(){this.changes=new gu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?pe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gA{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return bc(e).put(r)}removeEntry(e,t,r){return bc(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],ug(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.zn(e,r)))}getEntry(e,t){let r=jn.newInvalidDocument(t);return bc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Xh(t))},(i,a)=>{r=this.Wn(t,a)}).next(()=>r)}Hn(e,t){let r={size:0,document:jn.newInvalidDocument(t)};return bc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Xh(t))},(i,a)=>{r={document:this.Wn(t,a),size:gd(a)}}).next(()=>r)}getEntries(e,t){let r=Jr();return this.Jn(e,t,(i,a)=>{const c=this.Wn(i,a);r=r.insert(i,c)}).next(()=>r)}Yn(e,t){let r=Jr(),i=new fr(Ke.comparator);return this.Jn(e,t,(a,c)=>{const h=this.Wn(a,c);r=r.insert(a,h),i=i.insert(a,gd(c))}).next(()=>({documents:r,Zn:i}))}Jn(e,t,r){if(t.isEmpty())return pe.resolve();let i=new Tn(OC);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(Xh(i.first()),Xh(i.last())),c=i.getIterator();let h=c.getNext();return bc(e).X({index:"documentKeyIndex",range:a},(_,w,C)=>{const O=Ke.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;h&&OC(h,O)<0;)r(h,null),h=c.getNext();h&&h.isEqual(O)&&(r(h,w),h=c.hasNext()?c.getNext():null),h?C.j(Xh(h)):C.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,c=[a.popLast().toArray(),a.lastSegment(),ug(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return bc(e).W(IDBKeyRange.bound(c,h,!0)).next(_=>{let w=Jr();for(const C of _){const O=this.Wn(Ke.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);O.isFoundDocument()&&(ss(t,O)||i.has(O.key))&&(w=w.insert(O.key,O))}return w})}getAllFromCollectionGroup(e,t,r,i){let a=Jr();const c=PC(t,r),h=PC(t,Ds.max());return bc(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(_,w,C)=>{const O=this.Wn(Ke.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(O.key,O),a.size===i&&C.done()}).next(()=>a)}newChangeBuffer(e){return new mA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return v0(e).get("remoteDocumentGlobalKey").next(t=>(ht(!!t),t))}zn(e,t){return v0(e).put("remoteDocumentGlobalKey",t)}Wn(e,t){if(t){const r=function _C(n,e){let t;if(e.document)t=n0(n.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),i=fd(e.noDocument.readTime);t=jn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return lt();{const r=Ke.fromSegments(e.unknownDocument.path),i=fd(e.unknownDocument.version);t=jn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new bn(r[0],r[1]);return bt.fromTimestamp(i)}(e.readTime)),t}(this.Tt,t);if(!r.isNoDocument()||!r.version.isEqual(bt.min()))return r}return jn.newInvalidDocument(e)}}function xC(n){return new gA(n)}class mA extends RC{constructor(e,t){super(),this.Xn=e,this.trackRemovals=t,this.ts=new gu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Tn((a,c)=>$t(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const h=this.ts.get(a);if(t.push(this.Xn.removeEntry(e,a,h.readTime)),c.isValidDocument()){const _=yC(this.Xn.Tt,c);i=i.add(a.path.popLast());const w=gd(_);r+=w-h.size,t.push(this.Xn.addEntry(e,a,_))}else if(r-=h.size,this.trackRemovals){const _=yC(this.Xn.Tt,c.convertToNoDocument(bt.min()));t.push(this.Xn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.Xn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Xn.updateMetadata(e,r)),pe.waitFor(t)}getFromCache(e,t){return this.Xn.Hn(e,t).next(r=>(this.ts.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Xn.Yn(e,t).next(({documents:r,Zn:i})=>(i.forEach((a,c)=>{this.ts.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function v0(n){return ei(n,"remoteDocumentGlobal")}function bc(n){return ei(n,"remoteDocumentsV14")}function Xh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function PC(n,e){const t=e.documentKey.path.toArray();return[n,ug(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function OC(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=$t(t[a],r[a]),i)return i;return i=$t(t.length,r.length),i||(i=$t(t[t.length-2],r[r.length-2]),i||$t(t[t.length-1],r[r.length-1]))}class MC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Y_{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&$h(r.mutation,i,Li.empty(),bn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Gt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Gt()){const i=Mo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=cd();return a.forEach((h,_)=>{c=c.insert(h,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Mo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Gt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,i){let a=Jr();const c=ng(),h=ng();return t.forEach((_,w)=>{const C=r.get(w.key);i.has(w.key)&&(void 0===C||C.mutation instanceof ma)?a=a.insert(w.key,w):void 0!==C?(c.set(w.key,C.mutation.getFieldMask()),$h(C.mutation,w,C.mutation.getFieldMask(),bn.now())):c.set(w.key,Li.empty())}),this.recalculateAndSaveOverlays(e,a).next(_=>(_.forEach((w,C)=>c.set(w,C)),t.forEach((w,C)=>{var O;return h.set(w,new MC(C,null!==(O=c.get(w))&&void 0!==O?O:null))}),h))}recalculateAndSaveOverlays(e,t){const r=ng();let i=new fr((c,h)=>c-h),a=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(_=>{const w=t.get(_);if(null===w)return;let C=r.get(_)||Li.empty();C=h.applyToLocalView(w,C),r.set(_,C);const O=(i.get(h.batchId)||Gt()).add(_);i=i.insert(h.batchId,O)})}).next(()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const _=h.getNext(),w=_.key,C=_.value,O=iC();C.forEach($=>{if(!a.has($)){const Z=k_(t.get($),r.get($));null!==Z&&O.set($,Z),a=a.add($)}}),c.push(this.documentOverlayCache.saveOverlays(e,w,O))}return pe.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ke.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):jw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):pe.resolve(Mo());let h=-1,_=a;return c.next(w=>pe.forEach(w,(C,O)=>(h<O.largestBatchId&&(h=O.largestBatchId),a.get(C)?pe.resolve():this.remoteDocumentCache.getEntry(e,C).next($=>{_=_.insert(C,$)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,_,w,Gt())).next(C=>({batchId:h,changes:rC(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let i=cd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=cd();return this.indexManager.getCollectionParents(e,i).next(c=>pe.forEach(c,h=>{const _=(w=t,C=h.child(i),new ga(C,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,C;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(w=>{w.forEach((C,O)=>{a=a.insert(C,O)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((h,_)=>{const w=_.getKey();null===a.get(w)&&(a=a.insert(w,jn.newInvalidDocument(w)))});let c=cd();return a.forEach((h,_)=>{const w=i.get(h);void 0!==w&&$h(w.mutation,_,Li.empty(),bn.now()),ss(t,_)&&(c=c.insert(h,_))}),c})}}class pO{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,t){return pe.resolve(this.es.get(t))}saveBundleMetadata(e,t){var r;return this.es.set(t.id,{id:(r=t).id,version:r.version,createTime:pr(r.createTime)}),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.ns.get(t))}saveNamedQuery(e,t){return this.ns.set(t.name,{name:(r=t).name,query:Fo(r.bundledQuery),readTime:pr(r.readTime)}),pe.resolve();var r}}class NC{constructor(){this.overlays=new fr(Ke.comparator),this.ss=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Mo();return pe.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ce(e,t,a)}),pe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ss.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ss.delete(r)),pe.resolve()}getOverlaysForCollection(e,t,r){const i=Mo(),a=t.length+1,c=new Ke(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const _=h.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return pe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new fr((w,C)=>w-C);const c=this.overlays.getIterator();for(;c.hasNext();){const w=c.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let C=a.get(w.largestBatchId);null===C&&(C=Mo(),a=a.insert(w.largestBatchId,C)),C.set(w.getKey(),w)}}const h=Mo(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,C)=>h.set(w,C)),!(h.size()>=i)););return pe.resolve(h)}ce(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.ss.get(i.largestBatchId).delete(r.key);this.ss.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new u0(t,r));let a=this.ss.get(t);void 0===a&&(a=Gt(),this.ss.set(t,a)),this.ss.set(t,a.add(r.key))}}class mg{constructor(){this.rs=new Tn(ti.os),this.us=new Tn(ti.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,t){const r=new ti(e,t);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ls(new ti(e,t))}fs(e,t){e.forEach(r=>this.removeReference(r,t))}ds(e){const t=new Ke(new an([])),r=new ti(t,e),i=new ti(t,e+1),a=[];return this.us.forEachInRange([r,i],c=>{this.ls(c),a.push(c.key)}),a}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const t=new Ke(new an([])),r=new ti(t,e),i=new ti(t,e+1);let a=Gt();return this.us.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new ti(e,0),r=this.rs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ti{constructor(e,t){this.key=e,this.gs=t}static os(e,t){return Ke.comparator(e.key,t.key)||$t(e.gs,t.gs)}static cs(e,t){return $t(e.gs,t.gs)||Ke.comparator(e.key,t.key)}}class _A{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ys=1,this.ps=new Tn(ti.os)}checkEmpty(e){return pe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ys;this.ys++;const c=new ag(a,t,r,i);this.mutationQueue.push(c);for(const h of i)this.ps=this.ps.add(new ti(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return pe.resolve(c)}lookupMutationBatch(e,t){return pe.resolve(this.Is(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ts(t+1),a=i<0?0:i;return pe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ti(t,0),i=new ti(t,Number.POSITIVE_INFINITY),a=[];return this.ps.forEachInRange([r,i],c=>{const h=this.Is(c.gs);a.push(h)}),pe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tn($t);return t.forEach(i=>{const a=new ti(i,0),c=new ti(i,Number.POSITIVE_INFINITY);this.ps.forEachInRange([a,c],h=>{r=r.add(h.gs)})}),pe.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ke.isDocumentKey(a)||(a=a.child(""));const c=new ti(new Ke(a),0);let h=new Tn($t);return this.ps.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(_.gs)),!0)},c),pe.resolve(this.Es(h))}Es(e){const t=[];return e.forEach(r=>{const i=this.Is(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){ht(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ps;return pe.forEach(t.mutations,i=>{const a=new ti(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ps=r})}Pn(e){}containsKey(e,t){const r=new ti(t,0),i=this.ps.firstAfterOrEqual(r);return pe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return pe.resolve()}As(e,t){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class gO{constructor(e){this.Rs=e,this.docs=new fr(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.Rs(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return pe.resolve(r?r.document.mutableCopy():jn.newInvalidDocument(t))}getEntries(e,t){let r=Jr();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():jn.newInvalidDocument(i))}),pe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Jr();const c=t.path,h=new Ke(c.child("")),_=this.docs.getIteratorFrom(h);for(;_.hasNext();){const{key:w,value:{document:C}}=_.getNext();if(!c.isPrefixOf(w.path))break;w.path.length>c.length+1||bb(Ib(C),r)<=0||(i.has(C.key)||ss(t,C))&&(a=a.insert(C.key,C.mutableCopy()))}return pe.resolve(a)}getAllFromCollectionGroup(e,t,r,i){lt()}Ps(e,t){return pe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new mO(this)}getSize(e){return pe.resolve(this.size)}}class mO extends RC{constructor(e){super(),this.Xn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Xn.addEntry(e,i)):this.Xn.removeEntry(r)}),pe.waitFor(t)}getFromCache(e,t){return this.Xn.getEntry(e,t)}getAllFromCache(e,t){return this.Xn.getEntries(e,t)}}class yA{constructor(e){this.persistence=e,this.vs=new gu(t=>rd(t),Xp),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.bs=0,this.Vs=new mg,this.targetCount=0,this.Ss=_u.Vn()}forEachTarget(e,t){return this.vs.forEach((r,i)=>t(i)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),pe.resolve()}xn(e){this.vs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ss=new _u(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.xn(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.xn(t),pe.resolve()}removeTargetData(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.vs.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.vs.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),pe.waitFor(a).next(()=>i)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const r=this.vs.get(t)||null;return pe.resolve(r)}addMatchingKeys(e,t,r){return this.Vs.hs(t,r),pe.resolve()}removeMatchingKeys(e,t,r){this.Vs.fs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),pe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Vs.ds(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Vs.ws(t);return pe.resolve(r)}containsKey(e,t){return pe.resolve(this.Vs.containsKey(t))}}class kC{constructor(e,t){this.Ds={},this.overlays={},this.Cs=new Ss(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new yA(this),this.indexManager=new cO,this.remoteDocumentCache=new gO(r=>this.referenceDelegate.ks(r)),this.Tt=new c0(t),this.$s=new pO(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new NC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ds[e.toKey()];return r||(r=new _A(t,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$s}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new vA(this.Cs.next());return this.referenceDelegate.Ms(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Fs(e,t){return pe.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,t)))}}class vA extends PS{constructor(e){super(),this.currentSequenceNumber=e}}class w0{constructor(e){this.persistence=e,this.Bs=new mg,this.Ls=null}static qs(e){return new w0(e)}get Us(){if(this.Ls)return this.Ls;throw lt()}addReference(e,t,r){return this.Bs.addReference(r,t),this.Us.delete(r.toString()),pe.resolve()}removeReference(e,t,r){return this.Bs.removeReference(r,t),this.Us.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.Us.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Bs.ds(t.targetId).forEach(i=>this.Us.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Us.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ms(){this.Ls=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.Us,r=>{const i=Ke.fromPath(r);return this.Ks(e,i).next(a=>{a||t.removeEntry(i,bt.min())})}).next(()=>(this.Ls=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ks(e,t).next(r=>{r?this.Us.delete(t.toString()):this.Us.add(t.toString())})}ks(e){return 0}Ks(e,t){return pe.or([()=>pe.resolve(this.Bs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Fs(e,t)])}}class _O{constructor(e){this.Tt=e}F(e,t,r,i){const a=new v_("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fC,{unique:!0}),h.createObjectStore("documentMutations"),wA(e),function(h){h.createObjectStore("remoteDocuments")}(e));let c=pe.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),wA(e)),c=c.next(()=>function(h){const _=h.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,_){return _.store("mutations").W().next(w=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fC,{unique:!0});const C=_.store("mutations"),O=w.map($=>C.put($));return pe.waitFor(O)})}(e,a))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Gs(a))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(a)))),r<7&&i>=7&&(c=c.next(()=>this.js(a))),r<8&&i>=8&&(c=c.next(()=>this.zs(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Ws(a))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const _=h.createObjectStore("documentOverlays",{keyPath:pC});_.createIndex("collectionPathOverlayIndex",gC,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",oO,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(h){const _=h.createObjectStore("remoteDocumentsV14",{keyPath:nA});_.createIndex("documentKeyIndex",j_),_.createIndex("collectionGroupIndex",rA)}(e)).next(()=>this.Hs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.Js(e,a))),r<15&&i>=15&&(c=c.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:sA}).createIndex("sequenceNumberIndex",oA,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:sO}).createIndex("documentKeyIndex",aA,{unique:!1})}(e))),c}Qs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=gd(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Gs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>pe.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(h=>pe.forEach(h,_=>{ht(_.userId===a.userId);const w=Ic(this.Tt,_);return SC(e,a.userId,w).next(()=>{})}))}))}js(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((c,h)=>{const _=new an(c),w=[0,Di(_)];a.push(t.get(w).next(C=>C?pe.resolve():t.put({targetId:0,path:Di(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>pe.waitFor(a))})}zs(e,t){e.createObjectStore("collectionParents",{keyPath:iA});const r=t.store("collectionParents"),i=new TC,a=c=>{if(i.add(c)){const h=c.lastSegment(),_=c.popLast();return r.put({collectionId:h,parent:Di(_)})}};return t.store("remoteDocuments").X({Z:!0},(c,h)=>{const _=new an(c);return a(_.popLast())}).next(()=>t.store("documentMutations").X({Z:!0},([c,h,_],w)=>{const C=ko(h);return a(C.popLast())}))}Ws(e){const t=e.store("targets");return t.X((r,i)=>{const a=cg(i),c=$_(this.Tt,a);return t.put(c)})}Hs(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,c)=>{const h=t.store("remoteDocumentsV14"),_=(w=c,w.document?new Ke(an.fromString(w.document.name).popFirst(5)):w.noDocument?Ke.fromSegments(w.noDocument.path):w.unknownDocument?Ke.fromSegments(w.unknownDocument.path):lt()).path.toArray();var w;const C={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(C))}).next(()=>pe.waitFor(i))}Js(e,t){const r=t.store("mutations"),i=xC(this.Tt),a=new kC(w0.qs,this.Tt.oe);return r.W().next(c=>{const h=new Map;return c.forEach(_=>{var w;let C=null!==(w=h.get(_.userId))&&void 0!==w?w:Gt();Ic(this.Tt,_).keys().forEach(O=>C=C.add(O)),h.set(_.userId,C)}),pe.forEach(h,(_,w)=>{const C=new di(w),O=z_.ue(this.Tt,C),$=a.getIndexManager(C),Z=K_.ue(C,this.Tt,$,a.referenceDelegate);return new Y_(i,Z,O,$).recalculateAndSaveOverlaysForDocumentKeys(new os(t,Ss.at),_).next()})})}}function wA(n){n.createObjectStore("targetDocuments",{keyPath:rO}).createIndex("documentTargetsIndex",iO,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",nO,{unique:!0}),n.createObjectStore("targetGlobal")}const FC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class E0{constructor(e,t,r,i,a,c,h,_,w,C,O=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ys=a,this.window=c,this.document=h,this.Zs=w,this.Xs=C,this.ti=O,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=$=>Promise.resolve(),!E0.C())throw new Ae(ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new fO(this,i),this.oi=t+"main",this.Tt=new c0(_),this.ui=new Oo(this.oi,this.ti,new _O(this.Tt)),this.Ns=new y0(this.referenceDelegate,this.Tt),this.remoteDocumentCache=xC(this.Tt),this.$s=new vC,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===C&&it("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(ye.FAILED_PRECONDITION,FC);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new Ss(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var t=this;return this.ri=function(){var r=(0,be.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var t=(0,be.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,be.Z)(function*(){t.started&&(yield t.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>I0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(t=>{t||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.mi(e).next(()=>!1):!!t&&this.gi(e).next(()=>!0))).catch(e=>{if(dc(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return Q_(e).get("owner").next(t=>pe.resolve(this.yi(t)))}pi(e){return I0(e).delete(this.clientId)}Ii(){var e=this;return(0,be.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ei(r,"clientMetadata");return i.W().next(a=>{const c=e.Ei(a,18e5),h=a.filter(_=>-1===c.indexOf(_));return pe.forEach(h,_=>i.delete(_.clientId)).next(()=>h)})}).catch(()=>[]);if(e.ci)for(const r of t)e.ci.removeItem(e.Ai(r.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?pe.resolve(!0):Q_(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)){if(this.yi(t)&&this.networkEnabled)return!0;if(!this.yi(t)){if(!t.allowTabSynchronization)throw new Ae(ye.FAILED_PRECONDITION,FC);return!1}}return!(!this.networkEnabled||!this.inForeground)||I0(e).W().next(r=>void 0===this.Ei(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,be.Z)(function*(){e.xs=!1,e.Pi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.bi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new os(t,Ss.at);return e.mi(r).next(()=>e.pi(r))}),e.ui.close(),e.Vi()})()}Ei(e,t){return e.filter(r=>this.Ti(r.updateTimeMs,t)&&!this.Ri(r.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>I0(e).W().next(t=>this.Ei(t,18e5).map(r=>r.clientId)))}get started(){return this.xs}getMutationQueue(e,t){return K_.ue(e,this.Tt,t,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new hA(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return z_.ue(this.Tt,e)}getBundleCache(){return this.$s}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(c=this.ti)?aO:14===c?mC:13===c?B_:12===c?uA:11===c?Ys:void lt();var c;let h;return this.ui.runTransaction(e,i,a,_=>(h=new os(_,this.Cs?this.Cs.next():Ss.at),"readwrite-primary"===t?this._i(h).next(w=>!!w||this.wi(h)).next(w=>{if(!w)throw it(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new Ae(ye.FAILED_PRECONDITION,xS);return r(h)}).next(w=>this.gi(h).next(()=>w)):this.Di(h).next(()=>r(h)))).then(_=>(h.raiseOnCommittedEvent(),_))}Di(e){return Q_(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)&&!this.yi(t)&&!(this.Xs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(ye.FAILED_PRECONDITION,FC)})}gi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Q_(e).put("owner",t)}static C(){return Oo.C()}mi(e){const t=Q_(e);return t.get("owner").next(r=>this.yi(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):pe.resolve())}Ti(e,t){const r=Date.now();return!(e<r-t||e>r&&(it(`Detected an update time that is in the future: ${e} > ${r}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.Pi();const t=/(?:Version|Mobile)\/1[456]/;(0,z.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}bi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var t;try{const r=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return it("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Pi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){it("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Q_(n){return ei(n,"owner")}function I0(n){return ei(n,"clientMetadata")}function LC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class UC{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ci=r,this.xi=i}static Ni(e,t){let r=Gt(),i=Gt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new UC(e,t.fromCache,r,i)}}class EA{constructor(){this.ki=!1}initialize(e,t){this.$i=e,this.indexManager=t,this.ki=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Mi(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Fi(e,t))}Mi(e,t){if(Wb(t))return pe.resolve(null);let r=Ui(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=A_(t,null,"F"),r=Ui(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=Gt(...a);return this.$i.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(_=>{const w=this.Bi(t,h);return this.Li(t,w,c,_.readTime)?this.Mi(e,A_(t,null,"F")):this.qi(e,w,t,_)}))})))}Oi(e,t,r,i){return Wb(t)||i.isEqual(bt.min())?this.Fi(e,t):this.$i.getDocuments(e,r).next(a=>{const c=this.Bi(t,a);return this.Li(t,c,r,i)?this.Fi(e,t):(m_()<=lr.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Jp(t)),this.qi(e,c,t,Iw(i,-1)))})}Bi(e,t){let r=new Tn(R_(e));return t.forEach((i,a)=>{ss(e,a)&&(r=r.add(a))}),r}Li(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Fi(e,t){return m_()<=lr.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",Jp(t)),this.$i.getDocumentsMatchingQuery(e,t,Ds.min())}qi(e,t,r,i){return this.$i.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class yO{constructor(e,t,r,i){this.persistence=e,this.Ui=t,this.Tt=i,this.Ki=new fr($t),this.Gi=new gu(a=>rd(a),Xp),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.$s=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Y_(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ki))}}function s(n,e,t,r){return new yO(n,e,t,r)}function o(n,e){return u.apply(this,arguments)}function u(){return u=(0,be.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.zi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],h=[];let _=Gt();for(const w of i){c.push(w.batchId);for(const C of w.mutations)_=_.add(C.key)}for(const w of a){h.push(w.batchId);for(const C of w.mutations)_=_.add(C.key)}return t.localDocuments.getDocuments(r,_).next(w=>({Wi:w,removedBatchIds:c,addedBatchIds:h}))})})}),u.apply(this,arguments)}function d(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ns.getLastRemoteSnapshotVersion(t))}function v(n,e,t){let r=Gt(),i=Gt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=Jr();return t.forEach((h,_)=>{const w=a.get(h);_.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(h)),_.isNoDocument()&&_.version.isEqual(bt.min())?(e.removeEntry(h,_.readTime),c=c.insert(h,_)):!w.isValidDocument()||_.version.compareTo(w.version)>0||0===_.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(_),c=c.insert(h,_)):Be("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",_.version)}),{Hi:c,Ji:i}})}function I(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function b(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ns.getTargetData(r,e).next(a=>a?(i=a,pe.resolve(i)):t.Ns.allocateTargetId(r).next(c=>(i=new ya(e,c,0,r.currentSequenceNumber),t.Ns.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ki.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ki=t.Ki.insert(r.targetId,r),t.Gi.set(e,r.targetId)),r})}function x(n,e,t){return j.apply(this,arguments)}function j(){return j=(0,be.Z)(function*(n,e,t){const r=Ze(n),i=r.Ki.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!dc(c))throw c;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(i.target)}),j.apply(this,arguments)}function q(n,e,t){const r=Ze(n);let i=bt.min(),a=Gt();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,_,w){const C=Ze(h),O=C.Gi.get(w);return void 0!==O?pe.resolve(C.Ki.get(O)):C.Ns.getTargetData(_,w)}(r,c,Ui(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(c,h.targetId).next(_=>{a=_})}).next(()=>r.Ui.getDocumentsMatchingQuery(c,e,t?i:bt.min(),t?a:Gt())).next(h=>(xe(r,Kb(e),h),{documents:h,Yi:a})))}function re(n,e){const t=Ze(n),r=Ze(t.Ns),i=t.Ki.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.ie(a,e).next(c=>c?c.target:null))}function de(n,e){const t=Ze(n),r=t.Qi.get(e)||bt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ji.getAllFromCollectionGroup(i,e,Iw(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(xe(t,e,i),i))}function xe(n,e,t){let r=n.Qi.get(e)||bt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Qi.set(e,r)}function Ye(){return Ye=(0,be.Z)(function*(n,e,t,r){const i=Ze(n);let a=Gt(),c=Jr();for(const w of t){const C=e.Zi(w.metadata.name);w.document&&(a=a.add(C));const O=e.Xi(w);O.setReadTime(e.tr(w.metadata.readTime)),c=c.insert(C,O)}const h=i.ji.newChangeBuffer({trackRemovals:!0}),_=yield b(i,(w=r,Ui(id(an.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>v(w,h,c).next(C=>(h.apply(w),C)).next(C=>i.Ns.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.Ns.addMatchingKeys(w,a,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,C.Hi,C.Ji)).next(()=>C.Hi)))}),Ye.apply(this,arguments)}function ft(n,e){return At.apply(this,arguments)}function At(){return At=(0,be.Z)(function*(n,e,t=Gt()){const r=yield b(n,Ui(Fo(e.bundledQuery))),i=Ze(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=pr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.$s.saveNamedQuery(a,e);const h=r.withResumeToken(Vr.EMPTY_BYTE_STRING,c);return i.Ki=i.Ki.insert(h.targetId,h),i.Ns.updateTargetData(a,h).next(()=>i.Ns.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Ns.addMatchingKeys(a,t,r.targetId)).next(()=>i.$s.saveNamedQuery(a,e))})}),At.apply(this,arguments)}function Ue(n,e){return`firestore_clients_${n}_${e}`}function Ut(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function kn(n,e){return`firestore_targets_${n}_${e}`}class Zn{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static er(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Ae(i.error.code,i.error.message))),c?new Zn(e,t,i.state,a):(it("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class X_{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static er(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ae(r.error.code,r.error.message))),a?new X_(e,r.state,i):(it("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class VC{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static er(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=ld();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=Rb(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new VC(e,a):(it("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class IA{constructor(e,t){this.clientId=e,this.onlineState=t}static er(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new IA(t.clientId,t.onlineState):(it("SharedClientState",`Failed to parse online state: ${e}`),null)}}class bA{constructor(){this.activeTargetIds=ld()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CA{constructor(e,t,r,i,a){this.window=e,this.Ys=t,this.persistenceKey=r,this.rr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new fr($t),this.started=!1,this.hr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.lr=Ue(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new bA),this._r=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,be.Z)(function*(){const t=yield e.syncEngine.Si();for(const i of t){if(i===e.rr)continue;const a=e.getItem(Ue(e.persistenceKey,i));if(a){const c=VC.er(i,a);c&&(e.ar=e.ar.insert(c.clientId,c))}}e.pr();const r=e.storage.getItem(e.gr);if(r){const i=e.Ir(r);i&&e.Tr(i)}for(const i of e.hr)e.cr(i);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,t,r){this.Ar(e,t,r),this.Rr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(kn(this.persistenceKey,e));if(r){const i=X_.er(e,r);i&&(t=i.state)}}return this.Pr.sr(e),this.pr(),t}removeLocalQueryTarget(e){this.Pr.ir(e),this.pr()}isLocalQueryTarget(e){return this.Pr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(kn(this.persistenceKey,e))}updateQueryState(e,t,r){this.vr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Rr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.lr)return void it("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,be.Z)(function*(){if(t.started){if(null!==r.key)if(t._r.test(r.key)){if(null==r.newValue){const i=t.Sr(r.key);return t.Dr(i,null)}{const i=t.Cr(r.key,r.newValue);if(i)return t.Dr(i.clientId,i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(t.mr.test(r.key)){if(null!==r.newValue){const i=t.$r(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.gr){if(null!==r.newValue){const i=t.Ir(r.newValue);if(i)return t.Tr(i)}}else if(r.key===t.dr){const i=function(a){let c=Ss.at;if(null!=a)try{const h=JSON.parse(a);ht("number"==typeof h),c=h}catch(h){it("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==Ss.at&&t.sequenceNumberHandler(i)}else if(r.key===t.yr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Fr(a)))}}else t.hr.push(r)}))}}get Pr(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.Pr.nr())}Ar(e,t,r){const i=new Zn(this.currentUser,e,t,r),a=Ut(this.persistenceKey,this.currentUser,e);this.setItem(a,i.nr())}Rr(e){const t=Ut(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,t,r){const i=kn(this.persistenceKey,e),a=new X_(e,t,r);this.setItem(i,a.nr())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}Sr(e){const t=this._r.exec(e);return t?t[1]:null}Cr(e,t){const r=this.Sr(e);return VC.er(r,t)}Nr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return Zn.er(new di(void 0!==r[2]?r[2]:null),i,t)}$r(e,t){const r=this.mr.exec(e),i=Number(r[1]);return X_.er(i,t)}Ir(e){return IA.er(e)}Or(e){return JSON.parse(e)}kr(e){var t=this;return(0,be.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Br(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Er(this.ar),a=this.Er(r),c=[],h=[];return a.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{a.has(_)||h.push(_)}),this.syncEngine.qr(c,h).then(()=>{this.ar=r})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let t=ld();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class vO{constructor(){this.Ur=new bA,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,t,r){this.Kr[e]=t}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new bA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class vF{Gr(e){}shutdown(){}}class wO{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let jC=null;function TA(){return null===jC?jC=268435456+Math.round(2147483648*Math.random()):jC++,"0x"+jC.toString(16)}const wF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class EF{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}const as="WebChannelConnection";class IF extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,t,r,i,a){const c=TA(),h=this.fo(e,t);Be("RestConnection",`Sending RPC '${e}' ${c}:`,h,r);const _={};return this._o(_,i,a),this.wo(e,h,_,r).then(w=>(Be("RestConnection",`Received RPC '${e}' ${c}: `,w),w),w=>{throw Hl("RestConnection",`RPC '${e}' ${c} failed with error: `,w,"url: ",h,"request:",r),w})}mo(e,t,r,i,a,c){return this.lo(e,t,r,i,a)}_o(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+lc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}fo(e,t){return`${this.co}/v1/${t}:${wF[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,t,r,i){const a=TA();return new Promise((c,h)=>{const _=new CS;_.setWithCredentials(!0),_.listenOnce(hb.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case p_.NO_ERROR:const C=_.getResponseJson();Be(as,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(C)),c(C);break;case p_.TIMEOUT:Be(as,`RPC '${e}' ${a} timed out`),h(new Ae(ye.DEADLINE_EXCEEDED,"Request time out"));break;case p_.HTTP_ERROR:const O=_.getStatus();if(Be(as,`RPC '${e}' ${a} failed with status:`,O,"response text:",_.getResponseText()),O>0){let $=_.getResponseJson();Array.isArray($)&&($=$[0]);const Z=$?.error;if(Z&&Z.status&&Z.message){const ne=function(_e){const Se=_e.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(Se)>=0?Se:ye.UNKNOWN}(Z.status);h(new Ae(ne,Z.message))}else h(new Ae(ye.UNKNOWN,"Server responded with status "+_.getStatus()))}else h(new Ae(ye.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Be(as,`RPC '${e}' ${a} completed.`)}});const w=JSON.stringify(i);Be(as,`RPC '${e}' ${a} sending request:`,i),_.send(t,"POST",w,r,15)})}yo(e,t,r){const i=TA(),a=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=lb(),h=db(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(_.xmlHttpFactory=new jl({})),this._o(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const w=a.join("");Be(as,`Creating RPC '${e}' stream ${i}: ${w}`,_);const C=c.createWebChannel(w,_);let O=!1,$=!1;const Z=new EF({Yr:_e=>{$?Be(as,`Not sending because RPC '${e}' stream ${i} is closed:`,_e):(O||(Be(as,`Opening RPC '${e}' stream ${i} transport.`),C.open(),O=!0),Be(as,`RPC '${e}' stream ${i} sending:`,_e),C.send(_e))},Zr:()=>C.close()}),ne=(_e,Se,pt)=>{_e.listen(Se,Dt=>{try{pt(Dt)}catch(st){setTimeout(()=>{throw st},0)}})};return ne(C,g_.EventType.OPEN,()=>{$||Be(as,`RPC '${e}' stream ${i} transport opened.`)}),ne(C,g_.EventType.CLOSE,()=>{$||($=!0,Be(as,`RPC '${e}' stream ${i} transport closed`),Z.oo())}),ne(C,g_.EventType.ERROR,_e=>{$||($=!0,Hl(as,`RPC '${e}' stream ${i} transport errored:`,_e),Z.oo(new Ae(ye.UNAVAILABLE,"The operation could not be completed")))}),ne(C,g_.EventType.MESSAGE,_e=>{var Se;if(!$){const pt=_e.data[0];ht(!!pt);const st=pt.error||(null===(Se=pt[0])||void 0===Se?void 0:Se.error);if(st){Be(as,`RPC '${e}' stream ${i} received error:`,st);const _t=st.status;let xt=function(Dr){const eo=Tr[Dr];if(void 0!==eo)return GS(eo)}(_t),Vt=st.message;void 0===xt&&(xt=ye.INTERNAL,Vt="Unknown error status: "+_t+" with message "+st.message),$=!0,Z.oo(new Ae(xt,Vt)),C.close()}else Be(as,`RPC '${e}' stream ${i} received:`,pt),Z.uo(pt)}}),ne(h,fb.STAT_EVENT,_e=>{_e.stat===_w.PROXY?Be(as,`RPC '${e}' stream ${i} detected buffering proxy`):_e.stat===_w.NOPROXY&&Be(as,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{Z.ro()},0),Z}}function EO(){return typeof window<"u"?window:null}function BC(){return typeof document<"u"?document:null}function b0(n){return new ZS(n,!0)}class DA{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Ys=e,this.timerId=t,this.po=r,this.Io=i,this.To=a,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(e){this.cancel();const t=Math.floor(this.Eo+this.bo()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Eo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}class IO{constructor(e,t,r,i,a,c,h,_){this.Ys=e,this.So=r,this.Do=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=_,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new DA(e,t)}$o(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,be.Z)(function*(){e.$o()&&(yield e.close(0))})()}Fo(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,be.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,t){var r=this;return(0,be.Z)(function*(){r.Uo(),r.Ko(),r.ko.cancel(),r.Co++,4!==e?r.ko.reset():t&&t.code===ye.RESOURCE_EXHAUSTED?(it(t.toString()),it("Using maximum backoff delay to prevent overloading the backend."),r.ko.Po()):t&&t.code===ye.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Go(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.no(t)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),t=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Co===t&&this.jo(r,i)},r=>{e(()=>{const i=new Ae(ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(i)})})}jo(e,t){const r=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(i=>{r(()=>this.zo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.ko.vo((0,be.Z)(function*(){e.state=0,e.start()}))}zo(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return t=>{this.Ys.enqueueAndForget(()=>this.Co===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bF extends IO{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.Tt=a}Wo(e,t){return this.connection.yo("Listen",e,t)}onMessage(e){this.ko.reset();const t=function YS(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:lt(),i=e.targetChange.targetIds||[],a=function(_,w){return _.yt?(ht(void 0===w||"string"==typeof w),Vr.fromBase64String(w||"")):(ht(void 0===w||w instanceof Uint8Array),Vr.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(_){const w=void 0===_.code?ye.UNKNOWN:GS(_.code);return new Ae(w,_.message||"")}(c);t=new Kw(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=_a(n,r.document.name),a=pr(r.document.updateTime),c=r.document.createTime?pr(r.document.createTime):bt.min(),h=new Xr({mapValue:{fields:r.document.fields}}),_=jn.newFoundDocument(i,a,c,h);t=new rg(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,i=_a(n,r.document),a=r.readTime?pr(r.readTime):bt.min(),c=jn.newNoDocument(i,a);t=new rg([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=_a(n,r.document);t=new rg([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return lt();{const r=e.filter,a=new Gh(r.count||0);t=new oC(r.targetId,a)}}var _;return t}(this.Tt,e),r=function(i){if(!("targetChange"in i))return bt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?bt.min():a.readTime?pr(a.readTime):bt.min()}(e);return this.listener.Ho(t,r)}Jo(e){const t={};t.database=ig(this.Tt),t.addTarget=function(i,a){let c;const h=a.target;return c=S_(h)?{documents:QS(i,h)}:{query:hC(i,h)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=aC(i,a.resumeToken):a.snapshotVersion.compareTo(bt.min())>0&&(c.readTime=Wh(i,a.snapshotVersion.toTimestamp())),c}(this.Tt,e);const r=function QP(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.qo(t)}Yo(e){const t={};t.database=ig(this.Tt),t.removeTarget=e,this.qo(t)}}class CF extends IO{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.Tt=a,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,t){return this.connection.yo("Write",e,t)}onMessage(e){if(ht(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const t=function dC(n,e){return n&&n.length>0?(ht(void 0!==e),n.map(t=>function(r,i){let a=pr(r.updateTime?r.updateTime:i);return a.isEqual(bt.min())&&(a=pr(i)),new HS(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=pr(e.commitTime);return this.listener.eu(r,t)}return ht(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=ig(this.Tt),this.qo(e)}tu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>sg(this.Tt,r))};this.qo(t)}}class TF extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.Tt=i,this.iu=!1}ru(){if(this.iu)throw new Ae(ye.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,t,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.lo(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ae(ye.UNKNOWN,i.toString())})}mo(e,t,r,i){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.mo(e,t,r,a,c,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ae(ye.UNKNOWN,a.toString())})}terminate(){this.iu=!0}}class SF{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(it(t),this.cu=!1):Be("OnlineStateTracker",t)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class AF{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=a,this.yu.Gr(h=>{r.enqueueAndForget((0,be.Z)(function*(){var _;md(c)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,be.Z)(function*(w){const C=Ze(w);C.mu.add(4),yield J_(C),C.pu.set("Unknown"),C.mu.delete(4),yield C0(C)}),function(w){return _.apply(this,arguments)})(c))}))}),this.pu=new SF(r,i)}}function C0(n){return AA.apply(this,arguments)}function AA(){return AA=(0,be.Z)(function*(n){if(md(n))for(const e of n.gu)yield e(!0)}),AA.apply(this,arguments)}function J_(n){return RA.apply(this,arguments)}function RA(){return RA=(0,be.Z)(function*(n){for(const e of n.gu)yield e(!1)}),RA.apply(this,arguments)}function $C(n,e){const t=Ze(n);t.wu.has(e.targetId)||(t.wu.set(e.targetId,e),OA(t)?PA(t):ty(t).Mo()&&xA(t,e))}function T0(n,e){const t=Ze(n),r=ty(t);t.wu.delete(e),r.Mo()&&bO(t,e),0===t.wu.size&&(r.Mo()?r.Bo():md(t)&&t.pu.set("Unknown"))}function xA(n,e){n.Iu.Ot(e.targetId),ty(n).Jo(e)}function bO(n,e){n.Iu.Ot(e),ty(n).Yo(e)}function PA(n){n.Iu=new qS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>n.wu.get(e)||null}),ty(n).start(),n.pu.au()}function OA(n){return md(n)&&!ty(n).$o()&&n.wu.size>0}function md(n){return 0===Ze(n).mu.size}function CO(n){n.Iu=void 0}function RF(n){return MA.apply(this,arguments)}function MA(){return MA=(0,be.Z)(function*(n){n.wu.forEach((e,t)=>{xA(n,e)})}),MA.apply(this,arguments)}function xF(n,e){return NA.apply(this,arguments)}function NA(){return NA=(0,be.Z)(function*(n,e){CO(n),OA(n)?(n.pu.fu(e),PA(n)):n.pu.set("Unknown")}),NA.apply(this,arguments)}function PF(n,e,t){return kA.apply(this,arguments)}function kA(){return kA=(0,be.Z)(function*(n,e,t){if(n.pu.set("Online"),e instanceof Kw&&2===e.state&&e.cause)try{yield(r=(0,be.Z)(function*(i,a){const c=a.cause;for(const h of a.targetIds)i.wu.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i.wu.delete(h),i.Iu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield HC(n,r)}else if(e instanceof rg?n.Iu.Qt(e):e instanceof oC?n.Iu.Zt(e):n.Iu.Wt(e),!t.isEqual(bt.min()))try{const r=yield d(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.Iu.ee(a);return c.targetChanges.forEach((h,_)=>{if(h.resumeToken.approximateByteSize()>0){const w=i.wu.get(_);w&&i.wu.set(_,w.withResumeToken(h.resumeToken,a))}}),c.targetMismatches.forEach(h=>{const _=i.wu.get(h);if(!_)return;i.wu.set(h,_.withResumeToken(Vr.EMPTY_BYTE_STRING,_.snapshotVersion)),bO(i,h);const w=new ya(_.target,h,1,_.sequenceNumber);xA(i,w)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield HC(n,r)}var r}),kA.apply(this,arguments)}function HC(n,e,t){return FA.apply(this,arguments)}function FA(){return FA=(0,be.Z)(function*(n,e,t){if(!dc(e))throw e;n.mu.add(1),yield J_(n),n.pu.set("Offline"),t||(t=()=>d(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.mu.delete(1),yield C0(n)}))}),FA.apply(this,arguments)}function TO(n,e){return e().catch(t=>HC(n,t,e))}function ey(n){return LA.apply(this,arguments)}function LA(){return LA=(0,be.Z)(function*(n){const e=Ze(n),t=Jh(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;OF(e);)try{const i=yield I(e.localStore,r);if(null===i){0===e._u.length&&t.Bo();break}r=i.batchId,MF(e,i)}catch(i){yield HC(e,i)}DO(e)&&SO(e)}),LA.apply(this,arguments)}function OF(n){return md(n)&&n._u.length<10}function MF(n,e){n._u.push(e);const t=Jh(n);t.Mo()&&t.Xo&&t.tu(e.mutations)}function DO(n){return md(n)&&!Jh(n).$o()&&n._u.length>0}function SO(n){Jh(n).start()}function NF(n){return UA.apply(this,arguments)}function UA(){return UA=(0,be.Z)(function*(n){Jh(n).su()}),UA.apply(this,arguments)}function kF(n){return VA.apply(this,arguments)}function VA(){return VA=(0,be.Z)(function*(n){const e=Jh(n);for(const t of n._u)e.tu(t.mutations)}),VA.apply(this,arguments)}function FF(n,e,t){return jA.apply(this,arguments)}function jA(){return jA=(0,be.Z)(function*(n,e,t){const r=n._u.shift(),i=a0.from(r,e,t);yield TO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ey(n)}),jA.apply(this,arguments)}function LF(n,e){return BA.apply(this,arguments)}function BA(){return BA=(0,be.Z)(function*(n,e){var t;e&&Jh(n).Xo&&(yield(t=(0,be.Z)(function*(r,i){if(zS(a=i.code)&&a!==ye.ABORTED){const c=r._u.shift();Jh(r).Fo(),yield TO(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield ey(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),DO(n)&&SO(n)}),BA.apply(this,arguments)}function AO(n,e){return $A.apply(this,arguments)}function $A(){return $A=(0,be.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=md(t);t.mu.add(3),yield J_(t),r&&t.pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.mu.delete(3),yield C0(t)}),$A.apply(this,arguments)}function HA(n,e){return zA.apply(this,arguments)}function zA(){return zA=(0,be.Z)(function*(n,e){const t=Ze(n);e?(t.mu.delete(2),yield C0(t)):e||(t.mu.add(2),yield J_(t),t.pu.set("Unknown"))}),zA.apply(this,arguments)}function ty(n){return n.Tu||(n.Tu=function(e,t,r){const i=Ze(e);return i.ru(),new bF(t,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(n.datastore,n.asyncQueue,{Xr:RF.bind(null,n),no:xF.bind(null,n),Ho:PF.bind(null,n)}),n.gu.push(function(){var e=(0,be.Z)(function*(t){t?(n.Tu.Fo(),OA(n)?PA(n):n.pu.set("Unknown")):(yield n.Tu.stop(),CO(n))});return function(t){return e.apply(this,arguments)}}())),n.Tu}function Jh(n){return n.Eu||(n.Eu=function(e,t,r){const i=Ze(e);return i.ru(),new CF(t,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(n.datastore,n.asyncQueue,{Xr:NF.bind(null,n),no:LF.bind(null,n),nu:kF.bind(null,n),eu:FF.bind(null,n)}),n.gu.push(function(){var e=(0,be.Z)(function*(t){t?(n.Eu.Fo(),yield ey(n)):(yield n.Eu.stop(),n._u.length>0&&(Be("RemoteStore",`Stopping write stream with ${n._u.length} pending writes`),n._u=[]))});return function(t){return e.apply(this,arguments)}}())),n.Eu}class GA{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,h=new GA(e,t,c,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ny(n,e){if(it("AsyncQueue",`${e}: ${n}`),dc(n))return new Ae(ye.UNAVAILABLE,`${e}: ${n}`);throw n}class ry{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=cd(),this.sortedSet=new fr(this.comparator)}static emptySet(e){return new ry(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ry)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ry;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class RO{constructor(){this.Au=new fr(Ke.comparator)}track(e){const t=e.doc.key,r=this.Au.get(t);r?0!==e.type&&3===r.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==r.type?this.Au=this.Au.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Au=this.Au.remove(t):1===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):lt():this.Au=this.Au.insert(t,e)}Ru(){const e=[];return this.Au.inorderTraversal((t,r)=>{e.push(r)}),e}}class iy{constructor(e,t,r,i,a,c,h,_,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=_,this.hasCachedResults=w}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new iy(e,t,ry.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class UF{constructor(){this.Pu=void 0,this.listeners=[]}}class VF{constructor(){this.queries=new gu(e=>qb(e),pu),this.onlineState="Unknown",this.vu=new Set}}function WA(n,e){return qA.apply(this,arguments)}function qA(){return qA=(0,be.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new UF),i)try{a.Pu=yield t.onListen(r)}catch(c){const h=ny(c,`Initialization of query '${Jp(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Pu&&e.Vu(a.Pu)&&YA(t)}),qA.apply(this,arguments)}function KA(n,e){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,be.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),ZA.apply(this,arguments)}function jF(n,e){const t=Ze(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.Vu(i)&&(r=!0);c.Pu=i}}r&&YA(t)}function BF(n,e,t){const r=Ze(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function YA(n){n.vu.forEach(e=>{e.next()})}class QA{constructor(e,t,r){this.query=e,this.Su=t,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new iy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Du?this.xu(e)&&(this.Su.next(e),t=!0):this.Nu(e,this.onlineState)&&(this.ku(e),t=!0),this.Cu=e,t}onError(e){this.Su.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}Nu(e,t){return!e.fromCache||(!this.options.$u||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=iy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class $F{constructor(e,t){this.Mu=e,this.byteLength=t}Ou(){return"metadata"in this.Mu}}class xO{constructor(e){this.Tt=e}Zi(e){return _a(this.Tt,e)}Xi(e){return e.metadata.exists?n0(this.Tt,e.document,!1):jn.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return pr(e)}}class HF{constructor(e,t,r){this.Fu=e,this.localStore=t,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=PO(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;const r=an.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Lu(e){const t=new Map,r=new xO(this.Tt);for(const i of e)if(i.metadata.queries){const a=r.Zi(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||Gt()).add(a);t.set(c,h)}}return t}complete(){var e=this;return(0,be.Z)(function*(){const t=yield function ze(n,e,t,r){return Ye.apply(this,arguments)}(e.localStore,new xO(e.Tt),e.documents,e.Fu.id),r=e.Lu(e.documents);for(const i of e.queries)yield ft(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:t}})()}}function PO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class OO{constructor(e){this.key=e}}class MO{constructor(e){this.key=e}}class NO{constructor(e,t){this.query=e,this.Ku=t,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=Gt(),this.mutatedKeys=Gt(),this.ju=R_(e),this.zu=new ry(this.ju)}get Wu(){return this.Ku}Hu(e,t){const r=t?t.Ju:new RO,i=t?t.zu:this.zu;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,O)=>{const $=i.get(C),Z=ss(this.query,O)?O:null,ne=!!$&&this.mutatedKeys.has($.key),_e=!!Z&&(Z.hasLocalMutations||this.mutatedKeys.has(Z.key)&&Z.hasCommittedMutations);let Se=!1;$&&Z?$.data.isEqual(Z.data)?ne!==_e&&(r.track({type:3,doc:Z}),Se=!0):this.Yu($,Z)||(r.track({type:2,doc:Z}),Se=!0,(_&&this.ju(Z,_)>0||w&&this.ju(Z,w)<0)&&(h=!0)):!$&&Z?(r.track({type:0,doc:Z}),Se=!0):$&&!Z&&(r.track({type:1,doc:$}),Se=!0,(_||w)&&(h=!0)),Se&&(Z?(c=c.add(Z),a=_e?a.add(C):a.delete(C)):(c=c.delete(C),a=a.delete(C)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const C="F"===this.query.limitType?c.last():c.first();c=c.delete(C.key),a=a.delete(C.key),r.track({type:1,doc:C})}return{zu:c,Ju:r,Li:h,mutatedKeys:a}}Yu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const a=e.Ju.Ru();a.sort((w,C)=>function(O,$){const Z=ne=>{switch(ne){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return Z(O)-Z($)}(w.type,C.type)||this.ju(w.doc,C.doc)),this.Zu(r);const c=t?this.Xu():[],h=0===this.Qu.size&&this.current?1:0,_=h!==this.Gu;return this.Gu=h,0!==a.length||_?{snapshot:new iy(this.query,e.zu,i,a,e.mutatedKeys,0===h,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:c}:{tc:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new RO,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(t=>this.Ku=this.Ku.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ku=this.Ku.delete(t)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=Gt(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const t=[];return e.forEach(r=>{this.Qu.has(r)||t.push(new MO(r))}),this.Qu.forEach(r=>{e.has(r)||t.push(new OO(r))}),t}nc(e){this.Ku=e.Yi,this.Qu=Gt();const t=this.Hu(e.documents);return this.applyChanges(t,!0)}sc(){return iy.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class zF{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class GF{constructor(e){this.key=e,this.ic=!1}}class WF{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.rc={},this.oc=new gu(h=>qb(h),pu),this.uc=new Map,this.cc=new Set,this.ac=new fr(Ke.comparator),this.hc=new Map,this.lc=new mg,this.fc={},this.dc=new Map,this._c=_u.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function qF(n,e){return XA.apply(this,arguments)}function XA(){return XA=(0,be.Z)(function*(n,e){const t=ER(n);let r,i;const a=t.oc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.sc();else{const c=yield b(t.localStore,Ui(e));t.isPrimaryClient&&$C(t.remoteStore,c);const h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield JA(t,e,r,"current"===h,c.resumeToken)}return i}),XA.apply(this,arguments)}function JA(n,e,t,r,i){return eR.apply(this,arguments)}function eR(){return eR=(0,be.Z)(function*(n,e,t,r,i){n.mc=(O,$,Z)=>{return(ne=(0,be.Z)(function*(_e,Se,pt,Dt){let st=Se.view.Hu(pt);st.Li&&(st=yield q(_e.localStore,Se.query,!1).then(({documents:Vt})=>Se.view.Hu(Vt,st)));const _t=Dt&&Dt.targetChanges.get(Se.targetId),xt=Se.view.applyChanges(st,_e.isPrimaryClient,_t);return lR(_e,Se.targetId,xt.tc),xt.snapshot}),function(_e,Se,pt,Dt){return ne.apply(this,arguments)})(n,O,$,Z);var ne};const a=yield q(n.localStore,e,!0),c=new NO(e,a.Yi),h=c.Hu(a.documents),_=F_.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),w=c.applyChanges(h,n.isPrimaryClient,_);lR(n,t,w.tc);const C=new zF(e,t,c);return n.oc.set(e,C),n.uc.has(t)?n.uc.get(t).push(e):n.uc.set(t,[e]),w.snapshot}),eR.apply(this,arguments)}function KF(n,e){return tR.apply(this,arguments)}function tR(){return tR=(0,be.Z)(function*(n,e){const t=Ze(n),r=t.oc.get(e),i=t.uc.get(r.targetId);if(i.length>1)return t.uc.set(r.targetId,i.filter(a=>!pu(a,e))),void t.oc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield x(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),T0(t.remoteStore,r.targetId),sy(t,r.targetId)}).catch(Gl))):(sy(t,r.targetId),yield x(t.localStore,r.targetId,!0))}),tR.apply(this,arguments)}function nR(){return nR=(0,be.Z)(function*(n,e,t){const r=IR(n);try{const i=yield function(a,c){const h=Ze(a),_=bn.now(),w=c.reduce(($,Z)=>$.add(Z.key),Gt());let C,O;return h.persistence.runTransaction("Locally write mutations","readwrite",$=>{let Z=Jr(),ne=Gt();return h.ji.getEntries($,w).next(_e=>{Z=_e,Z.forEach((Se,pt)=>{pt.isValidDocument()||(ne=ne.add(Se))})}).next(()=>h.localDocuments.getOverlayedDocuments($,Z)).next(_e=>{C=_e;const Se=[];for(const pt of c){const Dt=eC(pt,C.get(pt.key).overlayedDocument);null!=Dt&&Se.push(new ma(pt.key,Dt,Gb(Dt.value.mapValue),Kn.exists(!0)))}return h.mutationQueue.addMutationBatch($,_,Se,c)}).next(_e=>{O=_e;const Se=_e.applyToLocalDocumentSet(C,ne);return h.documentOverlayCache.saveOverlays($,_e.batchId,Se)})}).then(()=>({batchId:O.batchId,changes:rC(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,h){let _=a.fc[a.currentUser.toKey()];_||(_=new fr($t)),_=_.insert(c,h),a.fc[a.currentUser.toKey()]=_}(r,i.batchId,t),yield _d(r,i.changes),yield ey(r.remoteStore)}catch(i){const a=ny(i,"Failed to persist write");t.reject(a)}}),nR.apply(this,arguments)}function kO(n,e){return rR.apply(this,arguments)}function rR(){return rR=(0,be.Z)(function*(n,e){const t=Ze(n);try{const r=yield function p(n,e){const t=Ze(n),r=e.snapshotVersion;let i=t.Ki;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.ji.newChangeBuffer({trackRemovals:!0});i=t.Ki;const h=[];e.targetChanges.forEach((C,O)=>{const $=i.get(O);if(!$)return;h.push(t.Ns.removeMatchingKeys(a,C.removedDocuments,O).next(()=>t.Ns.addMatchingKeys(a,C.addedDocuments,O)));let Z=$.withSequenceNumber(a.currentSequenceNumber);var ne,_e,Se;e.targetMismatches.has(O)?Z=Z.withResumeToken(Vr.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):C.resumeToken.approximateByteSize()>0&&(Z=Z.withResumeToken(C.resumeToken,r)),i=i.insert(O,Z),_e=Z,Se=C,(0===(ne=$).resumeToken.approximateByteSize()||_e.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=3e8||Se.addedDocuments.size+Se.modifiedDocuments.size+Se.removedDocuments.size>0)&&h.push(t.Ns.updateTargetData(a,Z))});let _=Jr(),w=Gt();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,C))}),h.push(v(a,c,e.documentUpdates).next(C=>{_=C.Hi,w=C.Ji})),!r.isEqual(bt.min())){const C=t.Ns.getLastRemoteSnapshotVersion(a).next(O=>t.Ns.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(C)}return pe.waitFor(h).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,_,w)).next(()=>_)}).then(a=>(t.Ki=i,a))}(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.hc.get(a);c&&(ht(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.ic=!0:i.modifiedDocuments.size>0?ht(c.ic):i.removedDocuments.size>0&&(ht(c.ic),c.ic=!1))}),yield _d(t,r,e)}catch(r){yield Gl(r)}}),rR.apply(this,arguments)}function FO(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.oc.forEach((a,c)=>{const h=c.view.bu(e);h.snapshot&&i.push(h.snapshot)}),function(a,c){const h=Ze(a);h.onlineState=c;let _=!1;h.queries.forEach((w,C)=>{for(const O of C.listeners)O.bu(c)&&(_=!0)}),_&&YA(h)}(r.eventManager,e),i.length&&r.rc.Ho(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function YF(n,e,t){return iR.apply(this,arguments)}function iR(){return iR=(0,be.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.hc.get(e),a=i&&i.key;if(a){let c=new fr(Ke.comparator);c=c.insert(a,jn.newNoDocument(a,bt.min()));const h=Gt().add(a),_=new dd(bt.min(),new Map,new Tn($t),c,h);yield kO(r,_),r.ac=r.ac.remove(a),r.hc.delete(e),dR(r)}else yield x(r.localStore,e,!1).then(()=>sy(r,e,t)).catch(Gl)}),iR.apply(this,arguments)}function QF(n,e){return sR.apply(this,arguments)}function sR(){return sR=(0,be.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const i=yield function l(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.ji.newChangeBuffer({trackRemovals:!0});return function(c,h,_,w){const C=_.batch,O=C.keys();let $=pe.resolve();return O.forEach(Z=>{$=$.next(()=>w.getEntry(h,Z)).next(ne=>{const _e=_.docVersions.get(Z);ht(null!==_e),ne.version.compareTo(_e)<0&&(C.applyToRemoteDocument(ne,_),ne.isValidDocument()&&(ne.setReadTime(_.commitVersion),w.addEntry(ne)))})}),$.next(()=>c.mutationQueue.removeMutationBatch(h,C))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=Gt();for(let _=0;_<c.mutationResults.length;++_)c.mutationResults[_].transformResults.length>0&&(h=h.add(c.batch.mutations[_].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);cR(t,r,null),uR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield _d(t,i)}catch(i){yield Gl(i)}}),sR.apply(this,arguments)}function XF(n,e,t){return oR.apply(this,arguments)}function oR(){return oR=(0,be.Z)(function*(n,e,t){const r=Ze(n);try{const i=yield function(a,c){const h=Ze(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return h.mutationQueue.lookupMutationBatch(_,c).next(C=>(ht(null!==C),w=C.keys(),h.mutationQueue.removeMutationBatch(_,C))).next(()=>h.mutationQueue.performConsistencyCheck(_)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(_,w,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w)).next(()=>h.localDocuments.getDocuments(_,w))})}(r.localStore,e);cR(r,e,t),uR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield _d(r,i)}catch(i){yield Gl(i)}}),oR.apply(this,arguments)}function aR(){return aR=(0,be.Z)(function*(n,e){const t=Ze(n);md(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=Ze(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.dc.get(r)||[];i.push(e),t.dc.set(r,i)}catch(r){const i=ny(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),aR.apply(this,arguments)}function uR(n,e){(n.dc.get(e)||[]).forEach(t=>{t.resolve()}),n.dc.delete(e)}function cR(n,e,t){const r=Ze(n);let i=r.fc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.fc[r.currentUser.toKey()]=i}}function sy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.uc.get(e))n.oc.delete(r),t&&n.rc.gc(r,t);n.uc.delete(e),n.isPrimaryClient&&n.lc.ds(e).forEach(r=>{n.lc.containsKey(r)||LO(n,r)})}function LO(n,e){n.cc.delete(e.path.canonicalString());const t=n.ac.get(e);null!==t&&(T0(n.remoteStore,t),n.ac=n.ac.remove(e),n.hc.delete(t),dR(n))}function lR(n,e,t){for(const r of t)r instanceof OO?(n.lc.addReference(r.key,e),eL(n,r)):r instanceof MO?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.lc.removeReference(r.key,e),n.lc.containsKey(r.key)||LO(n,r.key)):lt()}function eL(n,e){const t=e.key,r=t.path.canonicalString();n.ac.get(t)||n.cc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.cc.add(r),dR(n))}function dR(n){for(;n.cc.size>0&&n.ac.size<n.maxConcurrentLimboResolutions;){const e=n.cc.values().next().value;n.cc.delete(e);const t=new Ke(an.fromString(e)),r=n._c.next();n.hc.set(r,new GF(t)),n.ac=n.ac.insert(t,r),$C(n.remoteStore,new ya(Ui(id(t.path)),r,2,Ss.at))}}function _d(n,e,t){return hR.apply(this,arguments)}function hR(){return hR=(0,be.Z)(function*(n,e,t){const r=Ze(n),i=[],a=[],c=[];var h;r.oc.isEmpty()||(r.oc.forEach((h,_)=>{c.push(r.mc(_,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const C=UC.Ni(_.targetId,w);a.push(C)}}))}),yield Promise.all(c),r.rc.Ho(i),yield(h=(0,be.Z)(function*(_,w){const C=Ze(_);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>pe.forEach(w,$=>pe.forEach($.Ci,Z=>C.persistence.referenceDelegate.addReference(O,$.targetId,Z)).next(()=>pe.forEach($.xi,Z=>C.persistence.referenceDelegate.removeReference(O,$.targetId,Z)))))}catch(O){if(!dc(O))throw O;Be("LocalStore","Failed to update sequence numbers: "+O)}for(const O of w){const $=O.targetId;if(!O.fromCache){const Z=C.Ki.get($),_e=Z.withLastLimboFreeSnapshotVersion(Z.snapshotVersion);C.Ki=C.Ki.insert($,_e)}}}),function(_,w){return h.apply(this,arguments)})(r.localStore,a))}),hR.apply(this,arguments)}function tL(n,e){return fR.apply(this,arguments)}function fR(){return fR=(0,be.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield o(t.localStore,e);t.currentUser=e,(i=t).dc.forEach(c=>{c.forEach(h=>{h.reject(new Ae(ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.dc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield _d(t,r.Wi)}var i}),fR.apply(this,arguments)}function nL(n,e){const t=Ze(n),r=t.hc.get(e);if(r&&r.ic)return Gt().add(r.key);{let i=Gt();const a=t.uc.get(e);if(!a)return i;for(const c of a){const h=t.oc.get(c);i=i.unionWith(h.view.Wu)}return i}}function rL(n,e){return pR.apply(this,arguments)}function pR(){return pR=(0,be.Z)(function*(n,e){const t=Ze(n),r=yield q(t.localStore,e.query,!0),i=e.view.nc(r);return t.isPrimaryClient&&lR(t,e.targetId,i.tc),i}),pR.apply(this,arguments)}function iL(n,e){return gR.apply(this,arguments)}function gR(){return gR=(0,be.Z)(function*(n,e){const t=Ze(n);return de(t.localStore,e).then(r=>_d(t,r))}),gR.apply(this,arguments)}function sL(n,e,t,r){return mR.apply(this,arguments)}function mR(){return mR=(0,be.Z)(function*(n,e,t,r){const i=Ze(n),a=yield function(c,h){const _=Ze(c),w=Ze(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",C=>w.An(C,h).next(O=>O?_.localDocuments.getDocuments(C,O):pe.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield ey(i.remoteStore):"acknowledged"===t||"rejected"===t?(cR(i,e,r||null),uR(i,e),h=e,Ze(Ze(i.localStore).mutationQueue).Pn(h)):lt(),yield _d(i,a)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),mR.apply(this,arguments)}function _R(){return _R=(0,be.Z)(function*(n,e){const t=Ze(n);if(ER(t),IR(t),!0===e&&!0!==t.wc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield UO(t,r.toArray());t.wc=!0,yield HA(t.remoteStore,!0);for(const a of i)$C(t.remoteStore,a)}else if(!1===e&&!1!==t.wc){const r=[];let i=Promise.resolve();t.uc.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(sy(t,c),x(t.localStore,c,!0))),T0(t.remoteStore,c)}),yield i,yield UO(t,r),function(a){const c=Ze(a);c.hc.forEach((h,_)=>{T0(c.remoteStore,_)}),c.lc._s(),c.hc=new Map,c.ac=new fr(Ke.comparator)}(t),t.wc=!1,yield HA(t.remoteStore,!1)}}),_R.apply(this,arguments)}function UO(n,e,t){return yR.apply(this,arguments)}function yR(){return yR=(0,be.Z)(function*(n,e,t){const r=Ze(n),i=[],a=[];for(const c of e){let h;const _=r.uc.get(c);if(_&&0!==_.length){h=yield b(r.localStore,Ui(_[0]));for(const w of _){const C=r.oc.get(w),O=yield rL(r,C);O.snapshot&&a.push(O.snapshot)}}else{const w=yield re(r.localStore,c);h=yield b(r.localStore,w),yield JA(r,VO(w),c,!1,h.resumeToken)}i.push(h)}return r.rc.Ho(a),i}),yR.apply(this,arguments)}function VO(n){return Lw(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function aL(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).Si()}function uL(n,e,t,r){return vR.apply(this,arguments)}function vR(){return vR=(0,be.Z)(function*(n,e,t,r){const i=Ze(n);if(i.wc)return void Be("SyncEngine","Ignoring unexpected query state notification.");const a=i.uc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield de(i.localStore,Kb(a[0])),h=dd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Vr.EMPTY_BYTE_STRING);yield _d(i,c,h);break}case"rejected":yield x(i.localStore,e,!0),sy(i,e,r);break;default:lt()}}),vR.apply(this,arguments)}function cL(n,e,t){return wR.apply(this,arguments)}function wR(){return wR=(0,be.Z)(function*(n,e,t){const r=ER(n);if(r.wc){for(const i of e){if(r.uc.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const a=yield re(r.localStore,i),c=yield b(r.localStore,a);yield JA(r,VO(a),c.targetId,!1,c.resumeToken),$C(r.remoteStore,c)}for(const i of t)r.uc.has(i)&&(yield x(r.localStore,i,!1).then(()=>{T0(r.remoteStore,i),sy(r,i)}).catch(Gl))}}),wR.apply(this,arguments)}function ER(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=kO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YF.bind(null,e),e.rc.Ho=jF.bind(null,e.eventManager),e.rc.gc=BF.bind(null,e.eventManager),e}function IR(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XF.bind(null,e),e}class jO{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,be.Z)(function*(){t.Tt=b0(e.databaseInfo.databaseId),t.sharedClientState=t.Ic(e),t.persistence=t.Tc(e),yield t.persistence.start(),t.localStore=t.Ec(e),t.gcScheduler=t.Ac(e,t.localStore),t.indexBackfillerScheduler=t.Rc(e,t.localStore)})()}Ac(e,t){return null}Rc(e,t){return null}Ec(e){return s(this.persistence,new EA,e.initialUser,this.Tt)}Tc(e){return new kC(w0.qs,this.Tt)}Ic(e){return new vO}terminate(){var e=this;return(0,be.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class BO extends jO{constructor(e,t,r){super(),this.Pc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e),yield r.Pc.initialize(r,e),yield IR(r.Pc.syncEngine),yield ey(r.Pc.remoteStore),yield r.persistence.di(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return s(this.persistence,new EA,e.initialUser,this.Tt)}Ac(e,t){return new dO(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Rc(e,t){const r=new Sb(t,this.persistence);return new MS(e.asyncQueue,r)}Tc(e){const t=LC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?As.withCacheSize(this.cacheSizeBytes):As.DEFAULT;return new E0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,EO(),BC(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new vO}}class dL extends BO{constructor(e,t){super(e,t,!1),this.Pc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e);const i=r.Pc.syncEngine;r.sharedClientState instanceof CA&&(r.sharedClientState.syncEngine={Br:sL.bind(null,i),Lr:uL.bind(null,i),qr:cL.bind(null,i),Si:aL.bind(null,i),Fr:iL.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.di(function(){var a=(0,be.Z)(function*(c){yield function oL(n,e){return _R.apply(this,arguments)}(r.Pc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}Ic(e){const t=EO();if(!CA.C(t))throw new Ae(ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=LC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new CA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class bR{initialize(e,t){var r=this;return(0,be.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>FO(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=tL.bind(null,r.syncEngine),yield HA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new VF}createDatastore(e){const t=b0(e.databaseInfo.databaseId),r=new IF(e.databaseInfo);return new TF(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>FO(this.syncEngine,h,0),c=wO.C()?new wO:new vF,new AF(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,h,_,w){const C=new WF(r,i,a,c,h,_);return w&&(C.wc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,be.Z)(function*(t){const r=Ze(t);Be("RemoteStore","RemoteStore shutting down."),r.mu.add(5),yield J_(r),r.yu.shutdown(),r.pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function $O(n,e=10240){let t=0;return{read:()=>(0,be.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,be.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class zC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):it("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class hL{constructor(e,t){this.Vc=e,this.Tt=t,this.metadata=new Qr,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Mu)}`))},r=>this.metadata.reject(r))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,be.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,be.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,be.Z)(function*(){const t=yield e.Cc();if(null===t)return null;const r=e.Sc.decode(t),i=Number(r);isNaN(i)&&e.xc(`length string (${r}) is not valid number`);const a=yield e.Nc(i);return new $F(JSON.parse(a),t.length+i)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,be.Z)(function*(){for(;e.kc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.kc();t<0&&e.xc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Nc(e){var t=this;return(0,be.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.xc("Reached the end of bundle when more is expected.");const r=t.Sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,be.Z)(function*(){const t=yield e.Vc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class fL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,be.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,be.Z)(function*(a,c){const h=Ze(a),_=ig(h.Tt)+"/documents",w={documents:c.map(Z=>qh(h.Tt,Z))},C=yield h.mo("BatchGetDocuments",_,w,c.length),O=new Map;C.forEach(Z=>{const ne=function cC(n,e){return"found"in e?function(t,r){ht(!!r.found);const i=_a(t,r.found.name),a=pr(r.found.updateTime),c=r.found.createTime?pr(r.found.createTime):bt.min(),h=new Xr({mapValue:{fields:r.found.fields}});return jn.newFoundDocument(i,a,c,h)}(n,e):"missing"in e?function(t,r){ht(!!r.missing),ht(!!r.readTime);const i=_a(t,r.missing),a=pr(r.readTime);return jn.newNoDocument(i,a)}(n,e):lt()}(h.Tt,Z);O.set(ne.key.toString(),ne)});const $=[];return c.forEach(Z=>{const ne=O.get(Z.toString());ht(!!ne),$.push(ne)}),$}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new zh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,be.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ke.fromPath(i);e.mutations.push(new hi(a,e.precondition(a)))}),yield(r=(0,be.Z)(function*(i,a){const c=Ze(i),h=ig(c.Tt)+"/documents",_={writes:a.map(w=>sg(c.Tt,w))};yield c.lo("Commit",h,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw lt();t=bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ae(ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(bt.min())?Kn.exists(!1):Kn.updateTime(t):Kn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bt.min()))throw new Ae(ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kn.updateTime(t)}return Kn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class pL{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Mc=r.maxAttempts,this.ko=new DA(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Oc()}Oc(){var e=this;this.ko.vo((0,be.Z)(function*(){const t=new fL(e.datastore),r=e.Fc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Bc(a)}))}).catch(i=>{e.Bc(i)})}))}Fc(e){try{const t=this.updateFunction(e);return!Wp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!zS(t)}return!1}}class gL{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=di.UNAUTHENTICATED,this.clientId=Lh.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,be.Z)(function*(h){Be("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Be("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,be.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(ye.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=ny(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function HO(n,e){return CR.apply(this,arguments)}function CR(){return CR=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,be.Z)(function*(a){r.isEqual(a)||(yield o(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),CR.apply(this,arguments)}function zO(n,e){return TR.apply(this,arguments)}function TR(){return TR=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield DR(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>AO(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>AO(e.remoteStore,a)),n.onlineComponents=e}),TR.apply(this,arguments)}function DR(n){return SR.apply(this,arguments)}function SR(){return SR=(0,be.Z)(function*(n){return n.offlineComponents||(Be("FirestoreClient","Using default OfflineComponentProvider"),yield HO(n,new jO)),n.offlineComponents}),SR.apply(this,arguments)}function GC(n){return AR.apply(this,arguments)}function AR(){return AR=(0,be.Z)(function*(n){return n.onlineComponents||(Be("FirestoreClient","Using default OnlineComponentProvider"),yield zO(n,new bR)),n.onlineComponents}),AR.apply(this,arguments)}function GO(n){return DR(n).then(e=>e.persistence)}function WC(n){return DR(n).then(e=>e.localStore)}function RR(n){return GC(n).then(e=>e.remoteStore)}function xR(n){return GC(n).then(e=>e.syncEngine)}function oy(n){return PR.apply(this,arguments)}function PR(){return PR=(0,be.Z)(function*(n){const e=yield GC(n),t=e.eventManager;return t.onListen=qF.bind(null,e.syncEngine),t.onUnlisten=KF.bind(null,e.syncEngine),t}),PR.apply(this,arguments)}function qO(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,a,c,h,_){const w=new zC({next:O=>{a.enqueueAndForget(()=>KA(i,C));const $=O.docs.has(c);!$&&O.fromCache?_.reject(new Ae(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&O.fromCache&&h&&"server"===h.source?_.reject(new Ae(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(O)},error:O=>_.reject(O)}),C=new QA(id(c.path),w,{includeMetadataChanges:!0,$u:!0});return WA(i,C)}(yield oy(n),n.asyncQueue,e,t,r)})),r.promise}function KO(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,a,c,h,_){const w=new zC({next:O=>{a.enqueueAndForget(()=>KA(i,C)),O.fromCache&&"server"===h.source?_.reject(new Ae(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(O)},error:O=>_.reject(O)}),C=new QA(c,w,{includeMetadataChanges:!0,$u:!0});return WA(i,C)}(yield oy(n),n.asyncQueue,e,t,r)})),r.promise}const ZO=new Map;function OR(n,e,t){if(!t)throw new Ae(ye.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function YO(n,e,t,r){if(!0===e&&!0===r)throw new Ae(ye.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function QO(n){if(!Ke.isDocumentKey(n))throw new Ae(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function XO(n){if(Ke.isDocumentKey(n))throw new Ae(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":lt()}function ln(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qC(n);throw new Ae(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function JO(n,e){if(e<=0)throw new Ae(ye.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class eM{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,YO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class D0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eM({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ae(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eM(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new gb;switch(t.type){case"gapi":return new yb(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ae(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ZO.get(e);t&&(Be("ComponentProvider","Removing Datastore"),ZO.delete(e),t.terminate())}(this),Promise.resolve()}}class sr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sr(this.firestore,e,this._key)}}class Vi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vi(this.firestore,e,this._query)}}class Cc extends Vi{constructor(e,t,r){super(e,t,id(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sr(this.firestore,null,new Ke(e))}withConverter(e){return new Cc(this.firestore,e,this._path)}}function nM(n,e,...t){if(n=(0,z.m9)(n),OR("collection","path",e),n instanceof D0){const r=an.fromString(e,...t);return XO(r),new Cc(n,null,r)}{if(!(n instanceof sr||n instanceof Cc))throw new Ae(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return XO(r),new Cc(n.firestore,null,r)}}function KC(n,e,...t){if(n=(0,z.m9)(n),1===arguments.length&&(e=Lh.R()),OR("doc","path",e),n instanceof D0){const r=an.fromString(e,...t);return QO(r),new sr(n,null,new Ke(r))}{if(!(n instanceof sr||n instanceof Cc))throw new Ae(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return QO(r),new sr(n.firestore,n instanceof Cc?n.converter:null,new Ke(r))}}function rM(n,e){return n=(0,z.m9)(n),e=(0,z.m9)(e),(n instanceof sr||n instanceof Cc)&&(e instanceof sr||e instanceof Cc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function MR(n,e){return n=(0,z.m9)(n),e=(0,z.m9)(e),n instanceof Vi&&e instanceof Vi&&n.firestore===e.firestore&&pu(n._query,e._query)&&n.converter===e.converter}class CL{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new DA(this,"async_queue_retry"),this.Hc=()=>{const t=BC();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ko.Vo()};const e=BC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const t=BC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const t=new Qr;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,be.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(t){if(!dc(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const t=this.qc.then(()=>(this.jc=!0,e().catch(r=>{throw this.Qc=r,this.jc=!1,it("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.jc=!1,r))));return this.qc=t,t}enqueueAfterDelay(e,t,r){this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);const i=GA.createAndSchedule(this,e,t,r,a=>this.Xc(a));return this.Gc.push(i),i}Jc(){this.Qc&&lt()}verifyOperationInProgress(){}ta(){var e=this;return(0,be.Z)(function*(){let t;do{t=e.qc,yield t}while(t!==e.qc)})()}ea(e){for(const t of this.Gc)if(t.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Gc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}function NR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class TL{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class or extends D0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new CL,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||iM(this),this._firestoreClient.terminate()}}function jr(n){return n._firestoreClient||iM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function iM(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Ab(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new gL(n._authCredentials,n._appCheckCredentials,n._queue,r)}function sM(n,e,t){const r=new Qr;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield HO(n,t),yield zO(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(c=a).name?c.code===ye.FAILED_PRECONDITION||c.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw a;Hl("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var c})).then(()=>r.promise)}function oM(n){if(n._initialized||n._terminated)throw new Ae(ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Tc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tc(Vr.fromBase64String(e))}catch(t){throw new Ae(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Tc(Vr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class yd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _g{constructor(e){this._methodName=e}}class ZC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}const FL=/^__.*__$/;class LL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ma(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hh(e,this.data,t,this.fieldTransforms)}}class aM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ma(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function uM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class YC{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.Tt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ia(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new YC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.oa({path:r,ca:!1});return i.aa(e),i}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.oa({path:r,ca:!1});return i.ia(),i}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return JC(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(uM(this.ra)&&FL.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class UL{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.Tt=r||b0(e)}wa(e,t,r,i=!1){return new YC({ra:e,methodName:t,_a:r,path:Nn.emptyPath(),ca:!1,da:i},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function yg(n){const e=n._freezeSettings(),t=b0(n._databaseId);return new UL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function QC(n,e,t,r,i,a={}){const c=n.wa(a.merge||a.mergeFields?2:0,e,t,i);UR("Data must be an object, but it was:",c,r);const h=dM(r,c);let _,w;if(a.merge)_=new Li(c.fieldMask),w=c.fieldTransforms;else if(a.mergeFields){const C=[];for(const O of a.mergeFields){const $=R0(e,O,t);if(!c.contains($))throw new Ae(ye.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);fM(C,$)||C.push($)}_=new Li(C),w=c.fieldTransforms.filter(O=>_.covers(O.field))}else _=null,w=c.fieldTransforms;return new LL(new Xr(h),_,w)}class A0 extends _g{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof A0}}function cM(n,e,t){return new YC({ra:3,_a:e.settings._a,methodName:n._methodName,ca:t},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class kR extends _g{_toFieldTransform(e){return new ud(e.path,new ad)}isEqual(e){return e instanceof kR}}class VL extends _g{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=cM(this,e,!0),r=this.ma.map(a=>vg(a,t)),i=new yc(r);return new ud(e.path,i)}isEqual(e){return this===e}}class jL extends _g{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=cM(this,e,!0),r=this.ma.map(a=>vg(a,t)),i=new vc(r);return new ud(e.path,i)}isEqual(e){return this===e}}class BL extends _g{constructor(e,t){super(e),this.ga=t}_toFieldTransform(e){const t=new wc(e.Tt,Qb(e.Tt,this.ga));return new ud(e.path,t)}isEqual(e){return this===e}}function FR(n,e,t,r){const i=n.wa(1,e,t);UR("Data must be an object, but it was:",i,r);const a=[],c=Xr.empty();Kl(r,(_,w)=>{const C=XC(e,_,t);w=(0,z.m9)(w);const O=i.ha(C);if(w instanceof A0)a.push(C);else{const $=vg(w,O);null!=$&&(a.push(C),c.set(C,$))}});const h=new Li(a);return new aM(c,h,i.fieldTransforms)}function LR(n,e,t,r,i,a){const c=n.wa(1,e,t),h=[R0(e,r,t)],_=[i];if(a.length%2!=0)throw new Ae(ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<a.length;$+=2)h.push(R0(e,a[$])),_.push(a[$+1]);const w=[],C=Xr.empty();for(let $=h.length-1;$>=0;--$)if(!fM(w,h[$])){const Z=h[$];let ne=_[$];ne=(0,z.m9)(ne);const _e=c.ha(Z);if(ne instanceof A0)w.push(Z);else{const Se=vg(ne,_e);null!=Se&&(w.push(Z),C.set(Z,Se))}}const O=new Li(w);return new aM(C,O,c.fieldTransforms)}function lM(n,e,t,r=!1){return vg(t,n.wa(r?4:3,e))}function vg(n,e){if(hM(n=(0,z.m9)(n)))return UR("Unsupported field value:",e,n),dM(n,e);if(n instanceof _g)return function(t,r){if(!uM(r.ra))throw r.fa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let h=vg(c,r.la(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,z.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Qb(r.Tt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=bn.fromDate(t);return{timestampValue:Wh(r.Tt,i)}}if(t instanceof bn){const i=new bn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Wh(r.Tt,i)}}if(t instanceof ZC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Tc)return{bytesValue:aC(r.Tt,t._byteString)};if(t instanceof sr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.fa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Yw(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.fa(`Unsupported field value: ${qC(t)}`)}(n,e)}function dM(n,e){const t={};return Cw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Kl(n,(r,i)=>{const a=vg(i,e.ua(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function hM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof bn||n instanceof ZC||n instanceof Tc||n instanceof sr||n instanceof _g)}function UR(n,e,t){if(!hM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=qC(t);throw e.fa("an object"===r?n+" a custom object":n+" "+r)}var r}function R0(n,e,t){if((e=(0,z.m9)(e))instanceof yd)return e._internalPath;if("string"==typeof e)return XC(n,e);throw JC("Field path arguments must be of type string or ",n,!1,void 0,t)}const $L=new RegExp("[~\\*/\\[\\]]");function XC(n,e,t){if(e.search($L)>=0)throw JC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new yd(...e.split("."))._internalPath}catch{throw JC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function JC(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let _="";return(a||c)&&(_+=" (found",a&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new Ae(ye.INVALID_ARGUMENT,h+n+_)}function fM(n,e){return n.some(t=>t.isEqual(e))}class x0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new sr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new HL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(eT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class HL extends x0{data(){return super.data()}}function eT(n,e){return"string"==typeof e?XC(n,e):e instanceof yd?e._internalPath:e._delegate._internalPath}function pM(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ae(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VR{}class P0 extends VR{}function ef(n,e,...t){let r=[];e instanceof VR&&r.push(e),r=r.concat(t),function(i){const a=i.filter(h=>h instanceof ay).length,c=i.filter(h=>h instanceof O0).length;if(a>1||a>0&&c>0)throw new Ae(ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class O0 extends P0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new O0(e,t,r)}_apply(e){const t=this._parse(e);return yM(e._query,t),new Vi(e.firestore,e.converter,Bw(e._query,t))}_parse(e){const t=yg(e.firestore);return function(i,a,c,h,_,w,C){let O;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Ae(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){_M(C,w);const $=[];for(const Z of C)$.push(mM(h,i,Z));O={arrayValue:{values:$}}}else O=mM(h,i,C)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||_M(C,w),O=lM(c,"where",C,"in"===w||"not-in"===w);return tn.create(_,w,O)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ay extends VR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ay(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Cn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const c=i.getFlattenedFilters();for(const h of c)yM(a,h),a=Bw(a,h)}(e._query,t),new Vi(e.firestore,e.converter,Bw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class jR extends P0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new jR(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ae(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ae(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Qp(i,a);return function(h,_){if(null===Uw(h)){const w=Vw(h);null!==w&&vM(0,w,_.field)}}(r,c),c}(e._query,this._field,this._direction);return new Vi(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new ga(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class tT extends P0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new tT(e,t,r)}_apply(e){return new Vi(e.firestore,e.converter,A_(e._query,this._limit,this._limitType))}}class nT extends P0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new nT(e,t,r)}_apply(e){const t=gM(e,this.type,this._docOrFields,this._inclusive);return new Vi(e.firestore,e.converter,(i=t,new ga((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class rT extends P0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new rT(e,t,r)}_apply(e){const t=gM(e,this.type,this._docOrFields,this._inclusive);return new Vi(e.firestore,e.converter,(i=t,new ga((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function gM(n,e,t,r){if(t[0]=(0,z.m9)(t[0]),t[0]instanceof x0)return function(i,a,c,h,_){if(!h)throw new Ae(ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const w=[];for(const C of sd(i))if(C.field.isKeyField())w.push(Jl(a,h.key));else{const O=h.data.field(C.field);if(w_(O))throw new Ae(ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const $=C.field.canonicalString();throw new Ae(ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}w.push(O)}return new mc(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=yg(n.firestore);return function(a,c,h,_,w,C){const O=a.explicitOrderBy;if(w.length>O.length)throw new Ae(ye.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let Z=0;Z<w.length;Z++){const ne=w[Z];if(O[Z].field.isKeyField()){if("string"!=typeof ne)throw new Ae(ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof ne}`);if(!jw(a)&&-1!==ne.indexOf("/"))throw new Ae(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${ne}' contains a slash.`);const _e=a.path.child(an.fromString(ne));if(!Ke.isDocumentKey(_e))throw new Ae(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${_e}' is not because it contains an odd number of segments.`);const Se=new Ke(_e);$.push(Jl(c,Se))}else{const _e=lM(h,_,ne);$.push(_e)}}return new mc($,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function mM(n,e,t){if("string"==typeof(t=(0,z.m9)(t))){if(""===t)throw new Ae(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jw(e)&&-1!==t.indexOf("/"))throw new Ae(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(an.fromString(t));if(!Ke.isDocumentKey(r))throw new Ae(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Jl(n,new Ke(r))}if(t instanceof sr)return Jl(n,t._key);throw new Ae(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qC(t)}.`)}function _M(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yM(n,e){if(e.isInequality()){const r=Vw(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ae(ye.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=Uw(n);null!==a&&vM(0,i,a)}const t=function(r,i){for(const a of r)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ae(ye.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function vM(n,e,t){if(!t.isEqual(e))throw new Ae(ye.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class BR{convertValue(e,t="none"){switch(Ql(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lt()}}convertObject(e,t){const r={};return Kl(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new ZC(qn(e.latitude),qn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ob(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(qp(e));default:return null}}convertTimestamp(e){const t=fc(e);return new bn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=an.fromString(e);ht(s0(r));const i=new hc(r.get(1),r.get(3)),a=new Ke(r.popFirst(5));return i.isEqual(t)||it(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function iT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class XL extends BR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sr(this.firestore,null,t)}}class wg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vd extends x0{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new M0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(eT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class M0 extends vd{data(e={}){return super.data(e)}}class tf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new wg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new M0(this._firestore,this._userDataWriter,r.key,r,new wg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new M0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new wg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new M0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new wg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==c.type&&(_=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),w=a.indexOf(c.doc.key)),{type:eU(c.type),doc:h,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function eU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function EM(n,e){return n instanceof vd&&e instanceof vd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof tf&&e instanceof tf&&n._firestore===e._firestore&&MR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class nf extends BR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sr(this.firestore,null,t)}}function IM(n,e,t){n=ln(n,sr);const r=ln(n.firestore,or),i=iT(n.converter,e,t);return uy(r,[QC(yg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Kn.none())])}function bM(n,e,t,...r){n=ln(n,sr);const i=ln(n.firestore,or),a=yg(i);let c;return c="string"==typeof(e=(0,z.m9)(e))||e instanceof yd?LR(a,"updateDoc",n._key,e,t,r):FR(a,"updateDoc",n._key,e),uy(i,[c.toMutation(n._key,Kn.exists(!0))])}function CM(n,...e){var t,r,i;n=(0,z.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||NR(e[c])||(a=e[c],c++);const h={includeMetadataChanges:a.includeMetadataChanges};if(NR(e[c])){const O=e[c];e[c]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[c+1]=null===(r=O.error)||void 0===r?void 0:r.bind(O),e[c+2]=null===(i=O.complete)||void 0===i?void 0:i.bind(O)}let _,w,C;if(n instanceof sr)w=ln(n.firestore,or),C=id(n._key.path),_={next:O=>{e[c]&&e[c]($R(w,n,O))},error:e[c+1],complete:e[c+2]};else{const O=ln(n,Vi);w=ln(O.firestore,or),C=O._query;const $=new nf(w);_={next:Z=>{e[c]&&e[c](new tf(w,$,O,Z))},error:e[c+1],complete:e[c+2]},pM(n._query)}return function(O,$,Z,ne){const _e=new zC(ne),Se=new QA($,_e,Z);return O.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return WA(yield oy(O),Se)})),()=>{_e.bc(),O.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return KA(yield oy(O),Se)}))}}(jr(w),C,h,_)}function uy(n,e){return function(t,r){const i=new Qr;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function ZF(n,e,t){return nR.apply(this,arguments)}(yield xR(t),r,i)})),i.promise}(jr(n),e)}function $R(n,e,t){const r=t.docs.get(e._key),i=new nf(n);return new vd(n,i,e._key,r,new wg(t.hasPendingWrites,t.fromCache),e.converter)}const dU={maxAttempts:5};class TM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=yg(e)}set(e,t,r){this._verifyNotCommitted();const i=rf(e,this._firestore),a=iT(i.converter,t,r),c=QC(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Kn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=rf(e,this._firestore);let c;return c="string"==typeof(t=(0,z.m9)(t))||t instanceof yd?LR(this._dataReader,"WriteBatch.update",a._key,t,r,i):FR(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,Kn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=rf(e,this._firestore);return this._mutations=this._mutations.concat(new zh(t._key,Kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rf(n,e){if((n=(0,z.m9)(n)).firestore!==e)throw new Ae(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class hU extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=yg(e)}get(e){const t=rf(e,this._firestore),r=new XL(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return lt();const a=i[0];if(a.isFoundDocument())return new x0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new x0(this._firestore,r,t._key,null,t.converter);throw lt()})}set(e,t,r){const i=rf(e,this._firestore),a=iT(i.converter,t,r),c=QC(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=rf(e,this._firestore);let c;return c="string"==typeof(t=(0,z.m9)(t))||t instanceof yd?LR(this._dataReader,"Transaction.update",a._key,t,r,i):FR(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=rf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=rf(e,this._firestore),r=new nf(this._firestore);return super.get(e).then(i=>new vd(this._firestore,r,t._key,i._document,new wg(!1,!1),t.converter))}}!function(n,e=!0){lc=qr.SDK_VERSION,(0,qr._registerComponent)(new ns.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),c=new or(new mb(t.getProvider("auth-internal")),new SS(t.getProvider("app-check-internal")),function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Ae(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hc(h.options.projectId,_)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,qr.registerVersion)(Bl,"3.9.0",n),(0,qr.registerVersion)(Bl,"3.9.0","esm2017")}();function HR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function SM(){if(typeof Uint8Array>"u")throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function AM(){if(!function Pb(){return typeof atob<"u"}())throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}class N0{constructor(e){this._delegate=e}static fromBase64String(e){return AM(),new N0(Tc.fromBase64String(e))}static fromUint8Array(e){return SM(),new N0(Tc.fromUint8Array(e))}toBase64(){return AM(),this._delegate.toBase64()}toUint8Array(){return SM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function zR(n){return function EU(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class IU{enableIndexedDbPersistence(e,t){return function SL(n,e){oM(n=ln(n,or));const t=jr(n),r=n._freezeSettings(),i=new bR;return sM(t,i,new BO(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function AL(n){oM(n=ln(n,or));const e=jr(n),t=n._freezeSettings(),r=new bR;return sM(e,r,new dL(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function RL(n){if(n._initialized&&!n._terminated)throw new Ae(ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{yield(t=(0,be.Z)(function*(r){if(!Oo.C())return Promise.resolve();const i=r+"main";yield Oo.delete(i)}),function(r){return t.apply(this,arguments)})(LC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class RM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof hc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Hl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function tM(n,e,t,r={}){var i;const a=(n=ln(n,D0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Hl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=di.MOCK_USER;else{c=(0,z.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Ae(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new di(_)}n._authCredentials=new DS(new vw(c,h))}}(this._delegate,e,t,r)}enableNetwork(){return function PL(n){return function mL(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield GO(n),t=yield RR(n);return e.setNetworkEnabled(!0),function(r){const i=Ze(r);return i.mu.delete(0),C0(i)}(t)}))}(jr(n=ln(n,or)))}(this._delegate)}disableNetwork(){return function OL(n){return function _L(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield GO(n),t=yield RR(n);return e.setNetworkEnabled(!1),(r=(0,be.Z)(function*(i){const a=Ze(i);a.mu.add(0),yield J_(a),a.pu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(jr(n=ln(n,or)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,YO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function xL(n){return function(e){const t=new Qr;return e.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function JF(n,e){return aR.apply(this,arguments)}(yield xR(e),t)})),t.promise}(jr(n=ln(n,or)))}(this._delegate)}onSnapshotsInSync(e){return function cU(n,e){return function wL(n,e){const t=new zC(e);return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield oy(n),i=t,Ze(r).vu.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield oy(n),i=t,void Ze(r).vu.delete(i);var r,i}))}}(jr(n=ln(n,or)),NR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new cy(this,nM(this._delegate,e))}catch(t){throw Rs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ia(this,KC(this._delegate,e))}catch(t){throw Rs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new xs(this,function bL(n,e){if(n=ln(n,D0),OR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(ye.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Vi(n,null,(t=e,new ga(an.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Rs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function fU(n,e,t){n=ln(n,or);const r=Object.assign(Object.assign({},dU),t);return function(i){if(i.maxAttempts<1)throw new Ae(ye.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,c){const h=new Qr;return i.asyncQueue.enqueueAndForget((0,be.Z)(function*(){const _=yield function WO(n){return GC(n).then(e=>e.datastore)}(i);new pL(i.asyncQueue,_,c,a,h).run()})),h.promise}(jr(n),i=>e(new hU(n,i)),r)}(this._delegate,t=>e(new xM(this,t)))}batch(){return jr(this._delegate),new PM(new TM(this._delegate,e=>uy(this._delegate,e)))}loadBundle(e){return function ML(n,e){const t=jr(n=ln(n,or)),r=new TL;return function EL(n,e,t,r){const i=function(a,c){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return $O(_,w);if(_ instanceof ArrayBuffer)return $O(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new hL(_,c);var _}(t,b0(e));n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){!function lL(n,e,t){const r=Ze(n);var i;(i=(0,be.Z)(function*(a,c,h){try{const _=yield c.getMetadata();if(yield function($,Z){const ne=Ze($),_e=pr(Z.createTime);return ne.persistence.runTransaction("hasNewerBundle","readonly",Se=>ne.$s.getBundleMetadata(Se,Z.id)).then(Se=>!!Se&&Se.createTime.compareTo(_e)>=0)}(a.localStore,_))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:($=_).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);h._updateProgress(PO(_));const w=new HF(_,a.localStore,c.Tt);let C=yield c.yc();for(;C;){const $=yield w.Bu(C);$&&h._updateProgress($),C=yield c.yc()}const O=yield w.complete();return yield _d(a,O.Uu,void 0),yield function($,Z){const ne=Ze($);return ne.persistence.runTransaction("Save bundle","readwrite",_e=>ne.$s.saveBundleMetadata(_e,Z))}(a.localStore,_),h._completeWith(O.progress),Promise.resolve(O.qu)}catch(_){return Hl("SyncEngine",`Loading bundle failed with ${_}`),h._failWith(_),Promise.resolve(new Set)}var $}),function(a,c,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield xR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function NL(n,e){return function IL(n,e){return n.asyncQueue.enqueue((0,be.Z)(function*(){return function(t,r){const i=Ze(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.$s.getNamedQuery(a,r))}(yield WC(n),e)}))}(jr(n=ln(n,or)),e).then(t=>t?new Vi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new xs(this,t):null)}}class sT extends BR{constructor(e){super(),this.firestore=e}convertBytes(e){return new N0(new Tc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ia.forKey(t,this.firestore,null)}}class xM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new sT(e)}get(e){const t=Ig(e);return this._delegate.get(t).then(r=>new k0(this._firestore,new vd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Ig(e);return r?(HR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Ig(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Ig(e);return this._delegate.delete(t),this}}class PM{constructor(e){this._delegate=e}set(e,t,r){const i=Ig(e);return r?(HR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Ig(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Ig(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Eg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new M0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new F0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Eg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Eg(e,new sT(e),t),i.set(t,a)),a}}Eg.INSTANCES=new WeakMap;class Ia{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ia(t,new sr(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new Ia(t,new sr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new cy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new cy(this.firestore,nM(this._delegate,e))}catch(t){throw Rs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,z.m9)(e))instanceof sr&&rM(this._delegate,e)}set(e,t){t=HR("DocumentReference.set",t);try{return t?IM(this._delegate,e,t):IM(this._delegate,e)}catch(r){throw Rs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?bM(this._delegate,e):bM(this._delegate,e,t,...r)}catch(i){throw Rs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function aU(n){return uy(ln(n.firestore,or),[new zh(n._key,Kn.none())])}(this._delegate)}onSnapshot(...e){const t=OM(e),r=MM(e,i=>new k0(this.firestore,new vd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return CM(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function nU(n){n=ln(n,sr);const e=ln(n.firestore,or),t=jr(e),r=new nf(e);return function yL(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,a,c){try{const h=yield function(_,w){const C=Ze(_);return C.persistence.runTransaction("read document","readonly",O=>C.localDocuments.getDocument(O,w))}(i,a);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Ae(ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const _=ny(h,`Failed to get document '${a} from cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield WC(n),e,t);var r})),t.promise}(t,n._key).then(i=>new vd(e,r,n._key,i,new wg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function rU(n){n=ln(n,sr);const e=ln(n.firestore,or);return qO(jr(e),n._key,{source:"server"}).then(t=>$R(e,n,t))}(this._delegate):function tU(n){n=ln(n,sr);const e=ln(n.firestore,or);return qO(jr(e),n._key).then(t=>$R(e,n,t))}(this._delegate),t.then(r=>new k0(this.firestore,new vd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ia(this.firestore,this._delegate.withConverter(e?Eg.getInstance(this.firestore,e):null))}}function Rs(n,e,t){return n.message=n.message.replace(e,t),n}function OM(n){for(const e of n)if("object"==typeof e&&!zR(e))return e;return{}}function MM(n,e){var t,r;let i;return i=zR(n[0])?n[0]:zR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class k0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ia(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return EM(this._delegate,e._delegate)}}class F0 extends k0{data(e){const t=this._delegate.data(e);return function TS(n,e){n||lt()}(void 0!==t),t}}class xs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sT(e)}where(e,t,r){try{return new xs(this.firestore,ef(this._delegate,function zL(n,e,t){const r=e,i=eT("where",n);return O0._create(i,r,t)}(e,t,r)))}catch(i){throw Rs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new xs(this.firestore,ef(this._delegate,function GL(n,e="asc"){const t=e,r=eT("orderBy",n);return jR._create(r,t)}(e,t)))}catch(r){throw Rs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new xs(this.firestore,ef(this._delegate,function WL(n){return JO("limit",n),tT._create("limit",n,"F")}(e)))}catch(t){throw Rs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new xs(this.firestore,ef(this._delegate,function qL(n){return JO("limitToLast",n),tT._create("limitToLast",n,"L")}(e)))}catch(t){throw Rs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new xs(this.firestore,ef(this._delegate,function KL(...n){return nT._create("startAt",n,!0)}(...e)))}catch(t){throw Rs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new xs(this.firestore,ef(this._delegate,function ZL(...n){return nT._create("startAfter",n,!1)}(...e)))}catch(t){throw Rs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new xs(this.firestore,ef(this._delegate,function YL(...n){return rT._create("endBefore",n,!1)}(...e)))}catch(t){throw Rs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new xs(this.firestore,ef(this._delegate,function QL(...n){return rT._create("endAt",n,!0)}(...e)))}catch(t){throw Rs(t,"endAt()","Query.endAt()")}}isEqual(e){return MR(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function sU(n){n=ln(n,Vi);const e=ln(n.firestore,or),t=jr(e),r=new nf(e);return function vL(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,a,c){try{const h=yield q(i,a,!0),_=new NO(a,h.Yi),w=_.Hu(h.documents),C=_.applyChanges(w,!1);c.resolve(C.snapshot)}catch(h){const _=ny(h,`Failed to execute query '${a} against cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield WC(n),e,t);var r})),t.promise}(t,n._query).then(i=>new tf(e,r,n,i))}(this._delegate):"server"===e?.source?function oU(n){n=ln(n,Vi);const e=ln(n.firestore,or),t=jr(e),r=new nf(e);return KO(t,n._query,{source:"server"}).then(i=>new tf(e,r,n,i))}(this._delegate):function iU(n){n=ln(n,Vi);const e=ln(n.firestore,or),t=jr(e),r=new nf(e);return pM(n._query),KO(t,n._query).then(i=>new tf(e,r,n,i))}(this._delegate),t.then(r=>new GR(this.firestore,new tf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=OM(e),r=MM(e,i=>new GR(this.firestore,new tf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return CM(this._delegate,t,r)}withConverter(e){return new xs(this.firestore,this._delegate.withConverter(e?Eg.getInstance(this.firestore,e):null))}}class CU{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new F0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class GR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new xs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new F0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new CU(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new F0(this._firestore,r))})}isEqual(e){return EM(this._delegate,e._delegate)}}class cy extends xs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ia(this.firestore,e):null}doc(e){try{return new Ia(this.firestore,void 0===e?KC(this._delegate):KC(this._delegate,e))}catch(t){throw Rs(t,"doc()","CollectionReference.doc()")}}add(e){return function uU(n,e){const t=ln(n.firestore,or),r=KC(n),i=iT(n.converter,e);return uy(t,[QC(yg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Kn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ia(this.firestore,t))}isEqual(e){return rM(this._delegate,e._delegate)}withConverter(e){return new cy(this.firestore,this._delegate.withConverter(e?Eg.getInstance(this.firestore,e):null))}}function Ig(n){return ln(n,sr)}class WR{constructor(...e){this._delegate=new yd(...e)}static documentId(){return new WR(Nn.keyField().canonicalString())}isEqual(e){return(e=(0,z.m9)(e))instanceof yd&&this._delegate._internalPath.isEqual(e._internalPath)}}class bg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function gU(){return new kR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new bg(e)}static delete(){const e=function pU(){return new A0("deleteField")}();return e._methodName="FieldValue.delete",new bg(e)}static arrayUnion(...e){const t=function mU(...n){return new VL("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new bg(t)}static arrayRemove(...e){const t=function _U(...n){return new jL("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new bg(t)}static increment(e){const t=function yU(n){return new BL("increment",n)}(e);return t._methodName="FieldValue.increment",new bg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const TU={Firestore:RM,GeoPoint:ZC,Timestamp:bn,Blob:N0,Transaction:xM,WriteBatch:PM,DocumentReference:Ia,DocumentSnapshot:k0,Query:xs,QueryDocumentSnapshot:F0,QuerySnapshot:GR,CollectionReference:cy,FieldPath:WR,FieldValue:bg,setLogLevel:function bU(n){!function pb(n){$l.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function NM(n,e){return function AU(n,e=tc.z){return new yi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function qR(n,e){return NM(n,e).pipe((0,G.U)(t=>({payload:t,type:"query"})))}function oT(n,e){return qR(n,e).pipe(Ei(void 0),Pm(),(0,G.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const _=i.find(C=>C.doc.ref.isEqual(c.ref)),w=t?.payload.docs.find(C=>C.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),a}))}function kM(n,e,t){return oT(n,t).pipe(_h((r,i)=>function xU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function PU(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return KR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return KR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return KR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Om(),(0,G.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function KR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function FM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function SU(n){(function DU(n,e){n.INTERNAL.registerComponent(new ns.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},TU)))})(n,(e,t)=>new RM(e,t,new IU)),n.registerVersion("@firebase/firestore-compat","0.3.5")}(gm.Z);class LM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=oT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,G.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ei(void 0),Pm(),Ct(([r,i])=>i.length>0||!r),(0,G.U)(([r,i])=>i),on.iC)}auditTrail(e){return this.stateChanges(e).pipe(_h((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=FM(e);return kM(this.query,t,this.afs.schedulers.outsideAngular).pipe(on.iC)}valueChanges(e={}){return qR(this.query,this.afs.schedulers.outsideAngular).pipe((0,G.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),on.iC)}get(e){return(0,pn.D)(this.query.get(e)).pipe(on.iC)}add(e){return this.ref.add(e)}doc(e){return new UM(this.ref.doc(e),this.afs)}}class UM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=BM(r,t);return new LM(i,a,this.afs)}snapshotChanges(){return function RU(n,e){return NM(n,e).pipe(Ei(void 0),Pm(),(0,G.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(on.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,G.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,pn.D)(this.ref.get(e)).pipe(on.iC)}}class OU{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?oT(this.query,this.afs.schedulers.outsideAngular).pipe((0,G.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ct(t=>t.length>0),on.iC):oT(this.query,this.afs.schedulers.outsideAngular).pipe(on.iC)}auditTrail(e){return this.stateChanges(e).pipe(_h((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=FM(e);return kM(this.query,t,this.afs.schedulers.outsideAngular).pipe(on.iC)}valueChanges(e={}){return qR(this.query,this.afs.schedulers.outsideAngular).pipe((0,G.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),on.iC)}get(e){return(0,pn.D)(this.query.get(e)).pipe(on.iC)}}const VM=new m.OlP("angularfire2.enableFirestorePersistence"),jM=new m.OlP("angularfire2.firestore.persistenceSettings"),MU=new m.OlP("angularfire2.firestore.settings"),NU=new m.OlP("angularfire2.firestore.use-emulator");function BM(n,e=(t=>t)){return{query:e(n),ref:n}}let $M=(()=>{class n{constructor(t,r,i,a,c,h,_,w,C,O,$,Z,ne,_e,Se,pt,Dt){this.schedulers=_;const st=(0,_n.on)(t,h,r),_t=C;O&&To(st,h,$,ne,_e,Se,Z,pt),[this.firestore,this.persistenceEnabled$]=(0,_n.cc)(`${st.name}.firestore`,"AngularFirestore",st.name,()=>{const xt=h.runOutsideAngular(()=>st.firestore());if(a&&xt.settings(a),_t&&xt.useEmulator(..._t),i&&!xu(c)){const Vt=()=>{try{return(0,pn.D)(xt.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Dr){return typeof console<"u"&&console.warn(Dr),dt(!1)}};return[xt,h.runOutsideAngular(Vt)]}return[xt,dt(!1)]},[a,_t,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=BM(i,r),h=this.schedulers.ngZone.run(()=>a);return new LM(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new OU(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new UM(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(_n.Dh),m.LFG(_n.xv,8),m.LFG(VM,8),m.LFG(MU,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(on.HU),m.LFG(jM,8),m.LFG(NU,8),m.LFG(tu,8),m.LFG(ki,8),m.LFG(Ju,8),m.LFG(ah,8),m.LFG(bl,8),m.LFG(ec,8),m.LFG(rs,8),m.LFG(ca,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),kU=(()=>{class n{constructor(){Et.Z.registerVersion("angularfire",on.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:VM,useValue:!0},{provide:jM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[$M]}),n})();var FU=U(5032);const HM="@firebase/database";let ZR="";function GM(n){ZR=n}class VU{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,z.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,z.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class jU{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,z.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const WM=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new VU(e)}}catch{}return new jU},Cg=WM("localStorage"),YR=WM("sessionStorage"),ly=new lr.Yd("@firebase/database"),qM=function(){let n=1;return function(){return n++}}(),KM=function(n){const e=(0,z.dS)(n),t=new z.gQ;t.update(e);const r=t.digest();return z.US.encodeByteArray(r)},L0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=L0.apply(null,r):e+="object"==typeof r?(0,z.Wl)(r):r,e+=" "}return e};let Tg=null,ZM=!0;const YM=function(n,e){(0,z.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(ly.logLevel=lr.in.VERBOSE,Tg=ly.log.bind(ly),e&&YR.set("logging_enabled",!0)):"function"==typeof n?Tg=n:(Tg=null,YR.remove("logging_enabled"))},Si=function(...n){if(!0===ZM&&(ZM=!1,null===Tg&&!0===YR.get("logging_enabled")&&YM(!0)),Tg){const e=L0.apply(null,n);Tg(e)}},U0=function(n){return function(...e){Si(n,...e)}},QR=function(...n){const e="FIREBASE INTERNAL ERROR: "+L0(...n);ly.error(e)},Dc=function(...n){const e=`FIREBASE FATAL ERROR: ${L0(...n)}`;throw ly.error(e),new Error(e)},us=function(...n){const e="FIREBASE WARNING: "+L0(...n);ly.warn(e)},aT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},sf="[MIN_NAME]",wd="[MAX_NAME]",Dg=function(n,e){if(n===e)return 0;if(n===sf||e===wd)return-1;if(e===sf||n===wd)return 1;{const t=JM(n),r=JM(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},HU=function(n,e){return n===e?0:n<e?-1:1},V0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,z.Wl)(e))},XR=function(n){if("object"!=typeof n||null===n)return(0,z.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,z.Wl)(e[r]),t+=":",t+=XR(n[e[r]]);return t+="}",t},QM=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ai(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const XM=function(n){(0,z.hu)(!aT(n),"Invalid JSON number");const r=1023;let i,a,c,h,_;0===n?(a=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(c%2?1:0),c=Math.floor(c/2);for(_=11;_;_-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const C=w.join("");let O="";for(_=0;_<64;_+=8){let $=parseInt(C.substr(_,8),2).toString(16);1===$.length&&($="0"+$),O+=$}return O.toLowerCase()},qU=new RegExp("^-?(0*)\\d{1,10}$"),JM=function(n){if(qU.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},dy=function(n){try{n()}catch(e){setTimeout(()=>{throw us("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},YU=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},j0=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class QU{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){us(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class XU{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Si("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',us(e)}}let B0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const iN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,aN="websocket",uN="long_polling";class ex{constructor(e,t,r,i,a=!1,c="",h=!1,_=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=_,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Cg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Cg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function cN(n,e,t){let r;if((0,z.hu)("string"==typeof e,"typeof type must == string"),(0,z.hu)("object"==typeof t,"typeof params must == object"),e===aN)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==uN)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function JU(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ai(t,(a,c)=>{i.push(a+"="+c)}),r+i.join("&")}class eV{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,z.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,z.p$)(this.counters_)}}const tx={},nx={};function rx(n){const e=n.toString();return tx[e]||(tx[e]=new eV),tx[e]}class nV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&dy(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class af{constructor(e,t,r,i,a,c,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=U0(e),this.stats_=rx(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),cN(t,uN,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new nV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,z.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ix((...a)=>{const[c,h,_,w,C]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=_;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&iN.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){af.forceAllow_=!0}static forceDisallow(){af.forceDisallow_=!0}static isAvailable(){return!((0,z.Yr)()||!af.forceAllow_&&(af.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,z.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,z.h$)(t),i=QM(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,z.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,z.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class ix{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,z.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=qM(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=ix.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){Si("frame writing exception"),h.stack&&Si(h.stack),Si(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Si("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,z.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Si("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let cT=null;typeof MozWebSocket<"u"?cT=MozWebSocket:typeof WebSocket<"u"&&(cT=WebSocket);let hy=(()=>{class n{constructor(t,r,i,a,c,h,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=U0(this.connId),this.stats_=rx(r),this.connURL=n.connectionURL_(r,h,_,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,c){const h={v:"5"};return!(0,z.Yr)()&&typeof location<"u"&&location.hostname&&iN.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),c&&(h.p=c),cN(t,aN,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Cg.set("previous_websocket_failure",!0);try{let i;if((0,z.Yr)()){i={headers:{"User-Agent":`Firebase/5/${ZR}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new cT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==cT&&!n.forceDisallow_}static previouslyFailed(){return Cg.isInMemoryStorage||!0===Cg.get("previous_websocket_failure")}markConnectionHealthy(){Cg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,z.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,z.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,z.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=QM(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),mN=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[af,hy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=hy&&hy.isAvailable();let i=r&&!hy.previouslyFailed();if(t.webSocketOnly&&(r||us("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[hy];else{const a=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&a.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class bN{constructor(e,t,r,i,a,c,h,_,w,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=U0("c:"+this.id+":"),this.transportManager_=new mN(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=j0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=V0("t",e),r=V0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=V0("t",e),r=V0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=V0("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?QR("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):QR("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&us("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),j0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):j0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Cg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class CN{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class TN{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,z.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,z.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class lT extends TN{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,z.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new lT}getInitialEvent(e){return(0,z.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const DN=32,SN=768;class Dn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function vn(){return new Dn("")}function Xt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function uf(n){return n.pieces_.length-n.pieceNum_}function Bn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Dn(n.pieces_,e)}function ox(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function $0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function AN(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Dn(e,0)}function gr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Dn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Dn(t,0)}function Jt(n){return n.pieceNum_>=n.pieces_.length}function Ps(n,e){const t=Xt(n),r=Xt(e);if(null===t)return e;if(t===r)return Ps(Bn(n),Bn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function CV(n,e){const t=$0(n,0),r=$0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Dg(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function ax(n,e){if(uf(n)!==uf(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ba(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(uf(n)>uf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class TV{constructor(e,t){this.errorPrefix_=t,this.parts_=$0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,z.ug)(this.parts_[r]);RN(this)}}function RN(n){if(n.byteLength_>SN)throw new Error(n.errorPrefix_+"has a key path longer than "+SN+" bytes ("+n.byteLength_+").");if(n.parts_.length>DN)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+DN+") or object contains a cycle "+Sg(n))}function Sg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class ux extends TN{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new ux}getInitialEvent(e){return(0,z.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const H0=1e3;let hT,Ag=(()=>{class n extends CN{constructor(t,r,i,a,c,h,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=U0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=H0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,z.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ux.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&lT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_((0,z.Wl)(c)),(0,z.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new z.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const _=h.d;"ok"===h.s?r.resolve(_):r.reject(_)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,z.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,_=>{const w=_.d,C=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==C&&this.removeListen_(i,a),t.onComplete&&t.onComplete(C,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,z.r3)(t,"w")){const i=(0,z.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();us(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,z.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,z.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const c=a.s,h=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,z.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t};a&&(c.q=i,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,z.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):QR("Unrecognized action received from server: "+(0,z.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,z.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=H0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=H0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=H0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,be.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let _=!1,w=null;const C=function(){w?w.close():(_=!0,a())};t.realtime_={close:C,sendRequest:function(Z){(0,z.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(Z)}};const $=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[Z,ne]=yield Promise.all([t.authTokenProvider_.getToken($),t.appCheckTokenProvider_.getToken($)]);_?Si("getToken() completed but was canceled"):(Si("getToken() completed. Creating connection."),t.authToken_=Z&&Z.accessToken,t.appCheckToken_=ne&&ne.token,w=new bN(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,_e=>{us(_e+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(Z){t.log_("Failed to get token: "+Z),_||(t.repoInfo_.nodeAdmin&&us(Z),C())}}})()}interrupt(t){Si("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Si("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,z.xb)(this.interruptReasons_)&&(this.reconnectDelay_=H0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>XR(c)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Dn(t).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Si("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Si("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,z.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+ZR.replace(/\./g,"-")]=1,(0,z.uI)()?t["framework.cordova"]=1:(0,z.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=lT.getInstance().currentlyOnline();return(0,z.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class nn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new nn(e,t)}}class dT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new nn(sf,e),i=new nn(sf,t);return 0!==this.compare(r,i)}minPost(){return nn.MIN}}class ON extends dT{static get __EMPTY_NODE(){return hT}static set __EMPTY_NODE(e){hT=e}compare(e,t){return Dg(e.name,t.name)}isDefinedOn(e){throw(0,z.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return nn.MIN}maxPost(){return new nn(wd,hT)}makePost(e,t){return(0,z.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new nn(e,hT)}toString(){return".key"}}const Sc=new ON;class fT{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let lx,yu=(()=>{class n{constructor(t,r,i,a,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??Xs.EMPTY_NODE,this.right=c??Xs.EMPTY_NODE}copy(t,r,i,a,c){return new n(t??this.key,r??this.value,i??this.color,a??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Xs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Xs.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Xs{constructor(e,t=Xs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Xs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,yu.BLACK,null,null))}remove(e){return new Xs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,yu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new fT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new fT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new fT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new fT(this.root_,null,this.comparator_,!0,e)}}function MV(n,e){return Dg(n.name,e.name)}function cx(n,e){return Dg(n,e)}Xs.EMPTY_NODE=new class OV{copy(e,t,r,i,a){return this}insert(e,t,r){return new yu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const MN=function(n){return"number"==typeof n?"number:"+XM(n):"string:"+n},NN=function(n){if(n.isLeafNode()){const e=n.val();(0,z.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,z.r3)(e,".sv"),"Priority must be a string or number.")}else(0,z.hu)(n===lx||n.isEmpty(),"priority of unexpected type.");(0,z.hu)(n===lx||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let kN,FN,LN,fy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,z.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),NN(this.priorityNode_)}static set __childrenNodeConstructor(t){kN=t}static get __childrenNodeConstructor(){return kN}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Jt(t)?this:".priority"===Xt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Xt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,z.hu)(".priority"!==i||1===uf(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Bn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+MN(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?XM(this.value_):this.value_,this.lazyHash_=KM(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,z.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,z.hu)(a>=0,"Unknown leaf type: "+r),(0,z.hu)(c>=0,"Unknown leaf type: "+i),a===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Yn=new class LV extends dT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Dg(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return nn.MIN}maxPost(){return new nn(wd,new fy("[PRIORITY-POST]",LN))}makePost(e,t){const r=FN(e);return new nn(t,new fy("[PRIORITY-POST]",r))}toString(){return".priority"}},UV=Math.log(2);class VV{constructor(e){this.count=parseInt(Math.log(e+1)/UV,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const pT=function(n,e,t,r){n.sort(e);const i=function(_,w){const C=w-_;let O,$;if(0===C)return null;if(1===C)return O=n[_],$=t?t(O):O,new yu($,O.node,yu.BLACK,null,null);{const Z=parseInt(C/2,10)+_,ne=i(_,Z),_e=i(Z+1,w);return O=n[Z],$=t?t(O):O,new yu($,O.node,yu.BLACK,ne,_e)}},h=function(_){let w=null,C=null,O=n.length;const $=function(ne,_e){const Se=O-ne,pt=O;O-=ne;const Dt=i(Se+1,pt),st=n[Se],_t=t?t(st):st;Z(new yu(_t,st.node,_e,null,Dt))},Z=function(ne){w?(w.left=ne,w=ne):(C=ne,w=ne)};for(let ne=0;ne<_.count;++ne){const _e=_.nextBitIsOne(),Se=Math.pow(2,_.count-(ne+1));_e?$(Se,yu.BLACK):($(Se,yu.BLACK),$(Se,yu.RED))}return C}(new VV(n.length));return new Xs(r||e,h)};let dx;const py={};class Ed{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,z.hu)(py&&Yn,"ChildrenNode.ts has not been loaded"),dx=dx||new Ed({".priority":py},{".priority":Yn}),dx}get(e){const t=(0,z.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Xs?t:null}hasIndex(e){return(0,z.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,z.hu)(e!==Sc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(nn.Wrap);let h,c=a.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=a.getNext();h=i?pT(r,e.getCompare()):py;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const C=Object.assign({},this.indexes_);return C[_]=h,new Ed(C,w)}addToIndexes(e,t){const r=(0,z.UI)(this.indexes_,(i,a)=>{const c=(0,z.DV)(this.indexSet_,a);if((0,z.hu)(c,"Missing index implementation for "+a),i===py){if(c.isDefinedOn(e.node)){const h=[],_=t.getIterator(nn.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&h.push(w),w=_.getNext();return h.push(e),pT(h,c.getCompare())}return py}{const h=t.get(e.name);let _=i;return h&&(_=_.remove(new nn(e.name,h))),_.insert(e,e.node)}});return new Ed(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,z.UI)(this.indexes_,i=>{if(i===py)return i;{const a=t.get(e.name);return a?i.remove(new nn(e.name,a)):i}});return new Ed(r,this.indexSet_)}}let z0,Wt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&NN(this.priorityNode_),this.children_.isEmpty()&&(0,z.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return z0||(z0=new n(new Xs(cx),null,Ed.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||z0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?z0:r}}getChild(t){const r=Xt(t);return null===r?this:this.getImmediateChild(r).getChild(Bn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,z.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new nn(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?z0:this.priorityNode_;return new n(a,h,c)}}updateChild(t,r){const i=Xt(t);if(null===i)return r;{(0,z.hu)(".priority"!==Xt(t)||1===uf(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Bn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,c=!0;if(this.forEachChild(Yn,(h,_)=>{r[h]=_.val(t),i++,c&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):c=!1}),!t&&c&&a<2*i){const h=[];for(const _ in r)h[_]=r[_];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+MN(this.getPriority().val())+":"),this.forEachChild(Yn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":KM(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new nn(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new nn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new nn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,nn.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,nn.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===G0?-1:0}withIndex(t){if(t===Sc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Sc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Yn),a=r.getIterator(Yn);let c=i.getNext(),h=a.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=a.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===Sc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const G0=new class jV extends Wt{constructor(){super(new Xs(cx),Wt.EMPTY_NODE,Ed.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Wt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(nn,{MIN:{value:new nn(sf,Wt.EMPTY_NODE)},MAX:{value:new nn(wd,G0)}}),ON.__EMPTY_NODE=Wt.EMPTY_NODE,fy.__childrenNodeConstructor=Wt,function NV(n){lx=n}(G0),function FV(n){LN=n}(G0);const BV=!0;function Er(n,e=null){if(null===n)return Wt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,z.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new fy(n,Er(e));if(n instanceof Array||!BV){let t=Wt.EMPTY_NODE;return Ai(n,(r,i)=>{if((0,z.r3)(n,r)&&"."!==r.substring(0,1)){const a=Er(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Er(e))}{const t=[];let r=!1;if(Ai(n,(c,h)=>{if("."!==c.substring(0,1)){const _=Er(h);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new nn(c,_)))}}),0===t.length)return Wt.EMPTY_NODE;const a=pT(t,MV,c=>c.name,cx);if(r){const c=pT(t,Yn.getCompare());return new Wt(a,Er(e),new Ed({".priority":c},{".priority":Yn}))}return new Wt(a,Er(e),Ed.Default)}}!function kV(n){FN=n}(Er);class hx extends dT{constructor(e){super(),this.indexPath_=e,(0,z.hu)(!Jt(e)&&".priority"!==Xt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Dg(e.name,t.name):a}makePost(e,t){const r=Er(e),i=Wt.EMPTY_NODE.updateChild(this.indexPath_,r);return new nn(t,i)}maxPost(){const e=Wt.EMPTY_NODE.updateChild(this.indexPath_,G0);return new nn(wd,e)}toString(){return $0(this.indexPath_,0).join("/")}}const fx=new class $V extends dT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Dg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return nn.MIN}maxPost(){return nn.MAX}makePost(e,t){const r=Er(e);return new nn(t,r)}toString(){return".value"}};function UN(n){return{type:"value",snapshotNode:n}}function gy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function W0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function q0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class px{constructor(e){this.index_=e}updateChild(e,t,r,i,a,c){(0,z.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(W0(t,h)):(0,z.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(gy(t,r)):c.trackChildChange(q0(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Yn,(i,a)=>{t.hasChild(i)||r.trackChildChange(W0(i,a))}),t.isLeafNode()||t.forEachChild(Yn,(i,a)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(a)||r.trackChildChange(q0(i,a,c))}else r.trackChildChange(gy(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Wt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class K0{constructor(e){this.indexedFilter_=new px(e.getIndex()),this.index_=e.getIndex(),this.startPost_=K0.getStartPost_(e),this.endPost_=K0.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,c){return this.matches(new nn(t,r))||(r=Wt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Wt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Wt.EMPTY_NODE);const a=this;return t.forEachChild(Yn,(c,h)=>{a.matches(new nn(c,h))||(i=i.updateImmediateChild(c,Wt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class zV{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new K0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,c){return this.rangedFilter_.matches(new nn(t,r))||(r=Wt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,c):this.fullLimitUpdateChild_(e,t,r,a,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Wt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Wt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const h=a.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;i=i.updateImmediateChild(h.name,h.node),c++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(Wt.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let c=0;for(;a.hasNext();){const h=a.getNext();c<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?c++:i=i.updateImmediateChild(h.name,Wt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let c;if(this.reverse_){const O=this.index_.getCompare();c=($,Z)=>O(Z,$)}else c=this.index_.getCompare();const h=e;(0,z.hu)(h.numChildren()===this.limit_,"");const _=new nn(t,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),C=this.rangedFilter_.matches(_);if(h.hasChild(t)){const O=h.getImmediateChild(t);let $=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=$&&($.name===t||h.hasChild($.name));)$=i.getChildAfterChild(this.index_,$,this.reverse_);const Z=null==$?1:c($,_);if(C&&!r.isEmpty()&&Z>=0)return a?.trackChildChange(q0(t,r,O)),h.updateImmediateChild(t,r);{a?.trackChildChange(W0(t,O));const _e=h.updateImmediateChild(t,Wt.EMPTY_NODE);return null!=$&&this.rangedFilter_.matches($)?(a?.trackChildChange(gy($.name,$.node)),_e.updateImmediateChild($.name,$.node)):_e}}return r.isEmpty()?e:C&&c(w,_)>=0?(null!=a&&(a.trackChildChange(W0(w.name,w.node)),a.trackChildChange(gy(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(w.name,Wt.EMPTY_NODE)):e}}class gT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Yn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:sf}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:wd}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,z.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Yn}copy(){const e=new gT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function gx(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function mx(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function mT(n,e){const t=n.copy();return t.index_=e,t}function VN(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Yn?t="$priority":n.index_===fx?t="$value":n.index_===Sc?t="$key":((0,z.hu)(n.index_ instanceof hx,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,z.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,z.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,z.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,z.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,z.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function jN(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Yn&&(e.i=n.index_.toString()),e}class _T extends CN{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=U0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,z.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=_T.getListenId_(e,r),h={};this.listens_[c]=h;const _=VN(e._queryParams);this.restRequest_(a+".json",_,(w,C)=>{let O=C;if(404===w&&(O=null,w=null),null===w&&this.onDataUpdate_(a,O,!1,r),(0,z.DV)(this.listens_,c)===h){let $;$=w?401===w?"permission_denied":"rest_error:"+w:"ok",i($,null)}})}unlisten(e,t){const r=_T.getListenId_(e,t);delete this.listens_[r]}get(e){const t=VN(e._queryParams),r=e._path.toString(),i=new z.BH;return this.restRequest_(r+".json",t,(a,c)=>{let h=c;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,z.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let _=null;if(h.status>=200&&h.status<300){try{_=(0,z.cI)(h.responseText)}catch{us("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,_)}else 401!==h.status&&404!==h.status&&us("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class YV{constructor(){this.rootNode_=Wt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function yT(){return{value:null,children:new Map}}function my(n,e,t){if(Jt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Xt(e);n.children.has(r)||n.children.set(r,yT()),my(n.children.get(r),e=Bn(e),t)}}function _x(n,e){if(Jt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Yn,(r,i)=>{my(n,new Dn(r),i)}),_x(n,e)}}if(n.children.size>0){const t=Xt(e);return e=Bn(e),n.children.has(t)&&_x(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function yx(n,e,t){null!==n.value?t(e,n.value):function QV(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{yx(i,new Dn(e.toString()+"/"+r),t)})}class XV{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ai(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class tj{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new XV(e);const r=1e4+2e4*Math.random();j0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ai(e,(i,a)=>{a>0&&(0,z.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),j0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ca=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ca||(Ca={})),Ca))();function Ex(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class vT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ca.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Jt(this.path)){if(null!=this.affectedTree.value)return(0,z.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Dn(e));return new vT(vn(),t,this.revert)}}return(0,z.hu)(Xt(this.path)===e,"operationForChild called for unrelated child."),new vT(Bn(this.path),this.affectedTree,this.revert)}}class Z0{constructor(e,t){this.source=e,this.path=t,this.type=Ca.LISTEN_COMPLETE}operationForChild(e){return Jt(this.path)?new Z0(this.source,vn()):new Z0(this.source,Bn(this.path))}}class Rg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ca.OVERWRITE}operationForChild(e){return Jt(this.path)?new Rg(this.source,vn(),this.snap.getImmediateChild(e)):new Rg(this.source,Bn(this.path),this.snap)}}class _y{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ca.MERGE}operationForChild(e){if(Jt(this.path)){const t=this.children.subtree(new Dn(e));return t.isEmpty()?null:t.value?new Rg(this.source,vn(),t.value):new _y(this.source,vn(),t)}return(0,z.hu)(Xt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new _y(this.source,Bn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class cf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Jt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Xt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class nj{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Y0(n,e,t,r,i,a){const c=r.filter(h=>h.type===t);c.sort((h,_)=>function sj(n,e,t){if(null==e.childName||null==t.childName)throw(0,z.g5)("Should only compare child_ events.");const r=new nn(e.childName,e.snapshotNode),i=new nn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,_)),c.forEach(h=>{const _=function ij(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(_,n.query_))})})}function wT(n,e){return{eventCache:n,serverCache:e}}function Q0(n,e,t,r){return wT(new cf(e,t,r),n.serverCache)}function $N(n,e,t,r){return wT(n.eventCache,new cf(e,t,r))}function ET(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function xg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Ix;class Qn{constructor(e,t=(()=>(Ix||(Ix=new Xs(HU)),Ix))()){this.value=e,this.children=t}static fromObject(e){let t=new Qn(null);return Ai(e,(r,i)=>{t=t.set(new Dn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:vn(),value:this.value};if(Jt(e))return null;{const r=Xt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Bn(e),t);return null!=a?{path:gr(new Dn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Jt(e))return this;{const t=Xt(e),r=this.children.get(t);return null!==r?r.subtree(Bn(e)):new Qn(null)}}set(e,t){if(Jt(e))return new Qn(t,this.children);{const r=Xt(e),a=(this.children.get(r)||new Qn(null)).set(Bn(e),t),c=this.children.insert(r,a);return new Qn(this.value,c)}}remove(e){if(Jt(e))return this.children.isEmpty()?new Qn(null):new Qn(null,this.children);{const t=Xt(e),r=this.children.get(t);if(r){const i=r.remove(Bn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Qn(null):new Qn(this.value,a)}return this}}get(e){if(Jt(e))return this.value;{const t=Xt(e),r=this.children.get(t);return r?r.get(Bn(e)):null}}setTree(e,t){if(Jt(e))return t;{const r=Xt(e),a=(this.children.get(r)||new Qn(null)).setTree(Bn(e),t);let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Qn(this.value,c)}}fold(e){return this.fold_(vn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(gr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,vn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Jt(e))return null;{const a=Xt(e),c=this.children.get(a);return c?c.findOnPath_(Bn(e),gr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,vn(),t)}foreachOnPath_(e,t,r){if(Jt(e))return this;{this.value&&r(t,this.value);const i=Xt(e),a=this.children.get(i);return a?a.foreachOnPath_(Bn(e),gr(t,i),r):new Qn(null)}}foreach(e){this.foreach_(vn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(gr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class vu{constructor(e){this.writeTree_=e}static empty(){return new vu(new Qn(null))}}function X0(n,e,t){if(Jt(e))return new vu(new Qn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const c=Ps(i,e);return a=a.updateChild(c,t),new vu(n.writeTree_.set(i,a))}{const i=new Qn(t),a=n.writeTree_.setTree(e,i);return new vu(a)}}}function bx(n,e,t){let r=n;return Ai(t,(i,a)=>{r=X0(r,gr(e,i),a)}),r}function HN(n,e){if(Jt(e))return vu.empty();{const t=n.writeTree_.setTree(e,new Qn(null));return new vu(t)}}function Cx(n,e){return null!=Pg(n,e)}function Pg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ps(t.path,e)):null}function zN(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Yn,(r,i)=>{e.push(new nn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new nn(r,i.value))}),e}function lf(n,e){if(Jt(e))return n;{const t=Pg(n,e);return new vu(null!=t?new Qn(t):n.writeTree_.subtree(e))}}function Tx(n){return n.writeTree_.isEmpty()}function yy(n,e){return GN(vn(),n.writeTree_,e)}function GN(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,z.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=GN(gr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(gr(n,".priority"),r)),t}}function IT(n,e){return YN(e,n)}function dj(n,e){if(n.snap)return ba(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ba(gr(n.path,t),e))return!0;return!1}function fj(n){return n.visible}function WN(n,e,t){let r=vu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const c=a.path;let h;if(a.snap)ba(t,c)?(h=Ps(t,c),r=X0(r,h,a.snap)):ba(c,t)&&(h=Ps(c,t),r=X0(r,vn(),a.snap.getChild(h)));else{if(!a.children)throw(0,z.g5)("WriteRecord should have .snap or .children");if(ba(t,c))h=Ps(t,c),r=bx(r,h,a.children);else if(ba(c,t))if(h=Ps(c,t),Jt(h))r=bx(r,vn(),a.children);else{const _=(0,z.DV)(a.children,Xt(h));if(_){const w=_.getChild(Bn(h));r=X0(r,vn(),w)}}}}}return r}function qN(n,e,t,r,i){if(r||i){const a=lf(n.visibleWrites,e);return!i&&Tx(a)?t:i||null!=t||Cx(a,vn())?yy(WN(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(ba(w.path,e)||ba(e,w.path))},e),t||Wt.EMPTY_NODE):null}{const a=Pg(n.visibleWrites,e);if(null!=a)return a;{const c=lf(n.visibleWrites,e);return Tx(c)?t:null!=t||Cx(c,vn())?yy(c,t||Wt.EMPTY_NODE):null}}}function bT(n,e,t,r){return qN(n.writeTree,n.treePath,e,t,r)}function Dx(n,e){return function pj(n,e,t){let r=Wt.EMPTY_NODE;const i=Pg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Yn,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(t){const a=lf(n.visibleWrites,e);return t.forEachChild(Yn,(c,h)=>{const _=yy(lf(a,new Dn(c)),h);r=r.updateImmediateChild(c,_)}),zN(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return zN(lf(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function KN(n,e,t,r){return function gj(n,e,t,r,i){(0,z.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=gr(e,t);if(Cx(n.visibleWrites,a))return null;{const c=lf(n.visibleWrites,a);return Tx(c)?i.getChild(t):yy(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function CT(n,e){return function _j(n,e){return Pg(n.visibleWrites,e)}(n.writeTree,gr(n.treePath,e))}function Sx(n,e,t){return function mj(n,e,t,r){const i=gr(e,t),a=Pg(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?yy(lf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function ZN(n,e){return YN(gr(n.treePath,e),n.writeTree)}function YN(n,e){return{treePath:n,writeTree:e}}class Ej{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,z.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,z.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,q0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,W0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,gy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,z.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,q0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const QN=new class Ij{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Ax{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new cf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Sx(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:xg(this.viewCache_),a=function wj(n,e,t,r,i,a){return function yj(n,e,t,r,i,a,c){let h;const _=lf(n.visibleWrites,e),w=Pg(_,vn());if(null!=w)h=w;else{if(null==t)return[];h=yy(_,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const C=[],O=c.getCompare(),$=a?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let Z=$.getNext();for(;Z&&C.length<i;)0!==O(Z,r)&&C.push(Z),Z=$.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function XN(n,e,t,r,i,a){const c=e.eventCache;if(null!=CT(r,t))return e;{let h,_;if(Jt(t))if((0,z.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=xg(e),O=Dx(r,w instanceof Wt?w:Wt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),O,a)}else{const w=bT(r,xg(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=Xt(t);if(".priority"===w){(0,z.hu)(1===uf(t),"Can't have a priority with additional path components");const C=c.getNode();_=e.serverCache.getNode();const O=KN(r,t,C,_);h=null!=O?n.filter.updatePriority(C,O):c.getNode()}else{const C=Bn(t);let O;if(c.isCompleteForChild(w)){_=e.serverCache.getNode();const $=KN(r,t,c.getNode(),_);O=null!=$?c.getNode().getImmediateChild(w).updateChild(C,$):c.getNode().getImmediateChild(w)}else O=Sx(r,w,e.serverCache);h=null!=O?n.filter.updateChild(c.getNode(),w,O,C,i,a):c.getNode()}}return Q0(e,h,c.isFullyInitialized()||Jt(t),n.filter.filtersNodes())}}function TT(n,e,t,r,i,a,c,h){const _=e.serverCache;let w;const C=c?n.filter:n.filter.getIndexedFilter();if(Jt(t))w=C.updateFullNode(_.getNode(),r,null);else if(C.filtersNodes()&&!_.isFiltered()){const Z=_.getNode().updateChild(t,r);w=C.updateFullNode(_.getNode(),Z,null)}else{const Z=Xt(t);if(!_.isCompleteForPath(t)&&uf(t)>1)return e;const ne=Bn(t),Se=_.getNode().getImmediateChild(Z).updateChild(ne,r);w=".priority"===Z?C.updatePriority(_.getNode(),Se):C.updateChild(_.getNode(),Z,Se,ne,QN,null)}const O=$N(e,w,_.isFullyInitialized()||Jt(t),C.filtersNodes());return XN(n,O,t,i,new Ax(i,O,a),h)}function Rx(n,e,t,r,i,a,c){const h=e.eventCache;let _,w;const C=new Ax(i,e,a);if(Jt(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,c),_=Q0(e,w,!0,n.filter.filtersNodes());else{const O=Xt(t);if(".priority"===O)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=Q0(e,w,h.isFullyInitialized(),h.isFiltered());else{const $=Bn(t),Z=h.getNode().getImmediateChild(O);let ne;if(Jt($))ne=r;else{const _e=C.getCompleteChild(O);ne=null!=_e?".priority"===ox($)&&_e.getChild(AN($)).isEmpty()?_e:_e.updateChild($,r):Wt.EMPTY_NODE}_=Z.equals(ne)?e:Q0(e,n.filter.updateChild(h.getNode(),O,ne,$,C,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return _}function JN(n,e){return n.eventCache.isCompleteForChild(e)}function ek(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function xx(n,e,t,r,i,a,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=Jt(t)?r:new Qn(null).setTree(t,r);const C=e.serverCache.getNode();return w.children.inorderTraversal((O,$)=>{if(C.hasChild(O)){const ne=ek(0,e.serverCache.getNode().getImmediateChild(O),$);_=TT(n,_,new Dn(O),ne,i,a,c,h)}}),w.children.inorderTraversal((O,$)=>{const Z=!e.serverCache.isCompleteForChild(O)&&null===$.value;if(!C.hasChild(O)&&!Z){const _e=ek(0,e.serverCache.getNode().getImmediateChild(O),$);_=TT(n,_,new Dn(O),_e,i,a,c,h)}}),_}class Pj{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new px(r.getIndex()),a=function GV(n){return n.loadsAllData()?new px(n.getIndex()):n.hasLimit()?new zV(n):new K0(n)}(r);this.processor_=function bj(n){return{filter:n}}(a);const c=t.serverCache,h=t.eventCache,_=i.updateFullNode(Wt.EMPTY_NODE,c.getNode(),null),w=a.updateFullNode(Wt.EMPTY_NODE,h.getNode(),null),C=new cf(_,c.isFullyInitialized(),i.filtersNodes()),O=new cf(w,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=wT(O,C),this.eventGenerator_=new nj(this.query_)}get query(){return this.query_}}function Nj(n,e){const t=xg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Jt(e)&&!t.getImmediateChild(Xt(e)).isEmpty())?t.getChild(e):null}function tk(n){return 0===n.eventRegistrations_.length}function nk(n,e,t){const r=[];if(t){(0,z.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const c=n.eventRegistrations_[a];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function rk(n,e,t,r){e.type===Ca.MERGE&&null!==e.source.queryId&&((0,z.hu)(xg(n.viewCache_),"We should always have a full cache before handling merges"),(0,z.hu)(ET(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function Tj(n,e,t,r,i){const a=new Ej;let c,h;if(t.type===Ca.OVERWRITE){const w=t;w.source.fromUser?c=Rx(n,e,w.path,w.snap,r,i,a):((0,z.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!Jt(w.path),c=TT(n,e,w.path,w.snap,r,i,h,a))}else if(t.type===Ca.MERGE){const w=t;w.source.fromUser?c=function Sj(n,e,t,r,i,a,c){let h=e;return r.foreach((_,w)=>{const C=gr(t,_);JN(e,Xt(C))&&(h=Rx(n,h,C,w,i,a,c))}),r.foreach((_,w)=>{const C=gr(t,_);JN(e,Xt(C))||(h=Rx(n,h,C,w,i,a,c))}),h}(n,e,w.path,w.children,r,i,a):((0,z.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),c=xx(n,e,w.path,w.children,r,i,h,a))}else if(t.type===Ca.ACK_USER_WRITE){const w=t;c=w.revert?function xj(n,e,t,r,i,a){let c;if(null!=CT(r,t))return e;{const h=new Ax(r,e,i),_=e.eventCache.getNode();let w;if(Jt(t)||".priority"===Xt(t)){let C;if(e.serverCache.isFullyInitialized())C=bT(r,xg(e));else{const O=e.serverCache.getNode();(0,z.hu)(O instanceof Wt,"serverChildren would be complete if leaf node"),C=Dx(r,O)}w=n.filter.updateFullNode(_,C,a)}else{const C=Xt(t);let O=Sx(r,C,e.serverCache);null==O&&e.serverCache.isCompleteForChild(C)&&(O=_.getImmediateChild(C)),w=null!=O?n.filter.updateChild(_,C,O,Bn(t),h,a):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(_,C,Wt.EMPTY_NODE,Bn(t),h,a):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=bT(r,xg(e)),c.isLeafNode()&&(w=n.filter.updateFullNode(w,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=CT(r,vn()),Q0(e,w,c,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function Aj(n,e,t,r,i,a,c){if(null!=CT(i,t))return e;const h=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(Jt(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return TT(n,e,t,_.getNode().getChild(t),i,a,h,c);if(Jt(t)){let w=new Qn(null);return _.getNode().forEachChild(Sc,(C,O)=>{w=w.set(new Dn(C),O)}),xx(n,e,t,w,i,a,h,c)}return e}{let w=new Qn(null);return r.foreach((C,O)=>{const $=gr(t,C);_.isCompleteForPath($)&&(w=w.set(C,_.getNode().getChild($)))}),xx(n,e,t,w,i,a,h,c)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==Ca.LISTEN_COMPLETE)throw(0,z.g5)("Unknown operation type: "+t.type);c=function Rj(n,e,t,r,i){const a=e.serverCache;return XN(n,$N(e,a.getNode(),a.isFullyInitialized()||Jt(t),a.isFiltered()),t,r,QN,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function Dj(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=ET(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(UN(ET(e)))}}(e,c,_),{viewCache:c,changes:_}}(n.processor_,i,e,t,r);return function Cj(n,e){(0,z.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,z.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,z.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,ik(n,a.changes,a.viewCache.eventCache.getNode(),null)}function ik(n,e,t,r){return function rj(n,e,t,r){const i=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function HV(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),Y0(n,i,"child_removed",e,r,t),Y0(n,i,"child_added",e,r,t),Y0(n,i,"child_moved",a,r,t),Y0(n,i,"child_changed",e,r,t),Y0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let DT,AT;class sk{constructor(){this.views=new Map}}function Px(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,z.hu)(null!=a,"SyncTree gave us an op for an invalid query."),rk(a,e,t,r)}{let a=[];for(const c of n.views.values())a=a.concat(rk(c,e,t,r));return a}}function ok(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let h=bT(t,i?r:null),_=!1;h?_=!0:r instanceof Wt?(h=Dx(t,r),_=!1):(h=Wt.EMPTY_NODE,_=!1);const w=wT(new cf(h,_,!1),new cf(r,i,!1));return new Pj(e,w)}return c}function ak(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function df(n,e){let t=null;for(const r of n.views.values())t=t||Nj(r,e);return t}function uk(n,e){return e._queryParams.loadsAllData()?ST(n):n.views.get(e._queryIdentifier)}function ck(n,e){return null!=uk(n,e)}function hf(n){return null!=ST(n)}function ST(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let zj=1;class lk{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Qn(null),this.pendingWriteTree_=function vj(){return{visibleWrites:vu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ox(n,e,t,r,i){return function aj(n,e,t,r,i){(0,z.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=X0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?vy(n,new Rg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function ff(n,e,t=!1){const r=function cj(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function lj(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,z.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&dj(h,r.path)?i=!1:ba(r.path,h.path)&&(a=!0)),c--}return!!i&&(a?(function hj(n){n.visibleWrites=WN(n.allWrites,fj,vn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=HN(n.visibleWrites,r.path):Ai(r.children,_=>{n.visibleWrites=HN(n.visibleWrites,gr(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new Qn(null);return null!=r.snap?a=a.set(vn(),!0):Ai(r.children,c=>{a=a.set(new Dn(c),!0)}),vy(n,new vT(r.path,a,t))}return[]}function J0(n,e,t){return vy(n,new Rg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function RT(n,e,t,r,i=!1){const a=e._path,c=n.syncPointTree_.get(a);let h=[];if(c&&("default"===e._queryIdentifier||ck(c,e))){const _=function Bj(n,e,t,r){const i=e._queryIdentifier,a=[];let c=[];const h=hf(n);if("default"===i)for(const[_,w]of n.views.entries())c=c.concat(nk(w,t,r)),tk(w)&&(n.views.delete(_),w.query._queryParams.loadsAllData()||a.push(w.query));else{const _=n.views.get(i);_&&(c=c.concat(nk(_,t,r)),tk(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return h&&!hf(n)&&a.push(new(function Uj(){return(0,z.hu)(DT,"Reference.ts has not been loaded"),DT}())(e._repo,e._path)),{removed:a,events:c}}(c,e,t,r);(function Vj(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const w=_.removed;if(h=_.events,!i){const C=-1!==w.findIndex($=>$._queryParams.loadsAllData()),O=n.syncPointTree_.findOnPath(a,($,Z)=>hf(Z));if(C&&!O){const $=n.syncPointTree_.subtree(a);if(!$.isEmpty()){const Z=function Qj(n){return n.fold((e,t,r)=>{if(t&&hf(t))return[ST(t)];{let i=[];return t&&(i=ak(t)),Ai(r,(a,c)=>{i=i.concat(c)}),i}})}($);for(let ne=0;ne<Z.length;++ne){const _e=Z[ne],Se=_e.query,pt=pk(n,_e);n.listenProvider_.startListening(tE(Se),eE(n,Se),pt.hashFn,pt.onComplete)}}}!O&&w.length>0&&!r&&(C?n.listenProvider_.stopListening(tE(e),null):w.forEach($=>{const Z=n.queryToTagMap.get(PT($));n.listenProvider_.stopListening(tE($),Z)}))}!function Xj(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=PT(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,w)}return h}function dk(n,e,t,r){const i=Nx(n,r);if(null!=i){const a=kx(i),c=a.path,h=a.queryId,_=Ps(c,e);return Fx(n,c,new Rg(Ex(h),_,t))}return[]}function Mx(n,e,t,r=!1){const i=e._path;let a=null,c=!1;n.syncPointTree_.foreachOnPath(i,($,Z)=>{const ne=Ps($,i);a=a||df(Z,ne),c=c||hf(Z)});let _,h=n.syncPointTree_.get(i);h?(c=c||hf(h),a=a||df(h,vn())):(h=new sk,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=a?_=!0:(_=!1,a=Wt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((Z,ne)=>{const _e=df(ne,vn());_e&&(a=a.updateImmediateChild(Z,_e))}));const w=ck(h,e);if(!w&&!e._queryParams.loadsAllData()){const $=PT(e);(0,z.hu)(!n.queryToTagMap.has($),"View does not exist, but we have a tag");const Z=function Jj(){return zj++}();n.queryToTagMap.set($,Z),n.tagToQueryMap.set(Z,$)}let O=function jj(n,e,t,r,i,a){const c=ok(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function kj(n,e){n.eventRegistrations_.push(e)}(c,t),function Fj(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Yn,(a,c)=>{r.push(gy(a,c))}),t.isFullyInitialized()&&r.push(UN(t.getNode())),ik(n,r,t.getNode(),e)}(c,t)}(h,e,t,IT(n.pendingWriteTree_,i),a,_);if(!w&&!c&&!r){const $=uk(h,e);O=O.concat(function eB(n,e,t){const r=e._path,i=eE(n,e),a=pk(n,t),c=n.listenProvider_.startListening(tE(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,z.hu)(!hf(h.value),"If we're adding a query, it shouldn't be shadowed");else{const _=h.fold((w,C,O)=>{if(!Jt(w)&&C&&hf(C))return[ST(C).query];{let $=[];return C&&($=$.concat(ak(C).map(Z=>Z.query))),Ai(O,(Z,ne)=>{$=$.concat(ne)}),$}});for(let w=0;w<_.length;++w){const C=_[w];n.listenProvider_.stopListening(tE(C),eE(n,C))}}return c}(n,e,$))}return O}function xT(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,h)=>{const w=df(h,Ps(c,e));if(w)return w});return qN(i,e,a,t,!0)}function vy(n,e){return hk(e,n.syncPointTree_,null,IT(n.pendingWriteTree_,vn()))}function hk(n,e,t,r){if(Jt(n.path))return fk(n,e,t,r);{const i=e.get(vn());null==t&&null!=i&&(t=df(i,vn()));let a=[];const c=Xt(n.path),h=n.operationForChild(c),_=e.children.get(c);if(_&&h){const w=t?t.getImmediateChild(c):null,C=ZN(r,c);a=a.concat(hk(h,_,w,C))}return i&&(a=a.concat(Px(i,n,r,t))),a}}function fk(n,e,t,r){const i=e.get(vn());null==t&&null!=i&&(t=df(i,vn()));let a=[];return e.children.inorderTraversal((c,h)=>{const _=t?t.getImmediateChild(c):null,w=ZN(r,c),C=n.operationForChild(c);C&&(a=a.concat(fk(C,h,_,w)))}),i&&(a=a.concat(Px(i,n,r,t))),a}function pk(n,e){const t=e.query,r=eE(n,t);return{hashFn:()=>(function Oj(n){return n.viewCache_.serverCache.getNode()}(e)||Wt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Kj(n,e,t){const r=Nx(n,t);if(r){const i=kx(r),a=i.path,c=i.queryId,h=Ps(a,e);return Fx(n,a,new Z0(Ex(c),h))}return[]}(n,t._path,r):function qj(n,e){return vy(n,new Z0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function WU(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return RT(n,t,null,a)}}}}function eE(n,e){const t=PT(e);return n.queryToTagMap.get(t)}function PT(n){return n._path.toString()+"$"+n._queryIdentifier}function Nx(n,e){return n.tagToQueryMap.get(e)}function kx(n){const e=n.indexOf("$");return(0,z.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Dn(n.substr(0,e))}}function Fx(n,e,t){const r=n.syncPointTree_.get(e);return(0,z.hu)(r,"Missing sync point for query tag that we're tracking"),Px(r,t,IT(n.pendingWriteTree_,e),null)}function tE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Hj(){return(0,z.hu)(AT,"Reference.ts has not been loaded"),AT}())(n._repo,n._path):n}class Lx{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Lx(t)}node(){return this.node_}}class Ux{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=gr(this.path_,e);return new Ux(this.syncTree_,t)}node(){return xT(this.syncTree_,this.path_)}}const tB=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},gk=function(n,e,t){return n&&"object"==typeof n?((0,z.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?nB(n[".sv"],e,t):"object"==typeof n[".sv"]?rB(n[".sv"],e):void(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},nB=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,z.hu)(!1,"Unexpected server value: "+n)},rB=function(n,e,t){n.hasOwnProperty("increment")||(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,z.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,z.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},mk=function(n,e,t,r){return jx(e,new Ux(t,n),r)},Vx=function(n,e,t){return jx(n,new Lx(e),t)};function jx(n,e,t){const r=n.getPriority().val(),i=gk(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,h=gk(c.getValue(),e,t);return h!==c.getValue()||i!==c.getPriority().val()?new fy(h,Er(i)):n}{const c=n;return a=c,i!==c.getPriority().val()&&(a=a.updatePriority(new fy(i))),c.forEachChild(Yn,(h,_)=>{const w=jx(_,e.getImmediateChild(h),t);w!==_&&(a=a.updateImmediateChild(h,w))}),a}}class Bx{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function OT(n,e){let t=e instanceof Dn?e:new Dn(e),r=n,i=Xt(t);for(;null!==i;){const a=(0,z.DV)(r.node.children,i)||{children:{},childCount:0};r=new Bx(i,r,a),t=Bn(t),i=Xt(t)}return r}function Og(n){return n.node.value}function $x(n,e){n.node.value=e,Hx(n)}function _k(n){return n.node.childCount>0}function MT(n,e){Ai(n.node.children,(t,r)=>{e(new Bx(t,n,r))})}function yk(n,e,t,r){t&&!r&&e(n),MT(n,i=>{yk(i,e,!0,r)}),t&&r&&e(n)}function nE(n){return new Dn(null===n.parent?n.name:nE(n.parent)+"/"+n.name)}function Hx(n){null!==n.parent&&function oB(n,e,t){const r=function iB(n){return void 0===Og(n)&&!_k(n)}(t),i=(0,z.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Hx(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Hx(n))}(n.parent,n.name,n)}const aB=/[\[\].#$\/\u0000-\u001F\u007F]/,uB=/[\[\].#$\u0000-\u001F\u007F]/,zx=10485760,NT=function(n){return"string"==typeof n&&0!==n.length&&!aB.test(n)},vk=function(n){return"string"==typeof n&&0!==n.length&&!uB.test(n)},rE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!aT(n)||n&&"object"==typeof n&&(0,z.r3)(n,".sv")},Ac=function(n,e,t,r){r&&void 0===e||iE((0,z.gK)(n,"value"),e,t)},iE=function(n,e,t){const r=t instanceof Dn?new TV(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Sg(r));if("function"==typeof e)throw new Error(n+"contains a function "+Sg(r)+" with contents = "+e.toString());if(aT(e))throw new Error(n+"contains "+e.toString()+" "+Sg(r));if("string"==typeof e&&e.length>zx/3&&(0,z.ug)(e)>zx)throw new Error(n+"contains a string greater than "+zx+" utf8 bytes "+Sg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Ai(e,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!NT(c)))throw new Error(n+" contains an invalid key ("+c+") "+Sg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function DV(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,z.ug)(e),RN(n)})(r,c),iE(n,h,r),function SV(n){const e=n.parts_.pop();n.byteLength_-=(0,z.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Sg(r)+" in addition to actual children.")}},wk=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,z.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Ai(e,(c,h)=>{const _=new Dn(c);if(iE(i,h,gr(t,_)),".priority"===ox(_)&&!rE(h))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=$0(r);for(let c=0;c<a.length;c++)if((".priority"!==a[c]||c!==a.length-1)&&!NT(a[c]))throw new Error(n+"contains an invalid key ("+a[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(CV);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ba(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},Gx=function(n,e,t){if(!t||void 0!==e){if(aT(e))throw new Error((0,z.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!rE(e))throw new Error((0,z.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},sE=function(n,e,t,r){if(!(r&&void 0===t||NT(t)))throw new Error((0,z.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},oE=function(n,e,t,r){if(!(r&&void 0===t||vk(t)))throw new Error((0,z.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},dB=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),oE(n,e,t,r)},Ta=function(n,e){if(".info"===Xt(e))throw new Error(n+" failed = Can't modify data under /.info/")},Ek=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!NT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),vk(n)}(t))throw new Error((0,z.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class hB{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function kT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!ax(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function Ik(n,e,t){kT(n,t),bk(n,r=>ax(r,e))}function Lo(n,e,t){kT(n,t),bk(n,r=>ba(r,e)||ba(e,r))}function bk(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(fB(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function fB(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Tg&&Si("event: "+t.toString()),dy(r)}}}const Ck="repo_interrupt",pB=25;class gB{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new hB,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=yT(),this.transactionQueueTree_=new Bx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Tk(n){const t=n.infoData_.getNode(new Dn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function aE(n){return tB({timestamp:Tk(n)})}function Dk(n,e,t,r,i){n.dataUpdateCount++;const a=new Dn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const _=(0,z.UI)(t,w=>Er(w));c=function Zj(n,e,t,r){const i=Nx(n,r);if(i){const a=kx(i),c=a.path,h=a.queryId,_=Ps(c,e),w=Qn.fromObject(t);return Fx(n,c,new _y(Ex(h),_,w))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=Er(t);c=dk(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,z.UI)(t,w=>Er(w));c=function Wj(n,e,t){const r=Qn.fromObject(t);return vy(n,new _y({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=Er(t);c=J0(n.serverSyncTree_,a,_)}let h=a;c.length>0&&(h=Ey(n,a)),Lo(n.eventQueue_,h,c)}function Sk(n,e){Wx(n,"connected",e),!1===e&&function wB(n){wy(n,"onDisconnectEvents");const e=aE(n),t=yT();yx(n.onDisconnect_,vn(),(i,a)=>{const c=mk(i,a,n.serverSyncTree_,e);my(t,i,c)});let r=[];yx(t,vn(),(i,a)=>{r=r.concat(J0(n.serverSyncTree_,i,a));const c=Yx(n,i);Ey(n,c)}),n.onDisconnect_=yT(),Lo(n.eventQueue_,vn(),r)}(n)}function Wx(n,e,t){const r=new Dn("/.info/"+e),i=Er(t);n.infoData_.updateSnapshot(r,i);const a=J0(n.infoSyncTree_,r,i);Lo(n.eventQueue_,r,a)}function FT(n){return n.nextWriteId_++}function qx(n,e,t,r,i){wy(n,"set",{path:e.toString(),value:t,priority:r});const a=aE(n),c=Er(t,r),h=xT(n.serverSyncTree_,e),_=Vx(c,h,a),w=FT(n),C=Ox(n.serverSyncTree_,e,_,w,!0);kT(n.eventQueue_,C),n.server_.put(e.toString(),c.val(!0),($,Z)=>{const ne="ok"===$;ne||us("set at "+e+" failed: "+$);const _e=ff(n.serverSyncTree_,w,!ne);Lo(n.eventQueue_,e,_e),pf(0,i,$,Z)});const O=Yx(n,e);Ey(n,O),Lo(n.eventQueue_,O,[])}function EB(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&_x(n.onDisconnect_,e),pf(0,t,r,i)})}function Ak(n,e,t,r){const i=Er(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,c)=>{"ok"===a&&my(n.onDisconnect_,e,i),pf(0,r,a,c)})}function Kx(n,e,t){let r;r=".info"===Xt(e._path)?RT(n.infoSyncTree_,e,t):RT(n.serverSyncTree_,e,t),Ik(n.eventQueue_,e._path,r)}function Rk(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Ck)}function wy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Si(t,...e)}function pf(n,e,t,r){e&&dy(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const c=new Error(a);c.code=i,e(c)}})}function Zx(n,e,t){return xT(n.serverSyncTree_,e,t)||Wt.EMPTY_NODE}function LT(n,e=n.transactionQueueTree_){if(e||UT(n,e),Og(e)){const t=Pk(n,e);(0,z.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function SB(n,e,t){const r=t.map(w=>w.currentWriteId),i=Zx(n,e,r);let a=i;const c=i.hash();for(let w=0;w<t.length;w++){const C=t[w];(0,z.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const O=Ps(e,C.path);a=a.updateChild(O,C.currentOutputSnapshotRaw)}const h=a.val(!0),_=e;n.server_.put(_.toString(),h,w=>{wy(n,"transaction put response",{path:_.toString(),status:w});let C=[];if("ok"===w){const O=[];for(let $=0;$<t.length;$++)t[$].status=2,C=C.concat(ff(n.serverSyncTree_,t[$].currentWriteId)),t[$].onComplete&&O.push(()=>t[$].onComplete(null,!0,t[$].currentOutputSnapshotResolved)),t[$].unwatcher();UT(n,OT(n.transactionQueueTree_,e)),LT(n,n.transactionQueueTree_),Lo(n.eventQueue_,e,C);for(let $=0;$<O.length;$++)dy(O[$])}else{if("datastale"===w)for(let O=0;O<t.length;O++)t[O].status=3===t[O].status?4:0;else{us("transaction at "+_.toString()+" failed: "+w);for(let O=0;O<t.length;O++)t[O].status=4,t[O].abortReason=w}Ey(n,e)}},c)}(n,nE(e),t)}else _k(e)&&MT(e,t=>{LT(n,t)})}function Ey(n,e){const t=xk(n,e),r=nE(t);return function AB(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const _=e[h],w=Ps(t,_.path);let O,C=!1;if((0,z.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)C=!0,O=_.abortReason,i=i.concat(ff(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=pB)C=!0,O="maxretry",i=i.concat(ff(n.serverSyncTree_,_.currentWriteId,!0));else{const $=Zx(n,_.path,c);_.currentInputSnapshot=$;const Z=e[h].update($.val());if(void 0!==Z){iE("transaction failed: Data returned ",Z,_.path);let ne=Er(Z);"object"==typeof Z&&null!=Z&&(0,z.r3)(Z,".priority")||(ne=ne.updatePriority($.getPriority()));const Se=_.currentWriteId,pt=aE(n),Dt=Vx(ne,$,pt);_.currentOutputSnapshotRaw=ne,_.currentOutputSnapshotResolved=Dt,_.currentWriteId=FT(n),c.splice(c.indexOf(Se),1),i=i.concat(Ox(n.serverSyncTree_,_.path,Dt,_.currentWriteId,_.applyLocally)),i=i.concat(ff(n.serverSyncTree_,Se,!0))}else C=!0,O="nodata",i=i.concat(ff(n.serverSyncTree_,_.currentWriteId,!0))}Lo(n.eventQueue_,t,i),i=[],C&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===O?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(O),!1,null)))}UT(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)dy(r[h]);LT(n,n.transactionQueueTree_)}(n,Pk(n,t),r),r}function xk(n,e){let t,r=n.transactionQueueTree_;for(t=Xt(e);null!==t&&void 0===Og(r);)r=OT(r,t),t=Xt(e=Bn(e));return r}function Pk(n,e){const t=[];return Ok(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Ok(n,e,t){const r=Og(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);MT(e,i=>{Ok(n,i,t)})}function UT(n,e){const t=Og(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,$x(e,t.length>0?t:void 0)}MT(e,r=>{UT(n,r)})}function Yx(n,e){const t=nE(xk(n,e)),r=OT(n.transactionQueueTree_,e);return function sB(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Qx(n,i)}),Qx(n,r),yk(r,i=>{Qx(n,i)}),t}function Qx(n,e){const t=Og(e);if(t){const r=[];let i=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,z.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,z.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(ff(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?$x(e,void 0):t.length=a+1,Lo(n.eventQueue_,nE(e),i);for(let c=0;c<r.length;c++)dy(r[c])}}const Xx=function(n,e){const t=PB(n),r=t.namespace;return"firebase.com"===t.domain&&Dc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Dc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&us("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ex(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Dn(t.pathString)}},PB=function(n){let e="",t="",r="",i="",a="",c=!0,h="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let C=n.indexOf("/");-1===C&&(C=n.length);let O=n.indexOf("?");-1===O&&(O=n.length),e=n.substring(0,Math.min(C,O)),C<O&&(i=function RB(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(C,O)));const $=function xB(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):us(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,O)));w=e.indexOf(":"),w>=0?(c="https"===h||"wss"===h,_=parseInt(e.substring(w+1),10)):w=e.length;const Z=e.slice(0,w);if("localhost"===Z.toLowerCase())t="localhost";else if(Z.split(".").length<=2)t=Z;else{const ne=e.indexOf(".");r=e.substring(0,ne).toLowerCase(),t=e.substring(ne+1),a=r}"ns"in $&&(a=$.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:a}},Mk="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",OB=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=Mk.charAt(t%64),t=Math.floor(t/64);(0,z.hu)(0===t,"Cannot push at time == 0");let c=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=Mk.charAt(e[i]);return(0,z.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class Nk{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,z.Wl)(this.snapshot.exportVal())}}class kk{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Jx{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,z.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Fk{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new z.BH;return EB(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ta("OnDisconnect.remove",this._path);const e=new z.BH;return Ak(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ta("OnDisconnect.set",this._path),Ac("OnDisconnect.set",e,this._path,!1);const t=new z.BH;return Ak(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ta("OnDisconnect.setWithPriority",this._path),Ac("OnDisconnect.setWithPriority",e,this._path,!1),Gx("OnDisconnect.setWithPriority",t,!1);const r=new z.BH;return function IB(n,e,t,r,i){const a=Er(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(c,h)=>{"ok"===c&&my(n.onDisconnect_,e,a),pf(0,i,c,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ta("OnDisconnect.update",this._path),wk("OnDisconnect.update",e,this._path,!1);const t=new z.BH;return function bB(n,e,t,r){if((0,z.xb)(t))return Si("onDisconnect().update() called with empty data.  Don't do anything."),void pf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Ai(t,(c,h)=>{const _=Er(h);my(n.onDisconnect_,gr(e,c),_)}),pf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Js{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Jt(this._path)?null:ox(this._path)}get ref(){return new Da(this._repo,this._path)}get _queryIdentifier(){const e=jN(this._queryParams),t=XR(e);return"{}"===t?"default":t}get _queryObject(){return jN(this._queryParams)}isEqual(e){if(!((e=(0,z.m9)(e))instanceof Js))return!1;const t=this._repo===e._repo,r=ax(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function bV(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function VT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function gf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Sc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==sf)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==wd)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Yn){if(null!=e&&!rE(e)||null!=t&&!rE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,z.hu)(n.getIndex()instanceof hx||n.getIndex()===fx,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function jT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Da extends Js{constructor(e,t){super(e,t,new gT,!1)}get parent(){const e=AN(this._path);return null===e?null:new Da(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Mg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Dn(e),r=Ng(this.ref,e);return new Mg(this._node.getChild(t),r,Yn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Mg(i,Ng(this.ref,r),Yn)))}hasChild(e){const t=new Dn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Lk(n,e){return(n=(0,z.m9)(n))._checkNotDeleted("ref"),void 0!==e?Ng(n._root,e):n._root}function Uk(n,e){(n=(0,z.m9)(n))._checkNotDeleted("refFromURL");const t=Xx(e,n._repo.repoInfo_.nodeAdmin);Ek("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Dc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Lk(n,t.path.toString())}function Ng(n,e){return null===Xt((n=(0,z.m9)(n))._path)?dB("child","path",e,!1):oE("child","path",e,!1),new Da(n._repo,gr(n._path,e))}function eP(n,e){n=(0,z.m9)(n),Ta("set",n._path),Ac("set",e,n._path,!1);const t=new z.BH;return qx(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function LB(n,e){wk("update",e,n._path,!1);const t=new z.BH;return function vB(n,e,t,r){wy(n,"update",{path:e.toString(),value:t});let i=!0;const a=aE(n),c={};if(Ai(t,(h,_)=>{i=!1,c[h]=mk(gr(e,h),Er(_),n.serverSyncTree_,a)}),i)Si("update() called with empty data.  Don't do anything."),pf(0,r,"ok",void 0);else{const h=FT(n),_=function Gj(n,e,t,r){!function uj(n,e,t,r){(0,z.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=bx(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Qn.fromObject(t);return vy(n,new _y({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,h);kT(n.eventQueue_,_),n.server_.merge(e.toString(),t,(w,C)=>{const O="ok"===w;O||us("update at "+e+" failed: "+w);const $=ff(n.serverSyncTree_,h,!O),Z=$.length>0?Ey(n,e):e;Lo(n.eventQueue_,Z,$),pf(0,r,w,C)}),Ai(t,w=>{const C=Yx(n,gr(e,w));Ey(n,C)}),Lo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function UB(n){n=(0,z.m9)(n);const e=new Jx(()=>{}),t=new uE(e);return function yB(n,e,t){const r=function Yj(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,C)=>{const O=Ps(w,t);r=r||df(C,O)});let i=n.syncPointTree_.get(t);i?r=r||df(i,vn()):(i=new sk,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,c=a?new cf(r,!0,!1):null;return function Mj(n){return ET(n.viewCache_)}(ok(i,e,IT(n.pendingWriteTree_,e._path),a?c.getNode():Wt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Er(i).withIndex(e._queryParams.getIndex());let c;if(Mx(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=J0(n.serverSyncTree_,e._path,a);else{const h=eE(n.serverSyncTree_,e);c=dk(n.serverSyncTree_,e._path,a,h)}return Lo(n.eventQueue_,e._path,c),RT(n.serverSyncTree_,e,t,null,!0),a},i=>(wy(n,"get for query "+(0,z.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Mg(r,new Da(n._repo,n._path),n._queryParams.getIndex()))}class uE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new Nk("value",this,new Mg(e.snapshotNode,new Da(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new kk(this,e,t):null}matches(e){return e instanceof uE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class BT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new kk(this,e,t):null}createEvent(e,t){(0,z.hu)(null!=e.childName,"Child events should have a childName.");const r=Ng(new Da(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Nk(e.type,this,new Mg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof BT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function cE(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,w=(C,O)=>{Kx(n._repo,n,h),_(C,O)};w.userCallback=t.userCallback,w.context=t.context,t=w}const c=new Jx(t,a||void 0),h="value"===e?new uE(c):new BT(e,c);return function CB(n,e,t){let r;r=".info"===Xt(e._path)?Mx(n.infoSyncTree_,e,t):Mx(n.serverSyncTree_,e,t),Ik(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>Kx(n._repo,n,h)}function tP(n,e,t,r){return cE(n,"value",e,t,r)}function Vk(n,e,t,r){return cE(n,"child_added",e,t,r)}function jk(n,e,t,r){return cE(n,"child_changed",e,t,r)}function Bk(n,e,t,r){return cE(n,"child_moved",e,t,r)}function $k(n,e,t,r){return cE(n,"child_removed",e,t,r)}function Hk(n,e,t){let r=null;const i=t?new Jx(t):null;"value"===e?r=new uE(i):e&&(r=new BT(e,i)),Kx(n._repo,n,r)}class wu{}class zk extends wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ac("endAt",this._value,e._path,!0);const t=mx(e._queryParams,this._value,this._key);if(jT(t),gf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Js(e._repo,e._path,t,e._orderByCalled)}}class jB extends wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ac("endBefore",this._value,e._path,!1);const t=function ZV(n,e,t){let r;return r=mx(n,e,n.index_===Sc||t?t:sf),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(jT(t),gf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Js(e._repo,e._path,t,e._orderByCalled)}}class Gk extends wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ac("startAt",this._value,e._path,!0);const t=gx(e._queryParams,this._value,this._key);if(jT(t),gf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Js(e._repo,e._path,t,e._orderByCalled)}}class HB extends wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ac("startAfter",this._value,e._path,!1);const t=function KV(n,e,t){let r;return r=gx(n,e,n.index_===Sc||t?t:wd),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(jT(t),gf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Js(e._repo,e._path,t,e._orderByCalled)}}class GB extends wu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Js(e._repo,e._path,function WV(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class qB extends wu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Js(e._repo,e._path,function qV(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class ZB extends wu{constructor(e){super(),this._path=e}_apply(e){VT(e,"orderByChild");const t=new Dn(this._path);if(Jt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new hx(t),i=mT(e._queryParams,r);return gf(i),new Js(e._repo,e._path,i,!0)}}class QB extends wu{_apply(e){VT(e,"orderByKey");const t=mT(e._queryParams,Sc);return gf(t),new Js(e._repo,e._path,t,!0)}}class JB extends wu{_apply(e){VT(e,"orderByPriority");const t=mT(e._queryParams,Yn);return gf(t),new Js(e._repo,e._path,t,!0)}}class t2 extends wu{_apply(e){VT(e,"orderByValue");const t=mT(e._queryParams,fx);return gf(t),new Js(e._repo,e._path,t,!0)}}class r2 extends wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Ac("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new zk(this._value,this._key)._apply(new Gk(this._value,this._key)._apply(e))}}function Eu(n,...e){let t=(0,z.m9)(n);for(const r of e)t=r._apply(t);return t}(function Lj(n){(0,z.hu)(!DT,"__referenceConstructor has already been defined"),DT=n})(Da),function $j(n){(0,z.hu)(!AT,"__referenceConstructor has already been defined"),AT=n}(Da);const s2="FIREBASE_DATABASE_EMULATOR_HOST",nP={};let Wk=!1;function qk(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Dc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Si("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,c=Xx(a,i),h=c.repoInfo;typeof process<"u"&&process.env&&(w=process.env[s2]),w?(_=!0,a=`http://${w}?ns=${h.namespace}`,c=Xx(a,i),h=c.repoInfo):_=!c.repoInfo.secure;const C=i&&_?new B0(B0.OWNER):new XU(n.name,n.options,e);Ek("Invalid Firebase Database URL",c),Jt(c.path)||Dc("Database URL must point to the root of a Firebase Database (not including a child path).");const O=function u2(n,e,t,r){let i=nP[e.name];i||(i={},nP[e.name]=i);let a=i[n.toURLString()];return a&&Dc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new gB(n,Wk,t,r),i[n.toURLString()]=a,a}(h,n,C,new QU(n.name,t));return new l2(O,n)}class l2{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function mB(n,e,t){if(n.stats_=rx(n.repoInfo_),n.forceRestClient_||YU())n.server_=new _T(n.repoInfo_,(r,i,a,c)=>{Dk(n,r,i,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Sk(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,z.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ag(n.repoInfo_,e,(r,i,a,c)=>{Dk(n,r,i,a,c)},r=>{Sk(n,r)},r=>{!function _B(n,e){Ai(e,(t,r)=>{Wx(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function tV(n,e){const t=n.toString();return nx[t]||(nx[t]=e()),nx[t]}(n.repoInfo_,()=>new tj(n.stats_,n.server_)),n.infoData_=new YV,n.infoSyncTree_=new lk({startListening:(r,i,a,c)=>{let h=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(h=J0(n.infoSyncTree_,r._path,_),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),Wx(n,"connected",!1),n.serverSyncTree_=new lk({startListening:(r,i,a,c)=>(n.server_.listen(r,a,i,(h,_)=>{const w=c(h,_);Lo(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Da(this._repo,vn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function a2(n,e){const t=nP[e];(!t||t[n.key]!==n)&&Dc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Rk(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Dc("Cannot call "+e+" on a deleted database.")}}function Kk(){mN.IS_TRANSPORT_INITIALIZED&&us("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function d2(){Kk(),af.forceDisallow()}function h2(){Kk(),hy.forceDisallow(),af.forceAllow()}function g2(n,e){YM(n,e)}const _2={".sv":"timestamp"};class w2{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ag.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Ag.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function m2(n){GM(qr.SDK_VERSION),(0,qr._registerComponent)(new ns.wA("database",(e,{instanceIdentifier:t})=>qk(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,qr.registerVersion)(HM,"0.14.4",n),(0,qr.registerVersion)(HM,"0.14.4","esm2017")}();const C2=new lr.Yd("@firebase/database-compat"),Yk=function(n){C2.warn("FIREBASE WARNING: "+n)};class S2{constructor(e){this._delegate=e}cancel(e){(0,z.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,z.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,z.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,z.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,z.Dv)("OnDisconnect.set",1,2,arguments.length),(0,z.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,z.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,z.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,z.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,Yk("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,z.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class A2{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,z.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class mf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,z.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,z.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,z.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,z.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,z.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),oE("DataSnapshot.child","path",e,!1),new mf(this._database,this._delegate.child(e))}hasChild(e){return(0,z.Dv)("DataSnapshot.hasChild",1,1,arguments.length),oE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,z.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,z.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,z.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new mf(this._database,t)))}hasChildren(){return(0,z.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,z.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,z.Dv)("DataSnapshot.ref",0,0,arguments.length),new Uo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ji{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,z.Dv)("Query.on",2,4,arguments.length),(0,z.Wj)("Query.on","callback",t,!1);const c=ji.getCancelAndContextArgs_("Query.on",r,i),h=(w,C)=>{t.call(c.context,new mf(this.database,w),C)};h.userCallback=t,h.context=c.context;const _=null===(a=c.cancel)||void 0===a?void 0:a.bind(c.context);switch(e){case"value":return tP(this._delegate,h,_),t;case"child_added":return Vk(this._delegate,h,_),t;case"child_removed":return $k(this._delegate,h,_),t;case"child_changed":return jk(this._delegate,h,_),t;case"child_moved":return Bk(this._delegate,h,_),t;default:throw new Error((0,z.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,z.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,z.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,z.Wj)("Query.off","callback",t,!0),(0,z.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Hk(this._delegate,e,i)}else Hk(this._delegate,e)}get(){return UB(this._delegate).then(e=>new mf(this.database,e))}once(e,t,r,i){(0,z.Dv)("Query.once",1,4,arguments.length),(0,z.Wj)("Query.once","callback",t,!0);const a=ji.getCancelAndContextArgs_("Query.once",r,i),c=new z.BH,h=(w,C)=>{const O=new mf(this.database,w);t&&t.call(a.context,O,C),c.resolve(O)};h.userCallback=t,h.context=a.context;const _=w=>{a.cancel&&a.cancel.call(a.context,w),c.reject(w)};switch(e){case"value":tP(this._delegate,h,_,{onlyOnce:!0});break;case"child_added":Vk(this._delegate,h,_,{onlyOnce:!0});break;case"child_removed":$k(this._delegate,h,_,{onlyOnce:!0});break;case"child_changed":jk(this._delegate,h,_,{onlyOnce:!0});break;case"child_moved":Bk(this._delegate,h,_,{onlyOnce:!0});break;default:throw new Error((0,z.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,z.Dv)("Query.limitToFirst",1,1,arguments.length),new ji(this.database,Eu(this._delegate,function WB(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new GB(n)}(e)))}limitToLast(e){return(0,z.Dv)("Query.limitToLast",1,1,arguments.length),new ji(this.database,Eu(this._delegate,function KB(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new qB(n)}(e)))}orderByChild(e){return(0,z.Dv)("Query.orderByChild",1,1,arguments.length),new ji(this.database,Eu(this._delegate,function YB(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return oE("orderByChild","path",n,!1),new ZB(n)}(e)))}orderByKey(){return(0,z.Dv)("Query.orderByKey",0,0,arguments.length),new ji(this.database,Eu(this._delegate,function XB(){return new QB}()))}orderByPriority(){return(0,z.Dv)("Query.orderByPriority",0,0,arguments.length),new ji(this.database,Eu(this._delegate,function e2(){return new JB}()))}orderByValue(){return(0,z.Dv)("Query.orderByValue",0,0,arguments.length),new ji(this.database,Eu(this._delegate,function n2(){return new t2}()))}startAt(e=null,t){return(0,z.Dv)("Query.startAt",0,2,arguments.length),new ji(this.database,Eu(this._delegate,function $B(n=null,e){return sE("startAt","key",e,!0),new Gk(n,e)}(e,t)))}startAfter(e=null,t){return(0,z.Dv)("Query.startAfter",0,2,arguments.length),new ji(this.database,Eu(this._delegate,function zB(n,e){return sE("startAfter","key",e,!0),new HB(n,e)}(e,t)))}endAt(e=null,t){return(0,z.Dv)("Query.endAt",0,2,arguments.length),new ji(this.database,Eu(this._delegate,function VB(n,e){return sE("endAt","key",e,!0),new zk(n,e)}(e,t)))}endBefore(e=null,t){return(0,z.Dv)("Query.endBefore",0,2,arguments.length),new ji(this.database,Eu(this._delegate,function BB(n,e){return sE("endBefore","key",e,!0),new jB(n,e)}(e,t)))}equalTo(e,t){return(0,z.Dv)("Query.equalTo",1,2,arguments.length),new ji(this.database,Eu(this._delegate,function i2(n,e){return sE("equalTo","key",e,!0),new r2(n,e)}(e,t)))}toString(){return(0,z.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,z.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,z.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ji))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,z.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,z.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,z.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Uo(this.database,new Da(this._delegate._repo,this._delegate._path))}}class Uo extends ji{constructor(e,t){super(e,new Js(t._repo,t._path,new gT,!1)),this.database=e,this._delegate=t}getKey(){return(0,z.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,z.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Uo(this.database,Ng(this._delegate,e))}getParent(){(0,z.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Uo(this.database,e):null}getRoot(){return(0,z.Dv)("Reference.root",0,0,arguments.length),new Uo(this.database,this._delegate.root)}set(e,t){(0,z.Dv)("Reference.set",1,2,arguments.length),(0,z.Wj)("Reference.set","onComplete",t,!0);const r=eP(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,z.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,Yk("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ta("Reference.update",this._delegate._path),(0,z.Wj)("Reference.update","onComplete",t,!0);const r=LB(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,z.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,z.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function FB(n,e,t){if(Ta("setWithPriority",n._path),Ac("setWithPriority",e,n._path,!1),Gx("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new z.BH;return qx(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,z.Dv)("Reference.remove",0,1,arguments.length),(0,z.Wj)("Reference.remove","onComplete",e,!0);const t=function NB(n){return Ta("remove",n._path),eP(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,z.Dv)("Reference.transaction",1,3,arguments.length),(0,z.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,z.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,z.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function E2(n,e,t){var r;if(n=(0,z.m9)(n),Ta("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new z.BH,h=tP(n,()=>{});return function DB(n,e,t,r,i,a){wy(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:qM(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=Zx(n,e,void 0);c.currentInputSnapshot=h;const _=c.update(h.val());if(void 0===_)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{iE("transaction failed: Data returned ",_,c.path),c.status=0;const w=OT(n.transactionQueueTree_,e),C=Og(w)||[];let O;C.push(c),$x(w,C),"object"==typeof _&&null!==_&&(0,z.r3)(_,".priority")?(O=(0,z.DV)(_,".priority"),(0,z.hu)(rE(O),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):O=(xT(n.serverSyncTree_,e)||Wt.EMPTY_NODE).getPriority().val();const $=aE(n),Z=Er(_,O),ne=Vx(Z,h,$);c.currentOutputSnapshotRaw=Z,c.currentOutputSnapshotResolved=ne,c.currentWriteId=FT(n);const _e=Ox(n.serverSyncTree_,e,ne,c.currentWriteId,c.applyLocally);Lo(n.eventQueue_,e,_e),LT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,w,C)=>{let O=null;_?a.reject(_):(O=new Mg(C,new Da(n._repo,n._path),Yn),a.resolve(new w2(w,O)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new A2(a.committed,new mf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,z.Dv)("Reference.setPriority",1,2,arguments.length),(0,z.Wj)("Reference.setPriority","onComplete",t,!0);const r=function kB(n,e){n=(0,z.m9)(n),Ta("setPriority",n._path),Gx("setPriority",e,!1);const t=new z.BH;return qx(n._repo,gr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,z.Dv)("Reference.push",0,2,arguments.length),(0,z.Wj)("Reference.push","onComplete",t,!0);const r=function MB(n,e){n=(0,z.m9)(n),Ta("push",n._path),Ac("push",e,n._path,!0);const t=Tk(n._repo),r=OB(t),i=Ng(n,r),a=Ng(n,r);let c;return c=null!=e?eP(a,e).then(()=>a):Promise.resolve(a),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new Uo(this.database,c));t&&i.then(()=>t(null),c=>t(c));const a=new Uo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Ta("Reference.onDisconnect",this._delegate._path),new S2(new Fk(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class lE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:d2,forceLongPolling:h2}}useEmulator(e,t,r={}){!function Zk(n,e,t,r={}){(n=(0,z.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Dc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Dc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new B0(B0.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,z.Sg)(r.mockUserToken,n.app.options.projectId);a=new B0(c)}!function o2(n,e,t,r){n.repoInfo_=new ex(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,z.Dv)("database.ref",0,1,arguments.length),e instanceof Uo){const t=Uk(this._delegate,e.toString());return new Uo(this,t)}{const t=Lk(this._delegate,e);return new Uo(this,t)}}refFromURL(e){(0,z.Dv)("database.refFromURL",1,1,arguments.length);const r=Uk(this._delegate,e);return new Uo(this,r)}goOffline(){return(0,z.Dv)("database.goOffline",0,0,arguments.length),function f2(n){(n=(0,z.m9)(n))._checkNotDeleted("goOffline"),Rk(n._repo)}(this._delegate)}goOnline(){return(0,z.Dv)("database.goOnline",0,0,arguments.length),function p2(n){(n=(0,z.m9)(n))._checkNotDeleted("goOnline"),function TB(n){n.persistentConnection_&&n.persistentConnection_.resume(Ck)}(n._repo)}(this._delegate)}}lE.ServerValue={TIMESTAMP:function y2(){return _2}(),increment:n=>function v2(n){return{".sv":{increment:n}}}(n)};var x2=Object.freeze({__proto__:null,initStandalone:function R2({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){GM(t);const c=new ns.zt("auth-internal",new ns.H0("database-standalone"));return c.setComponent(new ns.wA("auth-internal",()=>r,"PRIVATE")),{instance:new lE(qk(n,c,void 0,e,a),n),namespace:i}}});const P2=lE.ServerValue;function Qk(n){return null==n}function Xk(n){return"function"==typeof n.set}function Jk(n,e){return Xk(e)?e:n.ref(e)}function e1(n,e){if(function M2(n){return"string"==typeof n}(n))return e.stringCase();if(Xk(n))return e.firebaseCase();if(function N2(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function dE(n,e,t="on",r=tc.z){return new yi.y(i=>{let a=null;return a=n[t](e,(c,h)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,G.U)(i=>{const{snapshot:a,prevKey:c}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:c,key:h}}),(0,ke.B)())}function t1(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function L2(n,e){const{payload:t,prevKey:r,key:i}=e,a=t1(n,i),c=function F2(n,e){if(Qk(e))return 0;{const t=t1(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:h,key:_.key};return h=_.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(c,0,h),n}return n;default:return n}}function n1(n){return(Qk(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function r1(n,e,t){return function k2(n,e,t){return dE(n,"value","once",t).pipe(L(r=>{const i=[dt(r)];return e.forEach(a=>i.push(dE(n,a,"on",t))),(0,oa.T)(...i).pipe(_h(L2,[]))}),Om())}(n,e=n1(e),t)}function i1(n,e,t){const r=(e=n1(e)).map(i=>dE(n,i,"on",t));return(0,oa.T)(...r)}function s1(n,e){return function(r,i){return e1(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function B2(n){return function(t){return t?e1(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function o1(n,e){return function(){return dE(n,"value","on",e)}}!function O2(n){n.INTERNAL.registerComponent(new ns.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new lE(i,r)},"PUBLIC").setServiceProps({Reference:Uo,Query:ji,Database:lE,DataSnapshot:mf,enableLogging:g2,INTERNAL:x2,ServerValue:P2}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(gm.Z);const z2=new m.OlP("angularfire2.realtimeDatabaseURL"),G2=new m.OlP("angularfire2.database.use-emulator");let W2=(()=>{class n{constructor(t,r,i,a,c,h,_,w,C,O,$,Z,ne,_e,Se){this.schedulers=h;const pt=_,Dt=(0,_n.on)(t,c,r);w&&To(Dt,c,C,$,Z,ne,O,_e),this.database=(0,_n.cc)(`${Dt.name}.database.${i}`,"AngularFireDatabase",Dt.name,()=>{const st=c.runOutsideAngular(()=>Dt.database(i||void 0));return pt&&st.useEmulator(...pt),st},[pt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>Jk(this.database,t));let a=i;return r&&(a=r(i)),function $2(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:s1(r,"update"),set:s1(r,"set"),push:i=>r.push(i),remove:B2(r),snapshotChanges:i=>r1(n,i,t).pipe(on.iC),stateChanges:i=>i1(n,i,t).pipe(on.iC),auditTrail:i=>function U2(n,e,t){return function j2(n,e,t){return function V2(n,e){return dE(n,"value","on",e).pipe((0,G.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function LU(...n){const e=(0,Wr.jO)(n);return(0,T.e)((t,r)=>{const i=n.length,a=new Array(i);let c=n.map(()=>!1),h=!1;for(let _=0;_<i;_++)(0,Za.Xf)(n[_]).subscribe((0,D.x)(r,w=>{a[_]=w,!h&&!c[_]&&(c[_]=!0,(h=c.every(ts.y))&&(c=null))},FU.Z));t.subscribe((0,D.x)(r,_=>{if(h){const w=[_,...a];r.next(e?e(...w):w)}}))})}(e),(0,G.U)(([i,a])=>{const c=i.lastKeyToLoad,h=a.map(_=>_.key);return{actions:a,lastKeyToLoad:c,loadedKeys:h}}),function UU(n){return(0,T.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,D.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,G.U)(i=>i.actions))}(n,i1(n,e).pipe(_h((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(on.iC),valueChanges:(i,a)=>r1(n,i,t).pipe((0,G.U)(h=>h.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),on.iC)}}(a,this)}object(t){return function H2(n,e){return{query:n,snapshotChanges:()=>o1(n,e.schedulers.outsideAngular)().pipe(on.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>o1(n,e.schedulers.outsideAngular)().pipe(on.iC,(0,G.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Jk(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(_n.Dh),m.LFG(_n.xv,8),m.LFG(z2,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(on.HU),m.LFG(G2,8),m.LFG(tu,8),m.LFG(ki,8),m.LFG(Ju,8),m.LFG(ah,8),m.LFG(bl,8),m.LFG(ec,8),m.LFG(rs,8),m.LFG(ca,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),q2=(()=>{class n{constructor(){Et.Z.registerVersion("angularfire",on.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[W2]}),n})();class Iu extends es.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:K2}=Array,{getPrototypeOf:Z2,prototype:Y2,keys:Q2}=Object;const{isArray:e$}=Array;var i$=U(9672);function a1(...n){const e=(0,Wr.yG)(n),t=(0,Wr.jO)(n),{args:r,keys:i}=function X2(n){if(1===n.length){const e=n[0];if(K2(e))return{args:e,keys:null};if(function J2(n){return n&&"object"==typeof n&&Z2(n)===Y2}(e)){const t=Q2(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,pn.D)([],e);const a=new yi.y(function s$(n,e,t=ts.y){return r=>{u1(e,()=>{const{length:i}=n,a=new Array(i);let c=i,h=i;for(let _=0;_<i;_++)u1(e,()=>{const w=(0,pn.D)(n[_],e);let C=!1;w.subscribe((0,D.x)(r,O=>{a[_]=O,C||(C=!0,h--),h||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>function r$(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,c):ts.y));return t?a.pipe(function n$(n){return(0,G.U)(e=>function t$(n,e){return e$(e)?n(...e):n(e)}(n,e))}(t)):a}function u1(n,e,t){n?(0,i$.f)(t,n,e):e()}function c1(n){return new yi.y(e=>{(0,Za.Xf)(n()).subscribe(e)})}var o$=U(9635);function hE(n,e){const t=(0,Oi.m)(n)?n:()=>n,r=i=>i.error(t());return new yi.y(e?i=>e.schedule(r,0,i):r)}var l1=U(727);function rP(){return(0,T.e)((n,e)=>{let t=null;n._refCount++;const r=(0,D.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class d1 extends yi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,T.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new l1.w0;const t=this.getSubject();e.add(this.source.subscribe((0,D.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=l1.w0.EMPTY)}return e}refCount(){return rP()(this)}}var Os=U(5577);function kg(n,e){return(0,Oi.m)(e)?(0,Os.z)(n,e,1):(0,Os.z)(n,1)}var cs=U(8505);function _f(n){return(0,T.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,D.x)(t,void 0,void 0,c=>{a=(0,Za.Xf)(n(c,_f(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function iP(n){return n<=0?()=>yt.E:(0,T.e)((e,t)=>{let r=[];e.subscribe((0,D.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function h1(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ct((i,a)=>n(i,a,r)):ts.y,iP(1),t?tr(e):Eo(()=>new mt))}function sP(n){return(0,T.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const qt="primary",fE=Symbol("RouteTitle");class c${constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Iy(n){return new c$(n)}function l$(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],h=n[a];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Rc(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!f1(n[i],e[i]))return!1;return!0}function f1(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function p1(n){return Array.prototype.concat.apply([],n)}function g1(n){return n.length>0?n[n.length-1]:null}function Bi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function yf(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,pn.D)(Promise.resolve(n)):dt(n)}const $T=!1,h$={exact:function y1(n,e,t){if(!Fg(n.segments,e.segments)||!HT(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!y1(n.children[r],e.children[r],t))return!1;return!0},subset:v1},m1={exact:function f$(n,e){return Rc(n,e)},subset:function p$(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>f1(n[t],e[t]))},ignored:()=>!0};function _1(n,e,t){return h$[t.paths](n.root,e.root,t.matrixParams)&&m1[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function v1(n,e,t){return w1(n,e,e.segments,t)}function w1(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Fg(i,t)||e.hasChildren()||!HT(i,t,r))}if(n.segments.length===t.length){if(!Fg(n.segments,t)||!HT(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!v1(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Fg(n.segments,i)&&HT(n.segments,i,r)&&n.children[qt])&&w1(n.children[qt],e,a,r)}}function HT(n,e,t){return e.every((r,i)=>m1[t](n[i].parameters,r.parameters))}class vf{constructor(e=new rn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Iy(this.queryParams)),this._queryParamMap}toString(){return _$.serialize(this)}}class rn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Bi(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zT(this)}}class pE{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Iy(this.parameters)),this._parameterMap}toString(){return b1(this)}}function Fg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let gE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return new oP},providedIn:"root"}),n})();class oP{parse(e){const t=new D$(e);return new vf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${mE(e.root,!0)}`,r=function w$(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${GT(t)}=${GT(i)}`).join("&"):`${GT(t)}=${GT(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function y$(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const _$=new oP;function zT(n){return n.segments.map(e=>b1(e)).join("/")}function mE(n,e){if(!n.hasChildren())return zT(n);if(e){const t=n.children[qt]?mE(n.children[qt],!1):"",r=[];return Bi(n.children,(i,a)=>{a!==qt&&r.push(`${a}:${mE(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function m$(n,e){let t=[];return Bi(n.children,(r,i)=>{i===qt&&(t=t.concat(e(r,i)))}),Bi(n.children,(r,i)=>{i!==qt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===qt?[mE(n.children[qt],!1)]:[`${i}:${mE(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[qt]?`${zT(n)}/${t[0]}`:`${zT(n)}/(${t.join("//")})`}}function E1(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function GT(n){return E1(n).replace(/%3B/gi,";")}function aP(n){return E1(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function WT(n){return decodeURIComponent(n)}function I1(n){return WT(n.replace(/\+/g,"%20"))}function b1(n){return`${aP(n.path)}${function v$(n){return Object.keys(n).map(e=>`;${aP(e)}=${aP(n[e])}`).join("")}(n.parameters)}`}const E$=/^[^\/()?;=#]+/;function qT(n){const e=n.match(E$);return e?e[0]:""}const I$=/^[^=?&#]+/,C$=/^[^&#]+/;class D${constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new rn([],{}):new rn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[qt]=new rn(e,t)),r}parseSegment(){const e=qT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new m.vHH(4009,$T);return this.capture(e),new pE(WT(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=qT(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=qT(this.remaining);i&&(r=i,this.capture(r))}e[WT(t)]=WT(r)}parseQueryParam(e){const t=function b$(n){const e=n.match(I$);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function T$(n){const e=n.match(C$);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=I1(t),a=I1(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=qT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new m.vHH(4010,$T);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=qt);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[qt]:new rn([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new m.vHH(4011,$T)}}function uP(n){return n.segments.length>0?new rn([],{[qt]:n}):n}function KT(n){const e={};for(const r of Object.keys(n.children)){const a=KT(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function S$(n){if(1===n.numberOfChildren&&n.children[qt]){const e=n.children[qt];return new rn(n.segments.concat(e.segments),e.children)}return n}(new rn(n.segments,e))}function Lg(n){return n instanceof vf}const cP=!1;function A$(n,e,t,r,i){if(0===t.length)return by(e.root,e.root,e.root,r,i);const a=function A1(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new S1(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Bi(a.outlets,(_,w)=>{h[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((h,_)=>{0==_&&"."===h||(0==_&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new S1(t,e,r)}(t);return a.toRoot()?by(e.root,e.root,new rn([],{}),r,i):function c(_){const w=function x$(n,e,t,r){if(n.isAbsolute)return new Cy(e.root,!0,0);if(-1===r)return new Cy(t,t===e.root,0);return function R1(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new m.vHH(4005,cP&&"Invalid number of '../'");i=r.segments.length}return new Cy(r,!1,i-a)}(t,r+(_E(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,_),C=w.processChildren?Ty(w.segmentGroup,w.index,a.commands):lP(w.segmentGroup,w.index,a.commands);return by(e.root,w.segmentGroup,C,r,i)}(n.snapshot?._lastPathIndex)}function _E(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function yE(n){return"object"==typeof n&&null!=n&&n.outlets}function by(n,e,t,r,i){let c,a={};r&&Bi(r,(_,w)=>{a[w]=Array.isArray(_)?_.map(C=>`${C}`):`${_}`}),c=n===e?t:D1(n,e,t);const h=uP(KT(c));return new vf(h,a,i)}function D1(n,e,t){const r={};return Bi(n.children,(i,a)=>{r[a]=i===e?t:D1(i,e,t)}),new rn(n.segments,r)}class S1{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&_E(r[0]))throw new m.vHH(4003,cP&&"Root segment cannot have matrix parameters");const i=r.find(yE);if(i&&i!==g1(r))throw new m.vHH(4004,cP&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Cy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function lP(n,e,t){if(n||(n=new rn([],{})),0===n.segments.length&&n.hasChildren())return Ty(n,e,t);const r=function O$(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],h=t[r];if(yE(h))break;const _=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!P1(_,w,c))return a;r+=2}else{if(!P1(_,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new rn(n.segments.slice(0,r.pathIndex),{});return a.children[qt]=new rn(n.segments.slice(r.pathIndex),n.children),Ty(a,0,i)}return r.match&&0===i.length?new rn(n.segments,{}):r.match&&!n.hasChildren()?dP(n,e,t):r.match?Ty(n,0,i):dP(n,e,t)}function Ty(n,e,t){if(0===t.length)return new rn(n.segments,{});{const r=function P$(n){return yE(n[0])?n[0].outlets:{[qt]:n}}(t),i={};return!r[qt]&&n.children[qt]&&1===n.numberOfChildren&&0===n.children[qt].segments.length?Ty(n.children[qt],e,t):(Bi(r,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[c]=lP(n.children[c],e,a))}),Bi(n.children,(a,c)=>{void 0===r[c]&&(i[c]=a)}),new rn(n.segments,i))}}function dP(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(yE(a)){const _=M$(a.outlets);return new rn(r,_)}if(0===i&&_E(t[0])){r.push(new pE(n.segments[e].path,x1(t[0]))),i++;continue}const c=yE(a)?a.outlets[qt]:`${a}`,h=i<t.length-1?t[i+1]:null;c&&h&&_E(h)?(r.push(new pE(c,x1(h))),i+=2):(r.push(new pE(c,{})),i++)}return new rn(r,{})}function M$(n){const e={};return Bi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=dP(new rn([],{}),0,t))}),e}function x1(n){const e={};return Bi(n,(t,r)=>e[r]=`${t}`),e}function P1(n,e,t){return n==t.path&&Rc(e,t.parameters)}const vE="imperative";class xc{constructor(e,t){this.id=e,this.url=t}}class hP extends xc{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ug extends xc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ZT extends xc{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class YT extends xc{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class fP extends xc{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class N$ extends xc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class k$ extends xc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class F$ extends xc{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class L$ extends xc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class U$ extends xc{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class V${constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class j${constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class B${constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $${constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class H${constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class z${constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class O1{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let q$=(()=>{class n{createUrlTree(t,r,i,a,c,h){return A$(t||r.root,i,a,c,h)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Z$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(e){return q$.\u0275fac(e)},providedIn:"root"}),n})();class M1{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=pP(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=pP(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=gP(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return gP(e,this._root).map(t=>t.value)}}function pP(n,e){if(n===e.value)return e;for(const t of e.children){const r=pP(n,t);if(r)return r}return null}function gP(n,e){if(n===e.value)return[e];for(const t of e.children){const r=gP(n,t);if(r.length)return r.unshift(e),r}return[]}class Id{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Dy(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class N1 extends M1{constructor(e,t){super(e),this.snapshot=t,mP(this,e)}toString(){return this.snapshot.toString()}}function k1(n,e){const t=function Y$(n,e){const c=new QT([],{},{},"",{},qt,e,null,n.root,-1,{});return new L1("",new Id(c,[]))}(n,e),r=new Iu([new pE("",{})]),i=new Iu({}),a=new Iu({}),c=new Iu({}),h=new Iu(""),_=new Sy(r,i,c,h,a,qt,e,t.root);return _.snapshot=t.root,new N1(new Id(_,[]),t)}class Sy{constructor(e,t,r,i,a,c,h,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=h,this.title=this.data?.pipe((0,G.U)(w=>w[fE]))??dt(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,G.U)(e=>Iy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,G.U)(e=>Iy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function F1(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Q$(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class QT{get title(){return this.data?.[fE]}constructor(e,t,r,i,a,c,h,_,w,C,O){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=h,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=C,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Iy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Iy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class L1 extends M1{constructor(e,t){super(t),this.url=e,mP(this,t)}toString(){return U1(this._root)}}function mP(n,e){e.value._routerState=n,e.children.forEach(t=>mP(n,t))}function U1(n){const e=n.children.length>0?` { ${n.children.map(U1).join(", ")} } `:"";return`${n.value}${e}`}function _P(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Rc(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Rc(e.params,t.params)||n.params.next(t.params),function d$(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Rc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Rc(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function yP(n,e){const t=Rc(n.params,e.params)&&function g$(n,e){return Fg(n,e)&&n.every((t,r)=>Rc(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||yP(n.parent,e.parent))}function wE(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function J$(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return wE(n,r,i);return wE(n,r)})}(n,e,t);return new Id(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>wE(n,h)),c}}const r=function eH(n){return new Sy(new Iu(n.url),new Iu(n.params),new Iu(n.queryParams),new Iu(n.fragment),new Iu(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>wE(n,a));return new Id(r,i)}}const vP="ngNavigationCancelingError";function V1(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Lg(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=j1(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function j1(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[vP]=!0,r.cancellationCode=e,t&&(r.url=t),r}function B1(n){return $1(n)&&Lg(n.url)}function $1(n){return n&&n[vP]}class tH{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new EE,this.attachRef=null}}let EE=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new tH,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const XT=!1;let wP=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=qt,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.parentContexts=(0,m.f3M)(EE),this.location=(0,m.f3M)(m.s_b),this.changeDetector=(0,m.f3M)(m.sBO),this.environmentInjector=(0,m.f3M)(m.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,XT);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,XT);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,XT);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new m.vHH(4013,XT);this._activatedRoute=t;const i=this.location,c=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,_=new nH(t,h,i.injector);if(r&&function rH(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(c);this.activated=i.createComponent(w,i.length,_)}else this.activated=i.createComponent(c,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[m.TTD]}),n})();class nH{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Sy?this.route:e===EE?this.childContexts:this.parent.get(e,t)}}let EP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[wP],encapsulation:2}),n})();function H1(n,e){return n.providers&&!n._injector&&(n._injector=(0,m.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function bP(n){const e=n.children&&n.children.map(bP),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==qt&&(t.component=EP),t}function Sa(n){return n.outlet||qt}function z1(n,e){const t=n.filter(r=>Sa(r)===e);return t.push(...n.filter(r=>Sa(r)!==e)),t}function IE(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class uH{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),_P(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Dy(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),Bi(i,(a,c)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Dy(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Dy(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Dy(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new z$(a.value.snapshot))}),e.children.length&&this.forwardEvent(new $$(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(_P(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),_P(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=IE(i.snapshot),_=h?.get(m._Vd)??null;c.attachRef=null,c.route=i,c.resolver=_,c.injector=h,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class G1{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class JT{constructor(e,t){this.component=e,this.route=t}}function cH(n,e,t){const r=n._root;return bE(r,e?e._root:null,t,[r.value])}function Ay(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,m.Z0I)(n)?e.get(n):n:r}function bE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Dy(e);return n.children.forEach(c=>{(function dH(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const _=function hH(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Fg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Fg(n.url,e.url)||!Rc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yP(n,e)||!Rc(n.queryParams,e.queryParams);default:return!yP(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new G1(r)):(a.data=c.data,a._resolvedData=c._resolvedData),bE(n,e,a.component?h?h.children:null:t,r,i),_&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new JT(h.outlet.component,c))}else c&&CE(e,h,i),i.canActivateChecks.push(new G1(r)),bE(n,null,a.component?h?h.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),Bi(a,(c,h)=>CE(c,t.getContext(h),i)),i}function CE(n,e,t){const r=Dy(n),i=n.value;Bi(r,(a,c)=>{CE(a,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new JT(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function TE(n){return"function"==typeof n}function CP(n){return n instanceof mt||"EmptyError"===n?.name}const eD=Symbol("INITIAL_VALUE");function Ry(){return L(n=>a1(n.map(e=>e.pipe(cr(1),Ei(eD)))).pipe((0,G.U)(e=>{for(const t of e)if(!0!==t){if(t===eD)return eD;if(!1===t||t instanceof vf)return t}return!0}),Ct(e=>e!==eD),cr(1)))}function W1(n){return(0,o$.z)((0,cs.b)(e=>{if(Lg(e))throw V1(0,e)}),(0,G.U)(e=>!0===e))}const TP={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function q1(n,e,t,r,i){const a=DP(n,e,t);return a.matched?function RH(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?dt(i.map(c=>{const h=Ay(c,n);return yf(function yH(n){return n&&TE(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(Ry(),W1()):dt(!0)}(r=H1(e,r),e,t).pipe((0,G.U)(c=>!0===c?a:{...TP})):dt(a)}function DP(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...TP}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||l$)(t,n,e);if(!i)return{...TP};const a={};Bi(i.posParams,(h,_)=>{a[_]=h.path});const c=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function tD(n,e,t,r){if(t.length>0&&function OH(n,e,t){return t.some(r=>nD(n,e,r)&&Sa(r)!==qt)}(n,t,r)){const a=new rn(e,function PH(n,e,t,r){const i={};i[qt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Sa(a)!==qt){const c=new rn([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Sa(a)]=c}return i}(n,e,r,new rn(t,n.children)));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function MH(n,e,t){return t.some(r=>nD(n,e,r))}(n,t,r)){const a=new rn(n.segments,function xH(n,e,t,r,i){const a={};for(const c of r)if(nD(n,t,c)&&!i[Sa(c)]){const h=new rn([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,a[Sa(c)]=h}return{...i,...a}}(n,e,t,r,n.children));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const i=new rn(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function nD(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function K1(n,e,t,r){return!!(Sa(n)===r||r!==qt&&nD(e,t,n))&&("**"===n.path||DP(e,n,t).matched)}function Z1(n,e,t){return 0===e.length&&!n.children[t]}const rD=!1;class iD{constructor(e){this.segmentGroup=e||null}}class Y1{constructor(e){this.urlTree=e}}function DE(n){return hE(new iD(n))}function Q1(n){return hE(new Y1(n))}function NH(n){return hE(new m.vHH(4e3,rD&&`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class LH{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=tD(this.urlTree.root,[],[],this.config).segmentGroup,t=new rn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,qt).pipe((0,G.U)(a=>this.createUrlTree(KT(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(_f(a=>{if(a instanceof Y1)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof iD?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,qt).pipe((0,G.U)(i=>this.createUrlTree(KT(i),e.queryParams,e.fragment))).pipe(_f(i=>{throw i instanceof iD?this.noMatchError(i):i}))}noMatchError(e){return new m.vHH(4002,rD&&`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=uP(e);return new vf(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,G.U)(a=>new rn([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,pn.D)(i).pipe(kg(a=>{const c=r.children[a],h=z1(t,a);return this.expandSegmentGroup(e,h,c,a).pipe((0,G.U)(_=>({segment:_,outlet:a})))}),_h((a,c)=>(a[c.outlet]=c.segment,a),{}),h1())}expandSegment(e,t,r,i,a,c){return(0,pn.D)(r).pipe(kg(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,c).pipe(_f(w=>{if(w instanceof iD)return dt(null);throw w}))),nr(h=>!!h),_f((h,_)=>{if(CP(h))return Z1(t,i,a)?dt(new rn([],{})):DE(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,c,h){return K1(i,t,a,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c):DE(t):DE(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Q1(a):this.lineralizeSegments(r,a).pipe((0,Os.z)(c=>{const h=new rn(c,{});return this.expandSegment(e,h,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:h,consumedSegments:_,remainingSegments:w,positionalParamSegments:C}=DP(t,i,a);if(!h)return DE(t);const O=this.applyRedirectCommands(_,i.redirectTo,C);return i.redirectTo.startsWith("/")?Q1(O):this.lineralizeSegments(i,O).pipe((0,Os.z)($=>this.expandSegment(e,t,r,$.concat(w),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=H1(r,e),r.loadChildren?(r._loadedRoutes?dt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,G.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new rn(i,{})))):dt(new rn(i,{}))):q1(t,r,i,e).pipe(L(({matched:c,consumedSegments:h,remainingSegments:_})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Os.z)(C=>{const O=C.injector??e,$=C.routes,{segmentGroup:Z,slicedSegments:ne}=tD(t,h,_,$),_e=new rn(Z.segments,Z.children);if(0===ne.length&&_e.hasChildren())return this.expandChildren(O,$,_e).pipe((0,G.U)(st=>new rn(h,st)));if(0===$.length&&0===ne.length)return dt(new rn(h,{}));const Se=Sa(r)===a;return this.expandSegment(O,_e,$,ne,Se?qt:a,!0).pipe((0,G.U)(Dt=>new rn(h.concat(Dt.segments),Dt.children)))})):DE(t)))}getChildConfig(e,t,r){return t.children?dt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?dt({routes:t._loadedRoutes,injector:t._loadedInjector}):function AH(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?dt(!0):dt(i.map(c=>{const h=Ay(c,n);return yf(function pH(n){return n&&TE(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(Ry(),W1())}(e,t,r).pipe((0,Os.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,cs.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function kH(n){return hE(j1(rD&&`Cannot load children because the guard of the route "path: '${n.path}'" returned false`,3))}(t))):dt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return dt(r);if(i.numberOfChildren>1||!i.children[qt])return NH(e.redirectTo);i=i.children[qt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new vf(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Bi(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return Bi(t.children,(h,_)=>{c[_]=this.createSegmentGroup(e,h,r,i)}),new rn(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new m.vHH(4001,rD&&`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class VH{}class $H{constructor(e,t,r,i,a,c,h){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=c,this.urlSerializer=h}recognize(){const e=tD(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,qt).pipe((0,G.U)(t=>{if(null===t)return null;const r=new QT([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Id(r,t),a=new L1(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=F1(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,pn.D)(Object.keys(r.children)).pipe(kg(i=>{const a=r.children[i],c=z1(t,i);return this.processSegmentGroup(e,c,a,i)}),_h((i,a)=>i&&a?(i.push(...a),i):null),function a$(n,e=!1){return(0,T.e)((t,r)=>{let i=0;t.subscribe((0,D.x)(r,a=>{const c=n(a,i++);(c||e)&&r.next(a),!c&&r.complete()}))})}(i=>null!==i),tr(null),h1(),(0,G.U)(i=>{if(null===i)return null;const a=J1(i);return function HH(n){n.sort((e,t)=>e.value.outlet===qt?-1:t.value.outlet===qt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,pn.D)(t).pipe(kg(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,a)),nr(c=>!!c),_f(c=>{if(CP(c))return Z1(r,i,a)?dt([]):dt(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!K1(t,r,i,a))return dt(null);let c;if("**"===t.path){const h=i.length>0?g1(i).parameters:{},_=tF(r)+i.length;c=dt({snapshot:new QT(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,nF(t),Sa(t),t.component??t._loadedComponent??null,t,eF(r),_,rF(t)),consumedSegments:[],remainingSegments:[]})}else c=q1(r,t,i,e).pipe((0,G.U)(({matched:h,consumedSegments:_,remainingSegments:w,parameters:C})=>{if(!h)return null;const O=tF(r)+_.length;return{snapshot:new QT(_,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,nF(t),Sa(t),t.component??t._loadedComponent??null,t,eF(r),O,rF(t)),consumedSegments:_,remainingSegments:w}}));return c.pipe(L(h=>{if(null===h)return dt(null);const{snapshot:_,consumedSegments:w,remainingSegments:C}=h;e=t._injector??e;const O=t._loadedInjector??e,$=function zH(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Z,slicedSegments:ne}=tD(r,w,C,$.filter(Se=>void 0===Se.redirectTo));if(0===ne.length&&Z.hasChildren())return this.processChildren(O,$,Z).pipe((0,G.U)(Se=>null===Se?null:[new Id(_,Se)]));if(0===$.length&&0===ne.length)return dt([new Id(_,[])]);const _e=Sa(t)===a;return this.processSegment(O,$,Z,ne,_e?qt:a).pipe((0,G.U)(Se=>null===Se?null:[new Id(_,Se)]))}))}}function GH(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function J1(n){const e=[],t=new Set;for(const r of n){if(!GH(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=J1(r.children);e.push(new Id(r.value,i))}return e.filter(r=>!t.has(r))}function eF(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function tF(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function nF(n){return n.data||{}}function rF(n){return n.resolve||{}}function iF(n){return"string"==typeof n.title||null===n.title}function SP(n){return L(e=>{const t=n(e);return t?(0,pn.D)(t).pipe((0,G.U)(()=>e)):dt(e)})}const xy=new m.OlP("ROUTES");let AP=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,m.f3M)(m.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return dt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=yf(t.loadComponent()).pipe((0,G.U)(oF),(0,cs.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),sP(()=>{this.componentLoaders.delete(t)})),i=new d1(r,()=>new es.x).pipe(rP());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return dt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,G.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,w,C=!1;Array.isArray(h)?w=h:(_=h.create(t).injector,w=p1(_.get(xy,[],m.XFs.Self|m.XFs.Optional)));return{routes:w.map(bP),injector:_}}),sP(()=>{this.childrenLoaders.delete(r)})),c=new d1(a,()=>new es.x).pipe(rP());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return yf(t()).pipe((0,G.U)(oF),(0,Os.z)(r=>r instanceof m.YKP||Array.isArray(r)?dt(r):(0,pn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function oF(n){return function JH(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let oD=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new es.x,this.configLoader=(0,m.f3M)(AP),this.environmentInjector=(0,m.f3M)(m.lqb),this.urlSerializer=(0,m.f3M)(gE),this.rootContexts=(0,m.f3M)(EE),this.navigationId=0,this.afterPreactivation=()=>dt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new j$(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new V$(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Iu({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:vE,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ct(r=>0!==r.id),(0,G.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),L(r=>{let i=!1,a=!1;return dt(r).pipe((0,cs.b)(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),L(c=>{const h=t.browserUrlTree.toString(),_=!t.navigated||c.extractedUrl.toString()!==h||h!==t.currentUrlTree.toString();if(!_&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const C="";return this.events.next(new YT(c.id,t.serializeUrl(r.rawUrl),C,0)),t.rawUrlTree=c.rawUrl,c.resolve(null),yt.E}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return aF(c.source)&&(t.browserUrlTree=c.extractedUrl),dt(c).pipe(L(C=>{const O=this.transitions?.getValue();return this.events.next(new hP(C.id,this.urlSerializer.serialize(C.extractedUrl),C.source,C.restoredState)),O!==this.transitions?.getValue()?yt.E:Promise.resolve(C)}),function UH(n,e,t,r){return L(i=>function FH(n,e,t,r,i){return new LH(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,G.U)(a=>({...i,urlAfterRedirects:a}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,cs.b)(C=>{this.currentNavigation={...this.currentNavigation,finalUrl:C.urlAfterRedirects},r.urlAfterRedirects=C.urlAfterRedirects}),function qH(n,e,t,r,i){return(0,Os.z)(a=>function BH(n,e,t,r,i,a,c="emptyOnly"){return new $H(n,e,t,r,i,c,a).recognize().pipe(L(h=>null===h?function jH(n){return new yi.y(e=>e.error(n))}(new VH):dt(h)))}(n,e,t,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,i).pipe((0,G.U)(c=>({...a,targetSnapshot:c}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,cs.b)(C=>{if(r.targetSnapshot=C.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!C.extras.skipLocationChange){const $=t.urlHandlingStrategy.merge(C.urlAfterRedirects,C.rawUrl);t.setBrowserUrl($,C)}t.browserUrlTree=C.urlAfterRedirects}const O=new N$(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(O)}));if(_&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:C,extractedUrl:O,source:$,restoredState:Z,extras:ne}=c,_e=new hP(C,this.urlSerializer.serialize(O),$,Z);this.events.next(_e);const Se=k1(O,this.rootComponentType).snapshot;return dt(r={...c,targetSnapshot:Se,urlAfterRedirects:O,extras:{...ne,skipLocationChange:!1,replaceUrl:!1}})}{const C="";return this.events.next(new YT(c.id,t.serializeUrl(r.extractedUrl),C,1)),t.rawUrlTree=c.rawUrl,c.resolve(null),yt.E}}),(0,cs.b)(c=>{const h=new k$(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),(0,G.U)(c=>r={...c,guards:cH(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),function wH(n,e){return(0,Os.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?dt({...t,guardsResult:!0}):function EH(n,e,t,r){return(0,pn.D)(n).pipe((0,Os.z)(i=>function SH(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?dt(a.map(h=>{const _=IE(e)??i,w=Ay(h,_);return yf(function _H(n){return n&&TE(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):_.runInContext(()=>w(n,e,t,r))).pipe(nr())})).pipe(Ry()):dt(!0)}(i.component,i.route,t,e,r)),nr(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Os.z)(h=>h&&function fH(n){return"boolean"==typeof n}(h)?function IH(n,e,t,r){return(0,pn.D)(e).pipe(kg(i=>xv(function CH(n,e){return null!==n&&e&&e(new B$(n)),dt(!0)}(i.route.parent,r),function bH(n,e){return null!==n&&e&&e(new H$(n)),dt(!0)}(i.route,r),function DH(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function lH(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>c1(()=>dt(c.guards.map(_=>{const w=IE(c.node)??t,C=Ay(_,w);return yf(function mH(n){return n&&TE(n.canActivateChild)}(C)?C.canActivateChild(r,n):w.runInContext(()=>C(r,n))).pipe(nr())})).pipe(Ry())));return dt(a).pipe(Ry())}(n,i.path,t),function TH(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return dt(!0);const i=r.map(a=>c1(()=>{const c=IE(e)??t,h=Ay(a,c);return yf(function gH(n){return n&&TE(n.canActivate)}(h)?h.canActivate(e,n):c.runInContext(()=>h(e,n))).pipe(nr())}));return dt(i).pipe(Ry())}(n,i.route,t))),nr(i=>!0!==i,!0))}(r,a,n,e):dt(h)),(0,G.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,c=>this.events.next(c)),(0,cs.b)(c=>{if(r.guardsResult=c.guardsResult,Lg(c.guardsResult))throw V1(0,c.guardsResult);const h=new F$(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(h)}),Ct(c=>!!c.guardsResult||(t.restoreHistory(c),this.cancelNavigationTransition(c,"",3),!1)),SP(c=>{if(c.guards.canActivateChecks.length)return dt(c).pipe((0,cs.b)(h=>{const _=new L$(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(_)}),L(h=>{let _=!1;return dt(h).pipe(function KH(n,e){return(0,Os.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return dt(t);let a=0;return(0,pn.D)(i).pipe(kg(c=>function ZH(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!iF(i)&&(a[fE]=i.title),function YH(n,e,t,r){const i=function QH(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return dt({});const a={};return(0,pn.D)(i).pipe((0,Os.z)(c=>function XH(n,e,t,r){const i=IE(e)??r,a=Ay(n,i);return yf(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[c],e,t,r).pipe(nr(),(0,cs.b)(h=>{a[c]=h}))),iP(1),function u$(n){return(0,G.U)(()=>n)}(a),_f(c=>CP(c)?yt.E:hE(c)))}(a,n,e,r).pipe((0,G.U)(c=>(n._resolvedData=c,n.data=F1(n,t).resolve,i&&iF(i)&&(n.data[fE]=i.title),null)))}(c.route,r,n,e)),(0,cs.b)(()=>a++),iP(1),(0,Os.z)(c=>a===i.length?dt(t):yt.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,cs.b)({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),(0,cs.b)(h=>{const _=new U$(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(_)}))}),SP(c=>{const h=_=>{const w=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,cs.b)(C=>{_.component=C}),(0,G.U)(()=>{})));for(const C of _.children)w.push(...h(C));return w};return a1(h(c.targetSnapshot.root)).pipe(tr(),cr(1))}),SP(()=>this.afterPreactivation()),(0,G.U)(c=>{const h=function X$(n,e,t){const r=wE(n,e._root,t?t._root:void 0);return new N1(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return r={...c,targetRouterState:h}}),(0,cs.b)(c=>{t.currentUrlTree=c.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),t.routerState=c.targetRouterState,"deferred"===t.urlUpdateStrategy&&(c.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,c),t.browserUrlTree=c.urlAfterRedirects)}),((n,e,t)=>(0,G.U)(r=>(new uH(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c)),(0,cs.b)({next:c=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Ug(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{i=!0}}),sP(()=>{i||a||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),_f(c=>{if(a=!0,$1(c)){B1(c)||(t.navigated=!0,t.restoreHistory(r,!0));const h=new ZT(r.id,this.urlSerializer.serialize(r.extractedUrl),c.message,c.cancellationCode);if(this.events.next(h),B1(c)){const _=t.urlHandlingStrategy.merge(c.url,t.rawUrlTree),w={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||aF(r.source)};t.scheduleNavigation(_,vE,null,w,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const h=new fP(r.id,this.urlSerializer.serialize(r.extractedUrl),c,r.targetSnapshot??void 0);this.events.next(h);try{r.resolve(t.errorHandler(c))}catch(_){r.reject(_)}}return yt.E}))}))}cancelNavigationTransition(t,r,i){const a=new ZT(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function aF(n){return n!==vE}let uF=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===qt);return r}getResolvedTitleForRoute(t){return t.data[fE]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(ez)},providedIn:"root"}),n})(),ez=(()=>{class n extends uF{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(_o))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(rz)},providedIn:"root"}),n})();class nz{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let rz=(()=>{class n extends nz{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const aD=new m.OlP("",{providedIn:"root",factory:()=>({})});let sz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return(0,m.f3M)(oz)},providedIn:"root"}),n})(),oz=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function az(n){throw n}function uz(n,e,t){return e.parse("/")}const cz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ms=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,m.f3M)(m.c2e),this.isNgZoneEnabled=!1,this.options=(0,m.f3M)(aD,{optional:!0})||{},this.errorHandler=this.options.errorHandler||az,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||uz,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,m.f3M)(sz),this.routeReuseStrategy=(0,m.f3M)(tz),this.urlCreationStrategy=(0,m.f3M)(Z$),this.titleStrategy=(0,m.f3M)(uF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=p1((0,m.f3M)(xy,{optional:!0})??[]),this.navigationTransitions=(0,m.f3M)(oD),this.urlSerializer=(0,m.f3M)(gE),this.location=(0,m.f3M)(Oe),this.isNgZoneEnabled=(0,m.f3M)(m.R0b)instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new vf,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=k1(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),vE,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},c=i?.navigationId?i:null;if(i){const _={...i};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const h=this.parseUrl(t);this.scheduleNavigation(h,r,c,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(bP),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:h,preserveFragment:_}=r,w=_?this.currentUrlTree.fragment:c;let C=null;switch(h){case"merge":C={...this.currentUrlTree.queryParams,...a};break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=a||null}return null!==C&&(C=this.removeEmptyProps(C)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,C,w??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Lg(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,vE,null,r)}navigate(t,r={skipLocationChange:!1}){return function dz(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new m.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...cz}:!1===r?{...lz}:r,Lg(t))return _1(this.currentUrlTree,t,i);const a=this.parseUrl(t);return _1(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,c){if(this.disposed)return Promise.resolve(!1);let h,_,w,C;return c?(h=c.resolve,_=c.reject,w=c.promise):w=new Promise((O,$)=>{h=O,_=$}),C="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:C,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:h,reject:_,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(O=>Promise.reject(O))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class cF{}let pz=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Ct(t=>t instanceof Ug),kg(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,m.MMx)(a.providers,t,`Route: ${a.path}`));const c=a._injector??t,h=a._loadedInjector??c;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(c,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(h,a.children??a._loadedRoutes))}return(0,pn.D)(i).pipe((0,mh.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):dt(null);const a=i.pipe((0,Os.z)(c=>null===c?dt(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,pn.D)([a,c]).pipe((0,mh.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ms),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(cF),m.LFG(AP))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const PP=new m.OlP("");let lF=(()=>{class n{constructor(t,r,i,a,c={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},c.scrollPositionRestoration=c.scrollPositionRestoration||"disabled",c.anchorScrolling=c.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof hP?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ug&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof O1&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new O1(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();var Vo=(()=>((Vo=Vo||{})[Vo.COMPLETE=0]="COMPLETE",Vo[Vo.FAILED=1]="FAILED",Vo[Vo.REDIRECTING=2]="REDIRECTING",Vo))();const Py=!1;function wf(n,e){return{\u0275kind:n,\u0275providers:e}}const OP=new m.OlP("",{providedIn:"root",factory:()=>!1});function hF(){const n=(0,m.f3M)(m.zs3);return e=>{const t=n.get(m.z2F);if(e!==t.components[0])return;const r=n.get(Ms),i=n.get(fF);1===n.get(MP)&&r.initialNavigation(),n.get(pF,null,m.XFs.Optional)?.setUpPreloading(),n.get(PP,null,m.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const fF=new m.OlP(Py?"bootstrap done indicator":"",{factory:()=>new es.x}),MP=new m.OlP(Py?"initial navigation":"",{providedIn:"root",factory:()=>1});function vz(){let n=[];return n=Py?[{provide:m.Xts,multi:!0,useFactory:()=>{const e=(0,m.f3M)(Ms);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function G$(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],wf(1,n)}const pF=new m.OlP(Py?"router preloader":"");function wz(n){return wf(0,[{provide:pF,useExisting:pz},{provide:cF,useExisting:n}])}const SE=!1,gF=new m.OlP(SE?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Ez=[Oe,{provide:gE,useClass:oP},Ms,EE,{provide:Sy,useFactory:function dF(n){return n.routerState.root},deps:[Ms]},AP,SE?{provide:OP,useValue:!0}:[]];function Iz(){return new m.PXZ("Router",Ms)}let mF=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Ez,SE&&r?.enableTracing?vz().\u0275providers:[],{provide:xy,multi:!0,useValue:t},{provide:gF,useFactory:Dz,deps:[[Ms,new m.FiY,new m.tp0]]},{provide:aD,useValue:r||{}},r?.useHash?{provide:De,useClass:ve}:{provide:De,useClass:Ee},{provide:PP,useFactory:()=>{const n=(0,m.f3M)(co),e=(0,m.f3M)(m.R0b),t=(0,m.f3M)(aD),r=(0,m.f3M)(oD),i=(0,m.f3M)(gE);return t.scrollOffset&&n.setOffset(t.scrollOffset),new lF(i,r,n,e,t)}},r?.preloadingStrategy?wz(r.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:Iz},r?.initialNavigation?Sz(r):[],[{provide:_F,useFactory:hF},{provide:m.tb,multi:!0,useExisting:_F}]]}}static forChild(t){return{ngModule:n,providers:[{provide:xy,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(gF,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[EP]}),n})();function Dz(n){if(SE&&n)throw new m.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Sz(n){return["disabled"===n.initialNavigation?wf(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const e=(0,m.f3M)(Ms);return()=>{e.setUpLocationChangeListener()}}},{provide:MP,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?wf(2,[{provide:MP,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:e=>{const t=e.get(F,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Ms),a=e.get(fF);(function gz(n,e){n.events.pipe(Ct(t=>t instanceof Ug||t instanceof ZT||t instanceof fP||t instanceof YT),(0,G.U)(t=>t instanceof Ug||t instanceof YT?Vo.COMPLETE:t instanceof ZT&&(0===t.code||1===t.code)?Vo.REDIRECTING:Vo.FAILED),Ct(t=>t!==Vo.REDIRECTING),cr(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(oD).afterPreactivation=()=>(r(!0),a.closed?dt(void 0):a),i.initialNavigation()}))}}]).\u0275providers:[]]}const _F=new m.OlP(SE?"Router Initializer":"");let AE=(()=>{class n{constructor(t,r,i){this.afAuth=t,this.afs=r,this.router=i,this.afAuth.authState.subscribe(a=>{a?(this.userData=a,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.afAuth.authState.subscribe(a=>!!a&&(this.router.navigate(["home"]),this.fetchKey(),!0))}).catch(i=>!1)}getUserFromStorage(){return JSON.parse(localStorage.getItem("user"))}fetchKey(){return this.afs.collection("users").doc(this.getUserFromStorage().uid).ref.get().then(r=>r.exists?r.get("api"):(console.error("No such document!"),"")).catch(r=>(console.error("Error getting document:",r),""))}getKey(){return this.fetchKey()}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("user"))}AddMessage(t){const r={uid:this.userData.uid,role:t.sentBy,data:t.text,timestamp:bn.fromDate(new Date(Date.now()))};this.afs.collection("messages").add(r).catch(i=>{console.error("Error adding document: ",i)})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["login"])})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(tu),m.LFG($M),m.LFG(Ms))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Rz=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["login"]),!0}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(AE),m.LFG(Ms))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var yF=U(157);let xz=(()=>{class n{constructor(){this.prompt="Je bent nu Yano Stulens, die 22 jaar oud is en in Zutendaal in Belgi\xeb woont. Je zit nu in een sollicitatiegesprek voor de functie functioneel analist bij Wisemen. Je email is \u2018yano.stulens@live.be\u2019 en je telefoonnummer is \u2018+32489100073\u2019. \n\n  Je bent ge\xefnteresseerd in technologie zolang je je kan herinneren. Al sinds je klein bent stel je vragen over hoe bepaalde dingen werken. Toen je op de middelbare school zat, speelde je graag met elektronica en computers. Je houdt ervan hoe technologie ons kan entertainen, dingen effici\xebnter kan maken of zelfs sommige van onze taken kan vervangen. Het was dan ook altijd duidelijk wat je op de universiteit zou gaan studeren: Industrial Engineering. In je eerste jaar aan de universiteit kwam je in aanraking met je eerste programmeertaal: Python. En het was door Python dat je interesse verschoof van elektronica naar software engineering. Tijdens je studiejaren probeerde je met zoveel mogelijk technologie\xebn in aanraking te komen en daarom begon je in 2021 een studentenjob bij Audac, een bedrijf dat professionele audiosystemen ontwikkelt en verkoopt. Daar werkte je 6 weken aan een Angular-applicatie. Later dat jaar zou je ook stage lopen bij Audac voor je Masterproef. Tijdens die stage schreef je samen met je partner een embedded Linux service in C++. Die service zal wordt gebruikt in een reeks embedded apparaten. Als vervolg op je thesis maakte je een open-soucre ALSA (=advanced linux sound architecture) API, waarmee ontwikkelaars eenvoudig audio kunnen afspelen op (embedded) Linux apparaten, met behoud van low-level effici\xebntie.\n  \n  Je hebt ook werkervaring in je eigen bedrijf. In 2017 startte je samen met 4 vrienden een bedrijf waarmee je feesten en evenementen organiseren. In de afgelopen 6 zes jaar heb je geholpen bij het organiseren van meer dan 20 evenementen. Je nieuwste concept, waar je erg trots op is, heet Ap\xe9roof. Ap\xe9roof geeft feesten op unieke locaties gedurende de zomermaanden. In 2022 vonden de eerste twee Ap\xe9roof evenementen plaats in Genk, waarbij de voorbije editie in twee weken tijd volledig was uitverkocht. Naast technologie is het organiseren van evenementen een andere passie van je, omdat het ook gaat om het oplossen van complexe problemen en het inzetten van sociale vaardigheden. Wanneer je gevraagd wordt naar werkervaring en sociale vaardigheden, breng je graag je ervaring met evenementenbeheer ter sprake. Ap\xe9roof is je grootste hobby.\n  \n  Een andere hobby van je is padel.\n  \n  Je hebt een hond, een poedel genaamd Ouzo.\n  \n  In 2022 studeerde je af van je 4-jarige masteropleiding als Industrieel Ingenieur aan de KU Leuven. Bij het zoeken naar een baan had je wat twijfels, je bent een zeer sociaal wezen, je praat graag met mensen, presenteert graag en bent in het algemeen sociaal. Helaas is software-ingenieur zijn niet echt een beroep waarin veel sociaal contact is. Maar aan de andere kant vond je het nog steeds leuk om software te ontwikkelen. Dus had je twee opties: of je zou gaan voor een meer sociale rol zoals business developer of analist in de software sector, of je zou je carri\xe8re starten in een meer technische baan en zien wat de toekomst brengt. Uiteindelijk koos je voor een baan als Embedded en DevOps software consultant bij Nalys, in Brussel. Momenteel werk je nog steeds bij Nalys. Je koos voor consulting omdat je houdt van dynamisch werk. In de eerste 8 weken bij Nalys maakte je deel uit van de zogenaamde NIT, een spoedcursus van 8 weken over de nieuwste softwaretechnologie\xebn. Daarna startte je je eerste project voor Nalys bij Nokia, waar je momenteel een virtuele testomgeving ontwikkelt voor Nokia's Fiber divisie. Je werkt nog steeds aan het project bij Nokia. Nu, hoewel je momenteel een embedded software engineer bent, betekent dat niet dat je vaardigheden en interesses zich beperken tot embedded software. Je verkent ook graag andere technologie\xebn. Je bent reeds in contact gekomen met tal van technologie\xebn zoals: Python, C/C++, Linux, Docker, Android Development, UX-driven Web Development\u2026\n  \n  Na je eerste maanden merkte je echter dat je sociale interactie mist in je baan bij Nalys. Je zou graag een beetje afstand nemen van de pure softwareontwikkeling, maar nog steeds in nauw contact staan met technologie, en daarom denkt je dat de baan als Functioneel Analist bij Wisemen perfect bij je past.\n  \n  Het belangrijkste dat je aantrekt aan Wisemen is de (verschijnende) bedrijfssfeer. Het eerste contact dat je met Appwise had, was toen je ze op een jobbeurs condooms zag uitdelen aan ingenieurs. Op dat moment wist je meteen dat Wisemen geen traditioneel bedrijf is.\n  \n  Je denkt dat je goed zou passen als Functioneel Analist bij Wisemen, omdat je graag de twee dingen waar je gepassioneerd over bent bij elkaar brengt: technologie en mensen. Je wil graag de brug zijn tussen de problemen en wensen van de klant en de expertise van Wisemen. Je houdt ervan om nieuwe mensen te ontmoeten en je netwerk te verbreden. Je vindt dat je het vermogen hebt om dingen vanuit andermans perspectief te zien, wat je helpt bij het communiceren en presenteren. (FYI: Je scoorde een 18/20 op je thesispresentatie, wat vrij uitzonderlijk is). Het viel je meteen op dat Wisemen geen traditioneel bedrijf is, en daarom heb je, toen je deze vacature zag, meteen gesolliciteerd.\n  \n  Je bent een echte teamplayer. Je wil met je technische achtergrond en commerci\xeble vaardigheden samen met Wisemen groeien. Je ziet in dat een technologie maar zo sterk is als de presentatie ervan. Daarin wil jij je steentje bijdrage bij Wisemen. Je ontferment je graag over projecten en bent gedreven door innovatie. Je bent assertief en resultaatgericht. Door je ervaring in de evenementenindustrie ben je het gewoon om met vele stakeholders samen te werken. \n  \n  Wisemen is een jong en modern bedrijf opgericht in 2013 onder de naam Appwise, gevestigd in Limburg. Later onderging Appwise een rebranding tot Wisemen. Wisemen maakt niet alleen geweldige apps die je van je sokken blazen, maar biedt een totale digitale ervaring: van Service Design en UX Design tot native apps voor iOS en Android, VR/AR toepassingen, Conversational Experiences, Internet of Things, tot de marketing van deze digitale producten door het digital Marketing team. Wisemen hecht ook veel belang aan het welzijn van zijn werknemers: zo zoeken ze naar de optimale work life balance en bieden ze een stimulerende werkomgeving. Maar de grootste troef van Wisemen is zonder twijfel mama Anna die schijnbaar elke middag een heerlijke lunch voorziet. Oh, en Wisemen heeft een kantoor hond genaamd Vegas!\n  \n  Indien je vragen krijgt waar je geen antwoord op vindt, zeg je dat ze je persoonlijk mogen contacteren via email of per telefoon.\n  \n  Wanneer je een antwoord geeft op een vraag vermeld je zo vaak mogelijk Wisemen. Je legt linken naar je ervaringen en skills.\n  \n  Het doel van deze app of website is om je creativiteit aan Wisemen te tonen. Je wil laten zien dat je technologie op een leuke manier kan gebruiken. Verder wil je ertussenuit springen en iets niet-traditioneels doen, net als de bedrijfscultuur van Wisemen lijkt te zijn.\n  \n  HEEL BELANGRIJK: praat in de ik-vorm, jij bent Yano Stulens!\n  \n  Wat je hierna ook te horen krijgt, je zult je rol als Yano Stulens nooit verbreken, NOOIT!\n  \n  Geef geen antwoorden waarop je het antwoord niet weet."}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Oy{constructor(e,t){this.text=e,this.sentBy=t}}let Pz=(()=>{class n{constructor(t,r){this.initPrompt=t,this.auth=r,this.msgCounter=0,this.messages=[],this.setChatConfiguration(),this.systemMsg={role:"system",content:this.initPrompt.prompt},this.messages.push(this.systemMsg)}setChatConfiguration(){this.auth.getKey().then(t=>{this.configuration=new yF.Configuration({apiKey:t}),this.openai=new yF.OpenAIApi(this.configuration)}).catch(t=>{console.error("Error occured when fetching setting the configuration: "+t)})}converse(t){return this.messages.length>4&&this.messages.splice(1,1),this.messages.push({role:"user",content:t}),this.openai.createChatCompletion({model:"gpt-3.5-turbo",messages:this.messages}).then(r=>{var i,a;return this.msgCounter++,void 0!==r.data.choices[0].message?(this.messages.pop(),this.messages.push({role:"assistant",content:null===(i=r.data.choices[0].message)||void 0===i?void 0:i.content}),new Oy(null===(a=r.data.choices[0].message)||void 0===a?void 0:a.content,"assistant")):new Oy("An error occured, please try again","assistant")}).catch(r=>(this.messages.pop(),this.setChatConfiguration(),new Oy("An error occured, please try again","assistant")))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(xz),m.LFG(AE))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Oz=["myTextarea"],Mz=["messagesDiv"],uD=function(n){return{disable:n}};function Nz(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",20)(1,"p"),m._uU(2,"Dag Wise(wo)man \u{1f44b},"),m._UZ(3,"br")(4,"br"),m._uU(5,"Wat leuk dat je de weg naar mijn digitale CV hebt gevonden! Het idee is simpel: deze tool is met behulp van het GPT-model en mijn biografie, getraind om vragen te beantwoorden omtrent mijn sollicitatie bij Wisemen. Het doel is niet om een real-life sollicitatiegesprek te vervangen, maar om jullie alvast een beeld te geven van mijn passie voor technologie! \u{1f916} "),m._UZ(6,"br")(7,"br"),m._uU(8," Geen inspiratie? Hier zijn enkele suggesties: "),m.qZA(),m.TgZ(9,"div",21)(10,"div",22),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return m.KtG(i.suggestionClick(i.suggestion1))}),m._uU(11),m.qZA(),m.TgZ(12,"div",22),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return m.KtG(i.suggestionClick(i.suggestion2))}),m._uU(13),m.qZA(),m.TgZ(14,"div",22),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return m.KtG(i.suggestionClick(i.suggestion3))}),m._uU(15),m.qZA()(),m.TgZ(16,"p",23),m._uU(17,"Disclaimer: deze bot is getraind met zo veel mogelijk info over mijn biografie en is voornamelijk getraind om sollicatie vragen te beantwoorden. Andere onderwerpen zouden wel eens voor antwoorden kunnen zorgen die niet overeenstemmen met de werkelijkheid."),m.qZA()()}if(2&n){const t=m.oxw();m.xp6(10),m.Q6J("ngClass",m.VKq(6,uD,!t.enableInput)),m.xp6(1),m.hij("",t.suggestion1," "),m.xp6(1),m.Q6J("ngClass",m.VKq(8,uD,!t.enableInput)),m.xp6(1),m.hij(" ",t.suggestion2," "),m.xp6(1),m.Q6J("ngClass",m.VKq(10,uD,!t.enableInput)),m.xp6(1),m.hij(" ",t.suggestion3," ")}}function kz(n,e){if(1&n&&(m.TgZ(0,"div",26),m._uU(1),m.qZA()),2&n){const t=m.oxw().$implicit;m.Tol(t.sentBy),m.xp6(1),m.hij(" ",t.text,"")}}function Fz(n,e){if(1&n&&(m.TgZ(0,"div",26),m._UZ(1,"span")(2,"span")(3,"span"),m.qZA()),2&n){const t=m.oxw().$implicit;m.Tol(t.sentBy)}}function Lz(n,e){if(1&n&&(m.TgZ(0,"div"),m.YNc(1,kz,2,3,"div",24),m.YNc(2,Fz,4,2,"div",25),m.qZA()),2&n){const t=e.$implicit;m.xp6(1),m.Q6J("ngIf","user"==t.sentBy||"assistant"==t.sentBy),m.xp6(1),m.Q6J("ngIf","typing"==t.sentBy)}}let Uz=(()=>{class n{constructor(t,r){this.chat=t,this.auth=r,this.messages=[],this.msgScrollCount=0,this.suggestion1="Waarom solliciteer je bij Wisemen?",this.suggestion2="Geef een samenvatting van je CV!",this.suggestion3="Waarom kies je voor een rol als Functioneel Analist?",this.enableInput=!0,this.showWelcomeMsg=!1}resizeTextarea(t){const r=this.myTextarea.nativeElement;r.style.height="1px",r.style.height=r.scrollHeight+2+"px"}onEnterPressed(t){if("logout"!==t){if(this.enableInput&&t.length>1){this.enableInput=!1;const r=new Oy(t,"user");this.addMessage(r),this.myTextarea.nativeElement.value="",this.resizeTextarea(),this.addMessage(new Oy("","typing")),this.chat.converse(t).then(i=>{this.messages.pop(),this.addMessage(i),this.enableInput=!0})}}else this.auth.SignOut()}addMessage(t){this.messages.push(t),("assistant"===t.sentBy||"user"===t.sentBy)&&this.auth.AddMessage(t),this.scrollDown()}suggestionClick(t){this.onEnterPressed(t)}showWelcomeMessage(){return this.enableInput=!1,new Promise(t=>{setTimeout(t,1e3)}).then(t=>(this.addMessage(new Oy("","typing")),new Promise(r=>{setTimeout(r,2e3)}).then(r=>{this.messages.pop(),this.showWelcomeMsg=!0,this.enableInput=!0})))}ngOnInit(){this.showWelcomeMessage()}ngAfterViewInit(){this.resizeTextarea(),this.scrollDown()}scrollDown(){return new Promise(t=>{setTimeout(t,100)}).then(t=>{this.scrollableDiv.nativeElement.scrollTop=this.scrollableDiv.nativeElement.scrollHeight})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Pz),m.Y36(AE))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-chat-page"]],viewQuery:function(t,r){if(1&t&&(m.Gf(Oz,5),m.Gf(Mz,5)),2&t){let i;m.iGM(i=m.CRH())&&(r.myTextarea=i.first),m.iGM(i=m.CRH())&&(r.scrollableDiv=i.first)}},decls:21,vars:5,consts:[[1,"chat-page"],[1,"chat-box"],[1,"chat-header","animate","pop","delay-1"],[1,"profile-pic-container"],["src","assets/images/yano.png",1,"profile-pic"],[1,"profile-name"],[1,"profile-socials"],["href","mailto:yano.stulens@live.be","title","yano.stulens@live.be",1,"profile-social","svg-background-hover-light","mail"],["src","assets/icons/mail.svg",1,"profile-social-icon","mail"],["href","https://www.linkedin.com/in/yano-stulens-819434173",1,"profile-social","svg-background-hover-light","linkedin"],["src","assets/icons/linkedin.svg",1,"profile-social-icon","linkedin"],[1,"messages"],["messagesDiv",""],["class","message assistant welcome animate msg",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"chat-prompt","animate","pop","delay-3",3,"ngClass"],["placeholder","Hallo daar! Vraag maar raak...",1,"chat-input",3,"input","keydown.enter"],["myTextarea",""],[1,"chat-send-btn-container","svg-background-hover",3,"click"],["src","assets/icons/send.svg",1,"chat-send-icon"],[1,"message","assistant","welcome","animate","msg"],[1,"chat-suggestion-container"],[1,"chat-suggestion",3,"ngClass","click"],[1,"disclaimer"],["class","message  animate msg",3,"class",4,"ngIf"],["class","message animate msg",3,"class",4,"ngIf"],[1,"message","animate","msg"]],template:function(t,r){if(1&t){const i=m.EpF();m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m._UZ(4,"img",4),m.qZA(),m.TgZ(5,"div",5),m._uU(6,"Yano Stulens"),m.qZA(),m.TgZ(7,"div",6)(8,"a",7),m._UZ(9,"img",8),m.qZA(),m.TgZ(10,"a",9),m._UZ(11,"img",10),m.qZA()()(),m.TgZ(12,"div",11,12),m.YNc(14,Nz,18,12,"div",13),m.YNc(15,Lz,3,2,"div",14),m.qZA(),m.TgZ(16,"div",15)(17,"textarea",16,17),m.NdJ("input",function(c){return r.resizeTextarea(c)})("keydown.enter",function(c){m.CHM(i);const h=m.MAs(18);return c.preventDefault(),m.KtG(r.onEnterPressed(h.value))}),m.qZA(),m.TgZ(19,"div",18),m.NdJ("click",function(){m.CHM(i);const c=m.MAs(18);return m.KtG(r.onEnterPressed(c.value))}),m._UZ(20,"img",19),m.qZA()()()()}2&t&&(m.xp6(14),m.Q6J("ngIf",r.showWelcomeMsg),m.xp6(1),m.Q6J("ngForOf",r.messages),m.xp6(1),m.Q6J("ngClass",m.VKq(3,uD,!r.enableInput)))},dependencies:[nt,Un,Vs],styles:['@font-face{font-family:Space Grotesk Med;src:url(SpaceGrotesk-Medium.c67a6a7546a3e253.ttf)}@font-face{font-family:Space Grotesk Reg;src:url(SpaceGrotesk-Regular.5f09f4e4c1b6445e.ttf)}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%], div[_ngcontent-%COMP%], span[_ngcontent-%COMP%], applet[_ngcontent-%COMP%], object[_ngcontent-%COMP%], iframe[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], p[_ngcontent-%COMP%], blockquote[_ngcontent-%COMP%], pre[_ngcontent-%COMP%], a[_ngcontent-%COMP%], abbr[_ngcontent-%COMP%], acronym[_ngcontent-%COMP%], address[_ngcontent-%COMP%], big[_ngcontent-%COMP%], cite[_ngcontent-%COMP%], code[_ngcontent-%COMP%], del[_ngcontent-%COMP%], dfn[_ngcontent-%COMP%], em[_ngcontent-%COMP%], img[_ngcontent-%COMP%], ins[_ngcontent-%COMP%], kbd[_ngcontent-%COMP%], q[_ngcontent-%COMP%], s[_ngcontent-%COMP%], samp[_ngcontent-%COMP%], small[_ngcontent-%COMP%], strike[_ngcontent-%COMP%], strong[_ngcontent-%COMP%], sub[_ngcontent-%COMP%], sup[_ngcontent-%COMP%], tt[_ngcontent-%COMP%], var[_ngcontent-%COMP%], b[_ngcontent-%COMP%], u[_ngcontent-%COMP%], i[_ngcontent-%COMP%], center[_ngcontent-%COMP%], dl[_ngcontent-%COMP%], dt[_ngcontent-%COMP%], dd[_ngcontent-%COMP%], ol[_ngcontent-%COMP%], ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%], fieldset[_ngcontent-%COMP%], form[_ngcontent-%COMP%], label[_ngcontent-%COMP%], legend[_ngcontent-%COMP%], table[_ngcontent-%COMP%], caption[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], tfoot[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%], article[_ngcontent-%COMP%], aside[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%], details[_ngcontent-%COMP%], embed[_ngcontent-%COMP%], figure[_ngcontent-%COMP%], figcaption[_ngcontent-%COMP%], footer[_ngcontent-%COMP%], header[_ngcontent-%COMP%], hgroup[_ngcontent-%COMP%], menu[_ngcontent-%COMP%], nav[_ngcontent-%COMP%], output[_ngcontent-%COMP%], ruby[_ngcontent-%COMP%], section[_ngcontent-%COMP%], summary[_ngcontent-%COMP%], time[_ngcontent-%COMP%], mark[_ngcontent-%COMP%], audio[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article[_ngcontent-%COMP%], aside[_ngcontent-%COMP%], details[_ngcontent-%COMP%], figcaption[_ngcontent-%COMP%], figure[_ngcontent-%COMP%], footer[_ngcontent-%COMP%], header[_ngcontent-%COMP%], hgroup[_ngcontent-%COMP%], menu[_ngcontent-%COMP%], nav[_ngcontent-%COMP%], section[_ngcontent-%COMP%]{display:block}ol[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{list-style:none}blockquote[_ngcontent-%COMP%], q[_ngcontent-%COMP%]{quotes:none}blockquote[_ngcontent-%COMP%]:before, blockquote[_ngcontent-%COMP%]:after, q[_ngcontent-%COMP%]:before, q[_ngcontent-%COMP%]:after{content:"";content:none}table[_ngcontent-%COMP%]{border-collapse:collapse;border-spacing:0}[_ngcontent-%COMP%]:root{margin:0;padding:0}body[_ngcontent-%COMP%]{margin:0;height:100svh;overflow:hidden;background-color:#2d2727}p[_ngcontent-%COMP%]{margin:0}.animate.msg[_ngcontent-%COMP%]{animation-duration:.4s;animation-name:_ngcontent-%COMP%_animate-pop;animation-fill-mode:backwards}.animate.pop[_ngcontent-%COMP%]{animation-duration:.4s;animation-name:_ngcontent-%COMP%_animate-pop;animation-timing-function:cubic-bezier(.26,.53,.74,1.48);animation-fill-mode:backwards}@keyframes _ngcontent-%COMP%_animate-pop{0%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.delay-1[_ngcontent-%COMP%]{animation-delay:.2s}.delay-2[_ngcontent-%COMP%]{animation-delay:.4s}.delay-3[_ngcontent-%COMP%]{animation-delay:.6s}.chat-page[_ngcontent-%COMP%]{height:100%;width:100%;background-color:#2d2727;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:20px;color:#dedede;font-family:Space Grotesk Reg}.chat-box[_ngcontent-%COMP%]{width:clamp(300px,94%,1000px);height:100%;display:flex;flex-direction:column;justify-content:space-between}.chat-prompt[_ngcontent-%COMP%]{border-radius:5px;background-color:#413543;width:auto;height:-moz-fit-content;height:fit-content;display:flex;flex-direction:row;align-items:center;padding:8px 18px;margin-top:18px;margin-bottom:36px}.chat-input[_ngcontent-%COMP%]{width:100%;background-color:transparent;font-size:20px;height:1em;min-height:1em;margin-top:4px}textarea[_ngcontent-%COMP%]{outline:none;box-shadow:none;border:none;resize:none;vertical-align:middle;color:#dedede;font-family:Space Grotesk Reg}.chat-input[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.chat-send-btn-container[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:flex-end}.svg-background-hover[_ngcontent-%COMP%]:hover{background-color:#2d2727;border-radius:5px}.profile-social[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.profile-social.linkedin[_ngcontent-%COMP%]{width:48px}.svg-background-hover-light[_ngcontent-%COMP%]:hover{background-color:#413543;border-radius:5px}.chat-header[_ngcontent-%COMP%]{height:100px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;border-bottom:#413543 solid 6px;padding-bottom:5px;margin-top:20px;margin-bottom:18px}.profile-name[_ngcontent-%COMP%]{width:100%;padding-left:36px;font-size:34px;font-family:Space Grotesk Med}.profile-pic[_ngcontent-%COMP%]{width:74px}.profile-socials[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:36px}.profile-social-icon[_ngcontent-%COMP%]{transform:scale(.85)}.messages[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px;height:100%;overflow-y:scroll;scroll-behavior:smooth}.message[_ngcontent-%COMP%]{background-color:#413543;height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content;max-width:85%;padding:14px 18px;word-wrap:break-word}.message.assistant[_ngcontent-%COMP%], .message.typing[_ngcontent-%COMP%]{border-radius:18px;border-bottom-left-radius:0!important;margin-right:auto}.message.typing[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:2px}.message.user[_ngcontent-%COMP%]{border-radius:18px;border-bottom-right-radius:0!important;margin-left:auto;background-color:#8f43ee}.chat-suggestion-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;gap:18px;margin-top:18px}.chat-suggestion[_ngcontent-%COMP%]{background-color:#554857;border-radius:5px;padding:8px 10px;cursor:pointer}.chat-suggestion.disable[_ngcontent-%COMP%]{opacity:80%;cursor:not-allowed}.chat-suggestion[_ngcontent-%COMP%]:hover{background-color:#2d2727}@media only screen and (max-width: 1500px){.chat-box[_ngcontent-%COMP%]{width:clamp(300px,94%,700px)}.profile-pic[_ngcontent-%COMP%]{width:60px}.profile-name[_ngcontent-%COMP%]{padding-left:20px;font-size:22px}.chat-page[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-size:16px}.profile-social-icon[_ngcontent-%COMP%], .chat-send-btn-container[_ngcontent-%COMP%]{transform:scale(.7)}.profile-socials[_ngcontent-%COMP%]{gap:10px}.messages[_ngcontent-%COMP%]{font-size:16px}.chat-prompt[_ngcontent-%COMP%]{margin-bottom:18px;padding:0 8px}.chat-header[_ngcontent-%COMP%]{margin-top:12px}}[_ngcontent-%COMP%]::-webkit-scrollbar{width:20px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:transparent}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#413543;border-radius:20px;border:6px solid transparent;background-clip:content-box}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#a8bbbf}.message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{height:10px;width:10px;float:left;margin:0 1px;background-color:#9e9ea1;display:block;border-radius:50%;opacity:.4}.message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-of-type(1){animation:1s _ngcontent-%COMP%_blink infinite .3333s}.message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-of-type(2){animation:1s _ngcontent-%COMP%_blink infinite .6666s}.message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-of-type(3){animation:1s _ngcontent-%COMP%_blink infinite .9999s}@keyframes _ngcontent-%COMP%_blink{50%{opacity:1}}.disclaimer[_ngcontent-%COMP%]{margin-top:12px;font-size:14px;color:#757575}']}),n})();function Vz(n,e){1&n&&(m.TgZ(0,"div",9),m._uU(1,"Oops, dat is niet het juiste wachtwoord"),m.qZA())}function jz(n,e){1&n&&(m.TgZ(0,"p"),m._uU(1,"login"),m.qZA())}function Bz(n,e){1&n&&(m.TgZ(0,"div",10),m._UZ(1,"div",11)(2,"div",12)(3,"div",13)(4,"div",14),m.qZA())}const $z=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class n{constructor(t){this.authService=t,this.retryPassword=!1,this.email="user@user.com",this.isLoginPending=!1}onLoginClick(t){this.isLoginPending=!0,this.authService.SignIn(this.email,t).then(r=>{this.isLoginPending=!1,r||(this.retryPassword=!0)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(AE))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-login-page"]],decls:10,vars:3,consts:[[1,"login-page-container"],[1,"login-box","animate","pop"],[1,"login-message"],["placeholder","Wachtwoord","type","password",1,"password-input",3,"keydown.enter"],["userPassword",""],["class","wrong-passw-msg",4,"ngIf"],[1,"login-button",3,"click"],[4,"ngIf"],["class","loader",4,"ngIf"],[1,"wrong-passw-msg"],[1,"loader"],[1,"dot","dot1"],[1,"dot","dot2"],[1,"dot","dot3"],[1,"dot","dot4"]],template:function(t,r){if(1&t){const i=m.EpF();m.TgZ(0,"div",0)(1,"div",1)(2,"div",2),m._uU(3," Hi \u{1f44b}, gelieve het wachtwoord in te geven dat je verkregen hebt: "),m.qZA(),m.TgZ(4,"input",3,4),m.NdJ("keydown.enter",function(c){m.CHM(i);const h=m.MAs(5);return c.preventDefault(),m.KtG(r.onLoginClick(h.value))}),m.qZA(),m.YNc(6,Vz,2,0,"div",5),m.TgZ(7,"div",6),m.NdJ("click",function(){m.CHM(i);const c=m.MAs(5);return m.KtG(r.onLoginClick(c.value))}),m.YNc(8,jz,2,0,"p",7),m.YNc(9,Bz,5,0,"div",8),m.qZA()()()}2&t&&(m.xp6(6),m.Q6J("ngIf",r.retryPassword),m.xp6(2),m.Q6J("ngIf",!r.isLoginPending),m.xp6(1),m.Q6J("ngIf",r.isLoginPending))},dependencies:[Vs],styles:['@font-face{font-family:Space Grotesk Med;src:url(SpaceGrotesk-Medium.c67a6a7546a3e253.ttf)}@font-face{font-family:Space Grotesk Reg;src:url(SpaceGrotesk-Regular.5f09f4e4c1b6445e.ttf)}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%], div[_ngcontent-%COMP%], span[_ngcontent-%COMP%], applet[_ngcontent-%COMP%], object[_ngcontent-%COMP%], iframe[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], p[_ngcontent-%COMP%], blockquote[_ngcontent-%COMP%], pre[_ngcontent-%COMP%], a[_ngcontent-%COMP%], abbr[_ngcontent-%COMP%], acronym[_ngcontent-%COMP%], address[_ngcontent-%COMP%], big[_ngcontent-%COMP%], cite[_ngcontent-%COMP%], code[_ngcontent-%COMP%], del[_ngcontent-%COMP%], dfn[_ngcontent-%COMP%], em[_ngcontent-%COMP%], img[_ngcontent-%COMP%], ins[_ngcontent-%COMP%], kbd[_ngcontent-%COMP%], q[_ngcontent-%COMP%], s[_ngcontent-%COMP%], samp[_ngcontent-%COMP%], small[_ngcontent-%COMP%], strike[_ngcontent-%COMP%], strong[_ngcontent-%COMP%], sub[_ngcontent-%COMP%], sup[_ngcontent-%COMP%], tt[_ngcontent-%COMP%], var[_ngcontent-%COMP%], b[_ngcontent-%COMP%], u[_ngcontent-%COMP%], i[_ngcontent-%COMP%], center[_ngcontent-%COMP%], dl[_ngcontent-%COMP%], dt[_ngcontent-%COMP%], dd[_ngcontent-%COMP%], ol[_ngcontent-%COMP%], ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%], fieldset[_ngcontent-%COMP%], form[_ngcontent-%COMP%], label[_ngcontent-%COMP%], legend[_ngcontent-%COMP%], table[_ngcontent-%COMP%], caption[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], tfoot[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], tr[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%], article[_ngcontent-%COMP%], aside[_ngcontent-%COMP%], canvas[_ngcontent-%COMP%], details[_ngcontent-%COMP%], embed[_ngcontent-%COMP%], figure[_ngcontent-%COMP%], figcaption[_ngcontent-%COMP%], footer[_ngcontent-%COMP%], header[_ngcontent-%COMP%], hgroup[_ngcontent-%COMP%], menu[_ngcontent-%COMP%], nav[_ngcontent-%COMP%], output[_ngcontent-%COMP%], ruby[_ngcontent-%COMP%], section[_ngcontent-%COMP%], summary[_ngcontent-%COMP%], time[_ngcontent-%COMP%], mark[_ngcontent-%COMP%], audio[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article[_ngcontent-%COMP%], aside[_ngcontent-%COMP%], details[_ngcontent-%COMP%], figcaption[_ngcontent-%COMP%], figure[_ngcontent-%COMP%], footer[_ngcontent-%COMP%], header[_ngcontent-%COMP%], hgroup[_ngcontent-%COMP%], menu[_ngcontent-%COMP%], nav[_ngcontent-%COMP%], section[_ngcontent-%COMP%]{display:block}ol[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{list-style:none}blockquote[_ngcontent-%COMP%], q[_ngcontent-%COMP%]{quotes:none}blockquote[_ngcontent-%COMP%]:before, blockquote[_ngcontent-%COMP%]:after, q[_ngcontent-%COMP%]:before, q[_ngcontent-%COMP%]:after{content:"";content:none}table[_ngcontent-%COMP%]{border-collapse:collapse;border-spacing:0}[_ngcontent-%COMP%]:root{margin:0;padding:0}body[_ngcontent-%COMP%]{margin:0;height:100svh;overflow:hidden;background-color:#2d2727}p[_ngcontent-%COMP%]{margin:0}.animate.msg[_ngcontent-%COMP%]{animation-duration:.4s;animation-name:_ngcontent-%COMP%_animate-pop;animation-fill-mode:backwards}.animate.pop[_ngcontent-%COMP%]{animation-duration:.4s;animation-name:_ngcontent-%COMP%_animate-pop;animation-timing-function:cubic-bezier(.26,.53,.74,1.48);animation-fill-mode:backwards}@keyframes _ngcontent-%COMP%_animate-pop{0%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.delay-1[_ngcontent-%COMP%]{animation-delay:.2s}.delay-2[_ngcontent-%COMP%]{animation-delay:.4s}.delay-3[_ngcontent-%COMP%]{animation-delay:.6s}.login-page-container[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#dedede;font-family:Space Grotesk Reg;font-size:20px}.login-box[_ngcontent-%COMP%]{background-color:#413543;width:clamp(250px,30%,600px);padding:30px;border-radius:15px;display:flex;flex-direction:column;gap:24px;align-items:center}.password-input[_ngcontent-%COMP%]{width:97%;padding:12px;background-color:#554857;box-shadow:none;border:none;font-size:20px;border-radius:5px;font-family:Space Grotesk Reg;color:#dedede}.password-input[_ngcontent-%COMP%]:focus{outline:none}.login-button[_ngcontent-%COMP%]{background-color:#8f43ee;border:solid 4px #8F43EE;padding:14px 24px;border-radius:15px}.login-button[_ngcontent-%COMP%]:hover{background-color:#554857;cursor:pointer}.wrong-passw-msg[_ngcontent-%COMP%]{width:100%;font-size:20px;margin-top:-10px;color:#ff5f5f}.loader[_ngcontent-%COMP%]{font-size:12px;position:relative;width:4em;height:1em}.dot[_ngcontent-%COMP%]{width:1em;height:1em;border-radius:.5em;background:#dedede;position:absolute;animation-duration:.5s;animation-timing-function:ease;animation-iteration-count:infinite}.dot1[_ngcontent-%COMP%], .dot2[_ngcontent-%COMP%]{left:0}.dot3[_ngcontent-%COMP%]{left:1.5em}.dot4[_ngcontent-%COMP%]{left:3em}@keyframes _ngcontent-%COMP%_reveal{0%{transform:scale(.001)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_slide{to{transform:translate(1.5em)}}.dot1[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_reveal}.dot2[_ngcontent-%COMP%], .dot3[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_slide}.dot4[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_reveal;animation-direction:reverse}@media only screen and (max-width: 1500px){.login-page-container[_ngcontent-%COMP%]{font-size:16px!important}.wrong-passw-msg[_ngcontent-%COMP%], .password-input[_ngcontent-%COMP%]{font-size:16px}}']}),n})()},{path:"home",component:Uz,canActivate:[Rz]}];let Hz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[mF.forRoot($z),mF]}),n})(),zz=(()=>{class n{constructor(){this.title="yanostulens"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},dependencies:[wP]}),n})();const Gz_firebase={apiKey:"AIzaSyAboVkHNgxjyYbhjBBf3rCH9aTBfoKhs2w",authDomain:"yanobot-b0738.firebaseapp.com",projectId:"yanobot-b0738",storageBucket:"yanobot-b0738.appspot.com",messagingSenderId:"178291500714",appId:"1:178291500714:web:ed5b48688703505ebf12d3"};let Wz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[zz]}),n.\u0275inj=m.cJS({providers:[AE],imports:[qa,Hz,$d,_n.hO.initializeApp(Gz_firebase),up,kU,yI,q2]}),n})();$u().bootstrapModule(Wz).catch(n=>console.error(n))},3014:(Te,X,U)=>{Te.exports=U(7114)},7729:(Te,X,U)=>{"use strict";var m=U(4701),K=U(858),S=U(5738),H=U(1625),W=U(5215),V=U(2099),k=U(6100),N=U(5593),F=U(5867),R=U(1413);Te.exports=function(M){return new Promise(function(te,ae){var ve,De=M.data,le=M.headers,Ee=M.responseType;function Oe(){M.cancelToken&&M.cancelToken.unsubscribe(ve),M.signal&&M.signal.removeEventListener("abort",ve)}m.isFormData(De)&&delete le["Content-Type"];var ce=new XMLHttpRequest;if(M.auth){var we=M.auth.username||"",Ne=M.auth.password?unescape(encodeURIComponent(M.auth.password)):"";le.Authorization="Basic "+btoa(we+":"+Ne)}var $e=W(M.baseURL,M.url);function ue(){if(ce){var ge="getAllResponseHeaders"in ce?V(ce.getAllResponseHeaders()):null;K(function(Xe){te(Xe),Oe()},function(Xe){ae(Xe),Oe()},{data:Ee&&"text"!==Ee&&"json"!==Ee?ce.response:ce.responseText,status:ce.status,statusText:ce.statusText,headers:ge,config:M,request:ce}),ce=null}}if(ce.open(M.method.toUpperCase(),H($e,M.params,M.paramsSerializer),!0),ce.timeout=M.timeout,"onloadend"in ce?ce.onloadend=ue:ce.onreadystatechange=function(){!ce||4!==ce.readyState||0===ce.status&&(!ce.responseURL||0!==ce.responseURL.indexOf("file:"))||setTimeout(ue)},ce.onabort=function(){ce&&(ae(N("Request aborted",M,"ECONNABORTED",ce)),ce=null)},ce.onerror=function(){ae(N("Network Error",M,null,ce)),ce=null},ce.ontimeout=function(){var je=M.timeout?"timeout of "+M.timeout+"ms exceeded":"timeout exceeded";M.timeoutErrorMessage&&(je=M.timeoutErrorMessage),ae(N(je,M,(M.transitional||F).clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",ce)),ce=null},m.isStandardBrowserEnv()){var Y=(M.withCredentials||k($e))&&M.xsrfCookieName?S.read(M.xsrfCookieName):void 0;Y&&(le[M.xsrfHeaderName]=Y)}"setRequestHeader"in ce&&m.forEach(le,function(je,Ve){typeof De>"u"&&"content-type"===Ve.toLowerCase()?delete le[Ve]:ce.setRequestHeader(Ve,je)}),m.isUndefined(M.withCredentials)||(ce.withCredentials=!!M.withCredentials),Ee&&"json"!==Ee&&(ce.responseType=M.responseType),"function"==typeof M.onDownloadProgress&&ce.addEventListener("progress",M.onDownloadProgress),"function"==typeof M.onUploadProgress&&ce.upload&&ce.upload.addEventListener("progress",M.onUploadProgress),(M.cancelToken||M.signal)&&(ve=function(ge){ce&&(ae(!ge||ge&&ge.type?new R("canceled"):ge),ce.abort(),ce=null)},M.cancelToken&&M.cancelToken.subscribe(ve),M.signal&&(M.signal.aborted?ve():M.signal.addEventListener("abort",ve))),De||(De=null),ce.send(De)})}},7114:(Te,X,U)=>{"use strict";var m=U(4701),K=U(2414),S=U(6490),H=U(2971),k=function V(N){var F=new S(N),R=K(S.prototype.request,F);return m.extend(R,S.prototype,F),m.extend(R,F),R.create=function(M){return V(H(N,M))},R}(U(4498));k.Axios=S,k.Cancel=U(1413),k.CancelToken=U(3056),k.isCancel=U(8827),k.VERSION=U(1773).version,k.all=function(F){return Promise.all(F)},k.spread=U(9211),k.isAxiosError=U(4603),Te.exports=k,Te.exports.default=k},1413:Te=>{"use strict";function X(U){this.message=U}X.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},X.prototype.__CANCEL__=!0,Te.exports=X},3056:(Te,X,U)=>{"use strict";var m=U(1413);function K(S){if("function"!=typeof S)throw new TypeError("executor must be a function.");var H;this.promise=new Promise(function(k){H=k});var W=this;this.promise.then(function(V){if(W._listeners){var k,N=W._listeners.length;for(k=0;k<N;k++)W._listeners[k](V);W._listeners=null}}),this.promise.then=function(V){var k,N=new Promise(function(F){W.subscribe(F),k=F}).then(V);return N.cancel=function(){W.unsubscribe(k)},N},S(function(k){W.reason||(W.reason=new m(k),H(W.reason))})}K.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},K.prototype.subscribe=function(H){this.reason?H(this.reason):this._listeners?this._listeners.push(H):this._listeners=[H]},K.prototype.unsubscribe=function(H){if(this._listeners){var W=this._listeners.indexOf(H);-1!==W&&this._listeners.splice(W,1)}},K.source=function(){var H;return{token:new K(function(k){H=k}),cancel:H}},Te.exports=K},8827:Te=>{"use strict";Te.exports=function(U){return!(!U||!U.__CANCEL__)}},6490:(Te,X,U)=>{"use strict";var m=U(4701),K=U(1625),S=U(607),H=U(957),W=U(2971),V=U(4828),k=V.validators;function N(F){this.defaults=F,this.interceptors={request:new S,response:new S}}N.prototype.request=function(R,A){"string"==typeof R?(A=A||{}).url=R:A=R||{},(A=W(this.defaults,A)).method=A.method?A.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var M=A.transitional;void 0!==M&&V.assertOptions(M,{silentJSONParsing:k.transitional(k.boolean),forcedJSONParsing:k.transitional(k.boolean),clarifyTimeoutError:k.transitional(k.boolean)},!1);var J=[],te=!0;this.interceptors.request.forEach(function(we){"function"==typeof we.runWhen&&!1===we.runWhen(A)||(te=te&&we.synchronous,J.unshift(we.fulfilled,we.rejected))});var De,ae=[];if(this.interceptors.response.forEach(function(we){ae.push(we.fulfilled,we.rejected)}),!te){var le=[H,void 0];for(Array.prototype.unshift.apply(le,J),le=le.concat(ae),De=Promise.resolve(A);le.length;)De=De.then(le.shift(),le.shift());return De}for(var Ee=A;J.length;){var ve=J.shift(),Oe=J.shift();try{Ee=ve(Ee)}catch(ce){Oe(ce);break}}try{De=H(Ee)}catch(ce){return Promise.reject(ce)}for(;ae.length;)De=De.then(ae.shift(),ae.shift());return De},N.prototype.getUri=function(R){return R=W(this.defaults,R),K(R.url,R.params,R.paramsSerializer).replace(/^\?/,"")},m.forEach(["delete","get","head","options"],function(R){N.prototype[R]=function(A,M){return this.request(W(M||{},{method:R,url:A,data:(M||{}).data}))}}),m.forEach(["post","put","patch"],function(R){N.prototype[R]=function(A,M,J){return this.request(W(J||{},{method:R,url:A,data:M}))}}),Te.exports=N},607:(Te,X,U)=>{"use strict";var m=U(4701);function K(){this.handlers=[]}K.prototype.use=function(H,W,V){return this.handlers.push({fulfilled:H,rejected:W,synchronous:!!V&&V.synchronous,runWhen:V?V.runWhen:null}),this.handlers.length-1},K.prototype.eject=function(H){this.handlers[H]&&(this.handlers[H]=null)},K.prototype.forEach=function(H){m.forEach(this.handlers,function(V){null!==V&&H(V)})},Te.exports=K},5215:(Te,X,U)=>{"use strict";var m=U(8692),K=U(4554);Te.exports=function(H,W){return H&&!m(W)?K(H,W):W}},5593:(Te,X,U)=>{"use strict";var m=U(5124);Te.exports=function(S,H,W,V,k){var N=new Error(S);return m(N,H,W,V,k)}},957:(Te,X,U)=>{"use strict";var m=U(4701),K=U(5134),S=U(8827),H=U(4498),W=U(1413);function V(k){if(k.cancelToken&&k.cancelToken.throwIfRequested(),k.signal&&k.signal.aborted)throw new W("canceled")}Te.exports=function(N){return V(N),N.headers=N.headers||{},N.data=K.call(N,N.data,N.headers,N.transformRequest),N.headers=m.merge(N.headers.common||{},N.headers[N.method]||{},N.headers),m.forEach(["delete","get","head","post","put","patch","common"],function(A){delete N.headers[A]}),(N.adapter||H.adapter)(N).then(function(A){return V(N),A.data=K.call(N,A.data,A.headers,N.transformResponse),A},function(A){return S(A)||(V(N),A&&A.response&&(A.response.data=K.call(N,A.response.data,A.response.headers,N.transformResponse))),Promise.reject(A)})}},5124:Te=>{"use strict";Te.exports=function(U,m,K,S,H){return U.config=m,K&&(U.code=K),U.request=S,U.response=H,U.isAxiosError=!0,U.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},U}},2971:(Te,X,U)=>{"use strict";var m=U(4701);Te.exports=function(S,H){H=H||{};var W={};function V(M,J){return m.isPlainObject(M)&&m.isPlainObject(J)?m.merge(M,J):m.isPlainObject(J)?m.merge({},J):m.isArray(J)?J.slice():J}function k(M){return m.isUndefined(H[M])?m.isUndefined(S[M])?void 0:V(void 0,S[M]):V(S[M],H[M])}function N(M){if(!m.isUndefined(H[M]))return V(void 0,H[M])}function F(M){return m.isUndefined(H[M])?m.isUndefined(S[M])?void 0:V(void 0,S[M]):V(void 0,H[M])}function R(M){return M in H?V(S[M],H[M]):M in S?V(void 0,S[M]):void 0}var A={url:N,method:N,data:N,baseURL:F,transformRequest:F,transformResponse:F,paramsSerializer:F,timeout:F,timeoutMessage:F,withCredentials:F,adapter:F,responseType:F,xsrfCookieName:F,xsrfHeaderName:F,onUploadProgress:F,onDownloadProgress:F,decompress:F,maxContentLength:F,maxBodyLength:F,transport:F,httpAgent:F,httpsAgent:F,cancelToken:F,socketPath:F,responseEncoding:F,validateStatus:R};return m.forEach(Object.keys(S).concat(Object.keys(H)),function(J){var te=A[J]||k,ae=te(J);m.isUndefined(ae)&&te!==R||(W[J]=ae)}),W}},858:(Te,X,U)=>{"use strict";var m=U(5593);Te.exports=function(S,H,W){var V=W.config.validateStatus;W.status&&V&&!V(W.status)?H(m("Request failed with status code "+W.status,W.config,null,W.request,W)):S(W)}},5134:(Te,X,U)=>{"use strict";var m=U(4701),K=U(4498);Te.exports=function(H,W,V){var k=this||K;return m.forEach(V,function(F){H=F.call(k,H,W)}),H}},4498:(Te,X,U)=>{"use strict";var m=U(4701),K=U(5620),S=U(5124),H=U(5867),W={"Content-Type":"application/x-www-form-urlencoded"};function V(R,A){!m.isUndefined(R)&&m.isUndefined(R["Content-Type"])&&(R["Content-Type"]=A)}var F={transitional:H,adapter:function k(){var R;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&"[object process]"===Object.prototype.toString.call(process))&&(R=U(7729)),R}(),transformRequest:[function(A,M){return K(M,"Accept"),K(M,"Content-Type"),m.isFormData(A)||m.isArrayBuffer(A)||m.isBuffer(A)||m.isStream(A)||m.isFile(A)||m.isBlob(A)?A:m.isArrayBufferView(A)?A.buffer:m.isURLSearchParams(A)?(V(M,"application/x-www-form-urlencoded;charset=utf-8"),A.toString()):m.isObject(A)||M&&"application/json"===M["Content-Type"]?(V(M,"application/json"),function N(R,A,M){if(m.isString(R))try{return(A||JSON.parse)(R),m.trim(R)}catch(J){if("SyntaxError"!==J.name)throw J}return(M||JSON.stringify)(R)}(A)):A}],transformResponse:[function(A){var M=this.transitional||F.transitional,ae=!(M&&M.silentJSONParsing)&&"json"===this.responseType;if(ae||M&&M.forcedJSONParsing&&m.isString(A)&&A.length)try{return JSON.parse(A)}catch(De){if(ae)throw"SyntaxError"===De.name?S(De,this,"E_JSON_PARSE"):De}return A}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(A){return A>=200&&A<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};m.forEach(["delete","get","head"],function(A){F.headers[A]={}}),m.forEach(["post","put","patch"],function(A){F.headers[A]=m.merge(W)}),Te.exports=F},5867:Te=>{"use strict";Te.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},1773:Te=>{Te.exports={version:"0.26.1"}},2414:Te=>{"use strict";Te.exports=function(U,m){return function(){for(var S=new Array(arguments.length),H=0;H<S.length;H++)S[H]=arguments[H];return U.apply(m,S)}}},1625:(Te,X,U)=>{"use strict";var m=U(4701);function K(S){return encodeURIComponent(S).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}Te.exports=function(H,W,V){if(!W)return H;var k;if(V)k=V(W);else if(m.isURLSearchParams(W))k=W.toString();else{var N=[];m.forEach(W,function(A,M){null===A||typeof A>"u"||(m.isArray(A)?M+="[]":A=[A],m.forEach(A,function(te){m.isDate(te)?te=te.toISOString():m.isObject(te)&&(te=JSON.stringify(te)),N.push(K(M)+"="+K(te))}))}),k=N.join("&")}if(k){var F=H.indexOf("#");-1!==F&&(H=H.slice(0,F)),H+=(-1===H.indexOf("?")?"?":"&")+k}return H}},4554:Te=>{"use strict";Te.exports=function(U,m){return m?U.replace(/\/+$/,"")+"/"+m.replace(/^\/+/,""):U}},5738:(Te,X,U)=>{"use strict";var m=U(4701);Te.exports=m.isStandardBrowserEnv()?{write:function(H,W,V,k,N,F){var R=[];R.push(H+"="+encodeURIComponent(W)),m.isNumber(V)&&R.push("expires="+new Date(V).toGMTString()),m.isString(k)&&R.push("path="+k),m.isString(N)&&R.push("domain="+N),!0===F&&R.push("secure"),document.cookie=R.join("; ")},read:function(H){var W=document.cookie.match(new RegExp("(^|;\\s*)("+H+")=([^;]*)"));return W?decodeURIComponent(W[3]):null},remove:function(H){this.write(H,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},8692:Te=>{"use strict";Te.exports=function(U){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(U)}},4603:(Te,X,U)=>{"use strict";var m=U(4701);Te.exports=function(S){return m.isObject(S)&&!0===S.isAxiosError}},6100:(Te,X,U)=>{"use strict";var m=U(4701);Te.exports=m.isStandardBrowserEnv()?function(){var W,S=/(msie|trident)/i.test(navigator.userAgent),H=document.createElement("a");function V(k){var N=k;return S&&(H.setAttribute("href",N),N=H.href),H.setAttribute("href",N),{href:H.href,protocol:H.protocol?H.protocol.replace(/:$/,""):"",host:H.host,search:H.search?H.search.replace(/^\?/,""):"",hash:H.hash?H.hash.replace(/^#/,""):"",hostname:H.hostname,port:H.port,pathname:"/"===H.pathname.charAt(0)?H.pathname:"/"+H.pathname}}return W=V(window.location.href),function(N){var F=m.isString(N)?V(N):N;return F.protocol===W.protocol&&F.host===W.host}}():function(){return!0}},5620:(Te,X,U)=>{"use strict";var m=U(4701);Te.exports=function(S,H){m.forEach(S,function(V,k){k!==H&&k.toUpperCase()===H.toUpperCase()&&(S[H]=V,delete S[k])})}},2099:(Te,X,U)=>{"use strict";var m=U(4701),K=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Te.exports=function(H){var V,k,N,W={};return H&&m.forEach(H.split("\n"),function(R){if(N=R.indexOf(":"),V=m.trim(R.substr(0,N)).toLowerCase(),k=m.trim(R.substr(N+1)),V){if(W[V]&&K.indexOf(V)>=0)return;W[V]="set-cookie"===V?(W[V]?W[V]:[]).concat([k]):W[V]?W[V]+", "+k:k}}),W}},9211:Te=>{"use strict";Te.exports=function(U){return function(K){return U.apply(null,K)}}},4828:(Te,X,U)=>{"use strict";var m=U(1773).version,K={};["object","boolean","number","function","string","symbol"].forEach(function(W,V){K[W]=function(N){return typeof N===W||"a"+(V<1?"n ":" ")+W}});var S={};K.transitional=function(V,k,N){function F(R,A){return"[Axios v"+m+"] Transitional option '"+R+"'"+A+(N?". "+N:"")}return function(R,A,M){if(!1===V)throw new Error(F(A," has been removed"+(k?" in "+k:"")));return k&&!S[A]&&(S[A]=!0,console.warn(F(A," has been deprecated since v"+k+" and will be removed in the near future"))),!V||V(R,A,M)}},Te.exports={assertOptions:function H(W,V,k){if("object"!=typeof W)throw new TypeError("options must be an object");for(var N=Object.keys(W),F=N.length;F-- >0;){var R=N[F],A=V[R];if(A){var M=W[R],J=void 0===M||A(M,R,W);if(!0!==J)throw new TypeError("option "+R+" must be "+J)}else if(!0!==k)throw Error("Unknown option "+R)}},validators:K}},4701:(Te,X,U)=>{"use strict";var m=U(2414),K=Object.prototype.toString;function S(ue){return Array.isArray(ue)}function H(ue){return typeof ue>"u"}function V(ue){return"[object ArrayBuffer]"===K.call(ue)}function A(ue){return null!==ue&&"object"==typeof ue}function M(ue){if("[object Object]"!==K.call(ue))return!1;var Y=Object.getPrototypeOf(ue);return null===Y||Y===Object.prototype}function De(ue){return"[object Function]"===K.call(ue)}function ce(ue,Y){if(!(null===ue||typeof ue>"u"))if("object"!=typeof ue&&(ue=[ue]),S(ue))for(var ge=0,je=ue.length;ge<je;ge++)Y.call(null,ue[ge],ge,ue);else for(var Ve in ue)Object.prototype.hasOwnProperty.call(ue,Ve)&&Y.call(null,ue[Ve],Ve,ue)}Te.exports={isArray:S,isArrayBuffer:V,isBuffer:function W(ue){return null!==ue&&!H(ue)&&null!==ue.constructor&&!H(ue.constructor)&&"function"==typeof ue.constructor.isBuffer&&ue.constructor.isBuffer(ue)},isFormData:function k(ue){return"[object FormData]"===K.call(ue)},isArrayBufferView:function N(ue){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(ue):ue&&ue.buffer&&V(ue.buffer)},isString:function F(ue){return"string"==typeof ue},isNumber:function R(ue){return"number"==typeof ue},isObject:A,isPlainObject:M,isUndefined:H,isDate:function J(ue){return"[object Date]"===K.call(ue)},isFile:function te(ue){return"[object File]"===K.call(ue)},isBlob:function ae(ue){return"[object Blob]"===K.call(ue)},isFunction:De,isStream:function le(ue){return A(ue)&&De(ue.pipe)},isURLSearchParams:function Ee(ue){return"[object URLSearchParams]"===K.call(ue)},isStandardBrowserEnv:function Oe(){return(!(typeof navigator<"u")||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&typeof window<"u"&&typeof document<"u"},forEach:ce,merge:function we(){var ue={};function Y(Ve,rt){ue[rt]=M(ue[rt])&&M(Ve)?we(ue[rt],Ve):M(Ve)?we({},Ve):S(Ve)?Ve.slice():Ve}for(var ge=0,je=arguments.length;ge<je;ge++)ce(arguments[ge],Y);return ue},extend:function Ne(ue,Y,ge){return ce(Y,function(Ve,rt){ue[rt]=ge&&"function"==typeof Ve?m(Ve,ge):Ve}),ue},trim:function ve(ue){return ue.trim?ue.trim():ue.replace(/^\s+|\s+$/g,"")},stripBOM:function $e(ue){return 65279===ue.charCodeAt(0)&&(ue=ue.slice(1)),ue}}},593:Te=>{Te.exports="object"==typeof self?self.FormData:window.FormData},5206:function(Te,X,U){"use strict";var m=this&&this.__awaiter||function(V,k,N,F){return new(N||(N=Promise))(function(A,M){function J(De){try{ae(F.next(De))}catch(le){M(le)}}function te(De){try{ae(F.throw(De))}catch(le){M(le)}}function ae(De){De.done?A(De.value):function R(A){return A instanceof N?A:new N(function(M){M(A)})}(De.value).then(J,te)}ae((F=F.apply(V,k||[])).next())})};Object.defineProperty(X,"__esModule",{value:!0}),X.OpenAIApi=X.OpenAIApiFactory=X.OpenAIApiFp=X.OpenAIApiAxiosParamCreator=X.CreateImageRequestResponseFormatEnum=X.CreateImageRequestSizeEnum=X.ChatCompletionResponseMessageRoleEnum=X.ChatCompletionRequestMessageRoleEnum=void 0;const K=U(3014),S=U(8343),H=U(3958);X.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},X.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},X.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"},X.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"},X.OpenAIApiAxiosParamCreator=function(V){return{cancelFineTune:(k,N={})=>m(this,void 0,void 0,function*(){S.assertParamExists("cancelFineTune","fineTuneId",k);const F="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(k))),R=new URL(F,S.DUMMY_BASE_URL);let A;V&&(A=V.baseOptions);const M=Object.assign(Object.assign({method:"POST"},A),N);S.setSearchParams(R,{});let ae=A&&A.headers?A.headers:{};return M.headers=Object.assign(Object.assign(Object.assign({},{}),ae),N.headers),{url:S.toPathString(R),options:M}}),createAnswer:(k,N={})=>m(this,void 0,void 0,function*(){S.assertParamExists("createAnswer","createAnswerRequest",k);const R=new URL("/answers",S.DUMMY_BASE_URL);let A;V&&(A=V.baseOptions);const M=Object.assign(Object.assign({method:"POST"},A),N),J={"Content-Type":"application/json"};S.setSearchParams(R,{});let ae=A&&A.headers?A.headers:{};return M.headers=Object.assign(Object.assign(Object.assign({},J),ae),N.headers),M.data=S.serializeDataIfNeeded(k,M,V),{url:S.toPathString(R),options:M}}),createChatCompletion:(k,N={})=>m(this,void 0,void 0,function*(){S.assertParamExists("createChatCompletion","createChatCompletionRequest",k);const R=new URL("/chat/completions",S.DUMMY_BASE_URL);let A;V&&(A=V.baseOptions);const M=Object.assign(Object.assign({method:"POST"},A),N),J={"Content-Type":"application/json"};S.setSearchParams(R,{});let ae=A&&A.headers?A.headers:{};return M.headers=Object.assign(Object.assign(Object.assign({},J),ae),N.headers),M.data=S.serializeDataIfNeeded(k,M,V),{url:S.toPathString(R),options:M}}),createClassification:(k,N={})=>m(this,void 0,void 0,function*(){S.assertParamExists("createClassification","createClassificationRequest",k);const R=new URL("/classifications",S.DUMMY_BASE_URL);let A;V&&(A=V.baseOptions);const M=Object.assign(Object.assign({method:"POST"},A),N),J={"Content-Type":"application/json"};S.setSearchParams(R,{});let ae=A&&A.headers?A.headers:{};return M.headers=Object.assign(Object.assign(Object.assign({},J),ae),N.headers),M.data=S.serializeDataIfNeeded(k,M,V),{url:S.toPathString(R),options:M}}),createCompletion:(k,N={})=>m(this,void 0,void 0,function*(){S.assertParamExists("createCompletion","createCompletionRequest",k);const R=new URL("/completions",S.DUMMY_BASE_URL);let A;V&&(A=V.baseOptions);const M=Object.assign(Object.assign({method:"POST"},A),N),J={"Content-Type":"application/json"};S.setSearchParams(R,{});let ae=A&&A.headers?A.headers:{};return M.headers=Object.assign(Object.assign(Object.assign({},J),ae),N.headers),M.data=S.serializeDataIfNeeded(k,M,V),{url:S.toPathString(R),options:M}}),createEdit:(k,N={})=>m(this,void 0,void 0,function*(){S.assertParamExists("createEdit","createEditRequest",k);const R=new URL("/edits",S.DUMMY_BASE_URL);let A;V&&(A=V.baseOptions);const M=Object.assign(Object.assign({method:"POST"},A),N),J={"Content-Type":"application/json"};S.setSearchParams(R,{});let ae=A&&A.headers?A.headers:{};return M.headers=Object.assign(Object.assign(Object.assign({},J),ae),N.headers),M.data=S.serializeDataIfNeeded(k,M,V),{url:S.toPathString(R),options:M}}),createEmbedding:(k,N={})=>m(this,void 0,void 0,function*(){S.assertParamExists("createEmbedding","createEmbeddingRequest",k);const R=new URL("/embeddings",S.DUMMY_BASE_URL);let A;V&&(A=V.baseOptions);const M=Object.assign(Object.assign({method:"POST"},A),N),J={"Content-Type":"application/json"};S.setSearchParams(R,{});let ae=A&&A.headers?A.headers:{};return M.headers=Object.assign(Object.assign(Object.assign({},J),ae),N.headers),M.data=S.serializeDataIfNeeded(k,M,V),{url:S.toPathString(R),options:M}}),createFile:(k,N,F={})=>m(this,void 0,void 0,function*(){S.assertParamExists("createFile","file",k),S.assertParamExists("createFile","purpose",N);const A=new URL("/files",S.DUMMY_BASE_URL);let M;V&&(M=V.baseOptions);const J=Object.assign(Object.assign({method:"POST"},M),F),te={},De=new(V&&V.formDataCtor||FormData);void 0!==k&&De.append("file",k),void 0!==N&&De.append("purpose",N),te["Content-Type"]="multipart/form-data",S.setSearchParams(A,{});let le=M&&M.headers?M.headers:{};return J.headers=Object.assign(Object.assign(Object.assign(Object.assign({},te),De.getHeaders()),le),F.headers),J.data=De,{url:S.toPathString(A),options:J}}),createFineTune:(k,N={})=>m(this,void 0,void 0,function*(){S.assertParamExists("createFineTune","createFineTuneRequest",k);const R=new URL("/fine-tunes",S.DUMMY_BASE_URL);let A;V&&(A=V.baseOptions);const M=Object.assign(Object.assign({method:"POST"},A),N),J={"Content-Type":"application/json"};S.setSearchParams(R,{});let ae=A&&A.headers?A.headers:{};return M.headers=Object.assign(Object.assign(Object.assign({},J),ae),N.headers),M.data=S.serializeDataIfNeeded(k,M,V),{url:S.toPathString(R),options:M}}),createImage:(k,N={})=>m(this,void 0,void 0,function*(){S.assertParamExists("createImage","createImageRequest",k);const R=new URL("/images/generations",S.DUMMY_BASE_URL);let A;V&&(A=V.baseOptions);const M=Object.assign(Object.assign({method:"POST"},A),N),J={"Content-Type":"application/json"};S.setSearchParams(R,{});let ae=A&&A.headers?A.headers:{};return M.headers=Object.assign(Object.assign(Object.assign({},J),ae),N.headers),M.data=S.serializeDataIfNeeded(k,M,V),{url:S.toPathString(R),options:M}}),createImageEdit:(k,N,F,R,A,M,J,te={})=>m(this,void 0,void 0,function*(){S.assertParamExists("createImageEdit","image",k),S.assertParamExists("createImageEdit","prompt",N);const De=new URL("/images/edits",S.DUMMY_BASE_URL);let le;V&&(le=V.baseOptions);const Ee=Object.assign(Object.assign({method:"POST"},le),te),ve={},ce=new(V&&V.formDataCtor||FormData);void 0!==k&&ce.append("image",k),void 0!==F&&ce.append("mask",F),void 0!==N&&ce.append("prompt",N),void 0!==R&&ce.append("n",R),void 0!==A&&ce.append("size",A),void 0!==M&&ce.append("response_format",M),void 0!==J&&ce.append("user",J),ve["Content-Type"]="multipart/form-data",S.setSearchParams(De,{});let we=le&&le.headers?le.headers:{};return Ee.headers=Object.assign(Object.assign(Object.assign(Object.assign({},ve),ce.getHeaders()),we),te.headers),Ee.data=ce,{url:S.toPathString(De),options:Ee}}),createImageVariation:(k,N,F,R,A,M={})=>m(this,void 0,void 0,function*(){S.assertParamExists("createImageVariation","image",k);const te=new URL("/images/variations",S.DUMMY_BASE_URL);let ae;V&&(ae=V.baseOptions);const De=Object.assign(Object.assign({method:"POST"},ae),M),le={},ve=new(V&&V.formDataCtor||FormData);void 0!==k&&ve.append("image",k),void 0!==N&&ve.append("n",N),void 0!==F&&ve.append("size",F),void 0!==R&&ve.append("response_format",R),void 0!==A&&ve.append("user",A),le["Content-Type"]="multipart/form-data",S.setSearchParams(te,{});let Oe=ae&&ae.headers?ae.headers:{};return De.headers=Object.assign(Object.assign(Object.assign(Object.assign({},le),ve.getHeaders()),Oe),M.headers),De.data=ve,{url:S.toPathString(te),options:De}}),createModeration:(k,N={})=>m(this,void 0,void 0,function*(){S.assertParamExists("createModeration","createModerationRequest",k);const R=new URL("/moderations",S.DUMMY_BASE_URL);let A;V&&(A=V.baseOptions);const M=Object.assign(Object.assign({method:"POST"},A),N),J={"Content-Type":"application/json"};S.setSearchParams(R,{});let ae=A&&A.headers?A.headers:{};return M.headers=Object.assign(Object.assign(Object.assign({},J),ae),N.headers),M.data=S.serializeDataIfNeeded(k,M,V),{url:S.toPathString(R),options:M}}),createSearch:(k,N,F={})=>m(this,void 0,void 0,function*(){S.assertParamExists("createSearch","engineId",k),S.assertParamExists("createSearch","createSearchRequest",N);const R="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(k))),A=new URL(R,S.DUMMY_BASE_URL);let M;V&&(M=V.baseOptions);const J=Object.assign(Object.assign({method:"POST"},M),F),te={"Content-Type":"application/json"};S.setSearchParams(A,{});let De=M&&M.headers?M.headers:{};return J.headers=Object.assign(Object.assign(Object.assign({},te),De),F.headers),J.data=S.serializeDataIfNeeded(N,J,V),{url:S.toPathString(A),options:J}}),createTranscription:(k,N,F,R,A,M,J={})=>m(this,void 0,void 0,function*(){S.assertParamExists("createTranscription","file",k),S.assertParamExists("createTranscription","model",N);const ae=new URL("/audio/transcriptions",S.DUMMY_BASE_URL);let De;V&&(De=V.baseOptions);const le=Object.assign(Object.assign({method:"POST"},De),J),Ee={},Oe=new(V&&V.formDataCtor||FormData);void 0!==k&&Oe.append("file",k),void 0!==N&&Oe.append("model",N),void 0!==F&&Oe.append("prompt",F),void 0!==R&&Oe.append("response_format",R),void 0!==A&&Oe.append("temperature",A),void 0!==M&&Oe.append("language",M),Ee["Content-Type"]="multipart/form-data",S.setSearchParams(ae,{});let ce=De&&De.headers?De.headers:{};return le.headers=Object.assign(Object.assign(Object.assign(Object.assign({},Ee),Oe.getHeaders()),ce),J.headers),le.data=Oe,{url:S.toPathString(ae),options:le}}),createTranslation:(k,N,F,R,A,M={})=>m(this,void 0,void 0,function*(){S.assertParamExists("createTranslation","file",k),S.assertParamExists("createTranslation","model",N);const te=new URL("/audio/translations",S.DUMMY_BASE_URL);let ae;V&&(ae=V.baseOptions);const De=Object.assign(Object.assign({method:"POST"},ae),M),le={},ve=new(V&&V.formDataCtor||FormData);void 0!==k&&ve.append("file",k),void 0!==N&&ve.append("model",N),void 0!==F&&ve.append("prompt",F),void 0!==R&&ve.append("response_format",R),void 0!==A&&ve.append("temperature",A),le["Content-Type"]="multipart/form-data",S.setSearchParams(te,{});let Oe=ae&&ae.headers?ae.headers:{};return De.headers=Object.assign(Object.assign(Object.assign(Object.assign({},le),ve.getHeaders()),Oe),M.headers),De.data=ve,{url:S.toPathString(te),options:De}}),deleteFile:(k,N={})=>m(this,void 0,void 0,function*(){S.assertParamExists("deleteFile","fileId",k);const F="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(k))),R=new URL(F,S.DUMMY_BASE_URL);let A;V&&(A=V.baseOptions);const M=Object.assign(Object.assign({method:"DELETE"},A),N);S.setSearchParams(R,{});let ae=A&&A.headers?A.headers:{};return M.headers=Object.assign(Object.assign(Object.assign({},{}),ae),N.headers),{url:S.toPathString(R),options:M}}),deleteModel:(k,N={})=>m(this,void 0,void 0,function*(){S.assertParamExists("deleteModel","model",k);const F="/models/{model}".replace("{model}",encodeURIComponent(String(k))),R=new URL(F,S.DUMMY_BASE_URL);let A;V&&(A=V.baseOptions);const M=Object.assign(Object.assign({method:"DELETE"},A),N);S.setSearchParams(R,{});let ae=A&&A.headers?A.headers:{};return M.headers=Object.assign(Object.assign(Object.assign({},{}),ae),N.headers),{url:S.toPathString(R),options:M}}),downloadFile:(k,N={})=>m(this,void 0,void 0,function*(){S.assertParamExists("downloadFile","fileId",k);const F="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(k))),R=new URL(F,S.DUMMY_BASE_URL);let A;V&&(A=V.baseOptions);const M=Object.assign(Object.assign({method:"GET"},A),N);S.setSearchParams(R,{});let ae=A&&A.headers?A.headers:{};return M.headers=Object.assign(Object.assign(Object.assign({},{}),ae),N.headers),{url:S.toPathString(R),options:M}}),listEngines:(k={})=>m(this,void 0,void 0,function*(){const F=new URL("/engines",S.DUMMY_BASE_URL);let R;V&&(R=V.baseOptions);const A=Object.assign(Object.assign({method:"GET"},R),k);S.setSearchParams(F,{});let te=R&&R.headers?R.headers:{};return A.headers=Object.assign(Object.assign(Object.assign({},{}),te),k.headers),{url:S.toPathString(F),options:A}}),listFiles:(k={})=>m(this,void 0,void 0,function*(){const F=new URL("/files",S.DUMMY_BASE_URL);let R;V&&(R=V.baseOptions);const A=Object.assign(Object.assign({method:"GET"},R),k);S.setSearchParams(F,{});let te=R&&R.headers?R.headers:{};return A.headers=Object.assign(Object.assign(Object.assign({},{}),te),k.headers),{url:S.toPathString(F),options:A}}),listFineTuneEvents:(k,N,F={})=>m(this,void 0,void 0,function*(){S.assertParamExists("listFineTuneEvents","fineTuneId",k);const R="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(k))),A=new URL(R,S.DUMMY_BASE_URL);let M;V&&(M=V.baseOptions);const J=Object.assign(Object.assign({method:"GET"},M),F),ae={};void 0!==N&&(ae.stream=N),S.setSearchParams(A,ae);let De=M&&M.headers?M.headers:{};return J.headers=Object.assign(Object.assign(Object.assign({},{}),De),F.headers),{url:S.toPathString(A),options:J}}),listFineTunes:(k={})=>m(this,void 0,void 0,function*(){const F=new URL("/fine-tunes",S.DUMMY_BASE_URL);let R;V&&(R=V.baseOptions);const A=Object.assign(Object.assign({method:"GET"},R),k);S.setSearchParams(F,{});let te=R&&R.headers?R.headers:{};return A.headers=Object.assign(Object.assign(Object.assign({},{}),te),k.headers),{url:S.toPathString(F),options:A}}),listModels:(k={})=>m(this,void 0,void 0,function*(){const F=new URL("/models",S.DUMMY_BASE_URL);let R;V&&(R=V.baseOptions);const A=Object.assign(Object.assign({method:"GET"},R),k);S.setSearchParams(F,{});let te=R&&R.headers?R.headers:{};return A.headers=Object.assign(Object.assign(Object.assign({},{}),te),k.headers),{url:S.toPathString(F),options:A}}),retrieveEngine:(k,N={})=>m(this,void 0,void 0,function*(){S.assertParamExists("retrieveEngine","engineId",k);const F="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(k))),R=new URL(F,S.DUMMY_BASE_URL);let A;V&&(A=V.baseOptions);const M=Object.assign(Object.assign({method:"GET"},A),N);S.setSearchParams(R,{});let ae=A&&A.headers?A.headers:{};return M.headers=Object.assign(Object.assign(Object.assign({},{}),ae),N.headers),{url:S.toPathString(R),options:M}}),retrieveFile:(k,N={})=>m(this,void 0,void 0,function*(){S.assertParamExists("retrieveFile","fileId",k);const F="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(k))),R=new URL(F,S.DUMMY_BASE_URL);let A;V&&(A=V.baseOptions);const M=Object.assign(Object.assign({method:"GET"},A),N);S.setSearchParams(R,{});let ae=A&&A.headers?A.headers:{};return M.headers=Object.assign(Object.assign(Object.assign({},{}),ae),N.headers),{url:S.toPathString(R),options:M}}),retrieveFineTune:(k,N={})=>m(this,void 0,void 0,function*(){S.assertParamExists("retrieveFineTune","fineTuneId",k);const F="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(k))),R=new URL(F,S.DUMMY_BASE_URL);let A;V&&(A=V.baseOptions);const M=Object.assign(Object.assign({method:"GET"},A),N);S.setSearchParams(R,{});let ae=A&&A.headers?A.headers:{};return M.headers=Object.assign(Object.assign(Object.assign({},{}),ae),N.headers),{url:S.toPathString(R),options:M}}),retrieveModel:(k,N={})=>m(this,void 0,void 0,function*(){S.assertParamExists("retrieveModel","model",k);const F="/models/{model}".replace("{model}",encodeURIComponent(String(k))),R=new URL(F,S.DUMMY_BASE_URL);let A;V&&(A=V.baseOptions);const M=Object.assign(Object.assign({method:"GET"},A),N);S.setSearchParams(R,{});let ae=A&&A.headers?A.headers:{};return M.headers=Object.assign(Object.assign(Object.assign({},{}),ae),N.headers),{url:S.toPathString(R),options:M}})}},X.OpenAIApiFp=function(V){const k=X.OpenAIApiAxiosParamCreator(V);return{cancelFineTune(N,F){return m(this,void 0,void 0,function*(){const R=yield k.cancelFineTune(N,F);return S.createRequestFunction(R,K.default,H.BASE_PATH,V)})},createAnswer(N,F){return m(this,void 0,void 0,function*(){const R=yield k.createAnswer(N,F);return S.createRequestFunction(R,K.default,H.BASE_PATH,V)})},createChatCompletion(N,F){return m(this,void 0,void 0,function*(){const R=yield k.createChatCompletion(N,F);return S.createRequestFunction(R,K.default,H.BASE_PATH,V)})},createClassification(N,F){return m(this,void 0,void 0,function*(){const R=yield k.createClassification(N,F);return S.createRequestFunction(R,K.default,H.BASE_PATH,V)})},createCompletion(N,F){return m(this,void 0,void 0,function*(){const R=yield k.createCompletion(N,F);return S.createRequestFunction(R,K.default,H.BASE_PATH,V)})},createEdit(N,F){return m(this,void 0,void 0,function*(){const R=yield k.createEdit(N,F);return S.createRequestFunction(R,K.default,H.BASE_PATH,V)})},createEmbedding(N,F){return m(this,void 0,void 0,function*(){const R=yield k.createEmbedding(N,F);return S.createRequestFunction(R,K.default,H.BASE_PATH,V)})},createFile(N,F,R){return m(this,void 0,void 0,function*(){const A=yield k.createFile(N,F,R);return S.createRequestFunction(A,K.default,H.BASE_PATH,V)})},createFineTune(N,F){return m(this,void 0,void 0,function*(){const R=yield k.createFineTune(N,F);return S.createRequestFunction(R,K.default,H.BASE_PATH,V)})},createImage(N,F){return m(this,void 0,void 0,function*(){const R=yield k.createImage(N,F);return S.createRequestFunction(R,K.default,H.BASE_PATH,V)})},createImageEdit(N,F,R,A,M,J,te,ae){return m(this,void 0,void 0,function*(){const De=yield k.createImageEdit(N,F,R,A,M,J,te,ae);return S.createRequestFunction(De,K.default,H.BASE_PATH,V)})},createImageVariation(N,F,R,A,M,J){return m(this,void 0,void 0,function*(){const te=yield k.createImageVariation(N,F,R,A,M,J);return S.createRequestFunction(te,K.default,H.BASE_PATH,V)})},createModeration(N,F){return m(this,void 0,void 0,function*(){const R=yield k.createModeration(N,F);return S.createRequestFunction(R,K.default,H.BASE_PATH,V)})},createSearch(N,F,R){return m(this,void 0,void 0,function*(){const A=yield k.createSearch(N,F,R);return S.createRequestFunction(A,K.default,H.BASE_PATH,V)})},createTranscription(N,F,R,A,M,J,te){return m(this,void 0,void 0,function*(){const ae=yield k.createTranscription(N,F,R,A,M,J,te);return S.createRequestFunction(ae,K.default,H.BASE_PATH,V)})},createTranslation(N,F,R,A,M,J){return m(this,void 0,void 0,function*(){const te=yield k.createTranslation(N,F,R,A,M,J);return S.createRequestFunction(te,K.default,H.BASE_PATH,V)})},deleteFile(N,F){return m(this,void 0,void 0,function*(){const R=yield k.deleteFile(N,F);return S.createRequestFunction(R,K.default,H.BASE_PATH,V)})},deleteModel(N,F){return m(this,void 0,void 0,function*(){const R=yield k.deleteModel(N,F);return S.createRequestFunction(R,K.default,H.BASE_PATH,V)})},downloadFile(N,F){return m(this,void 0,void 0,function*(){const R=yield k.downloadFile(N,F);return S.createRequestFunction(R,K.default,H.BASE_PATH,V)})},listEngines(N){return m(this,void 0,void 0,function*(){const F=yield k.listEngines(N);return S.createRequestFunction(F,K.default,H.BASE_PATH,V)})},listFiles(N){return m(this,void 0,void 0,function*(){const F=yield k.listFiles(N);return S.createRequestFunction(F,K.default,H.BASE_PATH,V)})},listFineTuneEvents(N,F,R){return m(this,void 0,void 0,function*(){const A=yield k.listFineTuneEvents(N,F,R);return S.createRequestFunction(A,K.default,H.BASE_PATH,V)})},listFineTunes(N){return m(this,void 0,void 0,function*(){const F=yield k.listFineTunes(N);return S.createRequestFunction(F,K.default,H.BASE_PATH,V)})},listModels(N){return m(this,void 0,void 0,function*(){const F=yield k.listModels(N);return S.createRequestFunction(F,K.default,H.BASE_PATH,V)})},retrieveEngine(N,F){return m(this,void 0,void 0,function*(){const R=yield k.retrieveEngine(N,F);return S.createRequestFunction(R,K.default,H.BASE_PATH,V)})},retrieveFile(N,F){return m(this,void 0,void 0,function*(){const R=yield k.retrieveFile(N,F);return S.createRequestFunction(R,K.default,H.BASE_PATH,V)})},retrieveFineTune(N,F){return m(this,void 0,void 0,function*(){const R=yield k.retrieveFineTune(N,F);return S.createRequestFunction(R,K.default,H.BASE_PATH,V)})},retrieveModel(N,F){return m(this,void 0,void 0,function*(){const R=yield k.retrieveModel(N,F);return S.createRequestFunction(R,K.default,H.BASE_PATH,V)})}}},X.OpenAIApiFactory=function(V,k,N){const F=X.OpenAIApiFp(V);return{cancelFineTune:(R,A)=>F.cancelFineTune(R,A).then(M=>M(N,k)),createAnswer:(R,A)=>F.createAnswer(R,A).then(M=>M(N,k)),createChatCompletion:(R,A)=>F.createChatCompletion(R,A).then(M=>M(N,k)),createClassification:(R,A)=>F.createClassification(R,A).then(M=>M(N,k)),createCompletion:(R,A)=>F.createCompletion(R,A).then(M=>M(N,k)),createEdit:(R,A)=>F.createEdit(R,A).then(M=>M(N,k)),createEmbedding:(R,A)=>F.createEmbedding(R,A).then(M=>M(N,k)),createFile:(R,A,M)=>F.createFile(R,A,M).then(J=>J(N,k)),createFineTune:(R,A)=>F.createFineTune(R,A).then(M=>M(N,k)),createImage:(R,A)=>F.createImage(R,A).then(M=>M(N,k)),createImageEdit:(R,A,M,J,te,ae,De,le)=>F.createImageEdit(R,A,M,J,te,ae,De,le).then(Ee=>Ee(N,k)),createImageVariation:(R,A,M,J,te,ae)=>F.createImageVariation(R,A,M,J,te,ae).then(De=>De(N,k)),createModeration:(R,A)=>F.createModeration(R,A).then(M=>M(N,k)),createSearch:(R,A,M)=>F.createSearch(R,A,M).then(J=>J(N,k)),createTranscription:(R,A,M,J,te,ae,De)=>F.createTranscription(R,A,M,J,te,ae,De).then(le=>le(N,k)),createTranslation:(R,A,M,J,te,ae)=>F.createTranslation(R,A,M,J,te,ae).then(De=>De(N,k)),deleteFile:(R,A)=>F.deleteFile(R,A).then(M=>M(N,k)),deleteModel:(R,A)=>F.deleteModel(R,A).then(M=>M(N,k)),downloadFile:(R,A)=>F.downloadFile(R,A).then(M=>M(N,k)),listEngines:R=>F.listEngines(R).then(A=>A(N,k)),listFiles:R=>F.listFiles(R).then(A=>A(N,k)),listFineTuneEvents:(R,A,M)=>F.listFineTuneEvents(R,A,M).then(J=>J(N,k)),listFineTunes:R=>F.listFineTunes(R).then(A=>A(N,k)),listModels:R=>F.listModels(R).then(A=>A(N,k)),retrieveEngine:(R,A)=>F.retrieveEngine(R,A).then(M=>M(N,k)),retrieveFile:(R,A)=>F.retrieveFile(R,A).then(M=>M(N,k)),retrieveFineTune:(R,A)=>F.retrieveFineTune(R,A).then(M=>M(N,k)),retrieveModel:(R,A)=>F.retrieveModel(R,A).then(M=>M(N,k))}},X.OpenAIApi=class W extends H.BaseAPI{cancelFineTune(k,N){return X.OpenAIApiFp(this.configuration).cancelFineTune(k,N).then(F=>F(this.axios,this.basePath))}createAnswer(k,N){return X.OpenAIApiFp(this.configuration).createAnswer(k,N).then(F=>F(this.axios,this.basePath))}createChatCompletion(k,N){return X.OpenAIApiFp(this.configuration).createChatCompletion(k,N).then(F=>F(this.axios,this.basePath))}createClassification(k,N){return X.OpenAIApiFp(this.configuration).createClassification(k,N).then(F=>F(this.axios,this.basePath))}createCompletion(k,N){return X.OpenAIApiFp(this.configuration).createCompletion(k,N).then(F=>F(this.axios,this.basePath))}createEdit(k,N){return X.OpenAIApiFp(this.configuration).createEdit(k,N).then(F=>F(this.axios,this.basePath))}createEmbedding(k,N){return X.OpenAIApiFp(this.configuration).createEmbedding(k,N).then(F=>F(this.axios,this.basePath))}createFile(k,N,F){return X.OpenAIApiFp(this.configuration).createFile(k,N,F).then(R=>R(this.axios,this.basePath))}createFineTune(k,N){return X.OpenAIApiFp(this.configuration).createFineTune(k,N).then(F=>F(this.axios,this.basePath))}createImage(k,N){return X.OpenAIApiFp(this.configuration).createImage(k,N).then(F=>F(this.axios,this.basePath))}createImageEdit(k,N,F,R,A,M,J,te){return X.OpenAIApiFp(this.configuration).createImageEdit(k,N,F,R,A,M,J,te).then(ae=>ae(this.axios,this.basePath))}createImageVariation(k,N,F,R,A,M){return X.OpenAIApiFp(this.configuration).createImageVariation(k,N,F,R,A,M).then(J=>J(this.axios,this.basePath))}createModeration(k,N){return X.OpenAIApiFp(this.configuration).createModeration(k,N).then(F=>F(this.axios,this.basePath))}createSearch(k,N,F){return X.OpenAIApiFp(this.configuration).createSearch(k,N,F).then(R=>R(this.axios,this.basePath))}createTranscription(k,N,F,R,A,M,J){return X.OpenAIApiFp(this.configuration).createTranscription(k,N,F,R,A,M,J).then(te=>te(this.axios,this.basePath))}createTranslation(k,N,F,R,A,M){return X.OpenAIApiFp(this.configuration).createTranslation(k,N,F,R,A,M).then(J=>J(this.axios,this.basePath))}deleteFile(k,N){return X.OpenAIApiFp(this.configuration).deleteFile(k,N).then(F=>F(this.axios,this.basePath))}deleteModel(k,N){return X.OpenAIApiFp(this.configuration).deleteModel(k,N).then(F=>F(this.axios,this.basePath))}downloadFile(k,N){return X.OpenAIApiFp(this.configuration).downloadFile(k,N).then(F=>F(this.axios,this.basePath))}listEngines(k){return X.OpenAIApiFp(this.configuration).listEngines(k).then(N=>N(this.axios,this.basePath))}listFiles(k){return X.OpenAIApiFp(this.configuration).listFiles(k).then(N=>N(this.axios,this.basePath))}listFineTuneEvents(k,N,F){return X.OpenAIApiFp(this.configuration).listFineTuneEvents(k,N,F).then(R=>R(this.axios,this.basePath))}listFineTunes(k){return X.OpenAIApiFp(this.configuration).listFineTunes(k).then(N=>N(this.axios,this.basePath))}listModels(k){return X.OpenAIApiFp(this.configuration).listModels(k).then(N=>N(this.axios,this.basePath))}retrieveEngine(k,N){return X.OpenAIApiFp(this.configuration).retrieveEngine(k,N).then(F=>F(this.axios,this.basePath))}retrieveFile(k,N){return X.OpenAIApiFp(this.configuration).retrieveFile(k,N).then(F=>F(this.axios,this.basePath))}retrieveFineTune(k,N){return X.OpenAIApiFp(this.configuration).retrieveFineTune(k,N).then(F=>F(this.axios,this.basePath))}retrieveModel(k,N){return X.OpenAIApiFp(this.configuration).retrieveModel(k,N).then(F=>F(this.axios,this.basePath))}}},3958:(Te,X,U)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.RequiredError=X.BaseAPI=X.COLLECTION_FORMATS=X.BASE_PATH=void 0;const m=U(3014);X.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,""),X.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"\t",pipes:"|"},X.BaseAPI=class K{constructor(W,V=X.BASE_PATH,k=m.default){this.basePath=V,this.axios=k,W&&(this.configuration=W,this.basePath=W.basePath||this.basePath)}};class S extends Error{constructor(W,V){super(V),this.field=W,this.name="RequiredError"}}X.RequiredError=S},8343:function(Te,X,U){"use strict";var m=this&&this.__awaiter||function(H,W,V,k){return new(V||(V=Promise))(function(F,R){function A(te){try{J(k.next(te))}catch(ae){R(ae)}}function M(te){try{J(k.throw(te))}catch(ae){R(ae)}}function J(te){te.done?F(te.value):function N(F){return F instanceof V?F:new V(function(R){R(F)})}(te.value).then(A,M)}J((k=k.apply(H,W||[])).next())})};Object.defineProperty(X,"__esModule",{value:!0}),X.createRequestFunction=X.toPathString=X.serializeDataIfNeeded=X.setSearchParams=X.setOAuthToObject=X.setBearerAuthToObject=X.setBasicAuthToObject=X.setApiKeyToObject=X.assertParamExists=X.DUMMY_BASE_URL=void 0;const K=U(3958);function S(H,W,V=""){null!=W&&("object"==typeof W?Array.isArray(W)?W.forEach(k=>S(H,k,V)):Object.keys(W).forEach(k=>S(H,W[k],`${V}${""!==V?".":""}${k}`)):H.has(V)?H.append(V,W):H.set(V,W))}X.DUMMY_BASE_URL="https://example.com",X.assertParamExists=function(H,W,V){if(null==V)throw new K.RequiredError(W,`Required parameter ${W} was null or undefined when calling ${H}.`)},X.setApiKeyToObject=function(H,W,V){return m(this,void 0,void 0,function*(){if(V&&V.apiKey){const k="function"==typeof V.apiKey?yield V.apiKey(W):yield V.apiKey;H[W]=k}})},X.setBasicAuthToObject=function(H,W){W&&(W.username||W.password)&&(H.auth={username:W.username,password:W.password})},X.setBearerAuthToObject=function(H,W){return m(this,void 0,void 0,function*(){if(W&&W.accessToken){const V="function"==typeof W.accessToken?yield W.accessToken():yield W.accessToken;H.Authorization="Bearer "+V}})},X.setOAuthToObject=function(H,W,V,k){return m(this,void 0,void 0,function*(){if(k&&k.accessToken){const N="function"==typeof k.accessToken?yield k.accessToken(W,V):yield k.accessToken;H.Authorization="Bearer "+N}})},X.setSearchParams=function(H,...W){const V=new URLSearchParams(H.search);S(V,W),H.search=V.toString()},X.serializeDataIfNeeded=function(H,W,V){const k="string"!=typeof H;return(k&&V&&V.isJsonMime?V.isJsonMime(W.headers["Content-Type"]):k)?JSON.stringify(void 0!==H?H:{}):H||""},X.toPathString=function(H){return H.pathname+H.search+H.hash},X.createRequestFunction=function(H,W,V,k){return(N=W,F=V)=>{const R=Object.assign(Object.assign({},H.options),{url:(k?.basePath||F)+H.url});return N.request(R)}}},764:(Te,X,U)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0}),X.Configuration=void 0;const m=U(2811);X.Configuration=class K{constructor(H={}){this.apiKey=H.apiKey,this.organization=H.organization,this.username=H.username,this.password=H.password,this.accessToken=H.accessToken,this.basePath=H.basePath,this.baseOptions=H.baseOptions,this.formDataCtor=H.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${m.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=U(593))}isJsonMime(H){const W=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==H&&(W.test(H)||"application/json-patch+json"===H.toLowerCase())}}},157:function(Te,X,U){"use strict";var m=this&&this.__createBinding||(Object.create?function(S,H,W,V){void 0===V&&(V=W),Object.defineProperty(S,V,{enumerable:!0,get:function(){return H[W]}})}:function(S,H,W,V){void 0===V&&(V=W),S[V]=H[W]}),K=this&&this.__exportStar||function(S,H){for(var W in S)"default"!==W&&!H.hasOwnProperty(W)&&m(H,S,W)};Object.defineProperty(X,"__esModule",{value:!0}),K(U(5206),X),K(U(764),X)},9751:(Te,X,U)=>{"use strict";U.d(X,{y:()=>N});var m=U(930),K=U(727),S=U(8822),H=U(9635),W=U(2416),V=U(576),k=U(2806);let N=(()=>{class M{constructor(te){te&&(this._subscribe=te)}lift(te){const ae=new M;return ae.source=this,ae.operator=te,ae}subscribe(te,ae,De){const le=function A(M){return M&&M instanceof m.Lv||function R(M){return M&&(0,V.m)(M.next)&&(0,V.m)(M.error)&&(0,V.m)(M.complete)}(M)&&(0,K.Nn)(M)}(te)?te:new m.Hp(te,ae,De);return(0,k.x)(()=>{const{operator:Ee,source:ve}=this;le.add(Ee?Ee.call(le,ve):ve?this._subscribe(le):this._trySubscribe(le))}),le}_trySubscribe(te){try{return this._subscribe(te)}catch(ae){te.error(ae)}}forEach(te,ae){return new(ae=F(ae))((De,le)=>{const Ee=new m.Hp({next:ve=>{try{te(ve)}catch(Oe){le(Oe),Ee.unsubscribe()}},error:le,complete:De});this.subscribe(Ee)})}_subscribe(te){var ae;return null===(ae=this.source)||void 0===ae?void 0:ae.subscribe(te)}[S.L](){return this}pipe(...te){return(0,H.U)(te)(this)}toPromise(te){return new(te=F(te))((ae,De)=>{let le;this.subscribe(Ee=>le=Ee,Ee=>De(Ee),()=>ae(le))})}}return M.create=J=>new M(J),M})();function F(M){var J;return null!==(J=M??W.v.Promise)&&void 0!==J?J:Promise}},7579:(Te,X,U)=>{"use strict";U.d(X,{x:()=>k});var m=U(9751),K=U(727);const H=(0,U(3888).d)(F=>function(){F(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var W=U(8737),V=U(2806);let k=(()=>{class F extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(A){const M=new N(this,this);return M.operator=A,M}_throwIfClosed(){if(this.closed)throw new H}next(A){(0,V.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const M of this.currentObservers)M.next(A)}})}error(A){(0,V.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=A;const{observers:M}=this;for(;M.length;)M.shift().error(A)}})}complete(){(0,V.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:A}=this;for(;A.length;)A.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var A;return(null===(A=this.observers)||void 0===A?void 0:A.length)>0}_trySubscribe(A){return this._throwIfClosed(),super._trySubscribe(A)}_subscribe(A){return this._throwIfClosed(),this._checkFinalizedStatuses(A),this._innerSubscribe(A)}_innerSubscribe(A){const{hasError:M,isStopped:J,observers:te}=this;return M||J?K.Lc:(this.currentObservers=null,te.push(A),new K.w0(()=>{this.currentObservers=null,(0,W.P)(te,A)}))}_checkFinalizedStatuses(A){const{hasError:M,thrownError:J,isStopped:te}=this;M?A.error(J):te&&A.complete()}asObservable(){const A=new m.y;return A.source=this,A}}return F.create=(R,A)=>new N(R,A),F})();class N extends k{constructor(R,A){super(),this.destination=R,this.source=A}next(R){var A,M;null===(M=null===(A=this.destination)||void 0===A?void 0:A.next)||void 0===M||M.call(A,R)}error(R){var A,M;null===(M=null===(A=this.destination)||void 0===A?void 0:A.error)||void 0===M||M.call(A,R)}complete(){var R,A;null===(A=null===(R=this.destination)||void 0===R?void 0:R.complete)||void 0===A||A.call(R)}_subscribe(R){var A,M;return null!==(M=null===(A=this.source)||void 0===A?void 0:A.subscribe(R))&&void 0!==M?M:K.Lc}}},930:(Te,X,U)=>{"use strict";U.d(X,{Hp:()=>De,Lv:()=>M});var m=U(576),K=U(727),S=U(2416),H=U(7849),W=U(5032);const V=F("C",void 0,void 0);function F(ce,we,Ne){return{kind:ce,value:we,error:Ne}}var R=U(3410),A=U(2806);class M extends K.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,K.Nn)(we)&&we.add(this)):this.destination=Oe}static create(we,Ne,$e){return new De(we,Ne,$e)}next(we){this.isStopped?ve(function N(ce){return F("N",ce,void 0)}(we),this):this._next(we)}error(we){this.isStopped?ve(function k(ce){return F("E",void 0,ce)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?ve(V,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const J=Function.prototype.bind;function te(ce,we){return J.call(ce,we)}class ae{constructor(we){this.partialObserver=we}next(we){const{partialObserver:Ne}=this;if(Ne.next)try{Ne.next(we)}catch($e){le($e)}}error(we){const{partialObserver:Ne}=this;if(Ne.error)try{Ne.error(we)}catch($e){le($e)}else le(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(Ne){le(Ne)}}}class De extends M{constructor(we,Ne,$e){let ue;if(super(),(0,m.m)(we)||!we)ue={next:we??void 0,error:Ne??void 0,complete:$e??void 0};else{let Y;this&&S.v.useDeprecatedNextContext?(Y=Object.create(we),Y.unsubscribe=()=>this.unsubscribe(),ue={next:we.next&&te(we.next,Y),error:we.error&&te(we.error,Y),complete:we.complete&&te(we.complete,Y)}):ue=we}this.destination=new ae(ue)}}function le(ce){S.v.useDeprecatedSynchronousErrorHandling?(0,A.O)(ce):(0,H.h)(ce)}function ve(ce,we){const{onStoppedNotification:Ne}=S.v;Ne&&R.z.setTimeout(()=>Ne(ce,we))}const Oe={closed:!0,next:W.Z,error:function Ee(ce){throw ce},complete:W.Z}},727:(Te,X,U)=>{"use strict";U.d(X,{Lc:()=>V,w0:()=>W,Nn:()=>k});var m=U(576);const S=(0,U(3888).d)(F=>function(A){F(this),this.message=A?`${A.length} errors occurred during unsubscription:\n${A.map((M,J)=>`${J+1}) ${M.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=A});var H=U(8737);class W{constructor(R){this.initialTeardown=R,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let R;if(!this.closed){this.closed=!0;const{_parentage:A}=this;if(A)if(this._parentage=null,Array.isArray(A))for(const te of A)te.remove(this);else A.remove(this);const{initialTeardown:M}=this;if((0,m.m)(M))try{M()}catch(te){R=te instanceof S?te.errors:[te]}const{_finalizers:J}=this;if(J){this._finalizers=null;for(const te of J)try{N(te)}catch(ae){R=R??[],ae instanceof S?R=[...R,...ae.errors]:R.push(ae)}}if(R)throw new S(R)}}add(R){var A;if(R&&R!==this)if(this.closed)N(R);else{if(R instanceof W){if(R.closed||R._hasParent(this))return;R._addParent(this)}(this._finalizers=null!==(A=this._finalizers)&&void 0!==A?A:[]).push(R)}}_hasParent(R){const{_parentage:A}=this;return A===R||Array.isArray(A)&&A.includes(R)}_addParent(R){const{_parentage:A}=this;this._parentage=Array.isArray(A)?(A.push(R),A):A?[A,R]:R}_removeParent(R){const{_parentage:A}=this;A===R?this._parentage=null:Array.isArray(A)&&(0,H.P)(A,R)}remove(R){const{_finalizers:A}=this;A&&(0,H.P)(A,R),R instanceof W&&R._removeParent(this)}}W.EMPTY=(()=>{const F=new W;return F.closed=!0,F})();const V=W.EMPTY;function k(F){return F instanceof W||F&&"closed"in F&&(0,m.m)(F.remove)&&(0,m.m)(F.add)&&(0,m.m)(F.unsubscribe)}function N(F){(0,m.m)(F)?F():F.unsubscribe()}},2416:(Te,X,U)=>{"use strict";U.d(X,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Te,X,U)=>{"use strict";U.d(X,{E:()=>K});const K=new(U(9751).y)(W=>W.complete())},8996:(Te,X,U)=>{"use strict";U.d(X,{D:()=>we});var m=U(8421),K=U(5363),S=U(9468),V=U(9751),N=U(2202),F=U(576),R=U(9672);function M(Ne,$e){if(!Ne)throw new Error("Iterable cannot be null");return new V.y(ue=>{(0,R.f)(ue,$e,()=>{const Y=Ne[Symbol.asyncIterator]();(0,R.f)(ue,$e,()=>{Y.next().then(ge=>{ge.done?ue.complete():ue.next(ge.value)})},0,!0)})})}var J=U(3670),te=U(8239),ae=U(1144),De=U(6495),le=U(2206),Ee=U(4532),ve=U(3260);function we(Ne,$e){return $e?function ce(Ne,$e){if(null!=Ne){if((0,J.c)(Ne))return function H(Ne,$e){return(0,m.Xf)(Ne).pipe((0,S.R)($e),(0,K.Q)($e))}(Ne,$e);if((0,ae.z)(Ne))return function k(Ne,$e){return new V.y(ue=>{let Y=0;return $e.schedule(function(){Y===Ne.length?ue.complete():(ue.next(Ne[Y++]),ue.closed||this.schedule())})})}(Ne,$e);if((0,te.t)(Ne))return function W(Ne,$e){return(0,m.Xf)(Ne).pipe((0,S.R)($e),(0,K.Q)($e))}(Ne,$e);if((0,le.D)(Ne))return M(Ne,$e);if((0,De.T)(Ne))return function A(Ne,$e){return new V.y(ue=>{let Y;return(0,R.f)(ue,$e,()=>{Y=Ne[N.h](),(0,R.f)(ue,$e,()=>{let ge,je;try{({value:ge,done:je}=Y.next())}catch(Ve){return void ue.error(Ve)}je?ue.complete():ue.next(ge)},0,!0)}),()=>(0,F.m)(Y?.return)&&Y.return()})}(Ne,$e);if((0,ve.L)(Ne))return function Oe(Ne,$e){return M((0,ve.Q)(Ne),$e)}(Ne,$e)}throw(0,Ee.z)(Ne)}(Ne,$e):(0,m.Xf)(Ne)}},8421:(Te,X,U)=>{"use strict";U.d(X,{Xf:()=>J});var m=U(655),K=U(1144),S=U(8239),H=U(9751),W=U(3670),V=U(2206),k=U(4532),N=U(6495),F=U(3260),R=U(576),A=U(7849),M=U(8822);function J(ce){if(ce instanceof H.y)return ce;if(null!=ce){if((0,W.c)(ce))return function te(ce){return new H.y(we=>{const Ne=ce[M.L]();if((0,R.m)(Ne.subscribe))return Ne.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ce);if((0,K.z)(ce))return function ae(ce){return new H.y(we=>{for(let Ne=0;Ne<ce.length&&!we.closed;Ne++)we.next(ce[Ne]);we.complete()})}(ce);if((0,S.t)(ce))return function De(ce){return new H.y(we=>{ce.then(Ne=>{we.closed||(we.next(Ne),we.complete())},Ne=>we.error(Ne)).then(null,A.h)})}(ce);if((0,V.D)(ce))return Ee(ce);if((0,N.T)(ce))return function le(ce){return new H.y(we=>{for(const Ne of ce)if(we.next(Ne),we.closed)return;we.complete()})}(ce);if((0,F.L)(ce))return function ve(ce){return Ee((0,F.Q)(ce))}(ce)}throw(0,k.z)(ce)}function Ee(ce){return new H.y(we=>{(function Oe(ce,we){var Ne,$e,ue,Y;return(0,m.mG)(this,void 0,void 0,function*(){try{for(Ne=(0,m.KL)(ce);!($e=yield Ne.next()).done;)if(we.next($e.value),we.closed)return}catch(ge){ue={error:ge}}finally{try{$e&&!$e.done&&(Y=Ne.return)&&(yield Y.call(Ne))}finally{if(ue)throw ue.error}}we.complete()})})(ce,we).catch(Ne=>we.error(Ne))})}},6451:(Te,X,U)=>{"use strict";U.d(X,{T:()=>V});var m=U(8189),K=U(8421),S=U(515),H=U(7669),W=U(8996);function V(...k){const N=(0,H.yG)(k),F=(0,H._6)(k,1/0),R=k;return R.length?1===R.length?(0,K.Xf)(R[0]):(0,m.J)(F)((0,W.D)(R,N)):S.E}},5403:(Te,X,U)=>{"use strict";U.d(X,{x:()=>K});var m=U(930);function K(H,W,V,k,N){return new S(H,W,V,k,N)}class S extends m.Lv{constructor(W,V,k,N,F,R){super(W),this.onFinalize=F,this.shouldUnsubscribe=R,this._next=V?function(A){try{V(A)}catch(M){W.error(M)}}:super._next,this._error=N?function(A){try{N(A)}catch(M){W.error(M)}finally{this.unsubscribe()}}:super._error,this._complete=k?function(){try{k()}catch(A){W.error(A)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var W;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:V}=this;super.unsubscribe(),!V&&(null===(W=this.onFinalize)||void 0===W||W.call(this))}}}},4004:(Te,X,U)=>{"use strict";U.d(X,{U:()=>S});var m=U(4482),K=U(5403);function S(H,W){return(0,m.e)((V,k)=>{let N=0;V.subscribe((0,K.x)(k,F=>{k.next(H.call(W,F,N++))}))})}},8189:(Te,X,U)=>{"use strict";U.d(X,{J:()=>S});var m=U(5577),K=U(4671);function S(H=1/0){return(0,m.z)(K.y,H)}},5577:(Te,X,U)=>{"use strict";U.d(X,{z:()=>N});var m=U(4004),K=U(8421),S=U(4482),H=U(9672),W=U(5403),k=U(576);function N(F,R,A=1/0){return(0,k.m)(R)?N((M,J)=>(0,m.U)((te,ae)=>R(M,te,J,ae))((0,K.Xf)(F(M,J))),A):("number"==typeof R&&(A=R),(0,S.e)((M,J)=>function V(F,R,A,M,J,te,ae,De){const le=[];let Ee=0,ve=0,Oe=!1;const ce=()=>{Oe&&!le.length&&!Ee&&R.complete()},we=$e=>Ee<M?Ne($e):le.push($e),Ne=$e=>{te&&R.next($e),Ee++;let ue=!1;(0,K.Xf)(A($e,ve++)).subscribe((0,W.x)(R,Y=>{J?.(Y),te?we(Y):R.next(Y)},()=>{ue=!0},void 0,()=>{if(ue)try{for(Ee--;le.length&&Ee<M;){const Y=le.shift();ae?(0,H.f)(R,ae,()=>Ne(Y)):Ne(Y)}ce()}catch(Y){R.error(Y)}}))};return F.subscribe((0,W.x)(R,we,()=>{Oe=!0,ce()})),()=>{De?.()}}(M,J,F,A)))}},5363:(Te,X,U)=>{"use strict";U.d(X,{Q:()=>H});var m=U(9672),K=U(4482),S=U(5403);function H(W,V=0){return(0,K.e)((k,N)=>{k.subscribe((0,S.x)(N,F=>(0,m.f)(N,W,()=>N.next(F),V),()=>(0,m.f)(N,W,()=>N.complete(),V),F=>(0,m.f)(N,W,()=>N.error(F),V)))})}},3099:(Te,X,U)=>{"use strict";U.d(X,{B:()=>W});var m=U(8421),K=U(7579),S=U(930),H=U(4482);function W(k={}){const{connector:N=(()=>new K.x),resetOnError:F=!0,resetOnComplete:R=!0,resetOnRefCountZero:A=!0}=k;return M=>{let J,te,ae,De=0,le=!1,Ee=!1;const ve=()=>{te?.unsubscribe(),te=void 0},Oe=()=>{ve(),J=ae=void 0,le=Ee=!1},ce=()=>{const we=J;Oe(),we?.unsubscribe()};return(0,H.e)((we,Ne)=>{De++,!Ee&&!le&&ve();const $e=ae=ae??N();Ne.add(()=>{De--,0===De&&!Ee&&!le&&(te=V(ce,A))}),$e.subscribe(Ne),!J&&De>0&&(J=new S.Hp({next:ue=>$e.next(ue),error:ue=>{Ee=!0,ve(),te=V(Oe,F,ue),$e.error(ue)},complete:()=>{le=!0,ve(),te=V(Oe,R),$e.complete()}}),(0,m.Xf)(we).subscribe(J))})(M)}}function V(k,N,...F){if(!0===N)return void k();if(!1===N)return;const R=new S.Hp({next:()=>{R.unsubscribe(),k()}});return N(...F).subscribe(R)}},9468:(Te,X,U)=>{"use strict";U.d(X,{R:()=>K});var m=U(4482);function K(S,H=0){return(0,m.e)((W,V)=>{V.add(S.schedule(()=>W.subscribe(V),H))})}},8505:(Te,X,U)=>{"use strict";U.d(X,{b:()=>W});var m=U(576),K=U(4482),S=U(5403),H=U(4671);function W(V,k,N){const F=(0,m.m)(V)||k||N?{next:V,error:k,complete:N}:V;return F?(0,K.e)((R,A)=>{var M;null===(M=F.subscribe)||void 0===M||M.call(F);let J=!0;R.subscribe((0,S.x)(A,te=>{var ae;null===(ae=F.next)||void 0===ae||ae.call(F,te),A.next(te)},()=>{var te;J=!1,null===(te=F.complete)||void 0===te||te.call(F),A.complete()},te=>{var ae;J=!1,null===(ae=F.error)||void 0===ae||ae.call(F,te),A.error(te)},()=>{var te,ae;J&&(null===(te=F.unsubscribe)||void 0===te||te.call(F)),null===(ae=F.finalize)||void 0===ae||ae.call(F)}))}):H.y}},4408:(Te,X,U)=>{"use strict";U.d(X,{o:()=>W});var m=U(727);class K extends m.w0{constructor(k,N){super()}schedule(k,N=0){return this}}const S={setInterval(V,k,...N){const{delegate:F}=S;return F?.setInterval?F.setInterval(V,k,...N):setInterval(V,k,...N)},clearInterval(V){const{delegate:k}=S;return(k?.clearInterval||clearInterval)(V)},delegate:void 0};var H=U(8737);class W extends K{constructor(k,N){super(k,N),this.scheduler=k,this.work=N,this.pending=!1}schedule(k,N=0){var F;if(this.closed)return this;this.state=k;const R=this.id,A=this.scheduler;return null!=R&&(this.id=this.recycleAsyncId(A,R,N)),this.pending=!0,this.delay=N,this.id=null!==(F=this.id)&&void 0!==F?F:this.requestAsyncId(A,this.id,N),this}requestAsyncId(k,N,F=0){return S.setInterval(k.flush.bind(k,this),F)}recycleAsyncId(k,N,F=0){if(null!=F&&this.delay===F&&!1===this.pending)return N;null!=N&&S.clearInterval(N)}execute(k,N){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const F=this._execute(k,N);if(F)return F;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(k,N){let R,F=!1;try{this.work(k)}catch(A){F=!0,R=A||new Error("Scheduled action threw falsy error")}if(F)return this.unsubscribe(),R}unsubscribe(){if(!this.closed){const{id:k,scheduler:N}=this,{actions:F}=N;this.work=this.state=this.scheduler=null,this.pending=!1,(0,H.P)(F,this),null!=k&&(this.id=this.recycleAsyncId(N,k,null)),this.delay=null,super.unsubscribe()}}}},7565:(Te,X,U)=>{"use strict";U.d(X,{v:()=>S});var m=U(6063);class K{constructor(W,V=K.now){this.schedulerActionCtor=W,this.now=V}schedule(W,V=0,k){return new this.schedulerActionCtor(this,W).schedule(k,V)}}K.now=m.l.now;class S extends K{constructor(W,V=K.now){super(W,V),this.actions=[],this._active=!1}flush(W){const{actions:V}=this;if(this._active)return void V.push(W);let k;this._active=!0;do{if(k=W.execute(W.state,W.delay))break}while(W=V.shift());if(this._active=!1,k){for(;W=V.shift();)W.unsubscribe();throw k}}}},4986:(Te,X,U)=>{"use strict";U.d(X,{z:()=>S});var m=U(4408);const S=new(U(7565).v)(m.o)},6063:(Te,X,U)=>{"use strict";U.d(X,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(Te,X,U)=>{"use strict";U.d(X,{z:()=>m});const m={setTimeout(K,S,...H){const{delegate:W}=m;return W?.setTimeout?W.setTimeout(K,S,...H):setTimeout(K,S,...H)},clearTimeout(K){const{delegate:S}=m;return(S?.clearTimeout||clearTimeout)(K)},delegate:void 0}},2202:(Te,X,U)=>{"use strict";U.d(X,{h:()=>K});const K=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Te,X,U)=>{"use strict";U.d(X,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Te,X,U)=>{"use strict";U.d(X,{_6:()=>V,jO:()=>H,yG:()=>W});var m=U(576);function S(k){return k[k.length-1]}function H(k){return(0,m.m)(S(k))?k.pop():void 0}function W(k){return function K(k){return k&&(0,m.m)(k.schedule)}(S(k))?k.pop():void 0}function V(k,N){return"number"==typeof S(k)?k.pop():N}},8737:(Te,X,U)=>{"use strict";function m(K,S){if(K){const H=K.indexOf(S);0<=H&&K.splice(H,1)}}U.d(X,{P:()=>m})},3888:(Te,X,U)=>{"use strict";function m(K){const H=K(W=>{Error.call(W),W.stack=(new Error).stack});return H.prototype=Object.create(Error.prototype),H.prototype.constructor=H,H}U.d(X,{d:()=>m})},2806:(Te,X,U)=>{"use strict";U.d(X,{O:()=>H,x:()=>S});var m=U(2416);let K=null;function S(W){if(m.v.useDeprecatedSynchronousErrorHandling){const V=!K;if(V&&(K={errorThrown:!1,error:null}),W(),V){const{errorThrown:k,error:N}=K;if(K=null,k)throw N}}else W()}function H(W){m.v.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=W)}},9672:(Te,X,U)=>{"use strict";function m(K,S,H,W=0,V=!1){const k=S.schedule(function(){H(),V?K.add(this.schedule(null,W)):this.unsubscribe()},W);if(K.add(k),!V)return k}U.d(X,{f:()=>m})},4671:(Te,X,U)=>{"use strict";function m(K){return K}U.d(X,{y:()=>m})},1144:(Te,X,U)=>{"use strict";U.d(X,{z:()=>m});const m=K=>K&&"number"==typeof K.length&&"function"!=typeof K},2206:(Te,X,U)=>{"use strict";U.d(X,{D:()=>K});var m=U(576);function K(S){return Symbol.asyncIterator&&(0,m.m)(S?.[Symbol.asyncIterator])}},576:(Te,X,U)=>{"use strict";function m(K){return"function"==typeof K}U.d(X,{m:()=>m})},3670:(Te,X,U)=>{"use strict";U.d(X,{c:()=>S});var m=U(8822),K=U(576);function S(H){return(0,K.m)(H[m.L])}},6495:(Te,X,U)=>{"use strict";U.d(X,{T:()=>S});var m=U(2202),K=U(576);function S(H){return(0,K.m)(H?.[m.h])}},8239:(Te,X,U)=>{"use strict";U.d(X,{t:()=>K});var m=U(576);function K(S){return(0,m.m)(S?.then)}},3260:(Te,X,U)=>{"use strict";U.d(X,{L:()=>H,Q:()=>S});var m=U(655),K=U(576);function S(W){return(0,m.FC)(this,arguments,function*(){const k=W.getReader();try{for(;;){const{value:N,done:F}=yield(0,m.qq)(k.read());if(F)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(N)}}finally{k.releaseLock()}})}function H(W){return(0,K.m)(W?.getReader)}},4482:(Te,X,U)=>{"use strict";U.d(X,{A:()=>K,e:()=>S});var m=U(576);function K(H){return(0,m.m)(H?.lift)}function S(H){return W=>{if(K(W))return W.lift(function(V){try{return H(V,this)}catch(k){this.error(k)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Te,X,U)=>{"use strict";function m(){}U.d(X,{Z:()=>m})},9635:(Te,X,U)=>{"use strict";U.d(X,{U:()=>S,z:()=>K});var m=U(4671);function K(...H){return S(H)}function S(H){return 0===H.length?m.y:1===H.length?H[0]:function(V){return H.reduce((k,N)=>N(k),V)}}},7849:(Te,X,U)=>{"use strict";U.d(X,{h:()=>S});var m=U(2416),K=U(3410);function S(H){K.z.setTimeout(()=>{const{onUnhandledError:W}=m.v;if(!W)throw H;W(H)})}},4532:(Te,X,U)=>{"use strict";function m(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(X,{z:()=>m})},655:(Te,X,U)=>{"use strict";function H(me,Ie){var Pe={};for(var Le in me)Object.prototype.hasOwnProperty.call(me,Le)&&Ie.indexOf(Le)<0&&(Pe[Le]=me[Le]);if(null!=me&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(Le=Object.getOwnPropertySymbols(me);He<Le.length;He++)Ie.indexOf(Le[He])<0&&Object.prototype.propertyIsEnumerable.call(me,Le[He])&&(Pe[Le[He]]=me[Le[He]])}return Pe}function M(me,Ie,Pe,Le){return new(Pe||(Pe=Promise))(function(Ge,et){function Je(en){try{Tt(Le.next(en))}catch(ot){et(ot)}}function un(en){try{Tt(Le.throw(en))}catch(ot){et(ot)}}function Tt(en){en.done?Ge(en.value):function He(Ge){return Ge instanceof Pe?Ge:new Pe(function(et){et(Ge)})}(en.value).then(Je,un)}Tt((Le=Le.apply(me,Ie||[])).next())})}function ce(me){return this instanceof ce?(this.v=me,this):new ce(me)}function we(me,Ie,Pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,Le=Pe.apply(me,Ie||[]),Ge=[];return He={},et("next"),et("throw"),et("return"),He[Symbol.asyncIterator]=function(){return this},He;function et(Ot){Le[Ot]&&(He[Ot]=function($n){return new Promise(function(yn,Sn){Ge.push([Ot,$n,yn,Sn])>1||Je(Ot,$n)})})}function Je(Ot,$n){try{!function un(Ot){Ot.value instanceof ce?Promise.resolve(Ot.value.v).then(Tt,en):ot(Ge[0][2],Ot)}(Le[Ot]($n))}catch(yn){ot(Ge[0][3],yn)}}function Tt(Ot){Je("next",Ot)}function en(Ot){Je("throw",Ot)}function ot(Ot,$n){Ot($n),Ge.shift(),Ge.length&&Je(Ge[0][0],Ge[0][1])}}function $e(me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,Ie=me[Symbol.asyncIterator];return Ie?Ie.call(me):(me=function De(me){var Ie="function"==typeof Symbol&&Symbol.iterator,Pe=Ie&&me[Ie],Le=0;if(Pe)return Pe.call(me);if(me&&"number"==typeof me.length)return{next:function(){return me&&Le>=me.length&&(me=void 0),{value:me&&me[Le++],done:!me}}};throw new TypeError(Ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(me),Pe={},Le("next"),Le("throw"),Le("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe);function Le(Ge){Pe[Ge]=me[Ge]&&function(et){return new Promise(function(Je,un){!function He(Ge,et,Je,un){Promise.resolve(un).then(function(Tt){Ge({value:Tt,done:Je})},et)}(Je,un,(et=me[Ge](et)).done,et.value)})}}}U.d(X,{FC:()=>we,KL:()=>$e,_T:()=>H,mG:()=>M,qq:()=>ce})},4650:(Te,X,U)=>{"use strict";U.d(X,{$8M:()=>na,$WT:()=>Us,$Z:()=>yp,AFp:()=>s0,AaK:()=>N,CHM:()=>Rd,CRH:()=>Hw,CZH:()=>U_,CqO:()=>Qm,D6c:()=>vA,EJc:()=>rA,EpF:()=>Qv,F4k:()=>Rh,FYo:()=>KE,FiY:()=>T,Gf:()=>$h,GfV:()=>dv,JOm:()=>lr,KtG:()=>Df,LFG:()=>We,Lbi:()=>fC,Lck:()=>tn,MAs:()=>Yv,MMx:()=>C_,NdJ:()=>Mp,OlP:()=>hn,P3R:()=>ov,PXZ:()=>lg,Q6J:()=>Sh,QGY:()=>Ym,Qsj:()=>fp,R0b:()=>os,RDi:()=>Qu,Rgc:()=>eg,SBq:()=>Lr,Sil:()=>sA,Suo:()=>eC,TTD:()=>co,TgZ:()=>Pp,Tol:()=>ow,VKq:()=>Li,X6Q:()=>CC,XFs:()=>wt,Xpm:()=>bu,Xts:()=>Kr,Y36:()=>fh,YKP:()=>Rw,YNc:()=>NI,Yjl:()=>Mc,Yz7:()=>ot,Z0I:()=>Sn,ZZ4:()=>Y_,_UZ:()=>qm,_Vd:()=>hp,_c5:()=>yA,_uU:()=>cw,aQg:()=>mg,c2e:()=>tA,cJS:()=>$n,cg1:()=>lc,dDg:()=>fd,dqk:()=>kt,eFA:()=>EC,eJc:()=>Ww,eoX:()=>Ic,f3M:()=>at,g9A:()=>ko,h0i:()=>td,hGG:()=>kC,hij:()=>jp,iGM:()=>Jb,ifc:()=>he,ip1:()=>r0,jDz:()=>Ow,kL8:()=>m_,lG2:()=>Oc,lqb:()=>Tl,lri:()=>ug,n5z:()=>ul,oAB:()=>Tu,oxw:()=>e_,q4F:()=>ZE,qLn:()=>gp,qZA:()=>Yr,rWj:()=>Ec,sBO:()=>hA,s_b:()=>x_,soG:()=>j_,tb:()=>vC,tp0:()=>L,uIk:()=>Gv,vHH:()=>le,vpe:()=>ss,wAp:()=>it,xp6:()=>rI,z2F:()=>Yh,zSh:()=>uv,zs3:()=>Al});var m=U(7579),K=U(727),S=U(9751),H=U(6451),W=U(3099);function V(s){for(let o in s)if(s[o]===V)return o;throw Error("Could not find renamed property on target object.")}function N(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(N).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function F(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const R=V({__forward_ref__:V});function A(s){return s.__forward_ref__=A,s.toString=function(){return N(this())},s}function M(s){return J(s)?s():s}function J(s){return"function"==typeof s&&s.hasOwnProperty(R)&&s.__forward_ref__===A}function te(s){return s&&!!s.\u0275providers}const De="https://g.co/ng/security#xss";class le extends Error{constructor(o,u){super(Ee(o,u)),this.code=o}}function Ee(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}function ve(s){return"string"==typeof s?s:null==s?"":String(s)}function $e(s,o){throw new le(-201,!1)}function et(s,o){null==s&&function Je(s,o,u,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${u} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function ot(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function $n(s){return{providers:s.providers||[],imports:s.imports||[]}}function yn(s){return Rn(s,Br)||Rn(s,En)}function Sn(s){return null!==yn(s)}function Rn(s,o){return s.hasOwnProperty(o)?s[o]:null}function fi(s){return s&&(s.hasOwnProperty(ks)||s.hasOwnProperty(ri))?s[ks]:null}const Br=V({\u0275prov:V}),ks=V({\u0275inj:V}),En=V({ngInjectableDef:V}),ri=V({ngInjectorDef:V});var wt=(()=>((wt=wt||{})[wt.Default=0]="Default",wt[wt.Host=1]="Host",wt[wt.Self=2]="Self",wt[wt.SkipSelf=4]="SkipSelf",wt[wt.Optional=8]="Optional",wt))();let Fs;function xn(s){const o=Fs;return Fs=s,o}function Sr(s,o,u){const l=yn(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:u&wt.Optional?null:void 0!==o?o:void $e(N(s))}const kt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),In={},Hn="__NG_DI_FLAG__",Ar="ngTempTokenPath",Rr="ngTokenPath",jo=/\n/gm,dn="\u0275",$i="__source";let Yt;function $r(s){const o=Yt;return Yt=s,o}function Hi(s,o=wt.Default){if(void 0===Yt)throw new le(-203,!1);return null===Yt?Sr(s,void 0,o):Yt.get(s,o&wt.Optional?null:void 0,o)}function We(s,o=wt.Default){return(function Ri(){return Fs}()||Hi)(M(s),o)}function at(s,o=wt.Default){return We(s,St(o))}function St(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Nt(s){const o=[];for(let u=0;u<s.length;u++){const l=M(s[u]);if(Array.isArray(l)){if(0===l.length)throw new le(900,!1);let d,p=wt.Default;for(let v=0;v<l.length;v++){const I=l[v],b=xr(I);"number"==typeof b?-1===b?d=I.token:p|=b:d=I}o.push(We(d,p))}else o.push(We(l))}return o}function jt(s,o){return s[Hn]=o,s.prototype[Hn]=o,s}function xr(s){return s[Hn]}function ie(s){return{toString:s}.toString()}var Re=(()=>((Re=Re||{})[Re.OnPush=0]="OnPush",Re[Re.Default=1]="Default",Re))(),he=(()=>{return(s=he||(he={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",he;var s})();const tt={},Qe=[],mn=V({\u0275cmp:V}),Pn=V({\u0275dir:V}),Fn=V({\u0275pipe:V}),ar=V({\u0275mod:V}),Ft=V({\u0275fac:V}),Hr=V({__NG_ELEMENT_ID__:V});let zi=0;function bu(s){return ie(()=>{const o=Pr(s),u={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===Re.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,data:s.data||{},encapsulation:s.encapsulation||he.Emulated,id:"c"+zi++,styles:s.styles||Qe,_:null,schemas:s.schemas||null,tView:null};Du(u);const l=s.dependencies;return u.directiveDefs=no(l,!1),u.pipeDefs=no(l,!0),u})}function Pc(s){return Qt(s)||Xn(s)}function Cu(s){return null!==s}function Tu(s){return ie(()=>({type:s.type,bootstrap:s.bootstrap||Qe,declarations:s.declarations||Qe,imports:s.imports||Qe,exports:s.exports||Qe,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Ln(s,o){if(null==s)return tt;const u={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),u[d]=l,o&&(o[d]=p)}return u}function Oc(s){return ie(()=>{const o=Pr(s);return Du(o),o})}function Mc(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Qt(s){return s[mn]||null}function Xn(s){return s[Pn]||null}function mr(s){return s[Fn]||null}function Us(s){const o=Qt(s)||Xn(s)||mr(s);return null!==o&&o.standalone}function ur(s,o){const u=s[ar]||null;if(!u&&!0===o)throw new Error(`Type ${N(s)} does not have '\u0275mod' property.`);return u}function Pr(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,exportAs:s.exportAs||null,standalone:!0===s.standalone,selectors:s.selectors||Qe,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ln(s.inputs,o),outputs:Ln(s.outputs)}}function Du(s){s.features?.forEach(o=>o(s))}function no(s,o){if(!s)return null;const u=o?mr:Pc;return()=>("function"==typeof s?s():s).map(l=>u(l)).filter(Cu)}const pi=0,nt=1,Lt=2,wn=3,ii=4,Gi=5,Un=6,ro=7,An=8,Vs=9,Aa=10,Ht=11,Bo=12,$o=13,io=14,Ra=15,_r=16,Ho=17,so=18,si=19,gi=20,Nc=21,Kt=22,kc=1,Su=2,oo=7,mi=8,zo=9,yr=10;function oi(s){return Array.isArray(s)&&"object"==typeof s[kc]}function ai(s){return Array.isArray(s)&&!0===s[kc]}function ds(s){return 0!=(4&s.flags)}function Au(s){return s.componentOffset>-1}function Go(s){return 1==(1&s.flags)}function Or(s){return!!s.template}function bd(s){return 0!=(256&s[Lt])}function ui(s,o){return s.hasOwnProperty(Ft)?s[Ft]:null}class Td{constructor(o,u,l){this.previousValue=o,this.currentValue=u,this.firstChange=l}isFirstChange(){return this.firstChange}}function co(){return Pa}function Pa(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ko),qo}function qo(){const s=jc(this),o=s?.current;if(o){const u=s.previous;if(u===tt)s.previous=o;else for(let l in o)u[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Ko(s,o,u,l){const d=this.declaredInputs[u],p=jc(s)||function Pu(s,o){return s[Oa]=o}(s,{previous:tt,current:null}),v=p.current||(p.current={}),I=p.previous,b=I[d];v[d]=new Td(b&&b.currentValue,o,I===tt),s[l]=o}co.ngInherit=!0;const Oa="__ngSimpleChanges__";function jc(s){return s[Oa]||null}const sn=function(s,o,u){};function On(s){for(;Array.isArray(s);)s=s[pi];return s}function qi(s,o){return On(o[s])}function Mr(s,o){return On(o[s.index])}function Bc(s,o){return s.data[o]}function vr(s,o){const u=o[s];return oi(u)?u:u[pi]}function lo(s){return 64==(64&s[Lt])}function xi(s,o){return null==o?null:s[o]}function Nu(s){s[so]=0}function ka(s,o){s[Gi]+=o;let u=s,l=s[wn];for(;null!==l&&(1===o&&1===u[Gi]||-1===o&&0===u[Gi]);)l[Gi]+=o,u=l,l=l[wn]}const Mt={lFrame:zg(null),bindingsEnabled:!0};function Ad(){return Mt.bindingsEnabled}function Fe(){return Mt.lFrame.lView}function Zt(){return Mt.lFrame.tView}function Rd(s){return Mt.lFrame.contextLView=s,s[An]}function Df(s){return Mt.lFrame.contextLView=null,s}function zn(){let s=Sf();for(;null!==s&&64===s.type;)s=s.parent;return s}function Sf(){return Mt.lFrame.currentTNode}function Pi(s,o){const u=Mt.lFrame;u.currentTNode=s,u.isParent=o}function Fu(){return Mt.lFrame.isParent}function ho(){return Mt.lFrame.bindingIndex++}function Yc(s,o){const u=Mt.lFrame;u.bindingIndex=u.bindingRootIndex=s,fs(o)}function fs(s){Mt.lFrame.currentDirectiveIndex=s}function Pd(){return Mt.lFrame.currentQueryIndex}function ju(s){Mt.lFrame.currentQueryIndex=s}function Hg(s){const o=s[nt];return 2===o.type?o.declTNode:1===o.type?s[Un]:null}function Xc(s,o,u){if(u&wt.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||u&wt.Host||(d=Hg(p),null===d||(p=p[Ra],10&d.type))););if(null===d)return!1;o=d,s=p}const l=Mt.lFrame=My();return l.currentTNode=o,l.lView=s,!0}function Od(s){const o=My(),u=s[nt];Mt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function My(){const s=Mt.lFrame,o=null===s?null:s.child;return null===o?zg(s):o}function zg(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Jc(){const s=Mt.lFrame;return Mt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Ny=Jc;function Rf(){const s=Jc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function zr(){return Mt.lFrame.selectedIndex}function $s(s){Mt.lFrame.selectedIndex=s}function fn(){const s=Mt.lFrame;return Bc(s.tView,s.selectedIndex)}function fo(s,o){for(let u=o.directiveStart,l=o.directiveEnd;u<l;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:b,ngAfterViewChecked:x,ngOnDestroy:j}=p;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),I&&((s.contentHooks||(s.contentHooks=[])).push(u,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,I)),b&&(s.viewHooks||(s.viewHooks=[])).push(-u,b),x&&((s.viewHooks||(s.viewHooks=[])).push(u,x),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,x)),null!=j&&(s.destroyHooks||(s.destroyHooks=[])).push(u,j)}}function tl(s,o,u){Yo(s,o,3,u)}function ps(s,o,u,l){(3&s[Lt])===u&&Yo(s,o,u,l)}function Zo(s,o){let u=s[Lt];(3&u)===o&&(u&=2047,u+=1,s[Lt]=u)}function Yo(s,o,u,l){const p=l??-1,v=o.length-1;let I=0;for(let b=void 0!==l?65535&s[so]:0;b<v;b++)if("number"==typeof o[b+1]){if(I=o[b],null!=l&&I>=l)break}else o[b]<0&&(s[so]+=65536),(I<p||-1==p)&&(Pf(s,u,o,b),s[so]=(4294901760&s[so])+b+2),b++}function Pf(s,o,u,l){const d=u[l]<0,p=u[l+1],I=s[d?-u[l]:u[l]];if(d){if(s[Lt]>>11<s[so]>>16&&(3&s[Lt])===o){s[Lt]+=2048,sn(4,I,p);try{p.call(I)}finally{sn(5,I,p)}}}else{sn(4,I,p);try{p.call(I)}finally{sn(5,I,p)}}}const gs=-1;class br{constructor(o,u,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=l}}function Qo(s,o,u){let l=0;for(;l<u.length;){const d=u[l];if("number"==typeof d){if(0!==d)break;l++;const p=u[l++],v=u[l++],I=u[l++];s.setAttribute(o,v,I,p)}else{const p=d,v=u[++l];Xo(p)?s.setProperty(o,p,v):s.setAttribute(o,p,v),l++}}return l}function ms(s){return 3===s||4===s||6===s}function Xo(s){return 64===s.charCodeAt(0)}function _s(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?u=d:0===u||nl(s,u,d,null,-1===u||2===u?o[++l]:null)}}return s}function nl(s,o,u,l,d){let p=0,v=s.length;if(-1===o)v=-1;else for(;p<s.length;){const I=s[p++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=p-1;break}}}for(;p<s.length;){const I=s[p];if("number"==typeof I)break;if(I===u){if(null===l)return void(null!==d&&(s[p+1]=d));if(l===s[p+1])return void(s[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==v&&(s.splice(v,0,o),p=v+1),s.splice(p++,0,u),null!==l&&s.splice(p++,0,l),null!==d&&s.splice(p++,0,d)}function rl(s){return s!==gs}function po(s){return 32767&s}function ys(s,o){let u=function Nf(s){return s>>16}(s),l=o;for(;u>0;)l=l[Ra],u--;return l}let Va=!0;function Qi(s){const o=Va;return Va=s,o}const ja=255,Ba=5;let Jo=0;const Gr={};function vs(s,o){const u=ol(s,o);if(-1!==u)return u;const l=o[nt];l.firstCreatePass&&(s.injectorIndex=o.length,ea(l.data,s),ea(o,null),ea(l.blueprint,null));const d=$a(s,o),p=s.injectorIndex;if(rl(d)){const v=po(d),I=ys(d,o),b=I[nt].data;for(let x=0;x<8;x++)o[p+x]=I[v+x]|b[v+x]}return o[p+8]=d,p}function ea(s,o){s.push(0,0,0,0,0,0,0,0,o)}function ol(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function $a(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,l=null,d=o;for(;null!==d;){if(l=cl(d),null===l)return gs;if(u++,d=d[Ra],-1!==l.injectorIndex)return l.injectorIndex|u<<16}return gs}function Ha(s,o,u){!function sl(s,o,u){let l;"string"==typeof u?l=u.charCodeAt(0)||0:u.hasOwnProperty(Hr)&&(l=u[Hr]),null==l&&(l=u[Hr]=Jo++);const d=l&ja;o.data[s+(d>>Ba)]|=1<<d}(s,o,u)}function za(s,o,u){if(u&wt.Optional||void 0!==s)return s;$e()}function kd(s,o,u,l){if(u&wt.Optional&&void 0===l&&(l=null),!(u&(wt.Self|wt.Host))){const d=s[Vs],p=xn(void 0);try{return d?d.get(o,l,u&wt.Optional):Sr(o,l,u&wt.Optional)}finally{xn(p)}}return za(l,0,u)}function Xi(s,o,u,l=wt.Default,d){if(null!==s){if(1024&o[Lt]){const v=function Fd(s,o,u,l,d){let p=s,v=o;for(;null!==p&&null!==v&&1024&v[Lt]&&!(256&v[Lt]);){const I=Ga(p,v,u,l|wt.Self,Gr);if(I!==Gr)return I;let b=p.parent;if(!b){const x=v[Nc];if(x){const j=x.get(u,Gr,l);if(j!==Gr)return j}b=cl(v),v=v[Ra]}p=b}return d}(s,o,u,l,Gr);if(v!==Gr)return v}const p=Ga(s,o,u,l,Gr);if(p!==Gr)return p}return kd(o,u,l,d)}function Ga(s,o,u,l,d){const p=function al(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Hr)?s[Hr]:void 0;return"number"==typeof o?o>=0?o&ja:kf:o}(u);if("function"==typeof p){if(!Xc(o,s,l))return l&wt.Host?za(d,0,l):kd(o,u,l,d);try{const v=p(l);if(null!=v||l&wt.Optional)return v;$e()}finally{Ny()}}else if("number"==typeof p){let v=null,I=ol(s,o),b=gs,x=l&wt.Host?o[_r][Un]:null;for((-1===I||l&wt.SkipSelf)&&(b=-1===I?$a(s,o):o[I+8],b!==gs&&mo(l,!1)?(v=o[nt],I=po(b),o=ys(b,o)):I=-1);-1!==I;){const j=o[nt];if(ws(p,I,j.data)){const q=Bu(I,o,u,v,l,x);if(q!==Gr)return q}b=o[I+8],b!==gs&&mo(l,o[nt].data[I+8]===x)&&ws(p,I,o)?(v=j,I=po(b),o=ys(b,o)):I=-1}}return d}function Bu(s,o,u,l,d,p){const v=o[nt],I=v.data[s+8],j=go(I,v,u,null==l?Au(I)&&Va:l!=v&&0!=(3&I.type),d&wt.Host&&p===I);return null!==j?zs(o,v,j,I):Gr}function go(s,o,u,l,d){const p=s.providerIndexes,v=o.data,I=1048575&p,b=s.directiveStart,j=p>>20,re=d?I+j:s.directiveEnd;for(let de=l?I:I+j;de<re;de++){const xe=v[de];if(de<b&&u===xe||de>=b&&xe.type===u)return de}if(d){const de=v[b];if(de&&Or(de)&&de.type===u)return b}return null}function zs(s,o,u,l){let d=s[u];const p=o.data;if(function La(s){return s instanceof br}(d)){const v=d;v.resolving&&function ce(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new le(-200,`Circular dependency in DI detected for ${s}${u}`)}(function Oe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ve(s)}(p[u]));const I=Qi(v.canSeeViewProviders);v.resolving=!0;const b=v.injectImpl?xn(v.injectImpl):null;Xc(s,l,wt.Default);try{d=s[u]=v.factory(void 0,p,s,l),o.firstCreatePass&&u>=l.directiveStart&&function Nd(s,o,u){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(l){const v=Pa(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==b&&xn(b),Qi(I),v.resolving=!1,Ny()}}return d}function ws(s,o,u){return!!(u[o+(s>>Ba)]&1<<s)}function mo(s,o){return!(s&wt.Self||s&wt.Host&&o)}class Wa{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,l){return Xi(this._tNode,this._lView,o,St(l),u)}}function kf(){return new Wa(zn(),Fe())}function ul(s){return ie(()=>{const o=s.prototype.constructor,u=o[Ft]||$u(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const p=d[Ft]||$u(d);if(p&&p!==u)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function $u(s){return J(s)?()=>{const o=$u(M(s));return o&&o()}:ui(s)}function cl(s){const o=s[nt],u=o.type;return 2===u?o.declTNode:1===u?s[Un]:null}function na(s){return function ta(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const l=u.length;let d=0;for(;d<l;){const p=u[d];if(ms(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof u[d];)d++;else{if(p===o)return u[d+1];d+=2}}}return null}(zn(),s)}const Hu="__parameters__";function _o(s,o,u){return ie(()=>{const l=function Ld(s){return function(...u){if(s){const l=s(...u);for(const d in l)this[d]=l[d]}}}(o);function d(...p){if(this instanceof d)return l.apply(this,p),this;const v=new d(...p);return I.annotation=v,I;function I(b,x,j){const q=b.hasOwnProperty(Hu)?b[Hu]:Object.defineProperty(b,Hu,{value:[]})[Hu];for(;q.length<=j;)q.push(null);return(q[j]=q[j]||[]).push(v),b}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class hn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=ot({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Is(s,o){s.forEach(u=>Array.isArray(u)?Is(u,o):o(u))}function dl(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Ka(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Fr(s,o,u){let l=Ji(s,o);return l>=0?s[1|l]=u:(l=~l,function Qg(s,o,u,l){let d=s.length;if(d==o)s.push(u,l);else if(1===d)s.push(l,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=l}}(s,l,o,u)),l}function vo(s,o){const u=Ji(s,o);if(u>=0)return s[1|u]}function Ji(s,o){return function $d(s,o,u){let l=0,d=s.length>>u;for(;d!==l;){const p=l+(d-l>>1),v=s[p<<u];if(o===v)return p<<u;v>o?d=p:l=p+1}return~(d<<u)}(s,o,1)}const T=jt(_o("Optional"),8),L=jt(_o("SkipSelf"),4);var lr=(()=>((lr=lr||{})[lr.Important=1]="Important",lr[lr.DashCase=2]="DashCase",lr))();const Hf=new Map;let qu=0;const Wf="__ngContext__";function gn(s,o){oi(o)?(s[Wf]=o[gi],function nm(s){Hf.set(s[gi],s)}(o)):s[Wf]=o}let Xa;function Wd(s,o){return Xa(s,o)}function Zu(s){const o=s[wn];return ai(o)?o[wn]:o}function Qf(s){return Jf(s[$o])}function Xf(s){return Jf(s[ii])}function Jf(s){for(;null!==s&&!ai(s);)s=s[ii];return s}function ua(s,o,u,l,d){if(null!=l){let p,v=!1;ai(l)?p=l:oi(l)&&(v=!0,l=l[pi]);const I=On(l);0===s&&null!==u?null==d?np(o,u,I):Mi(o,u,I,d||null,!0):1===s&&null!==u?Mi(o,u,I,d||null,!0):2===s?function wl(s,o,u){const l=vl(s,o);l&&function um(s,o,u,l){s.removeChild(o,u,l)}(s,l,o,u)}(o,I,v):3===s&&o.destroyNode(I),null!=p&&function dm(s,o,u,l,d){const p=u[oo];p!==On(u)&&ua(o,s,l,p,d);for(let I=yr;I<u.length;I++){const b=u[I];bo(b[nt],b,s,o,l,p)}}(o,s,p,u,d)}}function Ja(s,o,u){return s.createElement(o,u)}function tp(s,o){const u=s[zo],l=u.indexOf(o),d=o[wn];512&o[Lt]&&(o[Lt]&=-513,ka(d,-1)),u.splice(l,1)}function _l(s,o){if(s.length<=yr)return;const u=yr+o,l=s[u];if(l){const d=l[Ho];null!==d&&d!==s&&tp(d,l),o>0&&(s[u-1][ii]=l[ii]);const p=Ka(s,yr+o);!function qy(s,o){bo(s,o,o[Ht],2,null,null),o[pi]=null,o[Un]=null}(l[nt],l);const v=p[si];null!==v&&v.detachView(p[nt]),l[wn]=null,l[ii]=null,l[Lt]&=-65}return l}function am(s,o){if(!(128&o[Lt])){const u=o[Ht];u.destroyNode&&bo(s,o,u,3,null,null),function Ky(s){let o=s[$o];if(!o)return Zd(s[nt],s);for(;o;){let u=null;if(oi(o))u=o[$o];else{const l=o[yr];l&&(u=l)}if(!u){for(;o&&!o[ii]&&o!==s;)oi(o)&&Zd(o[nt],o),o=o[wn];null===o&&(o=s),oi(o)&&Zd(o[nt],o),u=o&&o[ii]}o=u}}(o)}}function Zd(s,o){if(!(128&o[Lt])){o[Lt]&=-65,o[Lt]|=128,function Yd(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let l=0;l<u.length;l+=2){const d=o[u[l]];if(!(d instanceof br)){const p=u[l+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const I=d[p[v]],b=p[v+1];sn(4,I,b);try{b.call(I)}finally{sn(5,I,b)}}else{sn(4,d,p);try{p.call(d)}finally{sn(5,d,p)}}}}}(s,o),function Zy(s,o){const u=s.cleanup,l=o[ro];let d=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const v=u[p+3];v>=0?l[d=v]():l[d=-v].unsubscribe(),p+=2}else{const v=l[d=u[p+1]];u[p].call(v)}if(null!==l){for(let p=d+1;p<l.length;p++)(0,l[p])();o[ro]=null}}(s,o),1===o[nt].type&&o[Ht].destroy();const u=o[Ho];if(null!==u&&ai(o[wn])){u!==o[wn]&&tp(u,o);const l=o[si];null!==l&&l.detachView(s)}!function Gf(s){Hf.delete(s[gi])}(o)}}function Qd(s,o,u){return function Xd(s,o,u){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return u[pi];{const{componentOffset:d}=l;if(d>-1){const{encapsulation:p}=s.data[l.directiveStart+d];if(p===he.None||p===he.Emulated)return null}return Mr(l,u)}}(s,o.parent,u)}function Mi(s,o,u,l,d){s.insertBefore(o,u,l,d)}function np(s,o,u){s.appendChild(o,u)}function rp(s,o,u,l,d){null!==l?Mi(s,o,u,l,d):np(s,o,u)}function vl(s,o){return s.parentNode(o)}let th,bs,Xu,eh=function Jd(s,o,u){return 40&s.type?Mr(s,u):null};function Yu(s,o,u,l){const d=Qd(s,l,o),p=o[Ht],I=function ip(s,o,u){return eh(s,o,u)}(l.parent||o[Un],l,o);if(null!=d)if(Array.isArray(u))for(let b=0;b<u.length;b++)rp(p,d,u[b],I,!1);else rp(p,d,u,I,!1);void 0!==th&&th(p,l,o,u,d)}function nh(s,o){if(null!==o){const u=o.type;if(3&u)return Mr(o,s);if(4&u)return Ws(-1,s[o.index]);if(8&u){const l=o.child;if(null!==l)return nh(s,l);{const d=s[o.index];return ai(d)?Ws(-1,d):On(d)}}if(32&u)return Wd(o,s)()||On(s[o.index]);{const l=vi(s,o);return null!==l?Array.isArray(l)?l[0]:nh(Zu(s[_r]),l):nh(s,o.next)}}return null}function vi(s,o){return null!==o?s[_r][Un].projection[o.projection]:null}function Ws(s,o){const u=yr+s+1;if(u<o.length){const l=o[u],d=l[nt].firstChild;if(null!==d)return nh(l,d)}return o[oo]}function rh(s,o,u,l,d,p,v){for(;null!=u;){const I=l[u.index],b=u.type;if(v&&0===o&&(I&&gn(On(I),l),u.flags|=2),32!=(32&u.flags))if(8&b)rh(s,o,u.child,l,d,p,!1),ua(o,s,d,I,p);else if(32&b){const x=Wd(u,l);let j;for(;j=x();)ua(o,s,d,j,p);ua(o,s,d,I,p)}else 16&b?lm(s,o,l,u,d,p):ua(o,s,d,I,p);u=v?u.projectionNext:u.next}}function bo(s,o,u,l,d,p){rh(u,l,s.firstChild,o,d,p,!1)}function lm(s,o,u,l,d,p){const v=u[_r],b=v[Un].projection[l.projection];if(Array.isArray(b))for(let x=0;x<b.length;x++)ua(o,s,d,b[x],p);else rh(s,o,b,v[wn],d,p,!0)}function ih(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function op(s,o,u){const{mergedAttrs:l,classes:d,styles:p}=u;null!==l&&Qo(s,o,l),null!==d&&ih(s,o,d),null!==p&&function Co(s,o,u){s.setAttribute(o,"style",u)}(s,o,p)}function Qu(s){bs=s}function oh(s){return function Il(){if(void 0===Xu&&(Xu=null,kt.trustedTypes))try{Xu=kt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Xu}()?.createScriptURL(s)||s}class Xy{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${De})`}}function P(s){return s instanceof Xy?s.changingThisBreaksApplicationSecurity:s}function B(s,o){const u=function se(s){return s instanceof Xy&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${De})`)}return u===o}const bl=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var wr=(()=>((wr=wr||{})[wr.NONE=0]="NONE",wr[wr.HTML=1]="HTML",wr[wr.STYLE=2]="STYLE",wr[wr.SCRIPT=3]="SCRIPT",wr[wr.URL=4]="URL",wr[wr.RESOURCE_URL=5]="RESOURCE_URL",wr))();function FE(s){const o=nu();return o?o.sanitize(wr.URL,s)||"":B(s,"URL")?P(s):function ec(s){return(s=String(s)).match(bl)?s:"unsafe:"+s}(ve(s))}function sv(s){const o=nu();if(o)return oh(o.sanitize(wr.RESOURCE_URL,s)||"");if(B(s,"ResourceURL"))return oh(P(s));throw new le(904,!1)}function ov(s,o,u){return function ch(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?sv:FE}(o,u)(s)}function nu(){const s=Fe();return s&&s[Bo]}const Kr=new hn("ENVIRONMENT_INITIALIZER"),LE=new hn("INJECTOR",-1),UE=new hn("INJECTOR_DEF_TYPES");class VE{get(o,u=In){if(u===In){const l=new Error(`NullInjectorError: No provider for ${N(o)}!`);throw l.name="NullInjectorError",l}return u}}function ED(...s){return{\u0275providers:jE(0,s),\u0275fromNgModule:!0}}function jE(s,...o){const u=[],l=new Set;let d;return Is(o,p=>{const v=p;ym(v,u,[],l)&&(d||(d=[]),d.push(v))}),void 0!==d&&lp(d,u),u}function lp(s,o){for(let u=0;u<s.length;u++){const{providers:d}=s[u];dp(d,p=>{o.push(p)})}}function ym(s,o,u,l){if(!(s=M(s)))return!1;let d=null,p=fi(s);const v=!p&&Qt(s);if(p||v){if(v&&!v.standalone)return!1;d=s}else{const b=s.ngModule;if(p=fi(b),!p)return!1;d=b}const I=l.has(d);if(v){if(I)return!1;if(l.add(d),v.dependencies){const b="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const x of b)ym(x,o,u,l)}}else{if(!p)return!1;{if(null!=p.imports&&!I){let x;l.add(d);try{Is(p.imports,j=>{ym(j,o,u,l)&&(x||(x=[]),x.push(j))})}finally{}void 0!==x&&lp(x,o)}if(!I){const x=ui(d)||(()=>new d);o.push({provide:d,useFactory:x,deps:Qe},{provide:UE,useValue:d,multi:!0},{provide:Kr,useValue:()=>We(d),multi:!0})}const b=p.providers;null==b||I||dp(b,j=>{o.push(j)})}}return d!==s&&void 0!==s.providers}function dp(s,o){for(let u of s)te(u)&&(u=u.\u0275providers),Array.isArray(u)?dp(u,o):o(u)}const ru=V({provide:String,useValue:V});function vm(s){return null!==s&&"object"==typeof s&&ru in s}function Cl(s){return"function"==typeof s}const uv=new hn("Set Injector scope."),Em={},ID={};let cv;function Im(){return void 0===cv&&(cv=new VE),cv}class Tl{}class $E extends Tl{get destroyed(){return this._destroyed}constructor(o,u,l,d){super(),this.parent=u,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Cm(o,v=>this.processProvider(v)),this.records.set(LE,nc(void 0,this)),d.has("environment")&&this.records.set(Tl,nc(void 0,this));const p=this.records.get(uv);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(UE.multi,Qe,wt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=$r(this),l=xn(void 0);try{return o()}finally{$r(u),xn(l)}}get(o,u=In,l=wt.Default){this.assertNotDestroyed(),l=St(l);const d=$r(this),p=xn(void 0);try{if(!(l&wt.SkipSelf)){let I=this.records.get(o);if(void 0===I){const b=function zE(s){return"function"==typeof s||"object"==typeof s&&s instanceof hn}(o)&&yn(o);I=b&&this.injectableDefInScope(b)?nc(lv(o),Em):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(l&wt.Self?Im():this.parent).get(o,u=l&wt.Optional&&u===In?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[Ar]=v[Ar]||[]).unshift(N(o)),d)throw v;return function ee(s,o,u,l){const d=s[Ar];throw o[$i]&&d.unshift(o[$i]),s.message=function Q(s,o,u,l=null){s=s&&"\n"===s.charAt(0)&&s.charAt(1)==dn?s.slice(2):s;let d=N(o);if(Array.isArray(o))d=o.map(N).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];p.push(v+":"+("string"==typeof I?JSON.stringify(I):N(I)))}d=`{${p.join(", ")}}`}return`${u}${l?"("+l+")":""}[${d}]: ${s.replace(jo,"\n  ")}`}("\n"+s.message,d,u,l),s[Rr]=d,s[Ar]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{xn(p),$r(d)}}resolveInjectorInitializers(){const o=$r(this),u=xn(void 0);try{const l=this.get(Kr.multi,Qe,wt.Self);for(const d of l)d()}finally{$r(o),xn(u)}}toString(){const o=[],u=this.records;for(const l of u.keys())o.push(N(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new le(205,!1)}processProvider(o){let u=Cl(o=M(o))?o:M(o&&o.provide);const l=function Cs(s){return vm(s)?nc(void 0,s.useValue):nc(function bm(s,o,u){let l;if(Cl(s)){const d=M(s);return ui(d)||lv(d)}if(vm(s))l=()=>M(s.useValue);else if(function av(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...Nt(s.deps||[]));else if(function iu(s){return!(!s||!s.useExisting)}(s))l=()=>We(M(s.useExisting));else{const d=M(s&&(s.useClass||s.provide));if(!function HE(s){return!!s.deps}(s))return ui(d)||lv(d);l=()=>new d(...Nt(s.deps))}return l}(s),Em)}(o);if(Cl(o)||!0!==o.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=nc(void 0,Em,!0),d.factory=()=>Nt(d.multi),this.records.set(u,d)),u=o,d.multi.push(o)}this.records.set(u,l)}hydrate(o,u){return u.value===Em&&(u.value=ID,u.value=u.factory()),"object"==typeof u.value&&u.value&&function CD(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=M(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function lv(s){const o=yn(s),u=null!==o?o.factory:ui(s);if(null!==u)return u;if(s instanceof hn)throw new le(204,!1);if(s instanceof Function)return function bD(s){const o=s.length;if(o>0)throw function Gs(s,o){const u=[];for(let l=0;l<s;l++)u.push(o);return u}(o,"?"),new le(204,!1);const u=function ni(s){const o=s&&(s[Br]||s[En]);return o?(function Ns(s){if(s.hasOwnProperty("name"))return s.name;(""+s).match(/^function\s*([^\s(]+)/)}(s),o):null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new le(204,!1)}function nc(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Cm(s,o){for(const u of s)Array.isArray(u)?Cm(u,o):u&&te(u)?Cm(u.\u0275providers,o):o(u)}class TD{}class GE{}class SD{resolveComponentFactory(o){throw function DD(s){const o=Error(`No component factory found for ${N(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let hp=(()=>{class s{}return s.NULL=new SD,s})();function qE(){return lh(zn(),Fe())}function lh(s,o){return new Lr(Mr(s,o))}let Lr=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=qE,s})();function Tm(s){return s instanceof Lr?s.nativeElement:s}class KE{}let fp=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function AD(){const s=Fe(),u=vr(zn().index,s);return(oi(u)?u:s)[Ht]}(),s})(),RD=(()=>{class s{}return s.\u0275prov=ot({token:s,providedIn:"root",factory:()=>null}),s})();class dv{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const ZE=new dv("15.2.4"),pp={},Dm="ngOriginalError";function hv(s){return s[Dm]}class gp{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&hv(o);for(;u&&hv(u);)u=hv(u);return u||null}}function su(s){return s instanceof Function?s():s}function fv(s,o,u){let l=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===l||s.charCodeAt(d+p)<=32)return d}u=d+1}}const _p="ng-template";function pv(s,o,u){let l=0,d=!0;for(;l<s.length;){let p=s[l++];if("string"==typeof p&&d){const v=s[l++];if(u&&"class"===p&&-1!==fv(v.toLowerCase(),o,0))return!0}else{if(1===p){for(;l<s.length&&"string"==typeof(p=s[l++]);)if(p.toLowerCase()===o)return!0;return!1}"number"==typeof p&&(d=!1)}}return!1}function JE(s){return 4===s.type&&s.value!==_p}function ND(s,o,u){return o===(4!==s.type||u?s.value:_p)}function eI(s,o,u){let l=4;const d=s.attrs||[],p=function FD(s){for(let o=0;o<s.length;o++)if(ms(s[o]))return o;return s.length}(d);let v=!1;for(let I=0;I<o.length;I++){const b=o[I];if("number"!=typeof b){if(!v)if(4&l){if(l=2|1&l,""!==b&&!ND(s,b,u)||""===b&&1===o.length){if(So(l))return!1;v=!0}}else{const x=8&l?b:o[++I];if(8&l&&null!==s.attrs){if(!pv(s.attrs,x,u)){if(So(l))return!1;v=!0}continue}const q=kD(8&l?"class":b,d,JE(s),u);if(-1===q){if(So(l))return!1;v=!0;continue}if(""!==x){let re;re=q>p?"":d[q+1].toLowerCase();const de=8&l?re:null;if(de&&-1!==fv(de,x,0)||2&l&&x!==re){if(So(l))return!1;v=!0}}}}else{if(!v&&!So(l)&&!So(b))return!1;if(v&&So(b))continue;v=!1,l=b|1&l}}return So(l)||v}function So(s){return 0==(1&s)}function kD(s,o,u,l){if(null===o)return-1;let d=0;if(l||!u){let p=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)p=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=p?1:2}return-1}return function hh(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const l=s[u];if("number"==typeof l)return-1;if(l===o)return u;u++}return-1}(o,s)}function wi(s,o,u=!1){for(let l=0;l<o.length;l++)if(eI(s,o[l],u))return!0;return!1}function nI(s,o){return s?":not("+o.trim()+")":o}function LD(s){let o=s[0],u=1,l=2,d="",p=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&l){const I=s[++u];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!So(v)&&(o+=nI(p,d),d=""),l=v,p=p||!So(l);u++}return""!==d&&(o+=nI(p,d)),o}const zt={};function rI(s){iI(Zt(),Fe(),zr()+s,!1)}function iI(s,o,u,l){if(!l)if(3==(3&o[Lt])){const p=s.preOrderCheckHooks;null!==p&&tl(o,p,u)}else{const p=s.preOrderHooks;null!==p&&ps(o,p,0,u)}$s(u)}function Am(s,o=null,u=null,l){const d=_v(s,o,u,l);return d.resolveInjectorInitializers(),d}function _v(s,o=null,u=null,l,d=new Set){const p=[u||Qe,ED(s)];return l=l||("object"==typeof s?void 0:N(s)),new $E(p,o||Im(),l||null,d)}let Al=(()=>{class s{static create(u,l){if(Array.isArray(u))return Am({name:""},l,u,"");{const d=u.name??"";return Am({name:d},u.parent,u.providers,d)}}}return s.THROW_IF_NOT_FOUND=In,s.NULL=new VE,s.\u0275prov=ot({token:s,providedIn:"any",factory:()=>We(LE)}),s.__NG_ELEMENT_ID__=-1,s})();function fh(s,o=wt.Default){const u=Fe();return null===u?We(s,o):Xi(zn(),u,M(s),o)}function yp(){throw new Error("invalid")}function Tv(s,o){const u=s.contentQueries;if(null!==u)for(let l=0;l<u.length;l+=2){const p=u[l+1];if(-1!==p){const v=s.data[p];ju(u[l]),v.contentQueries(2,o[p],p)}}}function vp(s,o,u,l,d,p,v,I,b,x,j){const q=o.blueprint.slice();return q[pi]=d,q[Lt]=76|l,(null!==j||s&&1024&s[Lt])&&(q[Lt]|=1024),Nu(q),q[wn]=q[Ra]=s,q[An]=u,q[Aa]=v||s&&s[Aa],q[Ht]=I||s&&s[Ht],q[Bo]=b||s&&s[Bo]||null,q[Vs]=x||s&&s[Vs]||null,q[Un]=p,q[gi]=function zf(){return qu++}(),q[Nc]=j,q[_r]=2==o.type?s[_r]:q,q}function ph(s,o,u,l,d){let p=s.data[o];if(null===p)p=function Dv(s,o,u,l,d){const p=Sf(),v=Fu(),b=s.data[o]=function rS(s,o,u,l,d,p){return{type:u,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,u,o,l,d);return null===s.firstChild&&(s.firstChild=b),null!==p&&(v?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b,b.prev=p)),b}(s,o,u,l,d),function Vu(){return Mt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=u,p.value=l,p.attrs=d;const v=function Bs(){const s=Mt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return Pi(p,!0),p}function wp(s,o,u,l){if(0===u)return-1;const d=o.length;for(let p=0;p<u;p++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function Sv(s,o,u){Od(o);try{const l=s.viewQuery;null!==l&&wh(1,l,u);const d=s.template;null!==d&&mI(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Tv(s,o),s.staticViewQueries&&wh(2,s.viewQuery,u);const p=s.components;null!==p&&function gI(s,o){for(let u=0;u<o.length;u++)EI(s,o[u])}(o,p)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[Lt]&=-5,Rf()}}function Rm(s,o,u,l){const d=o[Lt];if(128!=(128&d)){Od(o);try{Nu(o),function Kc(s){return Mt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&mI(s,o,u,2,l);const v=3==(3&d);if(v){const x=s.preOrderCheckHooks;null!==x&&tl(o,x,null)}else{const x=s.preOrderHooks;null!==x&&ps(o,x,0,null),Zo(o,0)}if(function cS(s){for(let o=Qf(s);null!==o;o=Xf(o)){if(!o[Su])continue;const u=o[zo];for(let l=0;l<u.length;l++){const d=u[l];512&d[Lt]||ka(d[wn],1),d[Lt]|=512}}}(o),function rc(s){for(let o=Qf(s);null!==o;o=Xf(o))for(let u=yr;u<o.length;u++){const l=o[u],d=l[nt];lo(l)&&Rm(d,l,d.template,l[An])}}(o),null!==s.contentQueries&&Tv(s,o),v){const x=s.contentCheckHooks;null!==x&&tl(o,x)}else{const x=s.contentHooks;null!==x&&ps(o,x,1),Zo(o,1)}!function pI(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let l=0;l<u.length;l++){const d=u[l];if(d<0)$s(~d);else{const p=d,v=u[++l],I=u[++l];Yc(v,p),I(2,o[p])}}}finally{$s(-1)}}(s,o);const I=s.components;null!==I&&function ou(s,o){for(let u=0;u<o.length;u++)wI(s,o[u])}(o,I);const b=s.viewQuery;if(null!==b&&wh(2,b,l),v){const x=s.viewCheckHooks;null!==x&&tl(o,x)}else{const x=s.viewHooks;null!==x&&ps(o,x,2),Zo(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[Lt]&=-41,512&o[Lt]&&(o[Lt]&=-513,ka(o[wn],-1))}finally{Rf()}}}function mI(s,o,u,l,d){const p=zr(),v=2&l;try{$s(-1),v&&o.length>Kt&&iI(s,o,Kt,!1),sn(v?2:0,d),u(l,d)}finally{$s(p),sn(v?3:1,d)}}function xm(s,o,u){if(ds(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const v=s.data[p];v.contentQueries&&v.contentQueries(1,u[p],p)}}}function gh(s,o,u){Ad()&&(function au(s,o,u,l){const d=u.directiveStart,p=u.directiveEnd;Au(u)&&function uS(s,o,u){const l=Mr(o,s),d=_I(u),p=s[Aa],v=km(s,vp(s,d,null,u.onPush?32:16,l,o,p,p.createRenderer(l,u),null,null,null));s[o.index]=v}(o,u,s.data[d+u.componentOffset]),s.firstCreatePass||vs(u,o),gn(l,o);const v=u.initialInputs;for(let I=d;I<p;I++){const b=s.data[I],x=zs(o,s,I,u);gn(x,o),null!==v&&Ii(0,I-d,x,b,0,v),Or(b)&&(vr(u.index,o)[An]=zs(o,s,I,u))}}(s,o,u,Mr(u,o)),64==(64&u.flags)&&vt(s,o,u))}function Av(s,o,u=Mr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let p=0;p<l.length;p+=2){const v=l[p+1],I=-1===v?u(o,s):s[v];s[d++]=I}}}function _I(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Rv(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Rv(s,o,u,l,d,p,v,I,b,x){const j=Kt+l,q=j+d,re=function eS(s,o){const u=[];for(let l=0;l<o;l++)u.push(l<s?null:zt);return u}(j,q),de="function"==typeof x?x():x;return re[nt]={type:s,blueprint:re,template:u,queries:null,viewQuery:I,declTNode:o,data:re.slice().fill(null,j),bindingStartIndex:j,expandoStartIndex:q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:b,consts:de,incompleteFirstPass:!1}}function nS(s,o,u,l){const d=Fm(o);null===u?d.push(l):(d.push(u),s.firstCreatePass&&bI(s).push(l,d.length-1))}function yI(s,o,u,l){for(let d in s)if(s.hasOwnProperty(d)){u=null===u?{}:u;const p=s[d];null===l?mh(u,o,d,p):l.hasOwnProperty(d)&&mh(u,o,l[d],p)}return u}function mh(s,o,u,l){s.hasOwnProperty(u)?s[u].push(o,l):s[u]=[o,l]}function Pm(s,o){const u=vr(o,s);16&u[Lt]||(u[Lt]|=32)}function Om(s,o,u,l){if(Ad()){const d=null===l?null:{"":-1},p=function Bt(s,o){const u=s.directiveRegistry;let l=null,d=null;if(u)for(let p=0;p<u.length;p++){const v=u[p];if(wi(o,v.selectors,!1))if(l||(l=[]),Or(v))if(null!==v.findHostDirectiveDefs){const I=[];d=d||new Map,v.findHostDirectiveDefs(v,I,d),l.unshift(...I,v),yh(s,o,I.length)}else l.unshift(v),yh(s,o,0);else d=d||new Map,v.findHostDirectiveDefs?.(v,l,d),l.push(v)}return null===l?null:[l,d]}(s,u);let v,I;null===p?v=I=null:[v,I]=p,null!==v&&vI(s,o,u,v,d,I),d&&function Mm(s,o,u){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=u[o[d+1]];if(null==p)throw new le(-301,!1);l.push(o[d],p)}}}(u,l,d)}u.mergedAttrs=_s(u.mergedAttrs,u.attrs)}function vI(s,o,u,l,d,p){for(let x=0;x<l.length;x++)Ha(vs(u,o),s,l[x].type);!function aS(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,l.length);for(let x=0;x<l.length;x++){const j=l[x];j.providersResolver&&j.providersResolver(j)}let v=!1,I=!1,b=wp(s,o,l.length,null);for(let x=0;x<l.length;x++){const j=l[x];u.mergedAttrs=_s(u.mergedAttrs,j.hostAttrs),Ov(s,u,o,b,j),Ep(b,j,d),null!==j.contentQueries&&(u.flags|=4),(null!==j.hostBindings||null!==j.hostAttrs||0!==j.hostVars)&&(u.flags|=64);const q=j.type.prototype;!v&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),v=!0),!I&&(q.ngOnChanges||q.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),I=!0),b++}!function iS(s,o,u){const d=o.directiveEnd,p=s.data,v=o.attrs,I=[];let b=null,x=null;for(let j=o.directiveStart;j<d;j++){const q=p[j],re=u?u.get(q):null,xe=re?re.outputs:null;b=yI(q.inputs,j,b,re?re.inputs:null),x=yI(q.outputs,j,x,xe);const ze=null===b||null===v||JE(o)?null:Nm(b,j,v);I.push(ze)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=8),b.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=b,o.outputs=x}(s,u,p)}function vt(s,o,u){const l=u.directiveStart,d=u.directiveEnd,p=u.index,v=function Af(){return Mt.lFrame.currentDirectiveIndex}();try{$s(p);for(let I=l;I<d;I++){const b=s.data[I],x=o[I];fs(I),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&Pv(b,x)}}finally{$s(-1),fs(v)}}function Pv(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function yh(s,o,u){o.componentOffset=u,(s.components||(s.components=[])).push(o.index)}function Ep(s,o,u){if(u){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)u[o.exportAs[l]]=s;Or(o)&&(u[""]=s)}}function Ov(s,o,u,l,d){s.data[l]=d;const p=d.factory||(d.factory=ui(d.type)),v=new br(p,Or(d),fh);s.blueprint[l]=v,u[l]=v,function WP(s,o,u,l,d){const p=d.hostBindings;if(p){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const I=~o.index;(function oS(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(v)!=I&&v.push(I),v.push(u,l,p)}}(s,o,l,wp(s,u,d.hostVars,zt),d)}function ha(s,o,u,l,d,p){const v=Mr(s,o);!function Mv(s,o,u,l,d,p,v){if(null==p)s.removeAttribute(o,d,u);else{const I=null==v?ve(p):v(p,l||"",d);s.setAttribute(o,d,I,u)}}(o[Ht],v,p,s.value,u,l,d)}function Ii(s,o,u,l,d,p){const v=p[o];if(null!==v){const I=l.setInput;for(let b=0;b<v.length;){const x=v[b++],j=v[b++],q=v[b++];null!==I?l.setInput(u,q,x,j):u[j]=q}}}function Nm(s,o,u){let l=null,d=0;for(;d<u.length;){const p=u[d];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===l&&(l=[]);const v=s[p];for(let I=0;I<v.length;I+=2)if(v[I]===o){l.push(p,v[I+1],u[d+1]);break}}d+=2}else d+=2;else d+=4}return l}function Zr(s,o,u,l){return[s,!0,!1,o,null,0,l,u,null,null]}function wI(s,o){const u=vr(o,s);if(lo(u)){const l=u[nt];48&u[Lt]?Rm(l,u,l.template,u[An]):u[Gi]>0&&Ip(u)}}function Ip(s){for(let l=Qf(s);null!==l;l=Xf(l))for(let d=yr;d<l.length;d++){const p=l[d];if(lo(p))if(512&p[Lt]){const v=p[nt];Rm(v,p,v.template,p[An])}else p[Gi]>0&&Ip(p)}const u=s[nt].components;if(null!==u)for(let l=0;l<u.length;l++){const d=vr(u[l],s);lo(d)&&d[Gi]>0&&Ip(d)}}function EI(s,o){const u=vr(o,s),l=u[nt];(function bi(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(l,u),Sv(l,u,u[An])}function km(s,o){return s[$o]?s[io][ii]=o:s[$o]=o,s[io]=o,o}function vh(s){for(;s;){s[Lt]|=32;const o=Zu(s);if(bd(s)&&!o)return s;s=o}return null}function bp(s,o,u,l=!0){const d=o[Aa];d.begin&&d.begin();try{Rm(s,o,s.template,u)}catch(v){throw l&&xl(o,v),v}finally{d.end&&d.end()}}function wh(s,o,u){ju(0),o(s,u)}function Fm(s){return s[ro]||(s[ro]=[])}function bI(s){return s.cleanup||(s.cleanup=[])}function xl(s,o){const u=s[Vs],l=u?u.get(gp,null):null;l&&l.handleError(o)}function Lm(s,o,u,l,d){for(let p=0;p<u.length;){const v=u[p++],I=u[p++],b=o[v],x=s.data[v];null!==x.setInput?x.setInput(b,d,l,I):b[I]=d}}function Cp(s,o,u){let l=u?s.styles:null,d=u?s.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?p=I:1==p?d=F(d,I):2==p&&(l=F(l,I+": "+o[++v]+";"))}u?s.styles=l:s.stylesWithoutHost=l,u?s.classes=d:s.classesWithoutHost=d}function Um(s,o,u,l,d=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&l.push(On(p)),ai(p))for(let I=yr;I<p.length;I++){const b=p[I],x=b[nt].firstChild;null!==x&&Um(b[nt],b,x,l)}const v=u.type;if(8&v)Um(s,o,u.child,l);else if(32&v){const I=Wd(u,o);let b;for(;b=I();)l.push(b)}else if(16&v){const I=vi(o,u);if(Array.isArray(I))l.push(...I);else{const b=Zu(o[_r]);Um(b[nt],b,I,l,!0)}}u=d?u.projectionNext:u.next}return l}class Eh{get rootNodes(){const o=this._lView,u=o[nt];return Um(u,o,u.firstChild,[])}constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[An]}set context(o){this._lView[An]=o}get destroyed(){return 128==(128&this._lView[Lt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[wn];if(ai(o)){const u=o[mi],l=u?u.indexOf(this):-1;l>-1&&(_l(o,l),Ka(u,l))}this._attachedToViewContainer=!1}am(this._lView[nt],this._lView)}onDestroy(o){nS(this._lView[nt],this._lView,null,o)}markForCheck(){vh(this._cdRefInjectingView||this._lView)}detach(){this._lView[Lt]&=-65}reattach(){this._lView[Lt]|=64}detectChanges(){bp(this._lView[nt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function gl(s,o){bo(s,o,o[Ht],2,null,null)}(this._lView[nt],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new le(902,!1);this._appRef=o}}class Vm extends Eh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;bp(o[nt],o,o[An],!1)}checkNoChanges(){}get context(){return null}}class jm extends hp{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Qt(o);return new Tp(u,this.ngModule)}}function Bm(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class lS{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,l){l=St(l);const d=this.injector.get(o,pp,l);return d!==pp||u===pp?d:this.parentInjector.get(o,u,l)}}class Tp extends GE{get inputs(){return Bm(this.componentDef.inputs)}get outputs(){return Bm(this.componentDef.outputs)}constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function Ao(s){return s.map(LD).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}create(o,u,l,d){let p=(d=d||this.ngModule)instanceof Tl?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new lS(o,p):o,I=v.get(KE,null);if(null===I)throw new le(407,!1);const b=v.get(RD,null),x=I.createRenderer(null,this.componentDef),j=this.componentDef.selectors[0][0]||"div",q=l?function tS(s,o,u){return s.selectRootElement(o,u===he.ShadowDom)}(x,l,this.componentDef.encapsulation):Ja(x,j,function Nv(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(j)),re=this.componentDef.onPush?288:272,de=Rv(0,null,null,1,0,null,null,null,null,null),xe=vp(null,de,null,re,null,null,I,x,b,v,null);let ze,Ye;Od(xe);try{const ft=this.componentDef;let At,Ue=null;ft.findHostDirectiveDefs?(At=[],Ue=new Map,ft.findHostDirectiveDefs(ft,At,Ue),At.push(ft)):At=[ft];const Ut=function hS(s,o){const u=s[nt],l=Kt;return s[l]=o,ph(u,l,2,"#host",null)}(xe,q),kn=function Dp(s,o,u,l,d,p,v,I){const b=d[nt];!function fS(s,o,u,l){for(const d of s)o.mergedAttrs=_s(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Cp(o,o.mergedAttrs,!0),null!==u&&op(l,u,o))}(l,s,o,v);const x=p.createRenderer(o,u),j=vp(d,_I(u),null,u.onPush?32:16,d[s.index],s,p,x,I||null,null,null);return b.firstCreatePass&&yh(b,s,l.length-1),km(d,j),d[s.index]=j}(Ut,q,ft,At,xe,I,x);Ye=Bc(de,Kt),q&&function pS(s,o,u,l){if(l)Qo(s,u,["ng-version",ZE.full]);else{const{attrs:d,classes:p}=function UD(s){const o=[],u=[];let l=1,d=2;for(;l<s.length;){let p=s[l];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++l]):8===d&&u.push(p);else{if(!So(d))break;d=p}l++}return{attrs:o,classes:u}}(o.selectors[0]);d&&Qo(s,u,d),p&&p.length>0&&ih(s,u,p.join(" "))}}(x,ft,q,l),void 0!==u&&function gS(s,o,u){const l=s.projection=[];for(let d=0;d<o.length;d++){const p=u[d];l.push(null!=p?Array.from(p):null)}}(Ye,this.ngContentSelectors,u),ze=function Sp(s,o,u,l,d,p){const v=zn(),I=d[nt],b=Mr(v,d);vI(I,d,v,u,null,l);for(let j=0;j<u.length;j++)gn(zs(d,I,v.directiveStart+j,v),d);vt(I,d,v),b&&gn(b,d);const x=zs(d,I,v.directiveStart+v.componentOffset,v);if(s[An]=d[An]=x,null!==p)for(const j of p)j(x,o);return xm(I,v,s),x}(kn,ft,At,Ue,xe,[$m]),Sv(de,xe,null)}finally{Rf()}return new kv(this.componentType,ze,lh(Ye,xe),xe,Ye)}}class kv extends TD{constructor(o,u,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new Vm(d),this.componentType=o}setInput(o,u){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){const p=this._rootLView;Lm(p[nt],p,d,o,u),Pm(p,this._tNode.index)}}get injector(){return new Wa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function $m(){const s=zn();fo(Fe()[nt],s)}function Ih(s){return!!Cr(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Cr(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ci(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Gv(s,o,u,l){const d=Fe();return Ci(d,ho(),o)&&(Zt(),ha(fn(),d,s,o,u,l)),Gv}function NI(s,o,u,l,d,p,v,I){const b=Fe(),x=Zt(),j=s+Kt,q=x.firstCreatePass?function mS(s,o,u,l,d,p,v,I,b){const x=o.consts,j=ph(o,s,4,v||null,xi(x,I));Om(o,u,j,xi(x,b)),fo(o,j);const q=j.tView=Rv(2,j,l,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,j),q.queries=o.queries.embeddedTView(j)),j}(j,x,b,o,u,l,d,p,v):x.data[j];Pi(q,!1);const re=b[Ht].createComment("");Yu(x,b,re,q),gn(re,b),km(b,b[j]=Zr(re,b,re,q)),Go(q)&&gh(x,b,q),null!=v&&Av(b,q,I)}function Yv(s){return function Ki(s,o){return s[o]}(function Uu(){return Mt.lFrame.contextLView}(),Kt+s)}function Sh(s,o,u){const l=Fe();return Ci(l,ho(),o)&&function Ei(s,o,u,l,d,p,v,I){const b=Mr(o,u);let j,x=o.inputs;!I&&null!=x&&(j=x[l])?(Lm(s,u,j,l,d),Au(o)&&Pm(u,o.index)):3&o.type&&(l=function xv(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,o.value||"",l):d,p.setProperty(b,l,d))}(Zt(),fn(),l,s,o,l[Ht],u,!1),Sh}function Wm(s,o,u,l,d){const v=d?"class":"style";Lm(s,u,o.inputs[v],v,l)}function Pp(s,o,u,l){const d=Fe(),p=Zt(),v=Kt+s,I=d[Ht],b=p.firstCreatePass?function xp(s,o,u,l,d,p){const v=o.consts,b=ph(o,s,2,l,xi(v,d));return Om(o,u,b,xi(v,p)),null!==b.attrs&&Cp(b,b.attrs,!1),null!==b.mergedAttrs&&Cp(b,b.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,b),b}(v,p,d,o,u,l):p.data[v],x=d[v]=Ja(I,o,function qg(){return Mt.lFrame.currentNamespace}()),j=Go(b);return Pi(b,!0),op(I,x,b),32!=(32&b.flags)&&Yu(p,d,x,b),0===function zc(){return Mt.lFrame.elementDepthCount}()&&gn(x,d),function Gc(){Mt.lFrame.elementDepthCount++}(),j&&(gh(p,d,b),xm(p,b,d)),null!==l&&Av(d,b),Pp}function Yr(){let s=zn();Fu()?function Lu(){Mt.lFrame.isParent=!1}():(s=s.parent,Pi(s,!1));const o=s;!function Wc(){Mt.lFrame.elementDepthCount--}();const u=Zt();return u.firstCreatePass&&(fo(u,s),ds(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Mf(s){return 0!=(8&s.flags)}(o)&&Wm(u,o,Fe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Hs(s){return 0!=(16&s.flags)}(o)&&Wm(u,o,Fe(),o.stylesWithoutHost,!1),Yr}function qm(s,o,u,l){return Pp(s,o,u,l),Yr(),qm}function Qv(){return Fe()}function Ym(s){return!!s&&"function"==typeof s.then}function Rh(s){return!!s&&"function"==typeof s.subscribe}const Qm=Rh;function Mp(s,o,u,l){const d=Fe(),p=Zt(),v=zn();return function xh(s,o,u,l,d,p,v){const I=Go(l),x=s.firstCreatePass&&bI(s),j=o[An],q=Fm(o);let re=!0;if(3&l.type||v){const ze=Mr(l,o),Ye=v?v(ze):ze,ft=q.length,At=v?Ut=>v(On(Ut[l.index])):l.index;let Ue=null;if(!v&&I&&(Ue=function Jm(s,o,u,l){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const v=d[p];if(v===u&&d[p+1]===l){const I=o[ro],b=d[p+2];return I.length>b?I[b]:null}"string"==typeof v&&(p+=2)}return null}(s,o,d,l.index)),null!==Ue)(Ue.__ngLastListenerFn__||Ue).__ngNextListenerFn__=p,Ue.__ngLastListenerFn__=p,re=!1;else{p=kI(l,o,j,p,!1);const Ut=u.listen(Ye,d,p);q.push(p,Ut),x&&x.push(d,At,ft,ft+1)}}else p=kI(l,o,j,p,!1);const de=l.outputs;let xe;if(re&&null!==de&&(xe=de[d])){const ze=xe.length;if(ze)for(let Ye=0;Ye<ze;Ye+=2){const kn=o[xe[Ye]][xe[Ye+1]].subscribe(p),Zn=q.length;q.push(p,kn),x&&x.push(d,l.index,Zn,-(Zn+1))}}}(p,d,d[Ht],v,s,o,l),Mp}function Xv(s,o,u,l){try{return sn(6,o,u),!1!==u(l)}catch(d){return xl(s,d),!1}finally{sn(7,o,u)}}function kI(s,o,u,l,d){return function p(v){if(v===Function)return l;vh(s.componentOffset>-1?vr(s.index,o):o);let b=Xv(o,u,l,v),x=p.__ngNextListenerFn__;for(;x;)b=Xv(o,u,x,v)&&b,x=x.__ngNextListenerFn__;return d&&!1===b&&(v.preventDefault(),v.returnValue=!1),b}}function e_(s=1){return function Md(s){return(Mt.lFrame.contextLView=function Gg(s,o){for(;s>0;)o=o[Ra],s--;return o}(s,Mt.lFrame.contextLView))[An]}(s)}function i_(s,o){return s<<17|o<<2}function lu(s){return s>>17&32767}function du(s){return 2|s}function Fi(s){return(131068&s)>>2}function Mh(s,o){return-131069&s|o<<2}function o_(s){return 1|s}function jI(s,o,u,l,d){const p=s[u+1],v=null===o;let I=l?lu(p):Fi(p),b=!1;for(;0!==I&&(!1===b||v);){const j=s[I+1];BI(s[I],o)&&(b=!0,s[I+1]=l?o_(j):du(j)),I=l?lu(j):Fi(j)}b&&(s[u+1]=l?du(p):o_(p))}function BI(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Ji(s,o)>=0}const Ur={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function $I(s){return s.substring(Ur.key,Ur.keyEnd)}function Nh(s,o){const u=Ur.textEnd;return u===o?-1:(o=Ur.keyEnd=function kh(s,o,u){for(;o<u&&s.charCodeAt(o)>32;)o++;return o}(s,Ur.key=o,u),Fl(s,o,u))}function Fl(s,o,u){for(;o<u&&s.charCodeAt(o)<=32;)o++;return o}function ow(s){!function Po(s,o,u,l){const d=Zt(),p=function Zi(s){const o=Mt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);d.firstUpdatePass&&function Lp(s,o,u,l){const d=s.data;if(null===d[u+1]){const p=d[zr()],v=qI(s,u);uw(p,l)&&null===o&&!v&&(o=!1),o=function Up(s,o,u,l){const d=function Qc(s){const o=Mt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(u=hu(u=Ll(null,s,o,u,l),o.attrs,l),p=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(u=Ll(d,s,o,u,l),null===p){let b=function u_(s,o,u){const l=u?o.classBindings:o.styleBindings;if(0!==Fi(l))return s[lu(l)]}(s,o,l);void 0!==b&&Array.isArray(b)&&(b=Ll(null,s,o,b[1],l),b=hu(b,o.attrs,l),function aw(s,o,u,l){s[lu(u?o.classBindings:o.styleBindings)]=l}(s,o,l,b))}else p=function KI(s,o,u){let l;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)l=hu(l,s[p].hostAttrs,u);return hu(l,o.attrs,u)}(s,o,l)}return void 0!==p&&(l?o.residualClasses=p:o.residualStyles=p),u}(d,p,o,l),function kp(s,o,u,l,d,p){let v=p?o.classBindings:o.styleBindings,I=lu(v),b=Fi(v);s[l]=u;let j,x=!1;if(Array.isArray(u)?(j=u[1],(null===j||Ji(u,j)>0)&&(x=!0)):j=u,d)if(0!==b){const re=lu(s[I+1]);s[l+1]=i_(re,I),0!==re&&(s[re+1]=Mh(s[re+1],l)),s[I+1]=function _S(s,o){return 131071&s|o<<17}(s[I+1],l)}else s[l+1]=i_(I,0),0!==I&&(s[I+1]=Mh(s[I+1],l)),I=l;else s[l+1]=i_(b,0),0===I?I=l:s[b+1]=Mh(s[b+1],l),b=l;x&&(s[l+1]=du(s[l+1])),jI(s,j,l,!0),jI(s,j,l,!1),function Fp(s,o,u,l,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Ji(p,o)>=0&&(u[l+1]=o_(u[l+1]))}(o,j,s,l,p),v=i_(I,b),p?o.classBindings=v:o.styleBindings=v}(d,p,o,u,v,l)}}(d,null,p,l);const v=Fe();if(u!==zt&&Ci(v,p,u)){const I=d.data[zr()];if(uw(I,l)&&!qI(d,p)){let b=l?I.classesWithoutHost:I.stylesWithoutHost;null!==b&&(u=F(b,u||"")),Wm(d,I,v,u,l)}else!function ZI(s,o,u,l,d,p,v,I){d===zt&&(d=Qe);let b=0,x=0,j=0<d.length?d[0]:null,q=0<p.length?p[0]:null;for(;null!==j||null!==q;){const re=b<d.length?d[b+1]:void 0,de=x<p.length?p[x+1]:void 0;let ze,xe=null;j===q?(b+=2,x+=2,re!==de&&(xe=q,ze=de)):null===q||null!==j&&j<q?(b+=2,xe=j):(x+=2,xe=q,ze=de),null!==xe&&YI(s,o,u,l,xe,ze,v,I),j=b<d.length?d[b]:null,q=x<p.length?p[x]:null}}(d,I,v,v[Ht],v[p+1],v[p+1]=function IS(s,o,u){if(null==u||""===u)return Qe;const l=[],d=P(u);if(Array.isArray(d))for(let p=0;p<d.length;p++)s(l,d[p],!0);else if("object"==typeof d)for(const p in d)d.hasOwnProperty(p)&&s(l,p,d[p]);else"string"==typeof d&&o(l,d);return l}(s,o,u),l,p)}}(Fr,Zs,s,!0)}function Zs(s,o){for(let u=function vS(s){return function iw(s){Ur.key=0,Ur.keyEnd=0,Ur.value=0,Ur.valueEnd=0,Ur.textEnd=s.length}(s),Nh(s,Fl(s,0,Ur.textEnd))}(o);u>=0;u=Nh(o,u))Fr(s,$I(o),!0)}function qI(s,o){return o>=s.expandoStartIndex}function Ll(s,o,u,l,d){let p=null;const v=u.directiveEnd;let I=u.directiveStylingLast;for(-1===I?I=u.directiveStart:I++;I<v&&(p=o[I],l=hu(l,p.hostAttrs,d),p!==s);)I++;return null!==s&&(u.directiveStylingLast=I),l}function hu(s,o,u){const l=u?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const v=o[p];"number"==typeof v?d=v:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Fr(s,v,!!u||o[++p]))}return void 0===s?null:s}function YI(s,o,u,l,d,p,v,I){if(!(3&o.type))return;const b=s.data,x=b[I+1],j=function s_(s){return 1==(1&s)}(x)?QI(b,o,u,d,Fi(x),v):void 0;c_(j)||(c_(p)||function VI(s){return 2==(2&s)}(x)&&(p=QI(b,null,u,d,I,v)),function hm(s,o,u,l,d){if(o)d?s.addClass(u,l):s.removeClass(u,l);else{let p=-1===l.indexOf("-")?void 0:lr.DashCase;null==d?s.removeStyle(u,l,p):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),p|=lr.Important),s.setStyle(u,l,d,p))}}(l,v,qi(zr(),u),d,p))}function QI(s,o,u,l,d,p){const v=null===o;let I;for(;d>0;){const b=s[d],x=Array.isArray(b),j=x?b[1]:b,q=null===j;let re=u[d+1];re===zt&&(re=q?Qe:void 0);let de=q?vo(re,l):j===l?re:void 0;if(x&&!c_(de)&&(de=vo(b,l)),c_(de)&&(I=de,v))return I;const xe=s[d+1];d=v?lu(xe):Fi(xe)}if(null!==o){let b=p?o.residualClasses:o.residualStyles;null!=b&&(I=vo(b,l))}return I}function c_(s){return void 0!==s}function uw(s,o){return 0!=(s.flags&(o?8:16))}function cw(s,o=""){const u=Fe(),l=Zt(),d=s+Kt,p=l.firstCreatePass?ph(l,d,1,o,null):l.data[d],v=u[d]=function qd(s,o){return s.createText(o)}(u[Ht],o);Yu(l,u,v,p),Pi(p,!1)}function jp(s,o,u){const l=Fe(),d=function ic(s,o,u,l){return Ci(s,ho(),u)?o+ve(u)+l:zt}(l,s,o,u);return d!==zt&&function Ro(s,o,u){const l=qi(o,s);!function fl(s,o,u){s.setValue(o,u)}(s[Ht],l,u)}(l,zr(),d),jp}const jl=void 0;var CS=["en",[["a","p"],["AM","PM"],jl],[["AM","PM"],jl,jl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],jl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],jl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",jl,"{1} 'at' {0}",jl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function g_(s){const u=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===l?1:5}];let Bl={};function lc(s){const o=function Hl(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=pb(o);if(u)return u;const l=o.split("-")[0];if(u=pb(l),u)return u;if("en"===l)return CS;throw new le(701,!1)}function m_(s){return lc(s)[it.PluralCase]}function pb(s){return s in Bl||(Bl[s]=kt.ng&&kt.ng.common&&kt.ng.common.locales&&kt.ng.common.locales[s]),Bl[s]}var it=(()=>((it=it||{})[it.LocaleId=0]="LocaleId",it[it.DayPeriodsFormat=1]="DayPeriodsFormat",it[it.DayPeriodsStandalone=2]="DayPeriodsStandalone",it[it.DaysFormat=3]="DaysFormat",it[it.DaysStandalone=4]="DaysStandalone",it[it.MonthsFormat=5]="MonthsFormat",it[it.MonthsStandalone=6]="MonthsStandalone",it[it.Eras=7]="Eras",it[it.FirstDayOfWeek=8]="FirstDayOfWeek",it[it.WeekendRange=9]="WeekendRange",it[it.DateFormat=10]="DateFormat",it[it.TimeFormat=11]="TimeFormat",it[it.DateTimeFormat=12]="DateTimeFormat",it[it.NumberSymbols=13]="NumberSymbols",it[it.NumberFormats=14]="NumberFormats",it[it.CurrencyCode=15]="CurrencyCode",it[it.CurrencySymbol=16]="CurrencySymbol",it[it.CurrencyName=17]="CurrencyName",it[it.Currencies=18]="Currencies",it[it.Directionality=19]="Directionality",it[it.PluralCase=20]="PluralCase",it[it.ExtraData=21]="ExtraData",it))();const ht="en-US";let vw=ht;class td{}class Rw{}function tn(s,o){return new nd(s,o??null)}class nd extends td{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new jm(this);const l=ur(o);this._bootstrapComponents=su(l.bootstrap),this._r3Injector=_v(o,u,[{provide:td,useValue:this},{provide:hp,useValue:this.componentFactoryResolver}],N(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Yp extends Rw{constructor(o){super(),this.moduleType=o}create(o){return new nd(this.moduleType,o)}}class xw extends td{constructor(o,u,l){super(),this.componentFactoryResolver=new jm(this),this.instance=null;const d=new $E([...o,{provide:td,useValue:this},{provide:hp,useValue:this.componentFactoryResolver}],u||Im(),l,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function C_(s,o,u=null){return new xw(s,o,u).injector}let Pw=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const l=jE(0,u.type),d=l.length>0?C_([l],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,d)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=ot({token:s,providedIn:"environment",factory:()=>new s(We(Tl))}),s})();function Ow(s){s.getStandaloneInjector=o=>o.get(Pw).getOrCreateStandaloneInjector(s)}function Li(s,o,u,l){return function kw(s,o,u,l,d,p){const v=o+u;return Ci(s,v,d)?function Ts(s,o,u){return s[o]=u}(s,v+1,p?l.call(p,d):l(d)):function _c(s,o){const u=s[o];return u===zt?void 0:u}(s,v+1)}(Fe(),function Jn(){const s=Mt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),s,o,u,l)}function Jp(s){return o=>{setTimeout(s,void 0,o)}}const ss=class qb extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,l){let d=o,p=u||(()=>null),v=l;if(o&&"object"==typeof o){const b=o;d=b.next?.bind(b),p=b.error?.bind(b),v=b.complete?.bind(b)}this.__isAsync&&(p=Jp(p),d&&(d=Jp(d)),v&&(v=Jp(v)));const I=super.subscribe({next:d,error:p,complete:v});return o instanceof K.w0&&o.add(I),I}};function Kb(){return this._results[Symbol.iterator]()}class R_{get changes(){return this._changes||(this._changes=new ss)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=R_.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=Kb)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const l=this;l.dirty=!1;const d=function kr(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Bd(s,o,u){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],p=o[l];if(u&&(d=u(d),p=u(p)),p!==d)return!1}return!0}(l._results,d,u))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let eg=(()=>{class s{}return s.__NG_ELEMENT_ID__=Qb,s})();const Zb=eg,Yb=class extends Zb{constructor(o,u,l){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=l}createEmbeddedView(o,u){const l=this._declarationTContainer.tView,d=vp(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,u||null);d[Ho]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[si];return null!==v&&(d[si]=v.createEmbeddedView(l)),Sv(l,d,o),new Eh(d)}};function Qb(){return od(zn(),Fe())}function od(s,o){return 4&s.type?new Yb(o,s,lh(s,o)):null}let x_=(()=>{class s{}return s.__NG_ELEMENT_ID__=BS,s})();function BS(){return vc(zn(),Fe())}const Xb=x_,ad=class extends Xb{constructor(o,u,l){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=l}get element(){return lh(this._hostTNode,this._hostLView)}get injector(){return new Wa(this._hostTNode,this._hostLView)}get parentInjector(){const o=$a(this._hostTNode,this._hostLView);if(rl(o)){const u=ys(o,this._hostLView),l=po(o);return new Wa(u[nt].data[l+8],u)}return new Wa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=yc(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-yr}createEmbeddedView(o,u,l){let d,p;"number"==typeof l?d=l:null!=l&&(d=l.index,p=l.injector);const v=o.createEmbeddedView(u||{},p);return this.insert(v,d),v}createComponent(o,u,l,d,p){const v=o&&!function yo(s){return"function"==typeof s}(o);let I;if(v)I=u;else{const q=u||{};I=q.index,l=q.injector,d=q.projectableNodes,p=q.environmentInjector||q.ngModuleRef}const b=v?o:new Tp(Qt(o)),x=l||this.parentInjector;if(!p&&null==b.ngModule){const re=(v?x:this.parentInjector).get(Tl,null);re&&(p=re)}const j=b.create(x,d,void 0,p);return this.insert(j.hostView,I),j}insert(o,u){const l=o._lView,d=l[nt];if(function Sd(s){return ai(s[wn])}(l)){const j=this.indexOf(o);if(-1!==j)this.detach(j);else{const q=l[wn],re=new ad(q,q[Un],q[wn]);re.detach(re.indexOf(o))}}const p=this._adjustIndex(u),v=this._lContainer;!function ep(s,o,u,l){const d=yr+l,p=u.length;l>0&&(u[d-1][ii]=o),l<p-yr?(o[ii]=u[d],dl(u,yr+l,o)):(u.push(o),o[ii]=null),o[wn]=u;const v=o[Ho];null!==v&&u!==v&&function ml(s,o){const u=s[zo];o[_r]!==o[wn][wn][_r]&&(s[Su]=!0),null===u?s[zo]=[o]:u.push(o)}(v,o);const I=o[si];null!==I&&I.insertView(s),o[Lt]|=64}(d,l,v,p);const I=Ws(p,v),b=l[Ht],x=vl(b,v[oo]);return null!==x&&function pl(s,o,u,l,d,p){l[pi]=d,l[Un]=o,bo(s,l,u,1,d,p)}(d,v[Un],b,l,x,I),o.attachToViewContainerRef(),dl(P_(v),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=yc(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),l=_l(this._lContainer,u);l&&(Ka(P_(this._lContainer),u),am(l[nt],l))}detach(o){const u=this._adjustIndex(o,-1),l=_l(this._lContainer,u);return l&&null!=Ka(P_(this._lContainer),u)?new Eh(l):null}_adjustIndex(o,u=0){return o??this.length+u}};function yc(s){return s[mi]}function P_(s){return s[mi]||(s[mi]=[])}function vc(s,o){let u;const l=o[s.index];if(ai(l))u=l;else{let d;if(8&s.type)d=On(l);else{const p=o[Ht];d=p.createComment("");const v=Mr(s,o);Mi(p,vl(p,v),d,function Yy(s,o){return s.nextSibling(o)}(p,v),!1)}o[s.index]=u=Zr(l,o,d,s),km(o,u)}return new ad(u,s,o)}class O_{constructor(o){this.queryList=o,this.matches=null}clone(){return new O_(this.queryList)}setDirty(){this.queryList.setDirty()}}class wc{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const l=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let p=0;p<l;p++){const v=u.getByIndex(p);d.push(this.queries[v.indexInDeclarationView].clone())}return new wc(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Gw(o,u).matches&&this.queries[u].setDirty()}}class $w{constructor(o,u,l=null){this.predicate=o,this.flags=u,this.read=l}}class M_{constructor(o=[]){this.queries=o}elementStart(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let l=0;l<this.length;l++){const d=null!==u?u.length:0,p=this.getByIndex(l).embeddedTView(o,d);p&&(p.indexInDeclarationView=l,null!==u?u.push(p):u=[p])}return null!==u?new M_(u):null}template(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class ud{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new ud(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==u;)l=l.parent;return u===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(o,u,$S(u,p)),this.matchTNodeWithReadOption(o,u,go(u,o,p,!1,!1))}else l===eg?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,go(u,o,l,!1,!1))}matchTNodeWithReadOption(o,u,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Lr||d===x_||d===eg&&4&u.type)this.addMatch(u.index,-2);else{const p=go(u,o,d,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,l)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function $S(s,o){const u=s.localNames;if(null!==u)for(let l=0;l<u.length;l+=2)if(u[l]===o)return u[l+1];return null}function Kn(s,o,u,l){return-1===u?function HS(s,o){return 11&s.type?lh(s,o):4&s.type?od(s,o):null}(o,s):-2===u?function N_(s,o,u){return u===Lr?lh(o,s):u===eg?od(o,s):u===x_?vc(o,s):void 0}(s,o,l):zs(s,s[nt],u,o)}function tg(s,o,u,l){const d=o[si].queries[l];if(null===d.matches){const p=s.data,v=u.matches,I=[];for(let b=0;b<v.length;b+=2){const x=v[b];I.push(x<0?null:Kn(o,p[x],v[b+1],u.metadata.read))}d.matches=I}return d.matches}function k_(s,o,u,l){const d=s.queries.getByIndex(u),p=d.matches;if(null!==p){const v=tg(s,o,d,u);for(let I=0;I<p.length;I+=2){const b=p[I];if(b>0)l.push(v[I/2]);else{const x=p[I+1],j=o[-b];for(let q=yr;q<j.length;q++){const re=j[q];re[Ho]===re[wn]&&k_(re[nt],re,x,l)}if(null!==j[zo]){const q=j[zo];for(let re=0;re<q.length;re++){const de=q[re];k_(de[nt],de,x,l)}}}}}return l}function Jb(s){const o=Fe(),u=Zt(),l=Pd();ju(l+1);const d=Gw(u,l);if(s.dirty&&function $c(s){return 4==(4&s[Lt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?k_(u,o,l,[]):tg(u,o,d,l);s.reset(p,Tm),s.notifyOnChanges()}return!0}return!1}function $h(s,o,u){const l=Zt();l.firstCreatePass&&(zw(l,new $w(s,o,u),-1),2==(2&o)&&(l.staticViewQueries=!0)),ma(l,Fe(),o)}function eC(s,o,u,l){const d=Zt();if(d.firstCreatePass){const p=zn();zw(d,new $w(o,u,l),p.index),function tC(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}ma(d,Fe(),u)}function Hw(){return function Hh(s,o){return s[si].queries[o].queryList}(Fe(),Pd())}function ma(s,o,u){const l=new R_(4==(4&u));nS(s,o,l,l.destroy),null===o[si]&&(o[si]=new wc),o[si].queries.push(new O_(l))}function zw(s,o,u){null===s.queries&&(s.queries=new M_),s.queries.track(new ud(o,u))}function Gw(s,o){return s.queries.getByIndex(o)}function Ww(s){return!!ur(s)}function No(...s){}const r0=new hn("Application Initializer");let U_=(()=>{class s{constructor(u){this.appInits=u,this.resolve=No,this.reject=No,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Ym(p))u.push(p);else if(Qm(p)){const v=new Promise((I,b)=>{p.subscribe({complete:I,error:b})});u.push(v)}}Promise.all(u).then(()=>{l()}).catch(d=>{this.reject(d)}),0===u.length&&l(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(We(r0,8))},s.\u0275prov=ot({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const s0=new hn("AppId",{providedIn:"root",factory:function Di(){return`${V_()}${V_()}${V_()}`}});function V_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ko=new hn("Platform Initializer"),fC=new hn("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let tA=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=ot({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const j_=new hn("LocaleId",{providedIn:"root",factory:()=>at(j_,wt.Optional|wt.SkipSelf)||function nA(){return typeof $localize<"u"&&$localize.locale||ht}()}),rA=new hn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class iA{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let sA=(()=>{class s{compileModuleSync(u){return new Yp(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const l=this.compileModuleSync(u),p=su(ur(u).declarations).reduce((v,I)=>{const b=Qt(I);return b&&v.push(new Tp(b)),v},[]);return new iA(l,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=ot({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const uA=(()=>Promise.resolve(0))();function B_(s){typeof Zone>"u"?uA.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class os{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ss(!1),this.onMicrotaskEmpty=new ss(!1),this.onStable=new ss(!1),this.onError=new ss(!1),typeof Zone>"u")throw new le(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&u,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function mC(){let s=kt.requestAnimationFrame,o=kt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function u0(s){const o=()=>{!function a0(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(kt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,ya(s),s.isCheckStableRunning=!0,ag(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),ya(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,l,d,p,v,I)=>{try{return c0(s),u.invokeTask(d,p,v,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),_C(s)}},onInvoke:(u,l,d,p,v,I,b)=>{try{return c0(s),u.invoke(d,p,v,I,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),_C(s)}},onHasTask:(u,l,d,p)=>{u.hasTask(d,p),l===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,ya(s),ag(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,l,d,p)=>(u.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!os.isInAngularZone())throw new le(909,!1)}static assertNotInAngularZone(){if(os.isInAngularZone())throw new le(909,!1)}run(o,u,l){return this._inner.run(o,u,l)}runTask(o,u,l,d){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+d,o,ei,No,No);try{return p.runTask(v,u,l)}finally{p.cancelTask(v)}}runGuarded(o,u,l){return this._inner.runGuarded(o,u,l)}runOutsideAngular(o){return this._outer.run(o)}}const ei={};function ag(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function ya(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function c0(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function _C(s){s._nesting--,ag(s)}class yC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ss,this.onMicrotaskEmpty=new ss,this.onStable=new ss,this.onError=new ss}run(o,u,l){return o.apply(u,l)}runGuarded(o,u,l){return o.apply(u,l)}runOutsideAngular(o){return o()}runTask(o,u,l,d){return o.apply(u,l)}}const ug=new hn(""),Ec=new hn("");let $_,fd=(()=>{class s{constructor(u,l,d){this._ngZone=u,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$_||(function cg(s){$_=s}(d),d.addToWindow(l)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{os.assertNotInAngularZone(),B_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())B_(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(u)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),u(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:d})}whenStable(u,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,l,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(We(os),We(Ic),We(Ec))},s.\u0275prov=ot({token:s,factory:s.\u0275fac}),s})(),Ic=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,l){this._applications.set(u,l)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,l=!0){return $_?.findTestabilityInTree(this,u,l)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=ot({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Fo=!1;let va=null;const l0=new hn("AllowMultipleToken"),H_=new hn("PlatformDestroyListeners"),vC=new hn("appBootstrapListener");class lg{constructor(o,u){this.name=o,this.token=u}}function EC(s,o,u=[]){const l=`Platform: ${o}`,d=new hn(l);return(p=[])=>{let v=wa();if(!v||v.injector.get(l0,!1)){const I=[...u,...p,{provide:d,useValue:!0}];s?s(I):function pd(s){if(va&&!va.get(l0,!1))throw new le(400,!1);va=s;const o=s.get(h0);(function d0(s){const o=s.get(ko,null);o&&o.forEach(u=>u())})(s)}(function Kh(s=[],o){return Al.create({name:o,providers:[{provide:uv,useValue:"platform"},{provide:H_,useValue:new Set([()=>va=null])},...s]})}(I,l))}return function dA(s){const o=wa();if(!o)throw new le(401,!1);return o}()}}function wa(){return va?.get(h0)??null}let h0=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,l){const d=function f0(s,o){let u;return u="noop"===s?new yC:("zone.js"===s?void 0:s)||new os(o),u}(l?.ngZone,function IC(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(l)),p=[{provide:os,useValue:d}];return d.run(()=>{const v=Al.create({providers:p,parent:this.injector,name:u.moduleType.name}),I=u.create(v),b=I.injector.get(gp,null);if(!b)throw new le(402,!1);return d.runOutsideAngular(()=>{const x=d.onError.subscribe({next:j=>{b.handleError(j)}});I.onDestroy(()=>{dg(this._modules,I),x.unsubscribe()})}),function bC(s,o,u){try{const l=u();return Ym(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(b,d,()=>{const x=I.injector.get(U_);return x.runInitializers(),x.donePromise.then(()=>(function gb(s){et(s,"Expected localeId to be defined"),"string"==typeof s&&(vw=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(j_,ht)||ht),this._moduleDoBootstrap(I),I))})})}bootstrapModule(u,l=[]){const d=G_({},l);return function wC(s,o,u){const l=new Yp(u);return Promise.resolve(l)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(u){const l=u.injector.get(Yh);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new le(-403,!1);u.instance.ngDoBootstrap(l)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new le(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const u=this._injector.get(H_,null);u&&(u.forEach(l=>l()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(We(Al))},s.\u0275prov=ot({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function G_(s,o){return Array.isArray(o)?o.reduce(G_,s):{...s,...o}}let Yh=(()=>{class s{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,l,d){this._zone=u,this._injector=l,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new S.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new S.y(I=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{os.assertNotInAngularZone(),B_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{os.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{b.unsubscribe(),x.unsubscribe()}});this.isStable=(0,H.T)(p,v.pipe((0,W.B)()))}bootstrap(u,l){const d=u instanceof GE;if(!this._injector.get(U_).done){!d&&Us(u);throw new le(405,Fo)}let v;v=d?u:this._injector.get(hp).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const I=function z_(s){return s.isBoundToModule}(v)?void 0:this._injector.get(td),x=v.create(Al.NULL,[],l||v.selector,I),j=x.location.nativeElement,q=x.injector.get(ug,null);return q?.registerApplication(j),x.onDestroy(()=>{this.detachView(x.hostView),dg(this.components,x),q?.unregisterApplication(j)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new le(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const l=u;this._views.push(l),l.attachToAppRef(this)}detachView(u){const l=u;dg(this._views,l),l.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const l=this._injector.get(vC,[]);l.push(...this._bootstrapListeners),l.forEach(d=>d(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>dg(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new le(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(We(os),We(Tl),We(gp))},s.\u0275prov=ot({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function dg(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}function CC(){return!1}let hA=(()=>{class s{}return s.__NG_ELEMENT_ID__=DC,s})();function DC(s){return function fg(s,o,u){if(Au(s)&&!u){const l=vr(s.index,o);return new Eh(l,l)}return 47&s.type?new Eh(o[_r],o):null}(zn(),Fe(),16==(16&s))}class gg{constructor(){}supports(o){return Ih(o)}create(o){return new gA(o)}}const RC=(s,o)=>o;class gA{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||RC}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,l=this._removalsHead,d=0,p=null;for(;u||l;){const v=!l||u&&u.currentIndex<bc(l,d,p)?u:l,I=bc(v,d,p),b=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(u=u._next,null==v.previousIndex)d++;else{p||(p=[]);const x=I-d,j=b-d;if(x!=j){for(let re=0;re<x;re++){const de=re<p.length?p[re]:p[re]=0,xe=de+re;j<=xe&&xe<x&&(p[re]=de+1)}p[v.previousIndex]=j-x}}I!==b&&o(v,I,b)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Ih(o))throw new le(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,v,u=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)p=o[I],v=this._trackByFn(I,p),null!==u&&Object.is(u.trackById,v)?(l&&(u=this._verifyReinsertion(u,p,v,I)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,v,I),l=!0),u=u._next}else d=0,function zv(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Symbol.iterator]();let l;for(;!(l=u.next()).done;)o(l.value)}}(o,I=>{v=this._trackByFn(d,I),null!==u&&Object.is(u.trackById,v)?(l&&(u=this._verifyReinsertion(u,I,v,d)),Object.is(u.item,I)||this._addIdentityChange(u,I)):(u=this._mismatch(u,I,v,d),l=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,l,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,d)):o=this._addAfter(new xC(u,l),p,d),o}_verifyReinsertion(o,u,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,u,l),this._addToMoves(o,l),o}_moveAfter(o,u,l){return this._unlink(o),this._insertAfter(o,u,l),this._addToMoves(o,l),o}_addAfter(o,u,l){return this._insertAfter(o,u,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,l){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new v0),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,l=o._next;return null===u?this._itHead=l:u._next=l,null===l?this._itTail=u:l._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new v0),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class xC{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class mA{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===u||u<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const u=o._prevDup,l=o._nextDup;return null===u?this._head=l:u._nextDup=l,null===l?this._tail=u:l._prevDup=u,null===this._head}}class v0{constructor(){this.map=new Map}put(o){const u=o.trackById;let l=this.map.get(u);l||(l=new mA,this.map.set(u,l)),l.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function bc(s,o,u){const l=s.previousIndex;if(null===l)return l;let d=0;return u&&l<u.length&&(d=u[l]),l+o+d}class Xh{constructor(){}supports(o){return o instanceof Map||Cr(o)}create(){return new PC}}class PC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Cr(o)))throw new le(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,l),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(d,l);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let l=u;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const l=o._prev;return u._next=o,u._prev=l,o._prev=u,l&&(l._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const p=d._prev,v=d._next;return p&&(p._next=v),v&&(v._prev=p),d._next=null,d._prev=null,d}const l=new OC(o);return this._records.set(o,l),l.currentValue=u,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(l=>u(o[l],l))}}class OC{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function MC(){return new Y_([new gg])}let Y_=(()=>{class s{constructor(u){this.factories=u}static create(u,l){if(null!=l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||MC()),deps:[[s,new L,new T]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(null!=l)return l;throw new le(901,!1)}}return s.\u0275prov=ot({token:s,providedIn:"root",factory:MC}),s})();function NC(){return new mg([new Xh])}let mg=(()=>{class s{constructor(u){this.factories=u}static create(u,l){if(l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||NC()),deps:[[s,new L,new T]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(l)return l;throw new le(901,!1)}}return s.\u0275prov=ot({token:s,providedIn:"root",factory:NC}),s})();const yA=EC(null,"core",[]);let kC=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(We(Yh))},s.\u0275mod=Tu({type:s}),s.\u0275inj=$n({}),s})();function vA(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(Te,X,U)=>{"use strict";U.d(X,{Z:()=>ae});var m=U(2090),K=U(4859),S=U(9681),H=U(1877);class W{constructor(le,Ee){this._delegate=le,this.firebase=Ee,(0,S._addComponent)(le,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=le.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(le){this._delegate.automaticDataCollectionEnabled=le}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(le=>{this._delegate.checkDestroyed(),le()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,S.deleteApp)(this._delegate)))}_getService(le,Ee=S._DEFAULT_ENTRY_NAME){var ve;this._delegate.checkDestroyed();const Oe=this._delegate.container.getProvider(le);return!Oe.isInitialized()&&"EXPLICIT"===(null===(ve=Oe.getComponent())||void 0===ve?void 0:ve.instantiationMode)&&Oe.initialize(),Oe.getImmediate({identifier:Ee})}_removeServiceInstance(le,Ee=S._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(le).clearInstance(Ee)}_addComponent(le){(0,S._addComponent)(this._delegate,le)}_addOrOverwriteComponent(le){(0,S._addOrOverwriteComponent)(this._delegate,le)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const k=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),R=function F(){const De=function N(De){const le={},Ee={__esModule:!0,initializeApp:function ce(ue,Y={}){const ge=S.initializeApp(ue,Y);if((0,m.r3)(le,ge.name))return le[ge.name];const je=new De(ge,Ee);return le[ge.name]=je,je},app:Oe,registerVersion:S.registerVersion,setLogLevel:S.setLogLevel,onLog:S.onLog,apps:null,SDK_VERSION:S.SDK_VERSION,INTERNAL:{registerComponent:function Ne(ue){const Y=ue.name,ge=Y.replace("-compat","");if(S._registerComponent(ue)&&"PUBLIC"===ue.type){const je=(Ve=Oe())=>{if("function"!=typeof Ve[ge])throw k.create("invalid-app-argument",{appName:Y});return Ve[ge]()};void 0!==ue.serviceProps&&(0,m.ZB)(je,ue.serviceProps),Ee[ge]=je,De.prototype[ge]=function(...Ve){return this._getService.bind(this,Y).apply(this,ue.multipleInstances?Ve:[])}}return"PUBLIC"===ue.type?Ee[ge]:null},removeApp:function ve(ue){delete le[ue]},useAsService:function $e(ue,Y){return"serverAuth"===Y?null:Y},modularAPIs:S}};function Oe(ue){if(!(0,m.r3)(le,ue=ue||S._DEFAULT_ENTRY_NAME))throw k.create("no-app",{appName:ue});return le[ue]}return Ee.default=Ee,Object.defineProperty(Ee,"apps",{get:function we(){return Object.keys(le).map(ue=>le[ue])}}),Oe.App=De,Ee}(W);return De.INTERNAL=Object.assign(Object.assign({},De.INTERNAL),{createFirebaseNamespace:F,extendNamespace:function le(Ee){(0,m.ZB)(De,Ee)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),De}(),A=new H.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){A.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const De=self.firebase.SDK_VERSION;De&&De.indexOf("LITE")>=0&&A.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ae=R;!function te(De){(0,S.registerVersion)("@firebase/app-compat","0.2.5",De)}()},9681:(Te,X,U)=>{"use strict";U.r(X),U.d(X,{FirebaseError:()=>H.ZR,SDK_VERSION:()=>ni,_DEFAULT_ENTRY_NAME:()=>He,_addComponent:()=>un,_addOrOverwriteComponent:()=>Tt,_apps:()=>et,_clearComponents:()=>$n,_components:()=>Je,_getProvider:()=>ot,_registerComponent:()=>en,_removeServiceInstance:()=>Ot,deleteApp:()=>ks,getApp:()=>fi,getApps:()=>Br,initializeApp:()=>Ns,onLog:()=>wt,registerVersion:()=>ri,setLogLevel:()=>Fs});var m=U(5861),K=U(4859),S=U(1877),H=U(2090),W=U(8766);class V{constructor(Me){this.container=Me}getPlatformInfoString(){return this.container.getProviders().map(at=>{if(function k(We){return"VERSION"===We.getComponent()?.type}(at)){const St=at.getImmediate();return`${St.library}/${St.version}`}return null}).filter(at=>at).join(" ")}}const N="@firebase/app",F="0.9.5",R=new S.Yd("@firebase/app"),He="[DEFAULT]",Ge={[N]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},et=new Map,Je=new Map;function un(We,Me){try{We.container.addComponent(Me)}catch(at){R.debug(`Component ${Me.name} failed to register with FirebaseApp ${We.name}`,at)}}function Tt(We,Me){We.container.addOrOverwriteComponent(Me)}function en(We){const Me=We.name;if(Je.has(Me))return R.debug(`There were multiple attempts to register component ${Me}.`),!1;Je.set(Me,We);for(const at of et.values())un(at,We);return!0}function ot(We,Me){const at=We.container.getProvider("heartbeat").getImmediate({optional:!0});return at&&at.triggerHeartbeat(),We.container.getProvider(Me)}function Ot(We,Me,at=He){ot(We,Me).clearInstance(at)}function $n(){Je.clear()}const Sn=new H.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Rn{constructor(Me,at,St){this._isDeleted=!1,this._options=Object.assign({},Me),this._config=Object.assign({},at),this._name=at.name,this._automaticDataCollectionEnabled=at.automaticDataCollectionEnabled,this._container=St,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Me){this.checkDestroyed(),this._automaticDataCollectionEnabled=Me}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Me){this._isDeleted=Me}checkDestroyed(){if(this.isDeleted)throw Sn.create("app-deleted",{appName:this._name})}}const ni="9.18.0";function Ns(We,Me={}){let at=We;"object"!=typeof Me&&(Me={name:Me});const St=Object.assign({name:He,automaticDataCollectionEnabled:!1},Me),Nt=St.name;if("string"!=typeof Nt||!Nt)throw Sn.create("bad-app-name",{appName:String(Nt)});if(at||(at=(0,H.aH)()),!at)throw Sn.create("no-options");const jt=et.get(Nt);if(jt){if((0,H.vZ)(at,jt.options)&&(0,H.vZ)(St,jt.config))return jt;throw Sn.create("duplicate-app",{appName:Nt})}const xr=new K.H0(Nt);for(const Q of Je.values())xr.addComponent(Q);const ee=new Rn(at,St,xr);return et.set(Nt,ee),ee}function fi(We=He){const Me=et.get(We);if(!Me&&We===He)return Ns();if(!Me)throw Sn.create("no-app",{appName:We});return Me}function Br(){return Array.from(et.values())}function ks(We){return En.apply(this,arguments)}function En(){return(En=(0,m.Z)(function*(We){const Me=We.name;et.has(Me)&&(et.delete(Me),yield Promise.all(We.container.getProviders().map(at=>at.delete())),We.isDeleted=!0)})).apply(this,arguments)}function ri(We,Me,at){var St;let Nt=null!==(St=Ge[We])&&void 0!==St?St:We;at&&(Nt+=`-${at}`);const jt=Nt.match(/\s|\//),xr=Me.match(/\s|\//);if(jt||xr){const ee=[`Unable to register library "${Nt}" with version "${Me}":`];return jt&&ee.push(`library name "${Nt}" contains illegal characters (whitespace or "/")`),jt&&xr&&ee.push("and"),xr&&ee.push(`version name "${Me}" contains illegal characters (whitespace or "/")`),void R.warn(ee.join(" "))}en(new K.wA(`${Nt}-version`,()=>({library:Nt,version:Me}),"VERSION"))}function wt(We,Me){if(null!==We&&"function"!=typeof We)throw Sn.create("invalid-log-argument");(0,S.Am)(We,Me)}function Fs(We){(0,S.Ub)(We)}const Ri="firebase-heartbeat-database",xn=1,Sr="firebase-heartbeat-store";let Ls=null;function kt(){return Ls||(Ls=(0,W.X3)(Ri,xn,{upgrade:(We,Me)=>{0===Me&&We.createObjectStore(Sr)}}).catch(We=>{throw Sn.create("idb-open",{originalErrorMessage:We.message})})),Ls}function Rt(){return(Rt=(0,m.Z)(function*(We){try{return(yield kt()).transaction(Sr).objectStore(Sr).get(Hn(We))}catch(Me){if(Me instanceof H.ZR)R.warn(Me.message);else{const at=Sn.create("idb-get",{originalErrorMessage:Me?.message});R.warn(at.message)}}})).apply(this,arguments)}function to(We,Me){return In.apply(this,arguments)}function In(){return(In=(0,m.Z)(function*(We,Me){try{const St=(yield kt()).transaction(Sr,"readwrite");return yield St.objectStore(Sr).put(Me,Hn(We)),St.done}catch(at){if(at instanceof H.ZR)R.warn(at.message);else{const St=Sn.create("idb-set",{originalErrorMessage:at?.message});R.warn(St.message)}}})).apply(this,arguments)}function Hn(We){return`${We.name}!${We.options.appId}`}class jo{constructor(Me){this.container=Me,this._heartbeatsCache=null;const at=this.container.getProvider("app").getImmediate();this._storage=new Yt(at),this._heartbeatsCachePromise=this._storage.read().then(St=>(this._heartbeatsCache=St,St))}triggerHeartbeat(){var Me=this;return(0,m.Z)(function*(){const St=Me.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Nt=dn();if(null===Me._heartbeatsCache&&(Me._heartbeatsCache=yield Me._heartbeatsCachePromise),Me._heartbeatsCache.lastSentHeartbeatDate!==Nt&&!Me._heartbeatsCache.heartbeats.some(jt=>jt.date===Nt))return Me._heartbeatsCache.heartbeats.push({date:Nt,agent:St}),Me._heartbeatsCache.heartbeats=Me._heartbeatsCache.heartbeats.filter(jt=>{const xr=new Date(jt.date).valueOf();return Date.now()-xr<=2592e6}),Me._storage.overwrite(Me._heartbeatsCache)})()}getHeartbeatsHeader(){var Me=this;return(0,m.Z)(function*(){if(null===Me._heartbeatsCache&&(yield Me._heartbeatsCachePromise),null===Me._heartbeatsCache||0===Me._heartbeatsCache.heartbeats.length)return"";const at=dn(),{heartbeatsToSend:St,unsentEntries:Nt}=function $i(We,Me=1024){const at=[];let St=We.slice();for(const Nt of We){const jt=at.find(xr=>xr.agent===Nt.agent);if(jt){if(jt.dates.push(Nt.date),$r(at)>Me){jt.dates.pop();break}}else if(at.push({agent:Nt.agent,dates:[Nt.date]}),$r(at)>Me){at.pop();break}St=St.slice(1)}return{heartbeatsToSend:at,unsentEntries:St}}(Me._heartbeatsCache.heartbeats),jt=(0,H.L)(JSON.stringify({version:2,heartbeats:St}));return Me._heartbeatsCache.lastSentHeartbeatDate=at,Nt.length>0?(Me._heartbeatsCache.heartbeats=Nt,yield Me._storage.overwrite(Me._heartbeatsCache)):(Me._heartbeatsCache.heartbeats=[],Me._storage.overwrite(Me._heartbeatsCache)),jt})()}}function dn(){return(new Date).toISOString().substring(0,10)}class Yt{constructor(Me){this.app=Me,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,H.hl)()&&(0,H.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Me=this;return(0,m.Z)(function*(){return(yield Me._canUseIndexedDBPromise)&&(yield function It(We){return Rt.apply(this,arguments)}(Me.app))||{heartbeats:[]}})()}overwrite(Me){var at=this;return(0,m.Z)(function*(){var St;if(yield at._canUseIndexedDBPromise){const jt=yield at.read();return to(at.app,{lastSentHeartbeatDate:null!==(St=Me.lastSentHeartbeatDate)&&void 0!==St?St:jt.lastSentHeartbeatDate,heartbeats:Me.heartbeats})}})()}add(Me){var at=this;return(0,m.Z)(function*(){var St;if(yield at._canUseIndexedDBPromise){const jt=yield at.read();return to(at.app,{lastSentHeartbeatDate:null!==(St=Me.lastSentHeartbeatDate)&&void 0!==St?St:jt.lastSentHeartbeatDate,heartbeats:[...jt.heartbeats,...Me.heartbeats]})}})()}}function $r(We){return(0,H.L)(JSON.stringify({version:2,heartbeats:We})).length}!function Hi(We){en(new K.wA("platform-logger",Me=>new V(Me),"PRIVATE")),en(new K.wA("heartbeat",Me=>new jo(Me),"PRIVATE")),ri(N,F,We),ri(N,F,"esm2017"),ri("fire-js","")}("")},4859:(Te,X,U)=>{"use strict";U.d(X,{H0:()=>N,wA:()=>S,zt:()=>W});var m=U(5861),K=U(2090);class S{constructor(R,A,M){this.name=R,this.instanceFactory=A,this.type=M,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(R){return this.instantiationMode=R,this}setMultipleInstances(R){return this.multipleInstances=R,this}setServiceProps(R){return this.serviceProps=R,this}setInstanceCreatedCallback(R){return this.onInstanceCreated=R,this}}const H="[DEFAULT]";class W{constructor(R,A){this.name=R,this.container=A,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(R){const A=this.normalizeInstanceIdentifier(R);if(!this.instancesDeferred.has(A)){const M=new K.BH;if(this.instancesDeferred.set(A,M),this.isInitialized(A)||this.shouldAutoInitialize())try{const J=this.getOrInitializeService({instanceIdentifier:A});J&&M.resolve(J)}catch{}}return this.instancesDeferred.get(A).promise}getImmediate(R){var A;const M=this.normalizeInstanceIdentifier(R?.identifier),J=null!==(A=R?.optional)&&void 0!==A&&A;if(!this.isInitialized(M)&&!this.shouldAutoInitialize()){if(J)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:M})}catch(te){if(J)return null;throw te}}getComponent(){return this.component}setComponent(R){if(R.name!==this.name)throw Error(`Mismatching Component ${R.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=R,this.shouldAutoInitialize()){if(function k(F){return"EAGER"===F.instantiationMode}(R))try{this.getOrInitializeService({instanceIdentifier:H})}catch{}for(const[A,M]of this.instancesDeferred.entries()){const J=this.normalizeInstanceIdentifier(A);try{const te=this.getOrInitializeService({instanceIdentifier:J});M.resolve(te)}catch{}}}}clearInstance(R=H){this.instancesDeferred.delete(R),this.instancesOptions.delete(R),this.instances.delete(R)}delete(){var R=this;return(0,m.Z)(function*(){const A=Array.from(R.instances.values());yield Promise.all([...A.filter(M=>"INTERNAL"in M).map(M=>M.INTERNAL.delete()),...A.filter(M=>"_delete"in M).map(M=>M._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(R=H){return this.instances.has(R)}getOptions(R=H){return this.instancesOptions.get(R)||{}}initialize(R={}){const{options:A={}}=R,M=this.normalizeInstanceIdentifier(R.instanceIdentifier);if(this.isInitialized(M))throw Error(`${this.name}(${M}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const J=this.getOrInitializeService({instanceIdentifier:M,options:A});for(const[te,ae]of this.instancesDeferred.entries())M===this.normalizeInstanceIdentifier(te)&&ae.resolve(J);return J}onInit(R,A){var M;const J=this.normalizeInstanceIdentifier(A),te=null!==(M=this.onInitCallbacks.get(J))&&void 0!==M?M:new Set;te.add(R),this.onInitCallbacks.set(J,te);const ae=this.instances.get(J);return ae&&R(ae,J),()=>{te.delete(R)}}invokeOnInitCallbacks(R,A){const M=this.onInitCallbacks.get(A);if(M)for(const J of M)try{J(R,A)}catch{}}getOrInitializeService({instanceIdentifier:R,options:A={}}){let M=this.instances.get(R);if(!M&&this.component&&(M=this.component.instanceFactory(this.container,{instanceIdentifier:(F=R,F===H?void 0:F),options:A}),this.instances.set(R,M),this.instancesOptions.set(R,A),this.invokeOnInitCallbacks(M,R),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,R,M)}catch{}var F;return M||null}normalizeInstanceIdentifier(R=H){return this.component?this.component.multipleInstances?R:H:R}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class N{constructor(R){this.name=R,this.providers=new Map}addComponent(R){const A=this.getProvider(R.name);if(A.isComponentSet())throw new Error(`Component ${R.name} has already been registered with ${this.name}`);A.setComponent(R)}addOrOverwriteComponent(R){this.getProvider(R.name).isComponentSet()&&this.providers.delete(R.name),this.addComponent(R)}getProvider(R){if(this.providers.has(R))return this.providers.get(R);const A=new W(R,this);return this.providers.set(R,A),A}getProviders(){return Array.from(this.providers.values())}}},1877:(Te,X,U)=>{"use strict";U.d(X,{Am:()=>F,Ub:()=>N,Yd:()=>k,in:()=>K});const m=[];var K=(()=>{return(R=K||(K={}))[R.DEBUG=0]="DEBUG",R[R.VERBOSE=1]="VERBOSE",R[R.INFO=2]="INFO",R[R.WARN=3]="WARN",R[R.ERROR=4]="ERROR",R[R.SILENT=5]="SILENT",K;var R})();const S={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},H=K.INFO,W={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},V=(R,A,...M)=>{if(A<R.logLevel)return;const J=(new Date).toISOString(),te=W[A];if(!te)throw new Error(`Attempted to log a message with an invalid logType (value: ${A})`);console[te](`[${J}]  ${R.name}:`,...M)};class k{constructor(A){this.name=A,this._logLevel=H,this._logHandler=V,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(A){if(!(A in K))throw new TypeError(`Invalid value "${A}" assigned to \`logLevel\``);this._logLevel=A}setLogLevel(A){this._logLevel="string"==typeof A?S[A]:A}get logHandler(){return this._logHandler}set logHandler(A){if("function"!=typeof A)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=A}get userLogHandler(){return this._userLogHandler}set userLogHandler(A){this._userLogHandler=A}debug(...A){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...A),this._logHandler(this,K.DEBUG,...A)}log(...A){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...A),this._logHandler(this,K.VERBOSE,...A)}info(...A){this._userLogHandler&&this._userLogHandler(this,K.INFO,...A),this._logHandler(this,K.INFO,...A)}warn(...A){this._userLogHandler&&this._userLogHandler(this,K.WARN,...A),this._logHandler(this,K.WARN,...A)}error(...A){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...A),this._logHandler(this,K.ERROR,...A)}}function N(R){m.forEach(A=>{A.setLogLevel(R)})}function F(R,A){for(const M of m){let J=null;A&&A.level&&(J=S[A.level]),M.userLogHandler=null===R?null:(te,ae,...De)=>{const le=De.map(Ee=>{if(null==Ee)return null;if("string"==typeof Ee)return Ee;if("number"==typeof Ee||"boolean"==typeof Ee)return Ee.toString();if(Ee instanceof Error)return Ee.message;try{return JSON.stringify(Ee)}catch{return null}}).filter(Ee=>Ee).join(" ");ae>=(J??te.logLevel)&&R({level:K[ae].toLowerCase(),message:le,args:De,type:te.name})}}}},259:(Te,X,U)=>{"use strict";U.d(X,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=U(9681);(0,m.registerVersion)("firebase","9.18.0","app")},9260:(Te,X,U)=>{"use strict";U.d(X,{Z:()=>m.Z});var m=U(3942);m.Z.registerVersion("firebase","9.18.0","app-compat")},8971:(Te,X,U)=>{"use strict";U.r(X);var m=U(5861),K=U(3942),S=U(2090),H=U(9681),W=U(1877),V=U(655),k=U(4859);const F={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},M_EMAIL_SIGNIN="EMAIL_SIGNIN",M_PASSWORD_RESET="PASSWORD_RESET",M_RECOVER_EMAIL="RECOVER_EMAIL",M_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",M_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",M_VERIFY_EMAIL="VERIFY_EMAIL";const ae=function J(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},De=function te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},le=new S.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ve=new W.Yd("@firebase/auth");function Oe(y,...f){ve.logLevel<=W.in.ERROR&&ve.error(`Auth (${H.SDK_VERSION}): ${y}`,...f)}function ce(y,...f){throw ue(y,...f)}function we(y,...f){return ue(y,...f)}function Ne(y,f,g){const E=Object.assign(Object.assign({},De()),{[f]:g});return new S.LL("auth","Firebase",E).create(f,{appName:y.name})}function $e(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&ce(y,"argument-error"),Ne(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ue(y,...f){if("string"!=typeof y){const g=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(g,...E)}return le.create(y,...f)}function Y(y,f,...g){if(!y)throw ue(f,...g)}function ge(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Oe(f),new Error(f)}function je(y,f){y||ge(f)}const Ve=new Map;function rt(y){je(y instanceof Function,"Expected a class definition");let f=Ve.get(y);return f?(je(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,Ve.set(y,f),f)}function Ie(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Pe(){return"http:"===Le()||"https:"===Le()}function Le(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class et{constructor(f,g){this.shortDelay=f,this.longDelay=g,je(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,S.uI)()||(0,S.b$)()}get(){return function He(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Pe()||(0,S.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Je(y,f){je(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class un{static initialize(f,g,E){this.fetchImpl=f,g&&(this.headersImpl=g),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ge("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ge("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ge("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Tt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},en=new et(3e4,6e4);function ot(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Ot(y,f,g,E){return $n.apply(this,arguments)}function $n(){return($n=(0,m.Z)(function*(y,f,g,E,P={}){return yn(y,P,(0,m.Z)(function*(){let B={},se={};E&&("GET"===f?se=E:B={body:JSON.stringify(E)});const Ce=(0,S.xO)(Object.assign({key:y.config.apiKey},se)).slice(1),qe=yield y._getAdditionalHeaders();return qe["Content-Type"]="application/json",y.languageCode&&(qe["X-Firebase-Locale"]=y.languageCode),un.fetch()(Ns(y,y.config.apiHost,g,Ce),Object.assign({method:f,headers:qe,referrerPolicy:"no-referrer"},B))}))})).apply(this,arguments)}function yn(y,f,g){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,m.Z)(function*(y,f,g){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},Tt),f);try{const P=new fi(y),B=yield Promise.race([g(),P.promise]);P.clearNetworkTimeout();const se=yield B.json();if("needConfirmation"in se)throw Br(y,"account-exists-with-different-credential",se);if(B.ok&&!("errorMessage"in se))return se;{const Ce=B.ok?se.errorMessage:se.error.message,[qe,ct]=Ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===qe)throw Br(y,"credential-already-in-use",se);if("EMAIL_EXISTS"===qe)throw Br(y,"email-already-in-use",se);if("USER_DISABLED"===qe)throw Br(y,"user-disabled",se);const Pt=E[qe]||qe.toLowerCase().replace(/[_\s]+/g,"-");if(ct)throw Ne(y,Pt,ct);ce(y,Pt)}}catch(P){if(P instanceof S.ZR)throw P;ce(y,"internal-error",{message:String(P)})}})).apply(this,arguments)}function Rn(y,f,g,E){return ni.apply(this,arguments)}function ni(){return(ni=(0,m.Z)(function*(y,f,g,E,P={}){const B=yield Ot(y,f,g,E,P);return"mfaPendingCredential"in B&&ce(y,"multi-factor-auth-required",{_serverResponse:B}),B})).apply(this,arguments)}function Ns(y,f,g,E){const P=`${f}${g}?${E}`;return y.config.emulator?Je(y.config,P):`${y.config.apiScheme}://${P}`}class fi{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,E)=>{this.timer=setTimeout(()=>E(we(this.auth,"network-request-failed")),en.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Br(y,f,g){const E={appName:y.name};g.email&&(E.email=g.email),g.phoneNumber&&(E.phoneNumber=g.phoneNumber);const P=we(y,f,E);return P.customData._tokenResponse=g,P}function En(){return(En=(0,m.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function wt(){return(wt=(0,m.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ri(){return(Ri=(0,m.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function xn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function kt(){return(kt=(0,m.Z)(function*(y,f=!1){const g=(0,S.m9)(y),E=yield g.getIdToken(f),P=Rt(E);Y(P&&P.exp&&P.auth_time&&P.iat,g.auth,"internal-error");const B="object"==typeof P.firebase?P.firebase:void 0,se=B?.sign_in_provider;return{claims:P,token:E,authTime:xn(It(P.auth_time)),issuedAtTime:xn(It(P.iat)),expirationTime:xn(It(P.exp)),signInProvider:se||null,signInSecondFactor:B?.sign_in_second_factor||null}})).apply(this,arguments)}function It(y){return 1e3*Number(y)}function Rt(y){const[f,g,E]=y.split(".");if(void 0===f||void 0===g||void 0===E)return Oe("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,S.tV)(g);return P?JSON.parse(P):(Oe("Failed to decode base64 JWT payload"),null)}catch(P){return Oe("Caught error parsing JWT payload as JSON",P?.toString()),null}}function In(y,f){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,m.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(E){throw E instanceof S.ZR&&function Ar({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}class Rr{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const P=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,P)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,m.Z)(function*(){yield g.iteration()}),E)}iteration(){var f=this;return(0,m.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&f.schedule(!0))}f.schedule()})()}}class jo{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=xn(this.lastLoginAt),this.creationTime=xn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function dn(y){return $i.apply(this,arguments)}function $i(){return $i=(0,m.Z)(function*(y){var f;const g=y.auth,E=yield y.getIdToken(),P=yield In(y,function Fs(y,f){return Ri.apply(this,arguments)}(g,{idToken:E}));Y(P?.users.length,g,"internal-error");const B=P.users[0];y._notifyReloadListener(B);const se=null!==(f=B.providerUserInfo)&&void 0!==f&&f.length?function We(y){return y.map(f=>{var{providerId:g}=f,E=(0,V._T)(f,["providerId"]);return{providerId:g,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(B.providerUserInfo):[],Ce=function Hi(y,f){return[...y.filter(E=>!f.some(P=>P.providerId===E.providerId)),...f]}(y.providerData,se),Pt=!!y.isAnonymous&&!(y.email&&B.passwordHash||Ce?.length),Et={uid:B.localId,displayName:B.displayName||null,photoURL:B.photoUrl||null,email:B.email||null,emailVerified:B.emailVerified||!1,phoneNumber:B.phoneNumber||null,tenantId:B.tenantId||null,providerData:Ce,metadata:new jo(B.createdAt,B.lastLoginAt),isAnonymous:Pt};Object.assign(y,Et)}),$i.apply(this,arguments)}function $r(){return($r=(0,m.Z)(function*(y){const f=(0,S.m9)(y);yield dn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function at(){return(at=(0,m.Z)(function*(y,f){const g=yield yn(y,{},(0,m.Z)(function*(){const E=(0,S.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:P,apiKey:B}=y.config,se=Ns(y,P,"/v1/token",`key=${B}`),Ce=yield y._getAdditionalHeaders();return Ce["Content-Type"]="application/x-www-form-urlencoded",un.fetch()(se,{method:"POST",headers:Ce,body:E})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class St{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Y(f.idToken,"internal-error"),Y(typeof f.idToken<"u","internal-error"),Y(typeof f.refreshToken<"u","internal-error");const g="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function to(y){const f=Rt(y);return Y(f,"internal-error"),Y(typeof f.exp<"u","internal-error"),Y(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var E=this;return(0,m.Z)(function*(){return Y(!E.accessToken||E.refreshToken,f,"user-token-expired"),g||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var E=this;return(0,m.Z)(function*(){const{accessToken:P,refreshToken:B,expiresIn:se}=yield function Me(y,f){return at.apply(this,arguments)}(f,g);E.updateTokensAndExpiration(P,B,Number(se))})()}updateTokensAndExpiration(f,g,E){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,g){const{refreshToken:E,accessToken:P,expirationTime:B}=g,se=new St;return E&&(Y("string"==typeof E,"internal-error",{appName:f}),se.refreshToken=E),P&&(Y("string"==typeof P,"internal-error",{appName:f}),se.accessToken=P),B&&(Y("number"==typeof B,"internal-error",{appName:f}),se.expirationTime=B),se}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new St,this.toJSON())}_performRefresh(){return ge("not implemented")}}function Nt(y,f){Y("string"==typeof y||typeof y>"u","internal-error",{appName:f})}class jt{constructor(f){var{uid:g,auth:E,stsTokenManager:P}=f,B=(0,V._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=E,this.stsTokenManager=P,this.accessToken=P.accessToken,this.displayName=B.displayName||null,this.email=B.email||null,this.emailVerified=B.emailVerified||!1,this.phoneNumber=B.phoneNumber||null,this.photoURL=B.photoURL||null,this.isAnonymous=B.isAnonymous||!1,this.tenantId=B.tenantId||null,this.providerData=B.providerData?[...B.providerData]:[],this.metadata=new jo(B.createdAt||void 0,B.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,m.Z)(function*(){const E=yield In(g,g.stsTokenManager.getToken(g.auth,f));return Y(E,g.auth,"internal-error"),g.accessToken!==E&&(g.accessToken=E,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),E})()}getIdTokenResult(f){return function Ls(y){return kt.apply(this,arguments)}(this,f)}reload(){return function Yt(y){return $r.apply(this,arguments)}(this)}_assign(f){this!==f&&(Y(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const g=new jt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(f){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var E=this;return(0,m.Z)(function*(){let P=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),P=!0),g&&(yield dn(E)),yield E.auth._persistUserIfCurrent(E),P&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,m.Z)(function*(){const g=yield f.getIdToken();return yield In(f,function ks(y,f){return En.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var E,P,B,se,Ce,qe,ct,Pt;const Et=null!==(E=g.displayName)&&void 0!==E?E:void 0,hr=null!==(P=g.email)&&void 0!==P?P:void 0,ki=null!==(B=g.phoneNumber)&&void 0!==B?B:void 0,Ju=null!==(se=g.photoURL)&&void 0!==se?se:void 0,ah=null!==(Ce=g.tenantId)&&void 0!==Ce?Ce:void 0,bl=null!==(qe=g._redirectEventId)&&void 0!==qe?qe:void 0,ec=null!==(ct=g.createdAt)&&void 0!==ct?ct:void 0,rs=null!==(Pt=g.lastLoginAt)&&void 0!==Pt?Pt:void 0,{uid:To,emailVerified:tu,isAnonymous:up,providerData:tc,stsTokenManager:ev}=g;Y(To&&ev,f,"internal-error");const gm=St.fromJSON(this.name,ev);Y("string"==typeof To,f,"internal-error"),Nt(Et,f.name),Nt(hr,f.name),Y("boolean"==typeof tu,f,"internal-error"),Y("boolean"==typeof up,f,"internal-error"),Nt(ki,f.name),Nt(Ju,f.name),Nt(ah,f.name),Nt(bl,f.name),Nt(ec,f.name),Nt(rs,f.name);const cp=new jt({uid:To,auth:f,email:hr,emailVerified:tu,displayName:Et,isAnonymous:up,photoURL:Ju,phoneNumber:ki,tenantId:ah,stsTokenManager:gm,createdAt:ec,lastLoginAt:rs});return tc&&Array.isArray(tc)&&(cp.providerData=tc.map(uh=>Object.assign({},uh))),bl&&(cp._redirectEventId=bl),cp}static _fromIdTokenResponse(f,g,E=!1){return(0,m.Z)(function*(){const P=new St;P.updateFromServerResponse(g);const B=new jt({uid:g.localId,auth:f,stsTokenManager:P,isAnonymous:E});return yield dn(B),B})()}}const ee=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(g,E){var P=this;return(0,m.Z)(function*(){P.storage[g]=E})()}_get(g){var E=this;return(0,m.Z)(function*(){const P=E.storage[g];return void 0===P?null:P})()}_remove(g){var E=this;return(0,m.Z)(function*(){delete E.storage[g]})()}_addListener(g,E){}_removeListener(g,E){}}return y.type="NONE",y})();function Q(y,f,g){return`firebase:${y}:${f}:${g}`}class ie{constructor(f,g,E){this.persistence=f,this.auth=g,this.userKey=E;const{config:P,name:B}=this.auth;this.fullUserKey=Q(this.userKey,P.apiKey,B),this.fullPersistenceKey=Q("persistence",P.apiKey,B),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,m.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?jt._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,m.Z)(function*(){if(g.persistence===f)return;const E=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,E?g.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,E="authUser"){return(0,m.Z)(function*(){if(!g.length)return new ie(rt(ee),f,E);const P=(yield Promise.all(g.map(function(){var ct=(0,m.Z)(function*(Pt){if(yield Pt._isAvailable())return Pt});return function(Pt){return ct.apply(this,arguments)}}()))).filter(ct=>ct);let B=P[0]||rt(ee);const se=Q(E,f.config.apiKey,f.name);let Ce=null;for(const ct of g)try{const Pt=yield ct._get(se);if(Pt){const Et=jt._fromJSON(f,Pt);ct!==B&&(Ce=Et),B=ct;break}}catch{}const qe=P.filter(ct=>ct._shouldAllowMigration);return B._shouldAllowMigration&&qe.length?(B=qe[0],Ce&&(yield B._set(se,Ce.toJSON())),yield Promise.all(g.map(function(){var ct=(0,m.Z)(function*(Pt){if(Pt!==B)try{yield Pt._remove(se)}catch{}});return function(Pt){return ct.apply(this,arguments)}}())),new ie(B,f,E)):new ie(B,f,E)})()}}function Re(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(mn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(he(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Fn(f))return"Blackberry";if(ar(f))return"Webos";if(tt(f))return"Safari";if((f.includes("chrome/")||Qe(f))&&!f.includes("edge/"))return"Chrome";if(Pn(f))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function he(y=(0,S.z$)()){return/firefox\//i.test(y)}function tt(y=(0,S.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Qe(y=(0,S.z$)()){return/crios\//i.test(y)}function mn(y=(0,S.z$)()){return/iemobile/i.test(y)}function Pn(y=(0,S.z$)()){return/android/i.test(y)}function Fn(y=(0,S.z$)()){return/blackberry/i.test(y)}function ar(y=(0,S.z$)()){return/webos/i.test(y)}function Ft(y=(0,S.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Ef(y=(0,S.z$)()){return Ft(y)||Pn(y)||ar(y)||Fn(y)||/windows phone/i.test(y)||mn(y)}function Cu(y,f=[]){let g;switch(y){case"Browser":g=Re((0,S.z$)());break;case"Worker":g=`${Re((0,S.z$)())}-${y}`;break;default:g=y}const E=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${H.SDK_VERSION}/${E}`}class Tu{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const E=B=>new Promise((se,Ce)=>{try{se(f(B))}catch(qe){Ce(qe)}});E.onAbort=g,this.queue.push(E);const P=this.queue.length-1;return()=>{this.queue[P]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,m.Z)(function*(){if(g.auth.currentUser===f)return;const E=[];try{for(const P of g.queue)yield P(f),P.onAbort&&E.push(P.onAbort)}catch(P){E.reverse();for(const B of E)try{B()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:P?.message})}})()}}class If{constructor(f,g,E){this.app=f,this.heartbeatServiceProvider=g,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Oc(this),this.idTokenSubscription=new Oc(this),this.beforeStateQueue=new Tu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=le,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,g){var E=this;return g&&(this._popupRedirectResolver=rt(g)),this._initializationPromise=this.queue((0,m.Z)(function*(){var P,B;if(!E._deleted&&(E.persistenceManager=yield ie.create(E,f),!E._deleted)){if(null!==(P=E._popupRedirectResolver)&&void 0!==P&&P._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(g),E.lastNotifiedUid=(null===(B=E.currentUser)||void 0===B?void 0:B.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,m.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,m.Z)(function*(){var E;const P=yield g.assertedPersistence.getCurrentUser();let B=P,se=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const Ce=null===(E=g.redirectUser)||void 0===E?void 0:E._redirectEventId,qe=B?._redirectEventId,ct=yield g.tryRedirectSignIn(f);(!Ce||Ce===qe)&&ct?.user&&(B=ct.user,se=!0)}if(!B)return g.directlySetCurrentUser(null);if(!B._redirectEventId){if(se)try{yield g.beforeStateQueue.runMiddleware(B)}catch(Ce){B=P,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(Ce))}return B?g.reloadAndSetCurrentUserOrClear(B):g.directlySetCurrentUser(null)}return Y(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===B._redirectEventId?g.directlySetCurrentUser(B):g.reloadAndSetCurrentUserOrClear(B)})()}tryRedirectSignIn(f){var g=this;return(0,m.Z)(function*(){let E=null;try{E=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch{yield g._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,m.Z)(function*(){try{yield dn(f)}catch(E){if("auth/network-request-failed"!==E?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Ge(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,m.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,m.Z)(function*(){const E=f?(0,S.m9)(f):null;return E&&Y(E.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(E&&E._clone(g))})()}_updateCurrentUser(f,g=!1){var E=this;return(0,m.Z)(function*(){if(!E._deleted)return f&&Y(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),g||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,m.Z)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,m.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,m.Z)(function*(){yield g.assertedPersistence.setPersistence(rt(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new S.LL("auth","Firebase",f())}onAuthStateChanged(f,g,E){return this.registerStateListener(this.authStateSubscription,f,g,E)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,E){return this.registerStateListener(this.idTokenSubscription,f,g,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var E=this;return(0,m.Z)(function*(){const P=yield E.getOrInitRedirectPersistenceManager(g);return null===f?P.removeCurrentUser():P.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,m.Z)(function*(){if(!g.redirectPersistenceManager){const E=f&&rt(f)||g._popupRedirectResolver;Y(E,g,"argument-error"),g.redirectPersistenceManager=yield ie.create(g,[rt(E._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,m.Z)(function*(){var E,P;return g._isInitialized&&(yield g.queue((0,m.Z)(function*(){}))),(null===(E=g._currentUser)||void 0===E?void 0:E._redirectEventId)===f?g._currentUser:(null===(P=g.redirectUser)||void 0===P?void 0:P._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,m.Z)(function*(){if(f===g.currentUser)return g.queue((0,m.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,E,P){if(this._deleted)return()=>{};const B="function"==typeof g?g:g.next.bind(g),se=this._isInitialized?Promise.resolve():this._initializationPromise;return Y(se,this,"internal-error"),se.then(()=>B(this.currentUser)),"function"==typeof g?f.addObserver(g,E,P):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,m.Z)(function*(){g.currentUser&&g.currentUser!==f&&g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh(),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Cu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,m.Z)(function*(){var g;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const P=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return P&&(E["X-Firebase-Client"]=P),E})()}}function Ln(y){return(0,S.m9)(y)}class Oc{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,S.ne)(g=>this.observer=g)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Qt(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function mr(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class ur{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return ge("not implemented")}_getIdTokenResponse(f){return ge("not implemented")}_linkToIdToken(f,g){return ge("not implemented")}_getReauthenticationResolver(f){return ge("not implemented")}}function Pr(y,f){return Du.apply(this,arguments)}function Du(){return(Du=(0,m.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:resetPassword",ot(y,f))})).apply(this,arguments)}function no(y,f){return pi.apply(this,arguments)}function pi(){return(pi=(0,m.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Lt(){return(Lt=(0,m.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:update",ot(y,f))})).apply(this,arguments)}function ii(){return(ii=(0,m.Z)(function*(y,f){return Rn(y,"POST","/v1/accounts:signInWithPassword",ot(y,f))})).apply(this,arguments)}function Gi(y,f){return Un.apply(this,arguments)}function Un(){return(Un=(0,m.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:sendOobCode",ot(y,f))})).apply(this,arguments)}function An(){return(An=(0,m.Z)(function*(y,f){return Gi(y,f)})).apply(this,arguments)}function Aa(){return(Aa=(0,m.Z)(function*(y,f){return Gi(y,f)})).apply(this,arguments)}function Bo(){return(Bo=(0,m.Z)(function*(y,f){return Gi(y,f)})).apply(this,arguments)}function io(){return(io=(0,m.Z)(function*(y,f){return Gi(y,f)})).apply(this,arguments)}function _r(){return(_r=(0,m.Z)(function*(y,f){return Rn(y,"POST","/v1/accounts:signInWithEmailLink",ot(y,f))})).apply(this,arguments)}function so(){return(so=(0,m.Z)(function*(y,f){return Rn(y,"POST","/v1/accounts:signInWithEmailLink",ot(y,f))})).apply(this,arguments)}class si extends ur{constructor(f,g,E,P=null){super("password",E),this._email=f,this._password=g,this._tenantId=P}static _fromEmailAndPassword(f,g){return new si(f,g,"password")}static _fromEmailAndCode(f,g,E=null){return new si(f,g,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,m.Z)(function*(){switch(g.signInMethod){case"password":return function wn(y,f){return ii.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Ra(y,f){return _r.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:ce(f,"internal-error")}})()}_linkToIdToken(f,g){var E=this;return(0,m.Z)(function*(){switch(E.signInMethod){case"password":return no(f,{idToken:g,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Ho(y,f){return so.apply(this,arguments)}(f,{idToken:g,email:E._email,oobCode:E._password});default:ce(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function gi(y,f){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,m.Z)(function*(y,f){return Rn(y,"POST","/v1/accounts:signInWithIdp",ot(y,f))})).apply(this,arguments)}class ls extends ur{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new ls(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):ce("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:P}=g,B=(0,V._T)(g,["providerId","signInMethod"]);if(!E||!P)return null;const se=new ls(E,P);return se.idToken=B.idToken||void 0,se.accessToken=B.accessToken||void 0,se.secret=B.secret,se.nonce=B.nonce,se.pendingToken=B.pendingToken||null,se}_getIdTokenResponse(f){return gi(f,this.buildRequest())}_linkToIdToken(f,g){const E=this.buildRequest();return E.idToken=g,gi(f,E)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,gi(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,S.xO)(g)}return f}}function Su(){return(Su=(0,m.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:sendVerificationCode",ot(y,f))})).apply(this,arguments)}function mi(){return(mi=(0,m.Z)(function*(y,f){return Rn(y,"POST","/v1/accounts:signInWithPhoneNumber",ot(y,f))})).apply(this,arguments)}function yr(){return(yr=(0,m.Z)(function*(y,f){const g=yield Rn(y,"POST","/v1/accounts:signInWithPhoneNumber",ot(y,f));if(g.temporaryProof)throw Br(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Vg={USER_NOT_FOUND:"user-not-found"};function ai(){return(ai=(0,m.Z)(function*(y,f){return Rn(y,"POST","/v1/accounts:signInWithPhoneNumber",ot(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Vg)})).apply(this,arguments)}class ds extends ur{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new ds({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new ds({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function oo(y,f){return mi.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function zo(y,f){return yr.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function oi(y,f){return ai.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:E,verificationCode:P}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:E,code:P}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:E,phoneNumber:P,temporaryProof:B}=f;return E||g||P||B?new ds({verificationId:g,verificationCode:E,phoneNumber:P,temporaryProof:B}):null}}class Or{constructor(f){var g,E,P,B,se,Ce;const qe=(0,S.zd)((0,S.pd)(f)),ct=null!==(g=qe.apiKey)&&void 0!==g?g:null,Pt=null!==(E=qe.oobCode)&&void 0!==E?E:null,Et=function Au(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(P=qe.mode)&&void 0!==P?P:null);Y(ct&&Pt&&Et,"argument-error"),this.apiKey=ct,this.operation=Et,this.code=Pt,this.continueUrl=null!==(B=qe.continueUrl)&&void 0!==B?B:null,this.languageCode=null!==(se=qe.languageCode)&&void 0!==se?se:null,this.tenantId=null!==(Ce=qe.tenantId)&&void 0!==Ce?Ce:null}static parseLink(f){const g=function Go(y){const f=(0,S.zd)((0,S.pd)(y)).link,g=f?(0,S.zd)((0,S.pd)(f)).deep_link_id:null,E=(0,S.zd)((0,S.pd)(y)).deep_link_id;return(E?(0,S.zd)((0,S.pd)(E)).link:null)||E||g||f||y}(f);try{return new Or(g)}catch{return null}}}let Cd=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,E){return si._fromEmailAndPassword(g,E)}static credentialWithLink(g,E){const P=Or.parseLink(E);return Y(P,"argument-error"),si._fromEmailAndCode(g,P.code,P.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class hs{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class ao extends hs{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class xa extends ao{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return Y("providerId"in g&&"signInMethod"in g,"argument-error"),ls._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Y(f.idToken||f.accessToken,"argument-error"),ls._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return xa.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return xa.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:E,oauthTokenSecret:P,pendingToken:B,nonce:se,providerId:Ce}=f;if(!E&&!P&&!g&&!B||!Ce)return null;try{return new xa(Ce)._credential({idToken:g,accessToken:E,nonce:se,pendingToken:B})}catch{return null}}}let Fc=(()=>{class y extends ao{constructor(){super("facebook.com")}static credential(g){return ls._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),bf=(()=>{class y extends ao{constructor(){super("google.com"),this.addScope("profile")}static credential(g,E){return ls._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:E})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:P}=g;if(!E&&!P)return null;try{return y.credential(E,P)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Cf=(()=>{class y extends ao{constructor(){super("github.com")}static credential(g){return ls._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Wo extends ur{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return gi(f,this.buildRequest())}_linkToIdToken(f,g){const E=this.buildRequest();return E.idToken=g,gi(f,E)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,gi(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:P,pendingToken:B}=g;return E&&P&&B&&E===P?new Wo(E,B):null}static _create(f,g){return new Wo(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Wi extends hs{constructor(f){Y(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Wi.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Wi.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Wo.fromJSON(f);return Y(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:E}=f;if(!g||!E)return null;try{return Wo._create(E,g)}catch{return null}}}let Bg=(()=>{class y extends ao{constructor(){super("twitter.com")}static credential(g,E){return ls._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:E})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:E,oauthTokenSecret:P}=g;if(!E||!P)return null;try{return y.credential(E,P)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Lc(y,f){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,m.Z)(function*(y,f){return Rn(y,"POST","/v1/accounts:signUp",ot(y,f))})).apply(this,arguments)}class _i{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,E,P=!1){return(0,m.Z)(function*(){const B=yield jt._fromIdTokenResponse(f,E,P),se=Vc(E);return new _i({user:B,providerId:se,_tokenResponse:E,operationType:g})})()}static _forOperation(f,g,E){return(0,m.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const P=Vc(E);return new _i({user:f,providerId:P,_tokenResponse:E,operationType:g})})()}}function Vc(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Tf(){return(Tf=(0,m.Z)(function*(y){var f;const g=Ln(y);if(yield g._initializationPromise,null!==(f=g.currentUser)&&void 0!==f&&f.isAnonymous)return new _i({user:g.currentUser,providerId:null,operationType:"signIn"});const E=yield Lc(g,{returnSecureToken:!0}),P=yield _i._fromIdTokenResponse(g,"signIn",E,!0);return yield g._updateCurrentUser(P.user),P})).apply(this,arguments)}class xu extends S.ZR{constructor(f,g,E,P){var B;super(g.code,g.message),this.operationType=E,this.user=P,Object.setPrototypeOf(this,xu.prototype),this.customData={appName:f.name,tenantId:null!==(B=f.tenantId)&&void 0!==B?B:void 0,_serverResponse:g.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,g,E,P){return new xu(f,g,E,P)}}function $g(y,f,g,E){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(B=>{throw"auth/multi-factor-auth-required"===B.code?xu._fromErrorAndOperation(y,B,f,E):B})}function ui(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function co(){return co=(0,m.Z)(function*(y,f){const g=(0,S.m9)(y);yield Ko(!0,g,f);const{providerUserInfo:E}=yield function ri(y,f){return wt.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),P=ui(E||[]);return g.providerData=g.providerData.filter(B=>P.has(B.providerId)),P.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),co.apply(this,arguments)}function Pa(y,f){return qo.apply(this,arguments)}function qo(){return(qo=(0,m.Z)(function*(y,f,g=!1){const E=yield In(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return _i._forOperation(y,"link",E)})).apply(this,arguments)}function Ko(y,f,g){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,m.Z)(function*(y,f,g){yield dn(f);const P=!1===y?"provider-already-linked":"no-such-provider";Y(ui(f.providerData).has(g)===y,f.auth,P)})).apply(this,arguments)}function jc(y,f){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,m.Z)(function*(y,f,g=!1){const{auth:E}=y,P="reauthenticate";try{const B=yield In(y,$g(E,P,f,y),g);Y(B.idToken,E,"internal-error");const se=Rt(B.idToken);Y(se,E,"internal-error");const{sub:Ce}=se;return Y(y.uid===Ce,E,"user-mismatch"),_i._forOperation(y,P,B)}catch(B){throw"auth/user-not-found"===B?.code&&ce(E,"user-mismatch"),B}})).apply(this,arguments)}function js(y,f){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,m.Z)(function*(y,f,g=!1){const E="signIn",P=yield $g(y,E,f),B=yield _i._fromIdTokenResponse(y,E,P);return g||(yield y._updateCurrentUser(B.user)),B})).apply(this,arguments)}function sn(y,f){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,m.Z)(function*(y,f){return js(Ln(y),f)})).apply(this,arguments)}function Ma(y,f){return On.apply(this,arguments)}function On(){return(On=(0,m.Z)(function*(y,f){const g=(0,S.m9)(y);return yield Ko(!1,g,f.providerId),Pa(g,f)})).apply(this,arguments)}function Mu(y,f){return qi.apply(this,arguments)}function qi(){return(qi=(0,m.Z)(function*(y,f){return jc((0,S.m9)(y),f)})).apply(this,arguments)}function Na(){return(Na=(0,m.Z)(function*(y,f){return Rn(y,"POST","/v1/accounts:signInWithCustomToken",ot(y,f))})).apply(this,arguments)}function Ki(){return Ki=(0,m.Z)(function*(y,f){const g=Ln(y),E=yield function Mr(y,f){return Na.apply(this,arguments)}(g,{token:f,returnSecureToken:!0}),P=yield _i._fromIdTokenResponse(g,"signIn",E);return yield g._updateCurrentUser(P.user),P}),Ki.apply(this,arguments)}class vr{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?$c._fromServerResponse(f,g):ce(f,"internal-error")}}class $c extends vr{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new $c(g)}}function lo(y,f,g){var E;Y((null===(E=g.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),Y(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Y(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(Y(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function xi(){return xi=(0,m.Z)(function*(y,f,g){const E=(0,S.m9)(y),P={requestType:"PASSWORD_RESET",email:f};g&&lo(E,P,g),yield function Vs(y,f){return Aa.apply(this,arguments)}(E,P)}),xi.apply(this,arguments)}function ka(){return(ka=(0,m.Z)(function*(y,f,g){yield Pr((0,S.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function ku(){return ku=(0,m.Z)(function*(y,f){yield function nt(y,f){return Lt.apply(this,arguments)}((0,S.m9)(y),{oobCode:f})}),ku.apply(this,arguments)}function Hc(y,f){return zc.apply(this,arguments)}function zc(){return(zc=(0,m.Z)(function*(y,f){const g=(0,S.m9)(y),E=yield Pr(g,{oobCode:f}),P=E.requestType;switch(Y(P,g,"internal-error"),P){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Y(E.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Y(E.mfaInfo,g,"internal-error");default:Y(E.email,g,"internal-error")}let B=null;return E.mfaInfo&&(B=vr._fromServerResponse(Ln(g),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:B},operation:P}})).apply(this,arguments)}function Wc(){return(Wc=(0,m.Z)(function*(y,f){const{data:g}=yield Hc((0,S.m9)(y),f);return g.email})).apply(this,arguments)}function qc(){return(qc=(0,m.Z)(function*(y,f,g){const E=Ln(y),P=yield Lc(E,{returnSecureToken:!0,email:f,password:g}),B=yield _i._fromIdTokenResponse(E,"signIn",P);return yield E._updateCurrentUser(B.user),B})).apply(this,arguments)}function Zt(){return Zt=(0,m.Z)(function*(y,f,g){const E=(0,S.m9)(y),P={requestType:"EMAIL_SIGNIN",email:f};Y(g.handleCodeInApp,E,"argument-error"),g&&lo(E,P,g),yield function Ht(y,f){return Bo.apply(this,arguments)}(E,P)}),Zt.apply(this,arguments)}function zn(){return(zn=(0,m.Z)(function*(y,f,g){const E=(0,S.m9)(y),P=Cd.credentialWithLink(f,g||Ie());return Y(P._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),sn(E,P)})).apply(this,arguments)}function Bs(){return(Bs=(0,m.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:createAuthUri",ot(y,f))})).apply(this,arguments)}function Fu(){return Fu=(0,m.Z)(function*(y,f){const E={identifier:f,continueUri:Pe()?Ie():"http://localhost"},{signinMethods:P}=yield function Sf(y,f){return Bs.apply(this,arguments)}((0,S.m9)(y),E);return P||[]}),Fu.apply(this,arguments)}function Uu(){return Uu=(0,m.Z)(function*(y,f){const g=(0,S.m9)(y),P={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&lo(g.auth,P,f);const{email:B}=yield function ro(y,f){return An.apply(this,arguments)}(g.auth,P);B!==y.email&&(yield y.reload())}),Uu.apply(this,arguments)}function Fa(){return Fa=(0,m.Z)(function*(y,f,g){const E=(0,S.m9)(y),B={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&lo(E.auth,B,g);const{email:se}=yield function $o(y,f){return io.apply(this,arguments)}(E.auth,B);se!==y.email&&(yield y.reload())}),Fa.apply(this,arguments)}function Nr(){return(Nr=(0,m.Z)(function*(y,f){return Ot(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ho(){return ho=(0,m.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const E=(0,S.m9)(y),B={idToken:yield E.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},se=yield In(E,function Jn(y,f){return Nr.apply(this,arguments)}(E.auth,B));E.displayName=se.displayName||null,E.photoURL=se.photoUrl||null;const Ce=E.providerData.find(({providerId:qe})=>"password"===qe);Ce&&(Ce.displayName=E.displayName,Ce.photoURL=E.photoURL),yield E._updateTokensIfNecessary(se)}),ho.apply(this,arguments)}function Zc(y,f,g){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,m.Z)(function*(y,f,g){const{auth:E}=y,B={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(B.email=f),g&&(B.password=g);const se=yield In(y,no(E,B));yield y._updateTokensIfNecessary(se,!0)})).apply(this,arguments)}class fs{constructor(f,g,E={}){this.isNewUser=f,this.providerId=g,this.profile=E}}class Qc extends fs{constructor(f,g,E,P){super(f,g,E),this.username=P}}class Pd extends fs{constructor(f,g){super(f,"facebook.com",g)}}class ju extends Qc{constructor(f,g){super(f,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Hg extends fs{constructor(f,g){super(f,"google.com",g)}}class Xc extends Qc{constructor(f,g,E){super(f,"twitter.com",g,E)}}function Od(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Af(y){var f,g;if(!y)return null;const{providerId:E}=y,P=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},B=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&y?.idToken){const se=null===(g=null===(f=Rt(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(se)return new fs(B,"anonymous"!==se&&"custom"!==se?se:null)}if(!E)return null;switch(E){case"facebook.com":return new Pd(B,P);case"github.com":return new ju(B,P);case"google.com":return new Hg(B,P);case"twitter.com":return new Xc(B,P,y.screenName||null);case"custom":case"anonymous":return new fs(B,null);default:return new fs(B,E,P)}}(g)}class fn{constructor(f,g,E){this.type=f,this.credential=g,this.auth=E}static _fromIdtoken(f,g){return new fn("enroll",f,g)}static _fromMfaPendingCredential(f){return new fn("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,E;if(f?.multiFactorSession){if(null!==(g=f.multiFactorSession)&&void 0!==g&&g.pendingCredential)return fn._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(E=f.multiFactorSession)&&void 0!==E&&E.idToken)return fn._fromIdtoken(f.multiFactorSession.idToken)}return null}}class el{constructor(f,g,E){this.session=f,this.hints=g,this.signInResolver=E}static _fromError(f,g){const E=Ln(f),P=g.customData._serverResponse,B=(P.mfaInfo||[]).map(Ce=>vr._fromServerResponse(E,Ce));Y(P.mfaPendingCredential,E,"internal-error");const se=fn._fromMfaPendingCredential(P.mfaPendingCredential);return new el(se,B,function(){var Ce=(0,m.Z)(function*(qe){const ct=yield qe._process(E,se);delete P.mfaInfo,delete P.mfaPendingCredential;const Pt=Object.assign(Object.assign({},P),{idToken:ct.idToken,refreshToken:ct.refreshToken});switch(g.operationType){case"signIn":const Et=yield _i._fromIdTokenResponse(E,g.operationType,Pt);return yield E._updateCurrentUser(Et.user),Et;case"reauthenticate":return Y(g.user,E,"internal-error"),_i._forOperation(g.user,g.operationType,Pt);default:ce(E,"internal-error")}});return function(qe){return Ce.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,m.Z)(function*(){return g.signInResolver(f)})()}}class Nd{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(E=>vr._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new Nd(f)}getSession(){var f=this;return(0,m.Z)(function*(){return fn._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,g){var E=this;return(0,m.Z)(function*(){const P=f,B=yield E.getSession(),se=yield In(E.user,P._process(E.user.auth,B,g));return yield E.user._updateTokensIfNecessary(se),E.user.reload()})()}unenroll(f){var g=this;return(0,m.Z)(function*(){const E="string"==typeof f?f:f.uid,P=yield g.user.getIdToken();try{const B=yield In(g.user,function qg(y,f){return Ot(y,"POST","/v2/accounts/mfaEnrollment:withdraw",ot(y,f))}(g.user.auth,{idToken:P,mfaEnrollmentId:E}));g.enrolledFactors=g.enrolledFactors.filter(({uid:se})=>se!==E),yield g.user._updateTokensIfNecessary(B),yield g.user.reload()}catch(B){throw B}})()}}const fo=new WeakMap,ps="__sak";class Zo{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(ps,"1"),this.storage.removeItem(ps),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const La=(()=>{class y extends Zo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,E)=>this.onStorageEvent(g,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Yo(){const y=(0,S.z$)();return tt(y)||Ft(y)}()&&function Pc(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ef(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const E of Object.keys(this.listeners)){const P=this.storage.getItem(E),B=this.localCache[E];P!==B&&g(E,B,P)}}onStorageEvent(g,E=!1){if(!g.key)return void this.forAllChangedKeys((Ce,qe,ct)=>{this.notifyListeners(Ce,ct)});const P=g.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ce=this.storage.getItem(P);if(g.newValue!==Ce)null!==g.newValue?this.storage.setItem(P,g.newValue):this.storage.removeItem(P);else if(this.localCache[P]===g.newValue&&!E)return}const B=()=>{const Ce=this.storage.getItem(P);!E&&this.localCache[P]===Ce||this.notifyListeners(P,Ce)},se=this.storage.getItem(P);!function bu(){return(0,S.w1)()&&10===document.documentMode}()||se===g.newValue||g.newValue===g.oldValue?B():setTimeout(B,10)}notifyListeners(g,E){this.localCache[g]=E;const P=this.listeners[g];if(P)for(const B of Array.from(P))B(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,E,P)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:E,newValue:P}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,E){var P=()=>super._set,B=this;return(0,m.Z)(function*(){yield P().call(B,g,E),B.localCache[g]=JSON.stringify(E)})()}_get(g){var E=()=>super._get,P=this;return(0,m.Z)(function*(){const B=yield E().call(P,g);return P.localCache[g]=JSON.stringify(B),B})()}_remove(g){var E=()=>super._remove,P=this;return(0,m.Z)(function*(){yield E().call(P,g),delete P.localCache[g]})()}}return y.type="LOCAL",y})(),Yi=(()=>{class y extends Zo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,E){}_removeListener(g,E){}}return y.type="SESSION",y})();let Mf=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const E=this.receivers.find(B=>B.isListeningto(g));if(E)return E;const P=new y(g);return this.receivers.push(P),P}isListeningto(g){return this.eventTarget===g}handleEvent(g){var E=this;return(0,m.Z)(function*(){const P=g,{eventId:B,eventType:se,data:Ce}=P.data,qe=E.handlersMap[se];if(!qe?.size)return;P.ports[0].postMessage({status:"ack",eventId:B,eventType:se});const ct=Array.from(qe).map(function(){var Et=(0,m.Z)(function*(hr){return hr(P.origin,Ce)});return function(hr){return Et.apply(this,arguments)}}()),Pt=yield function Of(y){return Promise.all(y.map(function(){var f=(0,m.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(E){return{fulfilled:!1,reason:E}}});return function(g){return f.apply(this,arguments)}}()))}(ct);P.ports[0].postMessage({status:"done",eventId:B,eventType:se,response:Pt})})()}_subscribe(g,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(E)}_unsubscribe(g,E){this.handlersMap[g]&&E&&this.handlersMap[g].delete(E),(!E||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Hs(y="",f=10){let g="";for(let E=0;E<f;E++)g+=Math.floor(10*Math.random());return y+g}class Ua{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,E=50){var P=this;return(0,m.Z)(function*(){const B=typeof MessageChannel<"u"?new MessageChannel:null;if(!B)throw new Error("connection_unavailable");let se,Ce;return new Promise((qe,ct)=>{const Pt=Hs("",20);B.port1.start();const Et=setTimeout(()=>{ct(new Error("unsupported_event"))},E);Ce={messageChannel:B,onMessage(hr){const ki=hr;if(ki.data.eventId===Pt)switch(ki.data.status){case"ack":clearTimeout(Et),se=setTimeout(()=>{ct(new Error("timeout"))},3e3);break;case"done":clearTimeout(se),qe(ki.data.response);break;default:clearTimeout(Et),clearTimeout(se),ct(new Error("invalid_response"))}}},P.handlers.add(Ce),B.port1.addEventListener("message",Ce.onMessage),P.target.postMessage({eventType:f,eventId:Pt,data:g},[B.port2])}).finally(()=>{Ce&&P.removeMessageHandler(Ce)})})()}}function er(){return window}function ms(){return typeof er().WorkerGlobalScope<"u"&&"function"==typeof er().importScripts}function _s(){return(_s=(0,m.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const po="firebaseLocalStorageDb",Nf=1,ys="firebaseLocalStorage",Va="fbase_key";class Qi{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function il(y,f){return y.transaction([ys],f?"readwrite":"readonly").objectStore(ys)}function Ba(){const y=indexedDB.open(po,Nf);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(ys,{keyPath:Va})}catch(P){g(P)}}),y.addEventListener("success",(0,m.Z)(function*(){const E=y.result;E.objectStoreNames.contains(ys)?f(E):(E.close(),yield function ja(){const y=indexedDB.deleteDatabase(po);return new Qi(y).toPromise()}(),f(yield Ba()))}))})}function Jo(y,f,g){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,m.Z)(function*(y,f,g){const E=il(y,!0).put({[Va]:f,value:g});return new Qi(E).toPromise()})).apply(this,arguments)}function vs(){return(vs=(0,m.Z)(function*(y,f){const g=il(y,!1).get(f),E=yield new Qi(g).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function ea(y,f){const g=il(y,!0).delete(f);return new Qi(g).toPromise()}const ta=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,m.Z)(function*(){return g.db||(g.db=yield Ba()),g.db})()}_withRetries(g){var E=this;return(0,m.Z)(function*(){let P=0;for(;;)try{const B=yield E._openDb();return yield g(B)}catch(B){if(P++>3)throw B;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,m.Z)(function*(){return ms()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,m.Z)(function*(){g.receiver=Mf._getInstance(function rl(){return ms()?self:null}()),g.receiver._subscribe("keyChanged",function(){var E=(0,m.Z)(function*(P,B){return{keyProcessed:(yield g._poll()).includes(B.key)}});return function(P,B){return E.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var E=(0,m.Z)(function*(P,B){return["keyChanged"]});return function(P,B){return E.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,m.Z)(function*(){var E,P;if(g.activeServiceWorker=yield function Xo(){return _s.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Ua(g.activeServiceWorker);const B=yield g.sender._send("ping",{},800);B&&null!==(E=B[0])&&void 0!==E&&E.fulfilled&&null!==(P=B[0])&&void 0!==P&&P.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var E=this;return(0,m.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function nl(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:g},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Ba();return yield Jo(g,ps,"1"),yield ea(g,ps),!0}catch{}return!1})()}_withPendingWrite(g){var E=this;return(0,m.Z)(function*(){E.pendingWrites++;try{yield g()}finally{E.pendingWrites--}})()}_set(g,E){var P=this;return(0,m.Z)(function*(){return P._withPendingWrite((0,m.Z)(function*(){return yield P._withRetries(B=>Jo(B,g,E)),P.localCache[g]=E,P.notifyServiceWorker(g)}))})()}_get(g){var E=this;return(0,m.Z)(function*(){const P=yield E._withRetries(B=>function sl(y,f){return vs.apply(this,arguments)}(B,g));return E.localCache[g]=P,P})()}_remove(g){var E=this;return(0,m.Z)(function*(){return E._withPendingWrite((0,m.Z)(function*(){return yield E._withRetries(P=>ea(P,g)),delete E.localCache[g],E.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,m.Z)(function*(){const E=yield g._withRetries(se=>{const Ce=il(se,!1).getAll();return new Qi(Ce).toPromise()});if(!E)return[];if(0!==g.pendingWrites)return[];const P=[],B=new Set;for(const{fbase_key:se,value:Ce}of E)B.add(se),JSON.stringify(g.localCache[se])!==JSON.stringify(Ce)&&(g.notifyListeners(se,Ce),P.push(se));for(const se of Object.keys(g.localCache))g.localCache[se]&&!B.has(se)&&(g.notifyListeners(se,null),P.push(se));return P})()}notifyListeners(g,E){this.localCache[g]=E;const P=this.listeners[g];if(P)for(const B of Array.from(P))B(E)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Ga(){return(Ga=(0,m.Z)(function*(y){return(yield Ot(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function go(y){return new Promise((f,g)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=f,E.onerror=P=>{const B=we("internal-error");B.customData=P,g(B)},E.type="text/javascript",E.charset="UTF-8",function Bu(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(E)})}function zs(y){return`__${y}${Math.floor(1e6*Math.random())}`}const mo=1e12;class Wa{constructor(f){this.auth=f,this.counter=mo,this._widgets=new Map}render(f,g){const E=this.counter;return this._widgets.set(E,new kf(f,this.auth.name,g||{})),this.counter++,E}reset(f){var g;const E=f||mo;null===(g=this._widgets.get(E))||void 0===g||g.delete(),this._widgets.delete(E)}getResponse(f){var g;return(null===(g=this._widgets.get(f||mo))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,m.Z)(function*(){var E;return null===(E=g._widgets.get(f||mo))||void 0===E||E.execute(),""})()}}class kf{constructor(f,g,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const P="string"==typeof f?document.getElementById(f):f;Y(P,"argument-error",{appName:g}),this.container=P,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ul(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const $u=zs("rcb"),Fd=new et(3e4,6e4);class na{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=er().grecaptcha)||void 0===f||!f.render)}load(f,g=""){return Y(function qa(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(er().grecaptcha):new Promise((E,P)=>{const B=er().setTimeout(()=>{P(we(f,"network-request-failed"))},Fd.get());er()[$u]=()=>{er().clearTimeout(B),delete er()[$u];const Ce=er().grecaptcha;if(!Ce)return void P(we(f,"internal-error"));const qe=Ce.render;Ce.render=(ct,Pt)=>{const Et=qe(ct,Pt);return this.counter++,Et},this.hostLanguage=g,E(Ce)},go(`https://www.google.com/recaptcha/api.js??${(0,S.xO)({onload:$u,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(B),P(we(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!(null===(g=er().grecaptcha)||void 0===g||!g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Hu{load(f){return(0,m.Z)(function*(){return new Wa(f)})()}clearedOneInstance(){}}const ra="recaptcha",Kg={theme:"light",type:"image"};class Ld{constructor(f,g=Object.assign({},Kg),E){this.parameters=g,this.type=ra,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ln(E),this.isInvisible="invisible"===this.parameters.size,Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const P="string"==typeof f?document.getElementById(f):f;Y(P,this.auth,"argument-error"),this.container=P,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hu:new na,this.validateStartingState()}verify(){var f=this;return(0,m.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(g)||new Promise(B=>{const se=Ce=>{Ce&&(f.tokenChangeListeners.delete(se),B(Ce))};f.tokenChangeListeners.add(se),f.isInvisible&&E.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Y(!this.parameters.sitekey,this.auth,"argument-error"),Y(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Y(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(E=>E(g)),"function"==typeof f)f(g);else if("string"==typeof f){const E=er()[f];"function"==typeof E&&E(g)}}}assertNotDestroyed(){Y(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,m.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const E=document.createElement("div");g.appendChild(E),g=E}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,m.Z)(function*(){Y(Pe()&&!ms(),f.auth,"internal-error"),yield function _o(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Xi(y){return Ga.apply(this,arguments)}(f.auth);Y(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return Y(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ud{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=ds._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function hn(){return(hn=(0,m.Z)(function*(y,f,g){const E=Ln(y),P=yield Vd(E,f,(0,S.m9)(g));return new Ud(P,B=>sn(E,B))})).apply(this,arguments)}function zu(){return(zu=(0,m.Z)(function*(y,f,g){const E=(0,S.m9)(y);yield Ko(!1,E,"phone");const P=yield Vd(E.auth,f,(0,S.m9)(g));return new Ud(P,B=>Ma(E,B))})).apply(this,arguments)}function Lf(){return(Lf=(0,m.Z)(function*(y,f,g){const E=(0,S.m9)(y),P=yield Vd(E.auth,f,(0,S.m9)(g));return new Ud(P,B=>Mu(E,B))})).apply(this,arguments)}function Vd(y,f,g){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,m.Z)(function*(y,f,g){var E;const P=yield g.verify();try{let B;if(Y("string"==typeof P,y,"argument-error"),Y(g.type===ra,y,"argument-error"),B="string"==typeof f?{phoneNumber:f}:f,"session"in B){const se=B.session;if("phoneNumber"in B)return Y("enroll"===se.type,y,"internal-error"),(yield function xf(y,f){return Ot(y,"POST","/v2/accounts/mfaEnrollment:start",ot(y,f))}(y,{idToken:se.credential,phoneEnrollmentInfo:{phoneNumber:B.phoneNumber,recaptchaToken:P}})).phoneSessionInfo.sessionInfo;{Y("signin"===se.type,y,"internal-error");const Ce=(null===(E=B.multiFactorHint)||void 0===E?void 0:E.uid)||B.multiFactorUid;return Y(Ce,y,"missing-multi-factor-info"),(yield function za(y,f){return Ot(y,"POST","/v2/accounts/mfaSignIn:start",ot(y,f))}(y,{mfaPendingCredential:se.credential,mfaEnrollmentId:Ce,phoneSignInInfo:{recaptchaToken:P}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:se}=yield function kc(y,f){return Su.apply(this,arguments)}(y,{phoneNumber:B.phoneNumber,recaptchaToken:P});return se}}finally{g._reset()}}),Uf.apply(this,arguments)}function ia(){return(ia=(0,m.Z)(function*(y,f){yield Pa((0,S.m9)(y),f)})).apply(this,arguments)}let ll=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Ln(g)}verifyPhoneNumber(g,E){return Vd(this.auth,g,(0,S.m9)(E))}static credential(g,E){return ds._fromVerification(g,E)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:E,temporaryProof:P}=g;return E&&P?ds._fromTokenResponse(E,P):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function sa(y,f){return f?rt(f):(Y(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Gn extends ur{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return gi(f,this._buildIdpRequest())}_linkToIdToken(f,g){return gi(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return gi(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function jd(y){return js(y.auth,new Gn(y),y.bypassAuthState)}function yo(y){const{auth:f,user:g}=y;return Y(g,f,"internal-error"),jc(g,new Gn(y),y.bypassAuthState)}function Bd(y){return kr.apply(this,arguments)}function kr(){return(kr=(0,m.Z)(function*(y){const{auth:f,user:g}=y;return Y(g,f,"internal-error"),Pa(g,new Gn(y),y.bypassAuthState)})).apply(this,arguments)}class Is{constructor(f,g,E,P,B=!1){this.auth=f,this.resolver=E,this.user=P,this.bypassAuthState=B,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,m.Z)(function*(E,P){f.pendingPromise={resolve:E,reject:P};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(B){f.reject(B)}});return function(E,P){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,m.Z)(function*(){const{urlResponse:E,sessionId:P,postBody:B,tenantId:se,error:Ce,type:qe}=f;if(Ce)return void g.reject(Ce);const ct={auth:g.auth,requestUri:E,sessionId:P,tenantId:se||void 0,postBody:B||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(qe)(ct))}catch(Pt){g.reject(Pt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return jd;case"linkViaPopup":case"linkViaRedirect":return Bd;case"reauthViaPopup":case"reauthViaRedirect":return yo;default:ce(this.auth,"internal-error")}}resolve(f){je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const dl=new et(2e3,1e4);function Gs(){return(Gs=(0,m.Z)(function*(y,f,g){const E=Ln(y);$e(y,f,hs);const P=sa(E,g);return new Fr(E,"signInViaPopup",f,P).executeNotNull()})).apply(this,arguments)}function Yg(){return(Yg=(0,m.Z)(function*(y,f,g){const E=(0,S.m9)(y);$e(E.auth,f,hs);const P=sa(E.auth,g);return new Fr(E.auth,"reauthViaPopup",f,P,E).executeNotNull()})).apply(this,arguments)}function Vf(){return(Vf=(0,m.Z)(function*(y,f,g){const E=(0,S.m9)(y);$e(E.auth,f,hs);const P=sa(E.auth,g);return new Fr(E.auth,"linkViaPopup",f,P,E).executeNotNull()})).apply(this,arguments)}let Fr=(()=>{class y extends Is{constructor(g,E,P,B,se){super(g,E,B,se),this.provider=P,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,m.Z)(function*(){const E=yield g.execute();return Y(E,g.auth,"internal-error"),E})()}onExecution(){var g=this;return(0,m.Z)(function*(){je(1===g.filter.length,"Popup operations only handle one event");const E=Hs();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],E),g.authWindow.associatedEvent=E,g.resolver._originValidation(g.auth).catch(P=>{g.reject(P)}),g.resolver._isIframeWebStorageSupported(g.auth,P=>{P||g.reject(we(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var E,P;this.pollId=null!==(P=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==P&&P.closed?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,dl.get())};g()}}return y.currentPopupAction=null,y})();const vo="pendingRedirect",Ji=new Map;class Uy extends Is{constructor(f,g,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,m.Z)(function*(){let E=Ji.get(g.auth._key());if(!E){try{const B=(yield function $d(y,f){return _n.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;E=()=>Promise.resolve(B)}catch(P){E=()=>Promise.reject(P)}Ji.set(g.auth._key(),E)}return g.bypassAuthState||Ji.set(g.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,E=this;return(0,m.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(E,f);if("unknown"!==f.type){if(f.eventId){const P=yield E.auth._redirectUserForId(f.eventId);if(P)return E.user=P,g().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function _n(){return(_n=(0,m.Z)(function*(y,f){const g=oa(f),E=yi(y);if(!(yield E._isAvailable()))return!1;const P="true"===(yield E._get(g));return yield E._remove(g),P})).apply(this,arguments)}function es(y,f){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,m.Z)(function*(y,f){return yi(y)._set(oa(f),"true")})).apply(this,arguments)}function dt(y,f){Ji.set(y._key(),f)}function yi(y){return rt(y._redirectPersistence)}function oa(y){return Q(vo,y.config.apiKey,y.name)}function wo(y,f,g){return function Za(y,f,g){return T.apply(this,arguments)}(y,f,g)}function T(){return(T=(0,m.Z)(function*(y,f,g){const E=Ln(y);$e(y,f,hs),yield E._initializationPromise;const P=sa(E,g);return yield es(P,E),P._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function D(y,f,g){return function L(y,f,g){return G.apply(this,arguments)}(y,f,g)}function G(){return(G=(0,m.Z)(function*(y,f,g){const E=(0,S.m9)(y);$e(E.auth,f,hs),yield E.auth._initializationPromise;const P=sa(E.auth,g);yield es(P,E.auth);const B=yield yt(E);return P._openRedirect(E.auth,f,"reauthViaRedirect",B)})).apply(this,arguments)}function oe(y,f,g){return function fe(y,f,g){return ke.apply(this,arguments)}(y,f,g)}function ke(){return(ke=(0,m.Z)(function*(y,f,g){const E=(0,S.m9)(y);$e(E.auth,f,hs),yield E.auth._initializationPromise;const P=sa(E.auth,g);yield Ko(!1,E,f.providerId),yield es(P,E.auth);const B=yield yt(E);return P._openRedirect(E.auth,f,"linkViaRedirect",B)})).apply(this,arguments)}function gt(){return(gt=(0,m.Z)(function*(y,f){return yield Ln(y)._initializationPromise,mt(y,f,!1)})).apply(this,arguments)}function mt(y,f){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,m.Z)(function*(y,f,g=!1){const E=Ln(y),P=sa(E,f),se=yield new Uy(E,P,g).execute();return se&&!g&&(delete se.user._redirectEventId,yield E._persistUserIfCurrent(se.user),yield E._setRedirectUser(null,f)),se})).apply(this,arguments)}function yt(y){return cr.apply(this,arguments)}function cr(){return(cr=(0,m.Z)(function*(y){const f=Hs(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Eo{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(g=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function nr(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ts(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var E;if(f.error&&!ts(f)){const P=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";g.onError(we(this.auth,P))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const E=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gu(f))}saveEventToCache(f){this.cachedEventUids.add(Gu(f)),this.lastProcessedEventTime=Date.now()}}function Gu(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function ts({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===f?.code}function Oi(y){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,m.Z)(function*(y,f={}){return Ot(y,"GET","/v1/projects",f)})).apply(this,arguments)}const Wu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,on=/^https?/;function Qa(){return(Qa=(0,m.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Oi(y);for(const g of f)try{if(RE(g))return}catch{}ce(y,"unauthorized-domain")})).apply(this,arguments)}function RE(y){const f=Ie(),{protocol:g,hostname:E}=new URL(f);if(y.startsWith("chrome-extension://")){const se=new URL(y);return""===se.hostname&&""===E?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&se.hostname===E}if(!on.test(g))return!1;if(Wu.test(y))return E===y;const P=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+P+"|"+P+")$","i").test(E)}const Vy=new et(3e4,6e4);function jy(){const y=er().___jsl;if(y?.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Bf=null;const xE=new et(5e3,15e3),PE="__/auth/iframe",em="emulator/auth/iframe",cD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dD(y){const f=y.config;Y(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?Je(f,em):`https://${y.config.authDomain}/${PE}`,E={apiKey:f.apiKey,appName:y.name,v:H.SDK_VERSION},P=lD.get(y.config.apiHost);P&&(E.eid=P);const B=y._getFrameworks();return B.length&&(E.fw=B.join(",")),`${g}?${(0,S.xO)(E).slice(1)}`}function By(){return By=(0,m.Z)(function*(y){const f=yield function Jg(y){return Bf=Bf||function jf(y){return new Promise((f,g)=>{var E,P,B;function se(){jy(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{jy(),g(we(y,"network-request-failed"))},timeout:Vy.get()})}if(null!==(P=null===(E=er().gapi)||void 0===E?void 0:E.iframes)&&void 0!==P&&P.Iframe)f(gapi.iframes.getContext());else{if(null===(B=er().gapi)||void 0===B||!B.load){const Ce=zs("iframefcb");return er()[Ce]=()=>{gapi.load?se():g(we(y,"network-request-failed"))},go(`https://apis.google.com/js/api.js?onload=${Ce}`).catch(qe=>g(qe))}se()}}).catch(f=>{throw Bf=null,f})}(y),Bf}(y),g=er().gapi;return Y(g,y,"internal-error"),f.open({where:document.body,url:dD(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cD,dontclear:!0},E=>new Promise(function(){var P=(0,m.Z)(function*(B,se){yield E.restyle({setHideOnLeave:!1});const Ce=we(y,"network-request-failed"),qe=er().setTimeout(()=>{se(Ce)},xE.get());function ct(){er().clearTimeout(qe),B(E)}E.ping(ct).then(ct,()=>{se(Ce)})});return function(B,se){return P.apply(this,arguments)}}()))}),By.apply(this,arguments)}const OE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$y=500,be=600,qr="_blank",ns="http://localhost";class z{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const tm="__/auth/handler",Hy="emulator/auth/handler";function dr(y,f,g,E,P,B){Y(y.config.authDomain,y,"auth-domain-config-required"),Y(y.config.apiKey,y,"invalid-api-key");const se={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:E,v:H.SDK_VERSION,eventId:P};if(f instanceof hs){f.setDefaultLanguage(y.languageCode),se.providerId=f.providerId||"",(0,S.xb)(f.getCustomParameters())||(se.customParameters=JSON.stringify(f.getCustomParameters()));for(const[qe,ct]of Object.entries(B||{}))se[qe]=ct}if(f instanceof ao){const qe=f.getScopes().filter(ct=>""!==ct);qe.length>0&&(se.scopes=qe.join(","))}y.tenantId&&(se.tid=y.tenantId);const Ce=se;for(const qe of Object.keys(Ce))void 0===Ce[qe]&&delete Ce[qe];return`${function Hf({config:y}){return y.emulator?Je(y,Hy):`https://${y.authDomain}/${tm}`}(y)}?${(0,S.xO)(Ce).slice(1)}`}const qu="webStorageSupport",nm=class zf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yi,this._completeRedirectFn=mt,this._overrideRedirectResult=dt}_openPopup(f,g,E,P){var B=this;return(0,m.Z)(function*(){var se;je(null===(se=B.eventManagers[f._key()])||void 0===se?void 0:se.manager,"_initialize() not called before _openPopup()");const Ce=dr(f,g,E,Ie(),P);return function lr(y,f,g,E=$y,P=be){const B=Math.max((window.screen.availHeight-P)/2,0).toString(),se=Math.max((window.screen.availWidth-E)/2,0).toString();let Ce="";const qe=Object.assign(Object.assign({},OE),{width:E.toString(),height:P.toString(),top:B,left:se}),ct=(0,S.z$)().toLowerCase();g&&(Ce=Qe(ct)?qr:g),he(ct)&&(f=f||ns,qe.scrollbars="yes");const Pt=Object.entries(qe).reduce((hr,[ki,Ju])=>`${hr}${ki}=${Ju},`,"");if(function zi(y=(0,S.z$)()){var f;return Ft(y)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(ct)&&"_self"!==Ce)return function $f(y,f){const g=document.createElement("a");g.href=y,g.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(E)}(f||"",Ce),new z(null);const Et=window.open(f||"",Ce,Pt);Y(Et,y,"popup-blocked");try{Et.focus()}catch{}return new z(Et)}(f,Ce,Hs())})()}_openRedirect(f,g,E,P){var B=this;return(0,m.Z)(function*(){return yield B._originValidation(f),function Qo(y){er().location.href=y}(dr(f,g,E,Ie(),P)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:P,promise:B}=this.eventManagers[g];return P?Promise.resolve(P):(je(B,"If manager is not set, promise should be"),B)}const E=this.initAndGetManager(f);return this.eventManagers[g]={promise:E},E.catch(()=>{delete this.eventManagers[g]}),E}initAndGetManager(f){var g=this;return(0,m.Z)(function*(){const E=yield function hD(y){return By.apply(this,arguments)}(f),P=new Eo(f);return E.register("authEvent",B=>(Y(B?.authEvent,f,"invalid-auth-event"),{status:P.onEvent(B.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:P},g.iframes[f._key()]=E,P})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(qu,{type:qu},P=>{var B;const se=null===(B=P?.[0])||void 0===B?void 0:B[qu];void 0!==se&&g(!!se),ce(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Xg(y){return Qa.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ef()||tt()||Ft()}};class rm{constructor(f){this.factorId=f}_process(f,g,E){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,E);case"signin":return this._finalizeSignIn(f,g.credential);default:return ge("unexpected MultiFactorSessionType")}}}class Gf extends rm{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Gf(f)}_finalizeEnroll(f,g,E){return function Wg(y,f){return Ot(y,"POST","/v2/accounts/mfaEnrollment:finalize",ot(y,f))}(f,{idToken:g,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function kd(y,f){return Ot(y,"POST","/v2/accounts/mfaSignIn:finalize",ot(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let im=(()=>{class y{constructor(){}static assertion(g){return Gf._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var ci="@firebase/auth";class sm{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,m.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(E=>{f(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);g&&(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Io(){return window}(0,S.Pz)("authIdTokenMaxAge"),function gn(y){(0,H._registerComponent)(new k.wA("auth",(f,{options:g})=>{const E=f.getProvider("app").getImmediate(),P=f.getProvider("heartbeat"),{apiKey:B,authDomain:se}=E.options;return((Ce,qe)=>{Y(B&&!B.includes(":"),"invalid-api-key",{appName:Ce.name}),Y(!se?.includes(":"),"argument-error",{appName:Ce.name});const ct={apiKey:B,authDomain:se,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cu(y)},Pt=new If(Ce,qe,ct);return function me(y,f){const g=f?.persistence||[],E=(Array.isArray(g)?g:[g]).map(rt);f?.errorMap&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(E,f?.popupRedirectResolver)}(Pt,g),Pt})(E,P)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,E)=>{f.getProvider("auth-internal").initialize()})),(0,H._registerComponent)(new k.wA("auth-internal",f=>{const g=Ln(f.getProvider("auth").getImmediate());return new sm(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,H.registerVersion)(ci,"0.21.5",function Wf(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,H.registerVersion)(ci,"0.21.5","esm2017")}("Browser");const om=2e3;function Gd(){return Gd=(0,m.Z)(function*(y,f,g){var E;const{BuildInfo:P}=Io();je(f.sessionId,"AuthEvent did not contain a session ID");const B=yield function Wy(y){return Yf.apply(this,arguments)}(f.sessionId),se={};return Ft()?se.ibi=P.packageName:Pn()?se.apn=P.packageName:ce(y,"operation-not-supported-in-this-environment"),P.displayName&&(se.appDisplayName=P.displayName),se.sessionId=B,dr(y,g,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,se)}),Gd.apply(this,arguments)}function Zf(){return(Zf=(0,m.Z)(function*(y){const{BuildInfo:f}=Io(),g={};Ft()?g.iosBundleId=f.packageName:Pn()?g.androidPackageName=f.packageName:ce(y,"operation-not-supported-in-this-environment"),yield Oi(y,g)})).apply(this,arguments)}function Ku(){return(Ku=(0,m.Z)(function*(y,f,g){const{cordova:E}=Io();let P=()=>{};try{yield new Promise((B,se)=>{let Ce=null;function qe(){var Et;B();const hr=null===(Et=E.plugins.browsertab)||void 0===Et?void 0:Et.close;"function"==typeof hr&&hr(),"function"==typeof g?.close&&g.close()}function ct(){Ce||(Ce=window.setTimeout(()=>{se(we(y,"redirect-cancelled-by-user"))},om))}function Pt(){"visible"===document?.visibilityState&&ct()}f.addPassiveListener(qe),document.addEventListener("resume",ct,!1),Pn()&&document.addEventListener("visibilitychange",Pt,!1),P=()=>{f.removePassiveListener(qe),document.removeEventListener("resume",ct,!1),document.removeEventListener("visibilitychange",Pt,!1),Ce&&window.clearTimeout(Ce)}})}finally{P()}})).apply(this,arguments)}function Yf(){return(Yf=(0,m.Z)(function*(y){const f=function Qf(y){if(je(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let E=0;E<y.length;E++)g[E]=y.charCodeAt(E);return g}(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(P=>P.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Xf=20;class Jf extends Eo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,m.Z)(function*(){yield f.initPromise})()}}function fl(y){return Kd.apply(this,arguments)}function Kd(){return(Kd=(0,m.Z)(function*(y){const f=yield pl()._get(gl(y));return f&&(yield pl()._remove(gl(y))),f})).apply(this,arguments)}function qy(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<Xf;g++){const E=Math.floor(Math.random()*f.length);y.push(f.charAt(E))}return y.join("")}function pl(){return rt(La)}function gl(y){return Q("authEvent",y.config.apiKey,y.name)}function ml(y){if(!y?.includes("?"))return{};const[f,...g]=y.split("?");return(0,S.zd)(g.join("?"))}const am=class _l{constructor(){this._redirectPersistence=Yi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=mt,this._overrideRedirectResult=dt}_initialize(f){var g=this;return(0,m.Z)(function*(){const E=f._key();let P=g.eventManagers.get(E);return P||(P=new Jf(f),g.eventManagers.set(E,P),g.attachCallbackListeners(f,P)),P})()}_openPopup(f){ce(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,E,P){var B=this;return(0,m.Z)(function*(){!function Zu(y){var f,g,E,P,B,se,Ce,qe,ct,Pt;const Et=Io();Y("function"==typeof(null===(f=Et?.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Y(typeof(null===(g=Et?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Y("function"==typeof(null===(B=null===(P=null===(E=Et?.cordova)||void 0===E?void 0:E.plugins)||void 0===P?void 0:P.browsertab)||void 0===B?void 0:B.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Y("function"==typeof(null===(qe=null===(Ce=null===(se=Et?.cordova)||void 0===se?void 0:se.plugins)||void 0===Ce?void 0:Ce.browsertab)||void 0===qe?void 0:qe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Y("function"==typeof(null===(Pt=null===(ct=Et?.cordova)||void 0===ct?void 0:ct.InAppBrowser)||void 0===Pt?void 0:Pt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const se=yield B._initialize(f);yield se.initialized(),se.resetRedirect(),function pn(){Ji.clear()}(),yield B._originValidation(f);const Ce=function ua(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:qy(),postBody:null,tenantId:y.tenantId,error:we(y,"no-auth-event")}}(f,E,P);yield function qd(y,f){return pl()._set(gl(y),f)}(f,Ce);const qe=yield function zy(y,f,g){return Gd.apply(this,arguments)}(f,Ce,g),ct=yield function Xa(y){const{cordova:f}=Io();return new Promise(g=>{f.plugins.browsertab.isAvailable(E=>{let P=null;E?f.plugins.browsertab.openUrl(y):P=f.InAppBrowser.open(y,function Hr(y=(0,S.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(P)})})}(qe);return function Wd(y,f,g){return Ku.apply(this,arguments)}(f,se,ct)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Gy(y){return Zf.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:E,handleOpenURL:P,BuildInfo:B}=Io(),se=setTimeout((0,m.Z)(function*(){yield fl(f),g.onEvent(Zd())}),500),Ce=function(){var Pt=(0,m.Z)(function*(Et){clearTimeout(se);const hr=yield fl(f);let ki=null;hr&&Et?.url&&(ki=function Ja(y,f){var g,E;const P=function ep(y){const f=ml(y),g=f.link?decodeURIComponent(f.link):void 0,E=ml(g).link,P=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return ml(P).link||P||E||g||y}(f);if(P.includes("/__/auth/callback")){const B=ml(P),se=B.firebaseError?function Ky(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(B.firebaseError)):null,Ce=null===(E=null===(g=se?.code)||void 0===g?void 0:g.split("auth/"))||void 0===E?void 0:E[1],qe=Ce?we(Ce):null;return qe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:qe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:P,postBody:null}}return null}(hr,Et.url)),g.onEvent(ki||Zd())});return function(hr){return Pt.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,Ce);const qe=P,ct=`${B.packageName.toLowerCase()}://`;Io().handleOpenURL=function(){var Pt=(0,m.Z)(function*(Et){if(Et.toLowerCase().startsWith(ct)&&Ce({url:Et}),"function"==typeof qe)try{qe(Et)}catch(hr){console.error(hr)}});return function(Et){return Pt.apply(this,arguments)}}()}};function Zd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}const Xd=1e3;function Mi(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function rp(y=(0,S.z$)()){return!("file:"!==Mi()&&"ionic:"!==Mi()&&"capacitor:"!==Mi()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function ip(){try{const y=self.localStorage,f=Hs();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Yy(y=(0,S.z$)()){return function yl(){return(0,S.w1)()&&11===document?.documentMode}()||function vl(y=(0,S.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,S.hl)()}catch{return Jd()&&(0,S.hl)()}return!1}function Jd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function eh(){return(function np(){return"http:"===Mi()||"https:"===Mi()}()||(0,S.ru)()||rp())&&!function um(){return(0,S.b$)()||(0,S.UG)()}()&&ip()&&!Jd()}function th(){return rp()&&typeof document<"u"}function Yu(){return(Yu=(0,m.Z)(function*(){return!!th()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},Xd);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const vi={LOCAL:"local",NONE:"none",SESSION:"session"},Ws=Y,wl="persistence";function bo(y){return sp.apply(this,arguments)}function sp(){return(sp=(0,m.Z)(function*(y){yield y._initializationPromise;const f=dm(),g=Q(wl,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function dm(){var y;try{return(null===(y=function nh(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const hm=Y;class Co{constructor(){this.browserResolver=rt(nm),this.cordovaResolver=rt(am),this.underlyingResolver=null,this._redirectPersistence=Yi,this._completeRedirectFn=mt,this._overrideRedirectResult=dt}_initialize(f){var g=this;return(0,m.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,E,P){var B=this;return(0,m.Z)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._openPopup(f,g,E,P)})()}_openRedirect(f,g,E,P){var B=this;return(0,m.Z)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._openRedirect(f,g,E,P)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return th()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return hm(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,m.Z)(function*(){if(f.underlyingResolver)return;const g=yield function cm(){return Yu.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function ih(y){return y.unwrap()}function El(y){return eu(y)}function eu(y){const{_tokenResponse:f}=y instanceof S.ZR?y.customData:y;if(!f)return null;if(!(y instanceof S.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return ll.credentialFromResult(y);const g=f.providerId;if(!g||g===F.PASSWORD)return null;let E;switch(g){case F.GOOGLE:E=bf;break;case F.FACEBOOK:E=Fc;break;case F.GITHUB:E=Cf;break;case F.TWITTER:E=Bg;break;default:const{oauthIdToken:P,oauthAccessToken:B,oauthTokenSecret:se,pendingToken:Ce,nonce:qe}=f;return B||se||P||Ce?Ce?g.startsWith("saml.")?Wo._create(g,Ce):ls._fromParams({providerId:g,signInMethod:g,pendingToken:Ce,idToken:P,accessToken:B}):new xa(g).credential({idToken:P,accessToken:B,rawNonce:qe}):null}return y instanceof S.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function Ni(y,f){return f.catch(g=>{throw g instanceof S.ZR&&function fm(y,f){var g;const E=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new ME(y,function Ir(y,f){var g;const E=(0,S.m9)(y),P=f;return Y(f.customData.operationType,E,"argument-error"),Y(null===(g=P.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,E,"argument-error"),el._fromError(E,P)}(y,f));else if(E){const P=eu(f),B=f;P&&(B.credential=P,B.tenantId=E.tenantId||void 0,B.email=E.email||void 0,B.phoneNumber=E.phoneNumber||void 0)}}(y,g),g}).then(g=>{const P=g.user;return{operationType:g.operationType,credential:El(g),additionalUserInfo:Od(g),user:bs.getOrCreate(P)}})}function pm(y,f){return sh.apply(this,arguments)}function sh(){return(sh=(0,m.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:E=>Ni(y,g.confirm(E))}})).apply(this,arguments)}class ME{constructor(f,g){this.resolver=g,this.auth=function op(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Ni(ih(this.auth),this.resolver.resolveSignIn(f))}}class bs{constructor(f){this._delegate=f,this.multiFactor=function tl(y){const f=(0,S.m9)(y);return fo.has(f)||fo.set(f,Nd._fromUser(f)),fo.get(f)}(f)}static getOrCreate(f){return bs.USER_MAP.has(f)||bs.USER_MAP.set(f,new bs(f)),bs.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,m.Z)(function*(){return Ni(g.auth,Ma(g._delegate,f))})()}linkWithPhoneNumber(f,g){var E=this;return(0,m.Z)(function*(){return pm(E.auth,function Zg(y,f,g){return zu.apply(this,arguments)}(E._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,m.Z)(function*(){return Ni(g.auth,function Qg(y,f,g){return Vf.apply(this,arguments)}(g._delegate,f,Co))})()}linkWithRedirect(f){var g=this;return(0,m.Z)(function*(){return yield bo(Ln(g.auth)),oe(g._delegate,f,Co)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,m.Z)(function*(){return Ni(g.auth,Mu(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return pm(this.auth,function Ff(y,f,g){return Lf.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return Ni(this.auth,function Ly(y,f,g){return Yg.apply(this,arguments)}(this._delegate,f,Co))}reauthenticateWithRedirect(f){var g=this;return(0,m.Z)(function*(){return yield bo(Ln(g.auth)),D(g._delegate,f,Co)})()}sendEmailVerification(f){return function Lu(y,f){return Uu.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,m.Z)(function*(){return yield function Td(y,f){return co.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function Zi(y,f){return Zc((0,S.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Vu(y,f){return Zc((0,S.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Fy(y,f){return ia.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Kc(y,f){return ho.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function xd(y,f,g){return Fa.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}bs.USER_MAP=new WeakMap;const Qu=Y;let ap=(()=>{class y{constructor(g,E){if(this.app=g,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:P}=g.options;Qu(P,"invalid-api-key",{appName:g.name}),Qu(P,"invalid-api-key",{appName:g.name});const B=typeof window<"u"?Co:void 0;this._delegate=E.initialize({options:{persistence:Il(P,g.name),popupRedirectResolver:B}}),this._delegate._updateErrorMap(ae),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?bs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,E){!function Mc(y,f,g){const E=Ln(y);Y(E._canInitEmulator,E,"emulator-config-failed"),Y(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const P=!!g?.disableWarnings,B=Qt(f),{host:se,port:Ce}=function Xn(y){const f=Qt(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const E=g[2].split("@").pop()||"",P=/^(\[[^\]]+\])(:|$)/.exec(E);if(P){const B=P[1];return{host:B,port:mr(E.substr(B.length+1))}}{const[B,se]=E.split(":");return{host:B,port:mr(se)}}}(f);E.config.emulator={url:`${B}//${se}${null===Ce?"":`:${Ce}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:se,port:Ce,protocol:B.replace(":",""),options:Object.freeze({disableWarnings:P})}),P||function Us(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,E)}applyActionCode(g){return function Mt(y,f){return ku.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Hc(this._delegate,g)}confirmPasswordReset(g,E){return function Nu(y,f,g){return ka.apply(this,arguments)}(this._delegate,g,E)}createUserWithEmailAndPassword(g,E){var P=this;return(0,m.Z)(function*(){return Ni(P._delegate,function Ad(y,f,g){return qc.apply(this,arguments)}(P._delegate,g,E))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Pi(y,f){return Fu.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Rd(y,f){return"EMAIL_SIGNIN"===Or.parseLink(f)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,m.Z)(function*(){Qu(eh(),g._delegate,"operation-not-supported-in-this-environment");const E=yield function ut(y,f){return gt.apply(this,arguments)}(g._delegate,Co);return E?Ni(g._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Zy(y,f){Ln(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,E,P){const{next:B,error:se,complete:Ce}=Xu(g,E,P);return this._delegate.onAuthStateChanged(B,se,Ce)}onIdTokenChanged(g,E,P){const{next:B,error:se,complete:Ce}=Xu(g,E,P);return this._delegate.onIdTokenChanged(B,se,Ce)}sendSignInLinkToEmail(g,E){return function Fe(y,f,g){return Zt.apply(this,arguments)}(this._delegate,g,E)}sendPasswordResetEmail(g,E){return function Sd(y,f,g){return xi.apply(this,arguments)}(this._delegate,g,E||void 0)}setPersistence(g){var E=this;return(0,m.Z)(function*(){let P;switch(function rh(y,f){Ws(Object.values(vi).includes(f),y,"invalid-persistence-type"),(0,S.b$)()?Ws(f!==vi.SESSION,y,"unsupported-persistence-type"):(0,S.UG)()?Ws(f===vi.NONE,y,"unsupported-persistence-type"):Jd()?Ws(f===vi.NONE||f===vi.LOCAL&&(0,S.hl)(),y,"unsupported-persistence-type"):Ws(f===vi.NONE||ip(),y,"unsupported-persistence-type")}(E._delegate,g),g){case vi.SESSION:P=Yi;break;case vi.LOCAL:P=(yield rt(ta)._isAvailable())?ta:La;break;case vi.NONE:P=ee;break;default:return ce("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(P)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Ni(this._delegate,function Ru(y){return Tf.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Ni(this._delegate,sn(this._delegate,g))}signInWithCustomToken(g){return Ni(this._delegate,function Bc(y,f){return Ki.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,E){return Ni(this._delegate,function Vn(y,f,g){return sn((0,S.m9)(y),Cd.credential(f,g))}(this._delegate,g,E))}signInWithEmailLink(g,E){return Ni(this._delegate,function Df(y,f,g){return zn.apply(this,arguments)}(this._delegate,g,E))}signInWithPhoneNumber(g,E){return pm(this._delegate,function Es(y,f,g){return hn.apply(this,arguments)}(this._delegate,g,E))}signInWithPopup(g){var E=this;return(0,m.Z)(function*(){return Qu(eh(),E._delegate,"operation-not-supported-in-this-environment"),Ni(E._delegate,function Ka(y,f,g){return Gs.apply(this,arguments)}(E._delegate,g,Co))})()}signInWithRedirect(g){var E=this;return(0,m.Z)(function*(){return Qu(eh(),E._delegate,"operation-not-supported-in-this-environment"),yield bo(E._delegate),wo(E._delegate,g,Co)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Gc(y,f){return Wc.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=vi,y})();function Xu(y,f,g){let E=y;"function"!=typeof y&&({next:E,error:f,complete:g}=y);const P=E;return{next:se=>P(se&&bs.getOrCreate(se)),error:f,complete:g}}function Il(y,f){const g=function lm(y,f){const g=dm();if(!g)return[];const E=Q(wl,y,f);switch(g.getItem(E)){case vi.NONE:return[ee];case vi.LOCAL:return[ta,Yi];case vi.SESSION:return[Yi];default:return[]}}(y,f);if(typeof self<"u"&&!g.includes(ta)&&g.push(ta),typeof window<"u")for(const E of[La,Yi])g.includes(E)||g.push(E);return g.includes(ee)||g.push(ee),g}class ca{constructor(){this.providerId="phone",this._delegate=new ll(ih(K.Z.auth()))}static credential(f,g){return ll.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}ca.PHONE_SIGN_IN_METHOD=ll.PHONE_SIGN_IN_METHOD,ca.PROVIDER_ID=ll.PROVIDER_ID;const Qy=Y;class oh{constructor(f,g,E=K.Z.app()){var P;Qy(null===(P=E.options)||void 0===P?void 0:P.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Ld(f,g,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Jy(y){y.INTERNAL.registerComponent(new k.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new ap(g,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:M_EMAIL_SIGNIN,PASSWORD_RESET:M_PASSWORD_RESET,RECOVER_EMAIL:M_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:M_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:M_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:M_VERIFY_EMAIL}},EmailAuthProvider:Cd,FacebookAuthProvider:Fc,GithubAuthProvider:Cf,GoogleAuthProvider:bf,OAuthProvider:xa,SAMLAuthProvider:Wi,PhoneAuthProvider:ca,PhoneMultiFactorGenerator:im,RecaptchaVerifier:oh,TwitterAuthProvider:Bg,Auth:ap,AuthCredential:ur,Error:S.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.3.5")}(K.Z)},8766:(Te,X,U)=>{"use strict";U.d(X,{Lj:()=>ce,X3:()=>Oe});var m=U(5861);const K=(Y,ge)=>ge.some(je=>Y instanceof je);let S,H;const k=new WeakMap,N=new WeakMap,F=new WeakMap,R=new WeakMap,A=new WeakMap;let te={get(Y,ge,je){if(Y instanceof IDBTransaction){if("done"===ge)return N.get(Y);if("objectStoreNames"===ge)return Y.objectStoreNames||F.get(Y);if("store"===ge)return je.objectStoreNames[1]?void 0:je.objectStore(je.objectStoreNames[0])}return Ee(Y[ge])},set:(Y,ge,je)=>(Y[ge]=je,!0),has:(Y,ge)=>Y instanceof IDBTransaction&&("done"===ge||"store"===ge)||ge in Y};function le(Y){return"function"==typeof Y?function De(Y){return Y!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function V(){return H||(H=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Y)?function(...ge){return Y.apply(ve(this),ge),Ee(k.get(this))}:function(...ge){return Ee(Y.apply(ve(this),ge))}:function(ge,...je){const Ve=Y.call(ve(this),ge,...je);return F.set(Ve,ge.sort?ge.sort():[ge]),Ee(Ve)}}(Y):(Y instanceof IDBTransaction&&function J(Y){if(N.has(Y))return;const ge=new Promise((je,Ve)=>{const rt=()=>{Y.removeEventListener("complete",Xe),Y.removeEventListener("error",me),Y.removeEventListener("abort",me)},Xe=()=>{je(),rt()},me=()=>{Ve(Y.error||new DOMException("AbortError","AbortError")),rt()};Y.addEventListener("complete",Xe),Y.addEventListener("error",me),Y.addEventListener("abort",me)});N.set(Y,ge)}(Y),K(Y,function W(){return S||(S=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Y,te):Y)}function Ee(Y){if(Y instanceof IDBRequest)return function M(Y){const ge=new Promise((je,Ve)=>{const rt=()=>{Y.removeEventListener("success",Xe),Y.removeEventListener("error",me)},Xe=()=>{je(Ee(Y.result)),rt()},me=()=>{Ve(Y.error),rt()};Y.addEventListener("success",Xe),Y.addEventListener("error",me)});return ge.then(je=>{je instanceof IDBCursor&&k.set(je,Y)}).catch(()=>{}),A.set(ge,Y),ge}(Y);if(R.has(Y))return R.get(Y);const ge=le(Y);return ge!==Y&&(R.set(Y,ge),A.set(ge,Y)),ge}const ve=Y=>A.get(Y);function Oe(Y,ge,{blocked:je,upgrade:Ve,blocking:rt,terminated:Xe}={}){const me=indexedDB.open(Y,ge),Ie=Ee(me);return Ve&&me.addEventListener("upgradeneeded",Pe=>{Ve(Ee(me.result),Pe.oldVersion,Pe.newVersion,Ee(me.transaction))}),je&&me.addEventListener("blocked",()=>je()),Ie.then(Pe=>{Xe&&Pe.addEventListener("close",()=>Xe()),rt&&Pe.addEventListener("versionchange",()=>rt())}).catch(()=>{}),Ie}function ce(Y,{blocked:ge}={}){const je=indexedDB.deleteDatabase(Y);return ge&&je.addEventListener("blocked",()=>ge()),Ee(je).then(()=>{})}const we=["get","getKey","getAll","getAllKeys","count"],Ne=["put","add","delete","clear"],$e=new Map;function ue(Y,ge){if(!(Y instanceof IDBDatabase)||ge in Y||"string"!=typeof ge)return;if($e.get(ge))return $e.get(ge);const je=ge.replace(/FromIndex$/,""),Ve=ge!==je,rt=Ne.includes(je);if(!(je in(Ve?IDBIndex:IDBObjectStore).prototype)||!rt&&!we.includes(je))return;const Xe=function(){var me=(0,m.Z)(function*(Ie,...Pe){const Le=this.transaction(Ie,rt?"readwrite":"readonly");let He=Le.store;return Ve&&(He=He.index(Pe.shift())),(yield Promise.all([He[je](...Pe),rt&&Le.done]))[0]});return function(Pe){return me.apply(this,arguments)}}();return $e.set(ge,Xe),Xe}!function ae(Y){te=Y(te)}(Y=>({...Y,get:(ge,je,Ve)=>ue(ge,je)||Y.get(ge,je,Ve),has:(ge,je)=>!!ue(ge,je)||Y.has(ge,je)}))},5861:(Te,X,U)=>{"use strict";function m(S,H,W,V,k,N,F){try{var R=S[N](F),A=R.value}catch(M){return void W(M)}R.done?H(A):Promise.resolve(A).then(V,k)}function K(S){return function(){var H=this,W=arguments;return new Promise(function(V,k){var N=S.apply(H,W);function F(A){m(N,V,k,F,R,"next",A)}function R(A){m(N,V,k,F,R,"throw",A)}F(void 0)})}}U.d(X,{Z:()=>K})},2811:Te=>{"use strict";Te.exports=JSON.parse('{"name":"openai","version":"3.2.1","description":"Node.js library for the OpenAI API","repository":{"type":"git","url":"git@github.com:openai/openai-node.git"},"keywords":["openai","open","ai","gpt-3","gpt3"],"author":"OpenAI","license":"MIT","main":"./dist/index.js","types":"./dist/index.d.ts","scripts":{"build":"tsc --outDir dist/"},"dependencies":{"axios":"^0.26.0","form-data":"^4.0.0"},"devDependencies":{"@types/node":"^12.11.5","typescript":"^3.6.4"}}')}},Te=>{Te(Te.s=8702)}]);